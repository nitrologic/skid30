HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 1
blitz2.s


    1 00.00000000                      
    2 00.00000000                      ;**************************************************;
    3 00.00000000                      ;                          ;
    4 00.00000000                      ;       Source code to BLITZ BASIC ][      ;
    5 00.00000000                      ;                          ;
    6 00.00000000                      ;           You dudes out there had better         ;
    7 00.00000000                      ;        like this, or I'm gonna start doing       ; 
    8 00.00000000                      ;         something drastic with my life...        ;
    9 00.00000000                      ;                like... GET A JOB!        ;
   10 00.00000000                      ;                          ;
   11 00.00000000                      ;**************************************************;
   12 00.00000000                      
   13   =00000000                      demo    equ     0
   14   =FFFFFFFF                      release equ     -1
   15 00.00000000                              ;
   16   =00000000                      cripple equ     0       ;set to -1 to make crippled
   17   =FFFFFFFF                      final   equ     -1      ;set to -1 to make final version
   18   =000000C3                      version equ     195     ;version number
   19 00.00000000                      
   20 00.00000000                      ;**************************************************;
   21 00.00000000                      ;
   22 00.00000000                      ;            Modifications
   23 00.00000000                      ;
   24 00.00000000                      ;V0.98 - change date on startup requester
   25 00.00000000                      ;V0.00 - clear 'inerr' flag at start of compile
   26 00.00000000                      ;V1.00 - max object size fixed to over 128
   27 00.00000000                      ;     - pop next changed to pop for
   28 00.00000000                      ;V1.10 - blitz2:deflibs - blitz2:blitzopts#?
   29 00.00000000                      ;V1.20 - .info ignored on libs and opts
   30 00.00000000                      ;V1.30 - square brackets bug fixed
   31 00.00000000                      ;V1.40 - .info lock fixed, & exec Flush cache used
   32 00.00000000                      ;V1.50 - optimizer removed! debugger added -
   33 00.00000000                      ;       directtrap added - runtime errors majorly
   34 00.00000000                      ;       overhauled! cont removed - ignore installed
   35 00.00000000                      ;
   36 00.00000000                      ;V1.60 - vbr handled
   37 00.00000000                      ;v1.70 - runerrson & runerrsoff added, label runerrs removed
   38 00.00000000                      ;v1.80 - separate strings out with clr.b (a3)+ in 'sbtolong'
   39 00.00000000                      ;       fixed \a="Hello","goodbye"
   40 00.00000000                      ;       removed 'library not found' error for maximum not found
   41 00.00000000                      ;       flushc installed in direct mode (directtrap)
   42 00.00000000                      ;
   43 00.00000000                      ;v1.90 - attempting to add [] checking...
   44 00.00000000                      ;
   45 00.00000000                      ;v1.90 - run prog does a 'createproc' so user can do a PANIC!
   46 00.00000000                      ;       Blitz2 loads debugger now instead of dhandlerlib
   47 00.00000000                      ;
   48 00.00000000                      ;v1.90 - added asmexit...checked for func ret outside of func.
   49 00.00000000                      ;
   50 00.00000000                      ;v1.95 - added 'proc not found' to functions
   51 00.00000000                      ;
   52 00.00000000                      ;**************************************************;
   53 00.00000000                      
   54 00.00000000                      ;Notes:
   55 00.00000000                      
   56 00.00000000                      ;This version includes a line 'MOVE.L #4000,D2'. This is
   57 00.00000000                      ;coz AmigaDros APPEARS to pass the stack size in D2, but
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 2
blitz2.s


   58 00.00000000                      ;genam doesn't. God knows what WB sticks in D2.
   59 00.00000000                      ;More research is required!
   60 00.00000000                      
   61 00.00000000                      ;Also, the section 'OPTSPNTS' has some rem'ed out bits
   62 00.00000000                      ;which will have to be included in the final version.
   63 00.00000000                      ;This will have to wait, as it'll fuck up all my .xtra
   64 00.00000000                      ;files
   65 00.00000000                      
    0 00.00000000                              include myoffs
    1 00.00000000                      
    2 00.00000000                      ;
    3 00.00000000                      ;   intuition
    4 00.00000000                      ;
    5 00.00000000                      
    6   =FFFFFFE2                      OpenIntuition   EQU   -30 
    7   =FFFFFFDC                      Intuition   EQU   -36 
    8   =FFFFFFD6                      AddGadget   EQU   -42 
    9   =FFFFFFD0                      ClearDMRequest   EQU   -48 
   10   =FFFFFFCA                      ClearMenuStrip   EQU   -54 
   11   =FFFFFFC4                      ClearPointer   EQU   -60 
   12   =FFFFFFBE                      CloseScreen   EQU   -66 
   13   =FFFFFFB8                      CloseWindow   EQU   -72 
   14   =FFFFFFB2                      CloseWorkBench   EQU   -78 
   15   =FFFFFFAC                      CurrentTime   EQU   -84 
   16   =FFFFFFA6                      DisplayAlert   EQU   -90 
   17   =FFFFFFA0                      DisplayBeep   EQU   -96 
   18   =FFFFFF9A                      DoubleClick   EQU   -102 
   19   =FFFFFF94                      DrawBorder   EQU   -108 
   20   =FFFFFF8E                      DrawImage   EQU   -114 
   21   =FFFFFF88                      EndRequest   EQU   -120 
   22   =FFFFFF82                      GetDefPrefs   EQU   -126 
   23   =FFFFFF7C                      GetPrefs   EQU   -132 
   24   =FFFFFF76                      InitRequester   EQU   -138 
   25   =FFFFFF70                      ItemAddress   EQU   -144 
   26   =FFFFFF6A                      ModifyIDCMP   EQU   -150 
   27   =FFFFFF64                      ModifyProp   EQU   -156 
   28   =FFFFFF5E                      MoveScreen   EQU   -162 
   29   =FFFFFF58                      MoveWindow   EQU   -168 
   30   =FFFFFF52                      OffGadget   EQU   -174 
   31   =FFFFFF4C                      OffMenu   EQU   -180 
   32   =FFFFFF46                      OnGadget   EQU   -186 
   33   =FFFFFF40                      OnMenu   EQU   -192 
   34   =FFFFFF3A                      OpenScreen   EQU   -198 
   35   =FFFFFF34                      OpenWindow   EQU   -204 
   36   =FFFFFF2E                      OpenWorkBench   EQU   -210 
   37   =FFFFFF28                      PrintIText   EQU   -216 
   38   =FFFFFF22                      RefreshGadgets   EQU   -222 
   39   =FFFFFF1C                      RemoveGadget   EQU   -228 
   40   =FFFFFF16                      ReportMouse   EQU   -234 
   41   =FFFFFF10                      Request   EQU   -240 
   42   =FFFFFF0A                      ScreenToBack   EQU   -246 
   43   =FFFFFF04                      ScreenToFront   EQU   -252 
   44   =FFFFFEFE                      SetDMRequest   EQU   -258 
   45   =FFFFFEF8                      SetMenuStrip   EQU   -264 
   46   =FFFFFEF2                      SetPointer   EQU   -270 
   47   =FFFFFEEC                      SetWindowTitles   EQU   -276 
   48   =FFFFFEE6                      ShowTitle   EQU   -282 
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 3
MYOFFS


   49   =FFFFFEE0                      SizeWindow   EQU   -288 
   50   =FFFFFEDA                      ViewAddress   EQU   -294 
   51   =FFFFFED4                      ViewPortAddress   EQU   -300 
   52   =FFFFFECE                      WindowToBack   EQU   -306 
   53   =FFFFFEC8                      WindowToFront   EQU   -312 
   54   =FFFFFEC2                      WindowLimits   EQU   -318 
   55   =FFFFFEBC                      SetPrefs   EQU   -324 
   56   =FFFFFEB6                      IntuiTextLength   EQU   -330 
   57   =FFFFFEB0                      WBenchToBack   EQU   -336 
   58   =FFFFFEAA                      WBenchToFront   EQU   -342 
   59   =FFFFFEA4                      AutoRequest   EQU   -348 
   60   =FFFFFE9E                      BeginRefresh   EQU   -354 
   61   =FFFFFE98                      BuildSysRequest   EQU   -360 
   62   =FFFFFE92                      EndRefresh   EQU   -366 
   63   =FFFFFE8C                      FreeSysRequest   EQU   -372 
   64   =FFFFFE86                      MakeScreen   EQU   -378 
   65   =FFFFFE80                      RemakeDisplay   EQU   -384 
   66   =FFFFFE7A                      RethinkDisplay   EQU   -390 
   67   =FFFFFE74                      AllocRemember   EQU   -396 
   68   =FFFFFE6E                      AlohaWorkbench   EQU   -402 
   69   =FFFFFE68                      FreeRemember   EQU   -408 
   70   =FFFFFE62                      LockIBase   EQU   -414 
   71   =FFFFFE5C                      UnlockIBase   EQU   -420 
   72   =FFFFFE56                      GetScreenData   EQU   -426 
   73   =FFFFFE50                      RefreshGList   EQU   -432 
   74   =FFFFFE4A                      AddGList   EQU   -438 
   75   =FFFFFE44                      RemoveGList   EQU   -444 
   76   =FFFFFE3E                      ActivateWindow   EQU   -450 
   77   =FFFFFE38                      RefreshWindowFrame   EQU   -456 
   78   =FFFFFE32                      ActivateGadget   EQU   -462 
   79   =FFFFFE2C                      NewModifyProp   EQU   -468 
   80 00.00000000                      
   81 00.00000000                      ;
   82 00.00000000                      ;   exec
   83 00.00000000                      ;
   84 00.00000000                      
   85   =FFFFFFE2                      Supervisor   EQU   -30 
   86   =FFFFFFDC                      ExitIntr   EQU   -36 
   87   =FFFFFFD6                      Schedule   EQU   -42 
   88   =FFFFFFD0                      Reschedule   EQU   -48 
   89   =FFFFFFCA                      Switch   EQU   -54 
   90   =FFFFFFC4                      Dispatch   EQU   -60 
   91   =FFFFFFBE                      Exception   EQU   -66 
   92   =FFFFFFB8                      InitCode   EQU   -72 
   93   =FFFFFFB2                      InitStruct   EQU   -78 
   94   =FFFFFFAC                      MakeLibrary   EQU   -84 
   95   =FFFFFFA6                      MakeFunctions   EQU   -90 
   96   =FFFFFFA0                      FindResident   EQU   -96 
   97   =FFFFFF9A                      InitResident   EQU   -102 
   98   =FFFFFF94                      Alert   EQU   -108 
   99   =FFFFFF8E                      Debug   EQU   -114 
  100   =FFFFFF88                      Disable   EQU   -120 
  101   =FFFFFF82                      Enable   EQU   -126 
  102   =FFFFFF7C                      Forbid   EQU   -132 
  103   =FFFFFF76                      Permit   EQU   -138 
  104   =FFFFFF70                      SetSR   EQU   -144 
  105   =FFFFFF6A                      SuperState   EQU   -150 
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 4
MYOFFS


  106   =FFFFFF64                      UserState   EQU   -156 
  107   =FFFFFF5E                      SetIntVector   EQU   -162 
  108   =FFFFFF58                      AddIntServer   EQU   -168 
  109   =FFFFFF52                      RemIntServer   EQU   -174 
  110   =FFFFFF4C                      Cause   EQU   -180 
  111   =FFFFFF46                      Allocate   EQU   -186 
  112   =FFFFFF40                      Deallocate   EQU   -192 
  113   =FFFFFF3A                      AllocMem   EQU   -198 
  114   =FFFFFF34                      AllocAbs   EQU   -204 
  115   =FFFFFF2E                      FreeMem   EQU   -210 
  116   =FFFFFF28                      AvailMem   EQU   -216 
  117   =FFFFFF22                      AllocEntry   EQU   -222 
  118   =FFFFFF1C                      FreeEntry   EQU   -228 
  119   =FFFFFF16                      Insert   EQU   -234 
  120   =FFFFFF10                      AddHead   EQU   -240 
  121   =FFFFFF0A                      AddTail   EQU   -246 
  122   =FFFFFF04                      Remove   EQU   -252 
  123   =FFFFFEFE                      RemHead   EQU   -258 
  124   =FFFFFEF8                      RemTail   EQU   -264 
  125   =FFFFFEF2                      Enqueue   EQU   -270 
  126   =FFFFFEEC                      FindName   EQU   -276 
  127   =FFFFFEE6                      AddTask   EQU   -282 
  128   =FFFFFEE0                      RemTask   EQU   -288 
  129   =FFFFFEDA                      FindTask   EQU   -294 
  130   =FFFFFED4                      SetTaskPri   EQU   -300 
  131   =FFFFFECE                      SetSignal   EQU   -306 
  132   =FFFFFEC8                      SetExcept   EQU   -312 
  133   =FFFFFEC2                      Wait   EQU   -318 
  134   =FFFFFEBC                      Signal   EQU   -324 
  135   =FFFFFEB6                      AllocSignal   EQU   -330 
  136   =FFFFFEB0                      FreeSignal   EQU   -336 
  137   =FFFFFEAA                      AllocTrap   EQU   -342 
  138   =FFFFFEA4                      FreeTrap   EQU   -348 
  139   =FFFFFE9E                      AddPort   EQU   -354 
  140   =FFFFFE98                      RemPort   EQU   -360 
  141   =FFFFFE92                      PutMsg   EQU   -366 
  142   =FFFFFE8C                      GetMsg   EQU   -372 
  143   =FFFFFE86                      ReplyMsg   EQU   -378 
  144   =FFFFFE80                      WaitPort   EQU   -384 
  145   =FFFFFE7A                      FindPort   EQU   -390 
  146   =FFFFFE74                      AddLibrary   EQU   -396 
  147   =FFFFFE6E                      RemLibrary   EQU   -402 
  148   =FFFFFE68                      OldOpenLibrary   EQU   -408 
  149   =FFFFFE62                      CloseLibrary   EQU   -414 
  150   =FFFFFE5C                      SetFunction   EQU   -420 
  151   =FFFFFE56                      SumLibrary   EQU   -426 
  152   =FFFFFE50                      AddDevice   EQU   -432 
  153   =FFFFFE4A                      RemDevice   EQU   -438 
  154   =FFFFFE44                      OpenDevice   EQU   -444 
  155   =FFFFFE3E                      CloseDevice   EQU   -450 
  156   =FFFFFE38                      DoIO   EQU   -456 
  157   =FFFFFE32                      SendIO   EQU   -462 
  158   =FFFFFE2C                      CheckIO   EQU   -468 
  159   =FFFFFE26                      WaitIO   EQU   -474 
  160   =FFFFFE20                      AbortIO   EQU   -480 
  161   =FFFFFE1A                      AddResource   EQU   -486 
  162   =FFFFFE14                      RemResource   EQU   -492 
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 5
MYOFFS


  163   =FFFFFE0E                      OpenResource   EQU   -498 
  164   =FFFFFE08                      RawIOInit   EQU   -504 
  165   =FFFFFE02                      RawMayGetChar   EQU   -510 
  166   =FFFFFDFC                      RawPutChar   EQU   -516 
  167   =FFFFFDF6                      RawDoFmt   EQU   -522 
  168   =FFFFFDF0                      GetCC   EQU   -528 
  169   =FFFFFDEA                      TypeOfMem   EQU   -534 
  170   =FFFFFDE4                      Procure   EQU   -540 
  171   =FFFFFDDE                      Vacate   EQU   -546 
  172   =FFFFFDD8                      OpenLibrary   EQU   -552 
  173   =FFFFFDD2                      InitSemaphore   EQU   -558 
  174   =FFFFFDCC                      ObtainSemaphore   EQU   -564 
  175   =FFFFFDC6                      ReleaseSemaphore   EQU   -570 
  176   =FFFFFDC0                      AttemptSemaphore   EQU   -576 
  177   =FFFFFDBA                      ObtainSemaphoreList   EQU   -582 
  178   =FFFFFDB4                      ReleaseSemaphoreList   EQU   -588 
  179   =FFFFFDAE                      FindSemaphore   EQU   -594 
  180   =FFFFFDA8                      AddSemaphore   EQU   -600 
  181   =FFFFFDA2                      RemSemaphore   EQU   -606 
  182   =FFFFFD9C                      SumKickData   EQU   -612 
  183   =FFFFFD96                      AddMemList   EQU   -618 
  184   =FFFFFD90                      CopyMem   EQU   -624 
  185   =FFFFFD8A                      CopyMemQuick   EQU   -630 
  186 00.00000000                      
  187 00.00000000                      ;
  188 00.00000000                      ;   graphics
  189 00.00000000                      ;
  190 00.00000000                      
  191   =FFFFFFE2                      BltBitMap   EQU   -30 
  192   =FFFFFFDC                      BltTemplate   EQU   -36 
  193   =FFFFFFD6                      ClearEOL   EQU   -42 
  194   =FFFFFFD0                      ClearScreen   EQU   -48 
  195   =FFFFFFCA                      TextLength   EQU   -54 
  196   =FFFFFFC4                      Text   EQU   -60 
  197   =FFFFFFBE                      SetFont   EQU   -66 
  198   =FFFFFFB8                      OpenFont   EQU   -72 
  199   =FFFFFFB2                      CloseFont   EQU   -78 
  200   =FFFFFFAC                      AskSoftStyle   EQU   -84 
  201   =FFFFFFA6                      SetSoftStyle   EQU   -90 
  202   =FFFFFFA0                      AddBob   EQU   -96 
  203   =FFFFFF9A                      AddVSprite   EQU   -102 
  204   =FFFFFF94                      DoCollision   EQU   -108 
  205   =FFFFFF8E                      DrawGList   EQU   -114 
  206   =FFFFFF88                      InitGels   EQU   -120 
  207   =FFFFFF82                      InitMasks   EQU   -126 
  208   =FFFFFF7C                      RemIBob   EQU   -132 
  209   =FFFFFF76                      RemVSprite   EQU   -138 
  210   =FFFFFF70                      SetCollision   EQU   -144 
  211   =FFFFFF6A                      SortGList   EQU   -150 
  212   =FFFFFF64                      AddAnimOb   EQU   -156 
  213   =FFFFFF5E                      Animate   EQU   -162 
  214   =FFFFFF58                      GetGBuffers   EQU   -168 
  215   =FFFFFF52                      InitGMasks   EQU   -174 
  216   =FFFFFF4C                      DrawEllipse   EQU   -180 
  217   =FFFFFF46                      AreaEllipse   EQU   -186 
  218   =FFFFFF40                      LoadRGB4   EQU   -192 
  219   =FFFFFF3A                      InitRastPort   EQU   -198 
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 6
MYOFFS


  220   =FFFFFF34                      InitVPort   EQU   -204 
  221   =FFFFFF2E                      MrgCop   EQU   -210 
  222   =FFFFFF28                      MakeVPort   EQU   -216 
  223   =FFFFFF22                      LoadView   EQU   -222 
  224   =FFFFFF1C                      WaitBlit   EQU   -228 
  225   =FFFFFF16                      SetRast   EQU   -234 
  226   =FFFFFF10                      Move   EQU   -240 
  227   =FFFFFF0A                      Draw   EQU   -246 
  228   =FFFFFF04                      AreaMove   EQU   -252 
  229   =FFFFFEFE                      AreaDraw   EQU   -258 
  230   =FFFFFEF8                      AreaEnd   EQU   -264 
  231   =FFFFFEF2                      WaitTOF   EQU   -270 
  232   =FFFFFEEC                      QBlit   EQU   -276 
  233   =FFFFFEE6                      InitArea   EQU   -282 
  234   =FFFFFEE0                      SetRGB4   EQU   -288 
  235   =FFFFFEDA                      QBSBlit   EQU   -294 
  236   =FFFFFED4                      BltClear   EQU   -300 
  237   =FFFFFECE                      RectFill   EQU   -306 
  238   =FFFFFEC8                      BltPattern   EQU   -312 
  239   =FFFFFEC2                      ReadPixel   EQU   -318 
  240   =FFFFFEBC                      WritePixel   EQU   -324 
  241   =FFFFFEB6                      Flood   EQU   -330 
  242   =FFFFFEB0                      PolyDraw   EQU   -336 
  243   =FFFFFEAA                      SetAPen   EQU   -342 
  244   =FFFFFEA4                      SetBPen   EQU   -348 
  245   =FFFFFE9E                      SetDrMd   EQU   -354 
  246   =FFFFFE98                      InitView   EQU   -360 
  247   =FFFFFE92                      CBump   EQU   -366 
  248   =FFFFFE8C                      CMove   EQU   -372 
  249   =FFFFFE86                      CWait   EQU   -378 
  250   =FFFFFE80                      VBeamPos   EQU   -384 
  251   =FFFFFE7A                      InitBitMap   EQU   -390 
  252   =FFFFFE74                      ScrollRaster   EQU   -396 
  253   =FFFFFE6E                      WaitBOVP   EQU   -402 
  254   =FFFFFE68                      GetSprite   EQU   -408 
  255   =FFFFFE62                      FreeSprite   EQU   -414 
  256   =FFFFFE5C                      ChangeSprite   EQU   -420 
  257   =FFFFFE56                      MoveSprite   EQU   -426 
  258   =FFFFFE50                      LockLayerRom   EQU   -432 
  259   =FFFFFE4A                      UnlockLayerRom   EQU   -438 
  260   =FFFFFE44                      SyncSBitMap   EQU   -444 
  261   =FFFFFE3E                      CopySBitMap   EQU   -450 
  262   =FFFFFE38                      OwnBlitter   EQU   -456 
  263   =FFFFFE32                      DisownBlitter   EQU   -462 
  264   =FFFFFE2C                      InitTmpRas   EQU   -468 
  265   =FFFFFE26                      AskFont   EQU   -474 
  266   =FFFFFE20                      AddFont   EQU   -480 
  267   =FFFFFE1A                      RemFont   EQU   -486 
  268   =FFFFFE14                      AllocRaster   EQU   -492 
  269   =FFFFFE0E                      FreeRaster   EQU   -498 
  270   =FFFFFE08                      AndRectRegion   EQU   -504 
  271   =FFFFFE02                      OrRectRegion   EQU   -510 
  272   =FFFFFDFC                      NewRegion   EQU   -516 
  273   =FFFFFDF6                      ClearRectRegion   EQU   -522 
  274   =FFFFFDF0                      ClearRegion   EQU   -528 
  275   =FFFFFDEA                      DisposeRegion   EQU   -534 
  276   =FFFFFDE4                      FreeVPortCopLists   EQU   -540 
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 7
MYOFFS


  277   =FFFFFDDE                      FreeCopList   EQU   -546 
  278   =FFFFFDD8                      ClipBlit   EQU   -552 
  279   =FFFFFDD2                      XorRectRegion   EQU   -558 
  280   =FFFFFDCC                      FreeCprList   EQU   -564 
  281   =FFFFFDC6                      GetColorMap   EQU   -570 
  282   =FFFFFDC0                      FreeColorMap   EQU   -576 
  283   =FFFFFDBA                      GetRGB4   EQU   -582 
  284   =FFFFFDB4                      ScrollVPort   EQU   -588 
  285   =FFFFFDAE                      UCopperListInit   EQU   -594 
  286   =FFFFFDA8                      FreeGBuffers   EQU   -600 
  287   =FFFFFDA2                      BltBitMapRastPort   EQU   -606 
  288   =FFFFFD9C                      OrRegionRegion   EQU   -612 
  289   =FFFFFD96                      XorRegionRegion   EQU   -618 
  290   =FFFFFD90                      AndRegionRegion   EQU   -624 
  291   =FFFFFD8A                      SetRGB4CM   EQU   -630 
  292   =FFFFFD84                      BltMaskBitMapRastPort   EQU   -636 
  293   =FFFFFD7E                      GraphicsReserved1   EQU   -642 
  294   =FFFFFD78                      GraphicsReserved2   EQU   -648 
  295   =FFFFFD72                      AttemptLockLayerRom   EQU   -654 
  296 00.00000000                      
  297 00.00000000                      ;
  298 00.00000000                      ;   dos
  299 00.00000000                      ;
  300 00.00000000                      
  301   =FFFFFFE2                      Open   EQU   -30 
  302   =FFFFFFDC                      Close   EQU   -36 
  303   =FFFFFFD6                      Read   EQU   -42 
  304   =FFFFFFD0                      Write   EQU   -48 
  305   =FFFFFFCA                      Input   EQU   -54 
  306   =FFFFFFC4                      Output   EQU   -60 
  307   =FFFFFFBE                      Seek   EQU   -66 
  308   =FFFFFFB8                      DeleteFile   EQU   -72 
  309   =FFFFFFB2                      Rename   EQU   -78 
  310   =FFFFFFAC                      Lock   EQU   -84 
  311   =FFFFFFA6                      UnLock   EQU   -90 
  312   =FFFFFFA0                      DupLock   EQU   -96 
  313   =FFFFFF9A                      Examine   EQU   -102 
  314   =FFFFFF94                      ExNext   EQU   -108 
  315   =FFFFFF8E                      Info   EQU   -114 
  316   =FFFFFF88                      CreateDir   EQU   -120 
  317   =FFFFFF82                      CurrentDir   EQU   -126 
  318   =FFFFFF7C                      IoErr   EQU   -132 
  319   =FFFFFF76                      CreateProc   EQU   -138 
  320   =FFFFFF70                      Exit   EQU   -144 
  321   =FFFFFF6A                      LoadSeg   EQU   -150 
  322   =FFFFFF64                      UnLoadSeg   EQU   -156 
  323   =FFFFFF5E                      GetPacket   EQU   -162 
  324   =FFFFFF58                      QueuePacket   EQU   -168 
  325   =FFFFFF52                      DeviceProc   EQU   -174 
  326   =FFFFFF4C                      SetComment   EQU   -180 
  327   =FFFFFF46                      SetProtection   EQU   -186 
  328   =FFFFFF40                      DateStamp   EQU   -192 
  329   =FFFFFF3A                      Delay   EQU   -198 
  330   =FFFFFF34                      WaitForChar   EQU   -204 
  331   =FFFFFF2E                      ParentDir   EQU   -210 
  332   =FFFFFF28                      IsInteractive   EQU   -216 
  333   =FFFFFF22                      Execute   EQU   -222 
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 8
MYOFFS


  334 00.00000000                      
  335 00.00000000                      opendos   macro
  336 00.00000000                         lea   dosname(pc),a1
  337 00.00000000                         move.l   4,a6
  338 00.00000000                         jsr   oldopenlibrary(a6)
  339 00.00000000                         move.l   d0,dos
  340 00.00000000                         bra   dos+4
  341 00.00000000                      dosname   dc.b   'dos.library',0
  342 00.00000000                         even
  343 00.00000000                      dos   dc.l   0
  344 00.00000000                         endm
  345 00.00000000                      
  346 00.00000000                      calldos macro
  347 00.00000000                              move.l  dos(pc),a6
  348 00.00000000                              jsr     \1(a6)
  349 00.00000000                              endm
  350 00.00000000                      
  351 00.00000000                      openint   macro
  352 00.00000000                         lea   intname(pc),a1
  353 00.00000000                         move.l   4,a6
  354 00.00000000                         jsr   oldopenlibrary(a6)
  355 00.00000000                         move.l   d0,int
  356 00.00000000                         bra   int+4
  357 00.00000000                      intname   dc.b   'intuition.library',0
  358 00.00000000                         even
  359 00.00000000                      int   dc.l   0
  360 00.00000000                         endm
  361 00.00000000                      
  362 00.00000000                      callint macro
  363 00.00000000                              move.l  int(pc),a6
  364 00.00000000                              jsr     \1(a6)
  365 00.00000000                              endm
  366 00.00000000                      
  367 00.00000000                      opengr   macro
  368 00.00000000                         lea   grname(pc),a1
  369 00.00000000                         move.l   4,a6
  370 00.00000000                         jsr   oldopenlibrary(a6)
  371 00.00000000                         move.l   d0,gr
  372 00.00000000                         bra   gr+4
  373 00.00000000                      grname   dc.b   'graphics.library',0
  374 00.00000000                         even
  375 00.00000000                      gr   dc.l   0
  376 00.00000000                         endm
  377 00.00000000                      
  378 00.00000000                      callgr  macro
  379 00.00000000                              move.l  gr(pc),a6
  380 00.00000000                              jsr     \1(a6)
  381 00.00000000                              endm
  382 00.00000000                      
  383 00.00000000                      closedos   macro
  384 00.00000000                         move.l   dos(pc),a1
  385 00.00000000                         move.l   4,a6
  386 00.00000000                         jsr   closelibrary(a6)
  387 00.00000000                         endm
  388 00.00000000                      
  389 00.00000000                      closeint   macro
  390 00.00000000                         move.l   int(pc),a1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 9
MYOFFS


  391 00.00000000                         move.l   4,a6
  392 00.00000000                         jsr   closelibrary(a6)
  393 00.00000000                         endm
  394 00.00000000                      
  395 00.00000000                      closegr   macro
  396 00.00000000                         move.l   gr(pc),a1
  397 00.00000000                         move.l   4,a6
  398 00.00000000                         jsr   closelibrary(a6)
  399 00.00000000                         endm
  400 00.00000000                      
  401 00.00000000                      
   67 00.00000000                      ;
   68 00.00000000                      ;       First, a whole lot of Library equates
   69 00.00000000                      ;
   70 00.00000000                      ;       lib - 65533: wbstartuplib
   71 00.00000000                      ;
   72   =0000BF00                      wbstart equ     $bf00
   73 00.00000000                      ;
   74 00.00000000                      ;       lib - 65534: varslib
   75 00.00000000                      ;
   76   =0000FFFE                      allocvars       equ     65534
   77 00.00000000                      ;
   78 00.00000000                      ;       lib - 65530: memlib
   79 00.00000000                      ;
   80   =0000C000                      localloc        equ     $c000
   81   =0000C001                      locfree equ     $c001
   82   =0000C002                      globalloc       equ     $c002
   83   =0000C003                      globfree        equ     $c003
   84   =0000C004                      newmem  equ     $c004
   85   =0000C005                      freelast        equ     $c005
   86 00.00000000                      ;
   87 00.00000000                      ;       lib - 65520: intlib
   88 00.00000000                      ;
   89   =0000C100                      setint  equ     $c100
   90   =0000C101                      clrint  equ     $c101
   91   =0000C102                      newint  equ     $c102
   92   =0000C103                      oldint  equ     $c103
   93   =0000C104                      intvwait        equ     $c104
   94   =0000C105                      intcleanup      equ     $c105
   95   =0000C106                      intgoblitz      equ     $c106
   96   =0000C107                      intgoamiga      equ     $c107
   97 00.00000000                      ;
   98 00.00000000                      ;       lib - 65510: switchlib
   99 00.00000000                      ;
  100   =0000C200                      goblitz equ     $c200
  101   =0000C201                      goamiga equ     $c201
  102   =0000C202                      goqamiga        equ     $c202
  103   =0000C203                      ownblit equ     $c203
  104   =0000C204                      disownblit      equ     $c204
  105 00.00000000                      ;
  106 00.00000000                      ;       lib - runerrlib
  107 00.00000000                      ;
  108   =0000FFDC                      runerrlib       equ     65500
  109 00.00000000                              ;
  110   =0000C300                      finalscheck     equ     $c300
  111   =0000C301                      remline equ     $c301
  112 00.00000000                      ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 10
blitz2.s


  113   =0000C304                      contjmp equ     $c304
  114   =0000C305                      chkret  equ     $c305
  115   =0000C306                      snxtchk equ     $c306
  116   =0000C307                      lnxtchk equ     $c307
  117   =0000C308                      stchk   equ     $c308
  118   =0000C309                      arrerr  equ     $c309
  119   =0000C30A                      maxerr  equ     $c30a
  120   =0000C30B                      gosup   equ     $c30b
  121   =0000C30C                      gouse   equ     $c30c
  122   =0000C30D                      eschk   equ     $c30d
  123   =0000C30E                      sachk   equ     $c30e
  124   =0000C30F                      arrchk  equ     $c30f
  125   =0000C310                      datachk equ     $c310
  126   =0000C311                      inblitz equ     $c311
  127   =0000C312                      inamiga equ     $c312
  128   =0000C313                      casechkw        equ     $c313
  129   =0000C314                      casechkl        equ     $c314
  130   =0000C315                      currentchk      equ     $c315
  131   =0000C316                      ltobover        equ     $c316
  132   =0000C317                      wtobover        equ     $c317
  133   =0000C318                      ltowover        equ     $c318
  134   =0000C319                      qtobover        equ     $c319
  135   =0000C31A                      ftobover        equ     $c31a
  136   =0000C31B                      ftowover        equ     $c31b
  137   =0000C31C                      ftolover        equ     $c31c
  138 00.00000000                      ;
  139 00.00000000                      ;       lib - 65434: arrayslib
  140 00.00000000                      ;
  141   =0000C400                      newarr  equ     $c400
  142   =0000C401                      newlocarr       equ     $c401
  143   =0000C402                      arrmult equ     $c402
  144 00.00000000                      ;
  145 00.00000000                      ;       lib - 65335: staticslib
  146 00.00000000                      ;
  147   =0000C500                      alstat  equ     $c500
  148   =0000C501                      localstat       equ     $c501
  149 00.00000000                      ;
  150 00.00000000                      ;       lib - 65235: stringslib1
  151 00.00000000                      ;
  152   =0000C600                      copstring       equ     $c600
  153   =0000C601                      workstart       equ     $c601
  154 00.00000000                      ;
  155 00.00000000                      ;       lib - 65135: stringslib2
  156 00.00000000                      ;
  157   =0000C700                      lastring        equ     $c700
  158   =0000C701                      astring equ     $c701
  159 00.00000000                      ;
  160 00.00000000                      ;       lib - 65035: exitslib
  161 00.00000000                      ;
  162   =0000C800                      endjmp  equ     $c800
  163 00.00000000                      ;
  164 00.00000000                      ;       lib - 64935: ffplib
  165 00.00000000                      ;
  166   =0000C900                      getffpbase      equ     $c900
  167 00.00000000                      ;
  168 00.00000000                      ;       lib - 64835: lmullib
  169 00.00000000                      ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 11
blitz2.s


  170   =0000CA00                      quickmult       equ     $ca00
  171   =0000CA01                      longmult        equ     $ca01
  172 00.00000000                      ;
  173 00.00000000                      ;       lib - 64735: ldivlib
  174 00.00000000                      ;
  175   =0000CB00                      quickdiv        equ     $cb00
  176   =0000CB01                      longdiv equ     $cb01
  177 00.00000000                      ;
  178 00.00000000                      ;       lib - 64635: clrlib
  179 00.00000000                      ;
  180   =0000CC00                      clrloc  equ     $cc00
  181 00.00000000                      ;
  182 00.00000000                      ;       lib - 64535: datalib
  183 00.00000000                      ;
  184   =0000CD00                      getdstart       equ     $cd00
  185 00.00000000                      ;
  186 00.00000000                      ;       lib - 64435: strcomplib
  187 00.00000000                      ;
  188   =0000CE00                      strcomp equ     $ce00
  189   =0000CE01                      casestrcomp     equ     $ce01
  190 00.00000000                      ;
  191 00.00000000                      ;       lib - 64335: maxslib
  192 00.00000000                      ;
  193   =0000CF00                      setmaxs equ     $cf00
  194   =0000CF01                      allocst equ     $cf01
  195   =0000CF02                      freest  equ     $cf02
  196 00.00000000                      ;
  197 00.00000000                      ;       lib - 64135: maxlenlib
  198 00.00000000                      ;
  199   =0000D000                      maxlen  equ     $d000
  200   =0000D001                      lmaxlen equ     $d001
  201 00.00000000                      ;
  202 00.00000000                      ;       lib - 64100: chipbaselib
  203 00.00000000                      ;
  204 00.00000000                      ;       lib - 64080: floatquicklib
  205 00.00000000                      ;
  206   =0000D300                      qutofl  equ     $d300
  207   =0000D301                      fltoqu  equ     $d301
  208 00.00000000                      ;
  209 00.00000000                      ;       lib - 64070:modlib
  210 00.00000000                      ;
  211   =0000D400                      modbyte equ     $d400
  212   =0000D401                      modword equ     $d401
  213   =0000D402                      modlong equ     $d402
  214   =0000D403                      modquick        equ     $d403
  215   =0000D404                      modfloat        equ     $d404
  216 00.00000000                      ;
  217   =00000027                      loclabch        equ     39
  218   =00000400                      inclen  equ     1024    ;how much of an include to load.
  219   =00000008                      maxmacros       equ     8
  220   =00000008                      ifmacmax        equ     8
  221   =00000100                      vcodelen        equ     256
  222   =00000008                      mostres equ     8
  223   =00007F80                      userand equ     $7f80
  224 00.00000000                      
  225 00.00000000                      ;
  226 00.00000000                      ;       lib - 64060:debug lib
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 12
blitz2.s


  227 00.00000000                      ;
  228 00.00000000                      
  229   =0000FA3C                      debuglib        equ     64060
  230 00.00000000                      
  231 00.00000000                      ;       lib - 1 : dhandlerlib!
  232 00.00000000                      ;
  233   =00000001                      dhandlerlib     equ     1
  234 00.00000000                      
  235 00.00000000                                              ;$d500...
  236 00.00000000                      
  237   =0000FA32                      rundebuglib     equ     64050
  238 00.00000000                      
  239 00.00000000                                              ;$d600...
  240 00.00000000                      
  241 00.00000000                      ;
  242 00.00000000                      ;       lib - 64040: errtraplib
  243 00.00000000                      ;
  244   =0000D200                      ern     equ     $d200
  245   =0000D201                      seterr  equ     $d201
  246   =0000D202                      clrerr  equ     $d202
  247 00.00000000                      ;getsp  equ     $d203
  248 00.00000000                      ;putsp  equ     $d204
  249   =0000D205                      errfail equ     $d205
  250 00.00000000                      
  251   =000000C0                      mathq   equ     247-55
  252 00.00000000                      
  253 00.00000000                      mainbit ;
    0 00.00000000                              include wbheader        ;get 'progfile' and stack size
    1 00.00000000                              ;to be included to allow things to be run from WBENCH
    2 00.00000000                              ;
    3 00.00000000                              ;
    4 00.00000000 2C7900000004         wb_header       move.l  4,a6
    5 00.00000006 286E0114                     move.l  276(a6),a4
    6 00.0000000A 23CC00000158                 move.l  a4,us
    7 00.00000010 4AAC00AC                     tst.l   $ac(a4)
    8 00.00000014 660000BC                     bne     fromcli
    9 00.00000018                              ;
   10 00.00000018                              ;program was run from workbench - somehoew, we have
   11 00.00000018                              ;to eventually get stacksize into D2!
   12 00.00000018                              ;
   13 00.00000018 41EC005C                     lea     $5c(a4),a0
   14 00.0000001C 4EAEFE80                     jsr     waitport(a6)
   15 00.00000020 4EAEFE8C                     jsr     getmsg(a6)
   16 00.00000024 23C00000015C                 move.l  d0,wbmess
   17 00.0000002A 2A40                         move.l  d0,a5
   18 00.0000002C 610000FE                     bsr     dosopen
   19 00.00000030 670000DA                     beq     wb_exit
   20 00.00000034 2C7A011E                     move.l  dos(pc),a6
   21 00.00000038                              ;
   22 00.00000038                              ;Read in the .info file to find stack size!
   23 00.00000038                              ;
   24 00.00000038 286D0024                     move.l  $24(a5),a4
   25 00.0000003C 2214                         move.l  (a4),d1
   26 00.0000003E 4EAEFF82                     jsr     currentdir(a6)  ;dir of BLITZ2!
   27 00.00000042                              ;
   28 00.00000042 206C0004                     move.l  4(a4),a0                ;pointer to name?
   29 00.00000046 43FA0118                     lea     progfile(pc),a1 ;make name+.info
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 13
WBHEADER


   30 00.0000004A 12D8                 .loop0  move.b  (a0)+,(a1)+
   31 00.0000004C 6600FFFC                     bne     .loop0
   32 00.00000050 5349                         subq    #1,a1
   33 00.00000052 41FA00EE                     lea     wb_infoname(pc),a0
   34 00.00000056 12D8                 .loopm1 move.b  (a0)+,(a1)+
   35 00.00000058 6600FFFC                     bne     .loopm1
   36 00.0000005C                              ;
   37 00.0000005C 223C00000160                 move.l  #progfile,d1
   38 00.00000062 243C000003ED                 move.l  #1005,d2
   39 00.00000068 4EAEFFE2                     jsr     open(a6)
   40 00.0000006C 2E00                         move.l  d0,d7
   41 00.0000006E 67000034                     beq     .openfailed
   42 00.00000072 2207                         move.l  d7,d1
   43 00.00000074 243C00000160                 move.l  #progfile,d2
   44 00.0000007A 764E                         moveq   #$4e,d3
   45 00.0000007C 4EAEFFD6                     jsr     read(a6)
   46 00.00000080 B0BC0000004E                 cmp.l   #$4e,d0
   47 00.00000086 6600001C                     bne     .openfailed
   48 00.0000008A 2207                         move.l  d7,d1
   49 00.0000008C 4EAEFFDC                     jsr     close(a6)
   50 00.00000090 423900000160                 clr.b   progfile
   51 00.00000096 2439000001AA                 move.l  progfile+$4a,d2
   52 00.0000009C 67000006                     beq     .openfailed
   53 00.000000A0                              ;
   54 00.000000A0                      ;       moveq   #-1,d0
   55 00.000000A0                      ;.fll   move    d0,$dff180
   56 00.000000A0                      ;       dbf     d0,.fll
   57 00.000000A0                              ;
   58 00.000000A0 60000008                     bra     .openok
   59 00.000000A4                              ;
   60 00.000000A4 243C00000FA0         .openfailed     move.l  #4000,d2
   61 00.000000AA 0C6D0002001E         .openok cmp     #2,$1e(a5)
   62 00.000000B0 6500016E                     bcs     wb_allgo
   63 00.000000B4                              ;
   64 00.000000B4 286D0024             .allgo  move.l  $24(a5),a4
   65 00.000000B8 222C0008                     move.l  8(a4),d1
   66 00.000000BC 4EAEFF82                     jsr     currentdir(a6)
   67 00.000000C0 206C000C                     move.l  12(a4),a0
   68 00.000000C4 43FA009A                     lea     progfile(pc),a1
   69 00.000000C8 12D8                 .loop   move.b  (a0)+,(a1)+
   70 00.000000CA 6600FFFC                     bne     .loop   
   71 00.000000CE 60000150                     bra     wb_allgo
   72 00.000000D2                      
   73 00.000000D2 242F0004             fromcli move.l  4(a7),d2        ;stacksize from CLI
   74 00.000000D6 42B90000015C                 clr.l   wbmess
   75 00.000000DC 5340                         subq    #1,d0
   76 00.000000DE 67000020                     beq     .skip2
   77 00.000000E2 43FA007C                     lea     progfile(pc),a1
   78 00.000000E6 12D8                 .loop   move.b  (a0)+,(a1)+
   79 00.000000E8 0C290020FFFF                 cmp.b   #32,-1(a1)
   80 00.000000EE 6700000C                     beq     .skip
   81 00.000000F2 0C29000AFFFF                 cmp.b   #10,-1(a1)
   82 00.000000F8 6600FFEC                     bne     .loop
   83 00.000000FC 4229FFFF             .skip   clr.b   -1(a1)
   84 00.00000100 6100002A             .skip2  bsr     dosopen
   85 00.00000104 67000006                     beq     wb_exit
   86 00.00000108 60000116                     bra     wb_allgo
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 14
WBHEADER


   87 00.0000010C                      
   88 00.0000010C 203A004E             wb_exit move.l  wbmess(pc),d0
   89 00.00000110 67000018                     beq     .done
   90 00.00000114 2C7900000004                 move.l  4,a6
   91 00.0000011A 4EAEFF7C                     jsr     forbid(a6)
   92 00.0000011E 227A003C                     move.l  wbmess(pc),a1
   93 00.00000122 4EAEFE86                     jsr     replymsg(a6)
   94 00.00000126 4EAEFF76                     jsr     permit(a6)
   95 00.0000012A 4E75                 .done   rts
   96 00.0000012C                      
   97 00.0000012C 2C7900000004         dosopen move.l  4,a6
   98 00.00000132 43FA0014                     lea     wb_dosname(pc),a1
   99 00.00000136 4EAEFE68                     jsr     oldopenlibrary(a6)
  100 00.0000013A 23C000000154                 move.l  d0,dos
  101 00.00000140 4E75                         rts
  102 00.00000142                              
  103 00.00000142 2E696E666F00         wb_infoname     dc.b    '.info',0
  104 00.00000148                              even
  105 00.00000148 646F732E6C6962726172 wb_dosname      dc.b    'dos.library',0
  106 00.00000154                              even
  107 00.00000154 00000000             dos     dc.l    0
  108 00.00000158 00000000             us      dc.l    0
  109 00.0000015C 00000000             wbmess  dc.l    0
  110 00.00000160                      progfile        dcb.b   192,0
  111 00.00000220                      
  112 00.00000220                      wb_allgo        ;
  113 00.00000220                      
  114 00.00000220                      
  255 00.00000220                              ;
  256   =FFFFFFFF                              ifeq    final
  257 00.00000220                              move.l  #4000,d2
  258 00.00000220                              endc
  259 00.00000220                              ;
  260 00.00000220 23C20000E342                 move.l  d2,stackfuck
  261 00.00000226 60002AE0                     bra     actualbegin
  262 00.0000022A                              ;
    0 00.0000022A                              include options2.src.new
    1 00.0000022A 00000000             optreq2 dc.l    0
    2 00.0000022E 0114000A00F000840000         dc.w    276,10,240,132,0,0
    3 00.0000023A 000006A20000029A0000         dc.l    optreq2ga1,optreq2bo1,optreq2in1
    4 00.00000246 0000                         dc.w    0
    5 00.00000248 0000                         dc.b    0,0
    6 00.0000024A 00000000                     dc.l    0
    7 00.0000024E                              ds.b    32
    8 00.0000026E 0000000000000000             dc.l    0,0
    9 00.00000276                              ds.b    36
   10 00.0000029A                      
   11 00.0000029A 00000000             optreq2bo1      dc.w    0,0
   12 00.0000029E 01020103                     dc.b    1,2,1,3
   13 00.000002A2 000002AA000002B6             dc.l    optreq2la1,optreq2la2
   14 00.000002AA 00E70014000800140008 optreq2la1      dc.w    231,20,8,20,8,111
   15 00.000002B6 00000000             optreq2la2      dc.w    0,0
   16 00.000002BA 02010103                     dc.b    2,1,1,3
   17 00.000002BE 000002C6000002D2             dc.l    optreq2la3,optreq2bo2
   18 00.000002C6 00E7001500E7006F0009 optreq2la3      dc.w    231,21,231,111,9,111
   19 00.000002D2 00000000             optreq2bo2      dc.w    0,0
   20 00.000002D6 01020103                     dc.b    1,2,1,3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 15
OPTIONS2.SRC.NEW


   21 00.000002DA 000002E2000002EE             dc.l    optreq2la4,optreq2la5
   22 00.000002E2 00EF0000000000000000 optreq2la4      dc.w    239,0,0,0,0,131
   23 00.000002EE 00000000             optreq2la5      dc.w    0,0
   24 00.000002F2 02010103                     dc.b    2,1,1,3
   25 00.000002F6 000002FE00000000             dc.l    optreq2la6,0
   26 00.000002FE 00EF000100EF00830001 optreq2la6      dc.w    239,1,239,131,1,131
   27 00.0000030A 00000000             optreq2bo3      dc.w    0,0
   28 00.0000030E 01020103                     dc.b    1,2,1,3
   29 00.00000312 0000031A00000326             dc.l    optreq2la15,optreq2la16
   30 00.0000031A 00170000000000000000 optreq2la15     dc.w    23,0,0,0,0,11
   31 00.00000326 00000000             optreq2la16     dc.w    0,0
   32 00.0000032A 02010103                     dc.b    2,1,1,3
   33 00.0000032E 0000033600000000             dc.l    optreq2la17,0
   34 00.00000336 001700010017000B0001 optreq2la17     dc.w    23,1,23,11,1,11
   35 00.00000342 00000000             optreq2bo4      dc.w    0,0
   36 00.00000346 01020103                     dc.b    1,2,1,3
   37 00.0000034A 000003520000035E             dc.l    optreq2la19,optreq2la20
   38 00.00000352 00170000000000000000 optreq2la19     dc.w    23,0,0,0,0,11
   39 00.0000035E 00000000             optreq2la20     dc.w    0,0
   40 00.00000362 02010103                     dc.b    2,1,1,3
   41 00.00000366 0000036E00000000             dc.l    optreq2la21,0
   42 00.0000036E 001700010017000B0001 optreq2la21     dc.w    23,1,23,11,1,11
   43 00.0000037A 00000000             optreq2bo5      dc.w    0,0
   44 00.0000037E 01020103                     dc.b    1,2,1,3
   45 00.00000382 0000038A00000396             dc.l    optreq2la23,optreq2la24
   46 00.0000038A 00170000000000000000 optreq2la23     dc.w    23,0,0,0,0,11
   47 00.00000396 00000000             optreq2la24     dc.w    0,0
   48 00.0000039A 02010103                     dc.b    2,1,1,3
   49 00.0000039E 000003A600000000             dc.l    optreq2la25,0
   50 00.000003A6 001700010017000B0001 optreq2la25     dc.w    23,1,23,11,1,11
   51 00.000003B2 00000000             optreq2bo6      dc.w    0,0
   52 00.000003B6 01020103                     dc.b    1,2,1,3
   53 00.000003BA 000003C2000003CE             dc.l    optreq2la27,optreq2la28
   54 00.000003C2 00170000000000000000 optreq2la27     dc.w    23,0,0,0,0,11
   55 00.000003CE 00000000             optreq2la28     dc.w    0,0
   56 00.000003D2 02010103                     dc.b    2,1,1,3
   57 00.000003D6 000003DE00000000             dc.l    optreq2la29,0
   58 00.000003DE 001700010017000B0001 optreq2la29     dc.w    23,1,23,11,1,11
   59 00.000003EA 00000000             optreq2bo7      dc.w    0,0
   60 00.000003EE 01020103                     dc.b    1,2,1,3
   61 00.000003F2 000003FA00000406             dc.l    optreq2la31,optreq2la32
   62 00.000003FA 00170000000000000000 optreq2la31     dc.w    23,0,0,0,0,11
   63 00.00000406 00000000             optreq2la32     dc.w    0,0
   64 00.0000040A 02010103                     dc.b    2,1,1,3
   65 00.0000040E 0000041600000000             dc.l    optreq2la33,0
   66 00.00000416 001700010017000B0001 optreq2la33     dc.w    23,1,23,11,1,11
   67 00.00000422 00000000             optreq2bo8      dc.w    0,0
   68 00.00000426 01020103                     dc.b    1,2,1,3
   69 00.0000042A 000004320000043E             dc.l    optreq2la35,optreq2la36
   70 00.00000432 00170000000000000000 optreq2la35     dc.w    23,0,0,0,0,11
   71 00.0000043E 00000000             optreq2la36     dc.w    0,0
   72 00.00000442 02010103                     dc.b    2,1,1,3
   73 00.00000446 0000044E00000000             dc.l    optreq2la37,0
   74 00.0000044E 001700010017000B0001 optreq2la37     dc.w    23,1,23,11,1,11
   75 00.0000045A 00000000             optreq2bo9      dc.w    0,0
   76 00.0000045E 01020103                     dc.b    1,2,1,3
   77 00.00000462 0000046A00000476             dc.l    optreq2la39,optreq2la40
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 16
OPTIONS2.SRC.NEW


   78 00.0000046A 00170000000000000000 optreq2la39     dc.w    23,0,0,0,0,11
   79 00.00000476 00000000             optreq2la40     dc.w    0,0
   80 00.0000047A 02010103                     dc.b    2,1,1,3
   81 00.0000047E 0000048600000000             dc.l    optreq2la41,0
   82 00.00000486 001700010017000B0001 optreq2la41     dc.w    23,1,23,11,1,11
   83 00.00000492 00000000             optreq2bo10     dc.w    0,0
   84 00.00000496 01020103                     dc.b    1,2,1,3
   85 00.0000049A 000004A2000004AE             dc.l    optreq2la43,optreq2la44
   86 00.000004A2 00270000000000000000 optreq2la43     dc.w    39,0,0,0,0,11
   87 00.000004AE 00000000             optreq2la44     dc.w    0,0
   88 00.000004B2 02010103                     dc.b    2,1,1,3
   89 00.000004B6 000004BE00000000             dc.l    optreq2la45,0
   90 00.000004BE 002700010027000B0001 optreq2la45     dc.w    39,1,39,11,1,11
   91 00.000004CA 00000000             optreq2bo11     dc.w    0,0
   92 00.000004CE 01020103                     dc.b    1,2,1,3
   93 00.000004D2 000004DA000004E6             dc.l    optreq2la47,optreq2la48
   94 00.000004DA 00470000000000000000 optreq2la47     dc.w    71,0,0,0,0,11
   95 00.000004E6 00000000             optreq2la48     dc.w    0,0
   96 00.000004EA 02010103                     dc.b    2,1,1,3
   97 00.000004EE 000004F600000000             dc.l    optreq2la49,0
   98 00.000004F6 004700010047000B0001 optreq2la49     dc.w    71,1,71,11,1,11
   99 00.00000502                      
  100 00.00000502 01000100             optreq2in1      dc.b    1,0,1,0
  101 00.00000506 000C0006                     dc.w    12,6
  102 00.0000050A 00000000                     dc.l    0
  103 00.0000050E 000005160000052C             dc.l    optreq2la7,optreq2in2
  104 00.00000516 52756E74696D65204572 optreq2la7      dc.b    'Runtime Error Options',0
  105 00.0000052C                              even
  106 00.0000052C 01000100             optreq2in2      dc.b    1,0,1,0
  107 00.00000530 0014001A                     dc.w    20,26
  108 00.00000534 00000000                     dc.l    0
  109 00.00000538 000005400000054A             dc.l    optreq2la8,optreq2in3
  110 00.00000540 4155544F2052554E3A00 optreq2la8      dc.b    'AUTO RUN:',0   ;'REMEMBER LINE NUMBERS:',0
  111 00.0000054A                              even
  112 00.0000054A 01000100             optreq2in3      dc.b    1,0,1,0
  113 00.0000054E 00140026                     dc.w    20,38
  114 00.00000552 00000000                     dc.l    0
  115 00.00000556 0000055E00000572             dc.l    optreq2la9,optreq2in4
  116 00.0000055E 494E5445525550542043 optreq2la9      dc.b    'INTERUPT CHECKING:',0  ;'ENABLE CONTINUE:',0
  117 00.00000572                              even
  118 00.00000572 01000100             optreq2in4      dc.b    1,0,1,0
  119 00.00000576 00140032                     dc.w    20,50
  120 00.0000057A 00000000                     dc.l    0
  121 00.0000057E 000005860000059A             dc.l    optreq2la10,optreq2in5
  122 00.00000586 415353454D424C455220 optreq2la10     dc.b    'ASSEMBLER CHECKING:',0 ;'STACK CHECKING:',0
  123 00.0000059A                              even
  124 00.0000059A 01000100             optreq2in5      dc.b    1,0,1,0
  125 00.0000059E 0014003E                     dc.w    20,62
  126 00.000005A2 00000000                     dc.l    0
  127 00.000005A6 000005AE00000000             dc.l    optreq2la11,0   ;optreq2in6
  128 00.000005AE 4F564552464C4F572043 optreq2la11     dc.b    'OVERFLOW CHECKING:',0  ;'CTRL C CHECKING:',0
  129 00.000005C2                              even
  130 00.000005C2                      ;optreq2in6     dc.b    1,0,1,0
  131 00.000005C2                      ;       dc.w    20,74
  132 00.000005C2                      ;       dc.l    0
  133 00.000005C2                      ;       dc.l    optreq2la12,optreq2in7
  134 00.000005C2                      ;optreq2la12    dc.b    'PARAMETER CHECKING:',0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 17
OPTIONS2.SRC.NEW


  135 00.000005C2                      ;       even
  136 00.000005C2                      ;optreq2in7     dc.b    1,0,1,0
  137 00.000005C2                      ;       dc.w    20,86
  138 00.000005C2                      ;       dc.l    0
  139 00.000005C2                      ;       dc.l    optreq2la13,optreq2in8
  140 00.000005C2                      ;optreq2la13    dc.b    'INTERUPT CHECKING:',0
  141 00.000005C2                      ;       even
  142 00.000005C2                      ;optreq2in8     dc.b    1,0,1,0
  143 00.000005C2                      ;       dc.w    20,98
  144 00.000005C2                      ;       dc.l    0
  145 00.000005C2                      ;       dc.l    optreq2la14,0
  146 00.000005C2                      ;optreq2la14    dc.b    'OVERFLOW CHECKING:',0
  147 00.000005C2                              even
  148 00.000005C2 01000100             optreq2in9      dc.b    1,0,1,0
  149 00.000005C6 00040002                     dc.w    4,2
  150 00.000005CA 00000000                     dc.l    0
  151 00.000005CE 000005D600000000             dc.l    optreq2la18,0
  152 00.000005D6 202000               optreq2la18     dc.b    '  ',0
  153 00.000005DA                              even
  154 00.000005DA 01000100             optreq2in10     dc.b    1,0,1,0
  155 00.000005DE 00040002                     dc.w    4,2
  156 00.000005E2 00000000                     dc.l    0
  157 00.000005E6 000005EE00000000             dc.l    optreq2la22,0
  158 00.000005EE 202000               optreq2la22     dc.b    '  ',0
  159 00.000005F2                              even
  160 00.000005F2 01000100             optreq2in11     dc.b    1,0,1,0
  161 00.000005F6 00040002                     dc.w    4,2
  162 00.000005FA 00000000                     dc.l    0
  163 00.000005FE 0000060600000000             dc.l    optreq2la26,0
  164 00.00000606 202000               optreq2la26     dc.b    '  ',0
  165 00.0000060A                              even
  166 00.0000060A 01000100             optreq2in12     dc.b    1,0,1,0
  167 00.0000060E 00040002                     dc.w    4,2
  168 00.00000612 00000000                     dc.l    0
  169 00.00000616 0000061E00000000             dc.l    optreq2la30,0
  170 00.0000061E 202000               optreq2la30     dc.b    '  ',0
  171 00.00000622                              even
  172 00.00000622 01000100             optreq2in13     dc.b    1,0,1,0
  173 00.00000626 00040002                     dc.w    4,2
  174 00.0000062A 00000000                     dc.l    0
  175 00.0000062E 0000063600000000             dc.l    optreq2la34,0
  176 00.00000636 202000               optreq2la34     dc.b    '  ',0
  177 00.0000063A                              even
  178 00.0000063A 01000100             optreq2in14     dc.b    1,0,1,0
  179 00.0000063E 00040002                     dc.w    4,2
  180 00.00000642 00000000                     dc.l    0
  181 00.00000646 0000064E00000000             dc.l    optreq2la38,0
  182 00.0000064E 202000               optreq2la38     dc.b    '  ',0
  183 00.00000652                              even
  184 00.00000652 01000100             optreq2in15     dc.b    1,0,1,0
  185 00.00000656 00040002                     dc.w    4,2
  186 00.0000065A 00000000                     dc.l    0
  187 00.0000065E 0000066600000000             dc.l    optreq2la42,0
  188 00.00000666 202000               optreq2la42     dc.b    '  ',0
  189 00.0000066A                              even
  190 00.0000066A 01000100             optreq2in16     dc.b    1,0,1,0
  191 00.0000066E 00040002                     dc.w    4,2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 18
OPTIONS2.SRC.NEW


  192 00.00000672 00000000                     dc.l    0
  193 00.00000676 0000067E00000000             dc.l    optreq2la46,0
  194 00.0000067E 204F4B2000           optreq2la46     dc.b    ' OK ',0
  195 00.00000684                              even
  196 00.00000684 01000100             optreq2in17     dc.b    1,0,1,0
  197 00.00000688 00040002                     dc.w    4,2
  198 00.0000068C 00000000                     dc.l    0
  199 00.00000690 0000069800000000             dc.l    optreq2la50,0
  200 00.00000698 2043414E43454C2000   optreq2la50     dc.b    ' CANCEL ',0
  201 00.000006A2                              even
  202 00.000006A2                      
  203 00.000006A2 000006CE             optreq2ga1      dc.l    optreq2ga2
  204 00.000006A6 00C800180018000C0080         dc.w    200,24,24,12,128,257,1
  205 00.000006B4 0000030A000000000000         dc.l    optreq2bo3,0,optreq2in9,0,0
  206 00.000006C8 0001                         dc.w    1
  207 00.000006CA 00000000                     dc.l    0
  208 00.000006CE 000006FA             optreq2ga2      dc.l    optreq2ga3
  209 00.000006D2 00C800240018000C0080         dc.w    200,36,24,12,128,257,1
  210 00.000006E0 00000342000000000000         dc.l    optreq2bo4,0,optreq2in10,0,0
  211 00.000006F4 0002                         dc.w    2
  212 00.000006F6 00000000                     dc.l    0
  213 00.000006FA 00000726             optreq2ga3      dc.l    optreq2ga4
  214 00.000006FE 00C800300018000C0000         dc.w    200,48,24,12,0,257,1
  215 00.0000070C 0000037A000000000000         dc.l    optreq2bo5,0,optreq2in11,0,0
  216 00.00000720 0003                         dc.w    3
  217 00.00000722 00000000                     dc.l    0
  218 00.00000726 000007D6             optreq2ga4      dc.l    optreq2ga8
  219 00.0000072A 00C8003C0018000C0000         dc.w    200,60,24,12,0,257,1
  220 00.00000738 000003B2000000000000         dc.l    optreq2bo6,0,optreq2in12,0,0
  221 00.0000074C 0004                         dc.w    4
  222 00.0000074E 00000000                     dc.l    0
  223 00.00000752 0000077E             optreq2ga5      dc.l    optreq2ga6
  224 00.00000756 00C800480018000C0080         dc.w    200,72,24,12,128,257,1
  225 00.00000764 000003EA000000000000         dc.l    optreq2bo7,0,optreq2in13,0,0
  226 00.00000778 0005                         dc.w    5
  227 00.0000077A 00000000                     dc.l    0
  228 00.0000077E 000007AA             optreq2ga6      dc.l    optreq2ga7
  229 00.00000782 00C800540018000C0080         dc.w    200,84,24,12,128,257,1
  230 00.00000790 00000422000000000000         dc.l    optreq2bo8,0,optreq2in14,0,0
  231 00.000007A4 0006                         dc.w    6
  232 00.000007A6 00000000                     dc.l    0
  233 00.000007AA 000007D6             optreq2ga7      dc.l    optreq2ga8
  234 00.000007AE 00C800600018000C0080         dc.w    200,96,24,12,128,257,1
  235 00.000007BC 0000045A000000000000         dc.l    optreq2bo9,0,optreq2in15,0,0
  236 00.000007D0 0007                         dc.w    7
  237 00.000007D2 00000000                     dc.l    0
  238 00.000007D6 00000802             optreq2ga8      dc.l    optreq2ga9
  239 00.000007DA 000800740028000C0000         dc.w    8,116,40,12,0,5,1
  240 00.000007E8 00000492000000000000         dc.l    optreq2bo10,0,optreq2in16,0,0
  241 00.000007FC 0008                         dc.w    8
  242 00.000007FE 00000000                     dc.l    0
  243 00.00000802 00000000             optreq2ga9      dc.l    0
  244 00.00000806 00A000740048000C0000         dc.w    160,116,72,12,0,5,1
  245 00.00000814 000004CA000000000000         dc.l    optreq2bo11,0,optreq2in17,0,0
  246 00.00000828 0009                         dc.w    9
  247 00.0000082A 00000000                     dc.l    0
  264 00.0000082E                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 19
blitz2.s


  265 00.0000082E 000003F3000000000000 tsthead dc.l    $3f3,0,1,0,0
  266 00.00000842 00000100000003E9     tstsize1        dc.l    256,$3e9
  267 00.0000084A 00000100             tstsize2        dc.l    256
  268 00.0000084E                              ;
  269 00.0000084E 000003EC             tstend  dc.l    $3ec
  270 00.00000852 0000000000000000     tstsize3        dc.l    0,0
  271 00.0000085A                              ;
  272 00.0000085A 000003F2             tstdone dc.l    $3f2
  273 00.0000085E                      
  274 00.0000085E 0000087A             edstruct        dc.l    tokens
  275 00.00000862 000020F0                     dc.l    menus
  276 00.00000866 0000FD90                     dc.l    loadxtra        ;load .xtra routine
  277 00.0000086A 0000FE62                     dc.l    savextra        ;save .xtra routine
  278 00.0000086E 00002F0C                     dc.l    menu    ;Menu Routine
  279 00.00000872 00000000                     dc.l    0       ;cleanup (?)
  280 00.00000876 3A222E3B                     dc.b    ':".;'
  281 00.0000087A                              even
  282 00.0000087A                              
  283 00.0000087A 00000892             tokens  dc.l    tok2    ;*****
  284 00.0000087E 0001                         dc      1
  285 00.00000880 4E45575459504500             dc.b    'NEWTYPE',0
  286 00.00000888 2E547970656E616D6500         dc.b    '.Typename',0
  287 00.00000892                              even
  288 00.00000892 000008DE             tok2    dc.l    tok3    ;*****
  289 00.00000896 0002                         dc      2
  290 00.00000898 456E6400                     dc.b    'End',0
  291 00.0000089C 5B49667C5768696C657C         dc.b    '[If|While|Select|Statement|Function|SetInt|SetErr|NEWTYPE|MACRO]',0
  292 00.000008DE                              even
  293 00.000008DE 00000902             tok3    dc.l    tok4    ;*****
  294 00.000008E2 0003                         dc      3
  295 00.000008E4 4C657400                     dc.b    'Let',0
  296 00.000008E8 5661723D7C4F70657261         dc.b    'Var=|Operator Expression',0
  297 00.00000902                              even
  298 00.00000902 0000093A             tok4    dc.l    tok5    ;*****
  299 00.00000906 0004                         dc      4
  300 00.00000908 44696D00                     dc.b    'Dim',0
  301 00.0000090C 41727261796E616D6520         dc.b    'Arrayname [List] (Dimension1[,Dimension2..])',0
  302 00.0000093A                              even
  303 00.0000093A 00000954             tok5    dc.l    tok6    ;*****
  304 00.0000093E 0005                         dc      5
  305 00.00000940 476F746F00                   dc.b    'Goto',0
  306 00.00000945 50726F6772616D204C61         dc.b    'Program Label',0
  307 00.00000954                              even
  308 00.00000954 0000096E             tok6    dc.l    tok7    ;*****
  309 00.00000958 0006                         dc      6
  310 00.0000095A 476F73756200                 dc.b    'Gosub',0
  311 00.00000960 50726F6772616D204C61         dc.b    'Program Label',0
  312 00.0000096E                              even
  313 00.0000096E 0000097C             tok7    dc.l    tok8    ;*****
  314 00.00000972 0007                         dc      7
  315 00.00000974 52657475726E0000             dc.b    'Return',0,0
  316 00.0000097C                              even
  317 00.0000097C 000009B8             tok8    dc.l    tok9    ;*****
  318 00.00000980 0008                         dc      8
  319 00.00000982 53746174656D656E7400         dc.b    'Statement',0
  320 00.0000098C 50726F6365647572656E         dc.b    'Procedurename{[Parameter1[,Parameter2...]]}',0
  321 00.000009B8                              even
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 20
blitz2.s


  322 00.000009B8 000009FC             tok9    dc.l    tok10   ;*****
  323 00.000009BC 0009                         dc      9
  324 00.000009BE 46756E6374696F6E00           dc.b    'Function',0
  325 00.000009C7 5B2E547970655D205072         dc.b    '[.Type] Procedurename{[Parameter1[,Parameter2...]]}',0
  326 00.000009FC                              even
  327 00.000009FC 00000A0E             tok10   dc.l    tok11   ;*****
  328 00.00000A00 000A                         dc      10
  329 00.00000A02 4D6F7573655761697400         dc.b    'MouseWait',0,0
  330 00.00000A0E                              even
  331 00.00000A0E 00000A2C             tok11   dc.l    tok12   ;*****
  332 00.00000A12 000B                         dc      11
  333 00.00000A14 496600                       dc.b    'If',0
  334 00.00000A17 45787072657373696F6E         dc.b    'Expression [Then...]',0
  335 00.00000A2C                              even
  336 00.00000A2C 00000A44             tok12   dc.l    tok13   ;*****
  337 00.00000A30 000C                         dc      12
  338 00.00000A32 5768696C6500                 dc.b    'While',0
  339 00.00000A38 45787072657373696F6E         dc.b    'Expression',0
  340 00.00000A44                              even
  341 00.00000A44 00000A5A             tok13   dc.l    tok14   ;*****
  342 00.00000A48 000D                         dc      13
  343 00.00000A4A 4D6163726F00                 dc.b    'Macro',0
  344 00.00000A50 4D6163726F6E616D6500         dc.b    'Macroname',0
  345 00.00000A5A                              even
  346 00.00000A5A 00000A72             tok14   dc.l    tok15   ;*****
  347 00.00000A5E 000E                         dc      14
  348 00.00000A60 53656C65637400               dc.b    'Select',0
  349 00.00000A67 45787072657373696F6E         dc.b    'Expression',0
  350 00.00000A72                              even
  351 00.00000A72 00000A88             tok15   dc.l    tok16   ;*****
  352 00.00000A76 000F                         dc      15
  353 00.00000A78 4361736500                   dc.b    'Case',0
  354 00.00000A7D 45787072657373696F6E         dc.b    'Expression',0
  355 00.00000A88                              even
  356 00.00000A88 00000A98             tok16   dc.l    tok17   ;tok17  ;*****
  357 00.00000A8C 0010                         dc      16
  358 00.00000A8E 44656661756C740000           dc.b    'Default',0,0
  359 00.00000A98                              even
  360 00.00000A98 00000AA8             tok17   dc.l    tok18
  361 00.00000A9C 0011                         dc      17
  362 00.00000A9E 41736D457869740000           dc.b    'AsmExit',0,0   ;'Ashr',0,0
  363 00.00000AA8                              even
  364 00.00000AA8 00000AC0             tok18   dc.l    tok19   ;*****
  365 00.00000AAC 0012                         dc      18
  366 00.00000AAE 58494E434C55444500           dc.b    'XINCLUDE',0
  367 00.00000AB7 46696C656E616D6500           dc.b    'Filename',0
  368 00.00000AC0                              even
  369 00.00000AC0 00000AD8             tok19   dc.l    tok20   ;*****
  370 00.00000AC4 0013                         dc      19
  371 00.00000AC6 494E434C55444500             dc.b    'INCLUDE',0
  372 00.00000ACE 46696C656E616D6500           dc.b    'Filename',0
  373 00.00000AD8                              even
  374 00.00000AD8 00000AE4             tok20   dc.l    tok21
  375 00.00000ADC 0014                         dc      20
  376 00.00000ADE 4A696D690000                 dc.b    'Jimi',0,0      ;'Unless',0,0
  377 00.00000AE4                                              ;dc.b   'expression [comparison expression] [Then...]',0
  378 00.00000AE4                              even
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 21
blitz2.s


  379 00.00000AE4 00000AFE             tok21   dc.l    tok22   ;*****
  380 00.00000AE8 0015                         dc      21
  381 00.00000AEA 53484152454400               dc.b    'SHARED',0
  382 00.00000AF1 5661725B2C5661722E2E         dc.b    'Var[,Var...]',0
  383 00.00000AFE                              even
  384 00.00000AFE 00000B3A             tok22   dc.l    tok23   ;*****
  385 00.00000B02 0016                         dc      22
  386 00.00000B04 466F7200                     dc.b    'For',0
  387 00.00000B08 5661723D457870726573         dc.b    'Var=Expression1 To Expression2 [Step Expression3]',0
  388 00.00000B3A                              even
  389 00.00000B3A 00000B54             tok23   dc.l    tok24   ;*****
  390 00.00000B3E 0017                         dc      23
  391 00.00000B40 4E65787400                   dc.b    'Next',0
  392 00.00000B45 5B5661725B2C5661722E         dc.b    '[Var[,Var...]]',0
  393 00.00000B54                              even
  394 00.00000B54 00000B7C             tok24   dc.l    tok25   ;*****
  395 00.00000B58 0018                         dc      24
  396 00.00000B5A 546F00                       dc.b    'To',0
  397 00.00000B5D 45787072657373696F6E         dc.b    'Expression2 [Step Expression3]',0
  398 00.00000B7C                              even
  399 00.00000B7C 00000B92             tok25   dc.l    tok26   ;*****
  400 00.00000B80 0019                         dc      25
  401 00.00000B82 5374657000                   dc.b    'Step',0
  402 00.00000B87 696E6372656D656E7400         dc.b    'increment',0
  403 00.00000B92                              even
  404 00.00000B92 00000BB4             tok26   dc.l    tok27   ;*****
  405 00.00000B96 001A                         dc      26
  406 00.00000B98 4461746100                   dc.b    'Data',0
  407 00.00000B9D 5B2E547970655D204974         dc.b    '[.Type] Item[,Item...]',0
  408 00.00000BB4                              even
  409 00.00000BB4 00000BCC             tok27   dc.l    tok28   ;*****
  410 00.00000BB8 001B                         dc      27
  411 00.00000BBA 5265616400                   dc.b    'Read',0
  412 00.00000BBF 5661725B2C5661722E2E         dc.b    'Var[,Var...]',0
  413 00.00000BCC                              even
  414 00.00000BCC 00000BF4             tok28   dc.l    tok29   ;*****
  415 00.00000BD0 001C                         dc      28
  416 00.00000BD2 434E494600                   dc.b    'CNIF',0
  417 00.00000BD7 436F6E7374616E742043         dc.b    'Constant Comparison Constant',0
  418 00.00000BF4                              even
  419 00.00000BF4 00000C1C             tok29   dc.l    tok30   ;*****
  420 00.00000BF8 001D                         dc      29
  421 00.00000BFA 4353494600                   dc.b    'CSIF',0
  422 00.00000BFF 22537472696E67222043         dc.b    '"String" Comparison "String"',0
  423 00.00000C1C                              even
  424 00.00000C1C 00000C2A             tok30   dc.l    tok31   ;*****
  425 00.00000C20 001E                         dc      30
  426 00.00000C22 43454C53450000               dc.b    'CELSE',0,0
  427 00.00000C2A                              even
  428 00.00000C2A 00000C36             tok31   dc.l    tok32   ;*****
  429 00.00000C2E 001F                         dc      31
  430 00.00000C30 43454E440000                 dc.b    'CEND',0,0
  431 00.00000C36                              even
  432 00.00000C36 00000C4E             tok32   dc.l    tok33   ;*****
  433 00.00000C3A 0020                         dc      32
  434 00.00000C3C 4345525200                   dc.b    'CERR',0
  435 00.00000C41 4572726F726D65737361         dc.b    'Errormessage',0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 22
blitz2.s


  436 00.00000C4E                              even
  437 00.00000C4E 00000C66             tok33   dc.l    tok34   ;*****
  438 00.00000C52 0021                         dc      33
  439 00.00000C54 5468656E00                   dc.b    'Then',0
  440 00.00000C59 73746174656D656E742E         dc.b    'statement...',0
  441 00.00000C66                              even
  442 00.00000C66 00000C80             tok34   dc.l    tok35   ;*****
  443 00.00000C6A 0022                         dc      34
  444 00.00000C6C 456C736500                   dc.b    'Else',0
  445 00.00000C71 5B53746174656D656E74         dc.b    '[Statement...]',0
  446 00.00000C80                              even
  447 00.00000C80                              ;
  448 00.00000C80                              ;below should not activate runtime error checking
  449 00.00000C80                              ;
  450 00.00000C80 00000CA8             tok35   dc.l    tok36
  451 00.00000C84 0023                         dc      35
  452 00.00000C86 4576656E3400                 dc.b    'Even4',0
  453 00.00000C8C 3B20616C69676E20746F         dc.b    '; align to 4 byte boundary',0
  454 00.00000CA8                              even
  455 00.00000CA8 00000CD0             tok36   dc.l    tok37
  456 00.00000CAC 0024                         dc      36
  457 00.00000CAE 4576656E3800                 dc.b    'Even8',0
  458 00.00000CB4 3B20616C69676E20746F         dc.b    '; align to 8 byte boundary',0
  459 00.00000CD0                              even
  460 00.00000CD0 00000CF0             tok37   dc.l    tok38   ;*****
  461 00.00000CD4 0025                         dc      37
  462 00.00000CD6 446300                       dc.b    'Dc',0
  463 00.00000CD9 5B2E53697A655D204461         dc.b    '[.Size] Data[,Data...]',0
  464 00.00000CF0                              even
  465 00.00000CF0 00000D08             tok38   dc.l    tok39   ;*****
  466 00.00000CF4 0026                         dc      38
  467 00.00000CF6 447300                       dc.b    'Ds',0
  468 00.00000CF9 5B2E53697A655D204C65         dc.b    '[.Size] Length',0
  469 00.00000D08                              even
  470 00.00000D08 00000D14             tok39   dc.l    tok40   ;*****
  471 00.00000D0C 0027                         dc      39
  472 00.00000D0E 4576656E0000                 dc.b    'Even',0,0
  473 00.00000D14                              even
  474 00.00000D14 00000D34             tok40   dc.l    tok41   ;*****
  475 00.00000D18 0028                         dc      40
  476 00.00000D1A 44636200                     dc.b    'Dcb',0
  477 00.00000D1E 5B2E53697A655D205265         dc.b    '[.Size] Repeats,Data',0
  478 00.00000D34                              even
  479 00.00000D34 00000D56             tok41   dc.l    tok42   ;*****
  480 00.00000D38 0029                         dc      41
  481 00.00000D3A 47657452656700               dc.b    'GetReg',0
  482 00.00000D41 3638303030205265672C         dc.b    '68000 Reg,Expression',0
  483 00.00000D56                              even
  484 00.00000D56 00000D6C             tok42   dc.l    tok43   ;*****
  485 00.00000D5A 002A                         dc      42
  486 00.00000D5C 496E6342696E00               dc.b    'IncBin',0
  487 00.00000D63 46696C656E616D6500           dc.b    'Filename',0
  488 00.00000D6C                              even
  489 00.00000D6C                              ;
  490 00.00000D6C                              ;end of disablables
  491 00.00000D6C                              ;
  492 00.00000D6C 00000D8A             tok43   dc.l    tok44   ;*****
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 23
blitz2.s


  493 00.00000D70 002B                         dc      43
  494 00.00000D72 4672656500                   dc.b    'Free',0
  495 00.00000D77 4F626A6563746E616D65         dc.b    'Objectname Object#',0
  496 00.00000D8A                              even
  497 00.00000D8A 00000DA8             tok44   dc.l    tok45   ;*****
  498 00.00000D8E 002C                         dc      44
  499 00.00000D90 55736500                     dc.b    'Use',0
  500 00.00000D94 4F626A6563746E616D65         dc.b    'Objectname Object#',0
  501 00.00000DA8                              even
  502 00.00000DA8 00000DB4             tok45   dc.l    tok46   ;*****
  503 00.00000DAC 002D                         dc      45
  504 00.00000DAE 53746F700000                 dc.b    'Stop',0,0
  505 00.00000DB4                              even
  506 00.00000DB4 00000DC4             tok46   dc.l    tok47   ;*****
  507 00.00000DB8 002E                         dc      46
  508 00.00000DBA 436F6E7400                   dc.b    'Cont',0
  509 00.00000DBF 5B4E5D00                     dc.b    '[N]',0
  510 00.00000DC4                              even
  511 00.00000DC4 00000DE8             tok47   dc.l    tok48   ;*****
  512 00.00000DC8 002F                         dc      47
  513 00.00000DCA 53697A654F6600               dc.b    'SizeOf',0
  514 00.00000DD1 2E547970656E616D655B         dc.b    '.Typename[,Entrypath]',0
  515 00.00000DE8                              even
  516 00.00000DE8 00000DFA             tok48   dc.l    tok49   ;*****
  517 00.00000DEC 0030                         dc      48
  518 00.00000DEE 536574496E7400               dc.b    'SetInt',0
  519 00.00000DF5 5479706500                   dc.b    'Type',0
  520 00.00000DFA                              even
  521 00.00000DFA 00000E0C             tok49   dc.l    tok50   ;*****
  522 00.00000DFE 0031                         dc      49
  523 00.00000E00 436C72496E7400               dc.b    'ClrInt',0
  524 00.00000E07 5479706500                   dc.b    'Type',0
  525 00.00000E0C                              even
  526 00.00000E0C 00000E2E             tok50   dc.l    tok51   ;*****
  527 00.00000E10 0032                         dc      50
  528 00.00000E12 4D61784C656E00               dc.b    'MaxLen',0
  529 00.00000E19 537472696E675661723D         dc.b    'StringVar=Expression',0
  530 00.00000E2E                              even
  531 00.00000E2E 00000E56             tok51   dc.l    tok52   ;*****
  532 00.00000E32 0033                         dc      51
  533 00.00000E34 4445465459504500             dc.b    'DEFTYPE',0
  534 00.00000E3C 2E547970656E616D6520         dc.b    '.Typename [Var[,Var...]]',0
  535 00.00000E56                              even    
  536 00.00000E56 00000E64             tok52   dc.l    tok53   ;*****
  537 00.00000E5A 0034                         dc      52
  538 00.00000E5C 424C49545A0000               dc.b    'BLITZ',0,0
  539 00.00000E64                              even
  540 00.00000E64 00000E72             tok53   dc.l    tok54   ;*****
  541 00.00000E68 0035                         dc      53
  542 00.00000E6A 414D4947410000               dc.b    'AMIGA',0,0
  543 00.00000E72                              even
  544 00.00000E72 00000E80             tok54   dc.l    tok55   ;*****
  545 00.00000E76 0036                         dc      54
  546 00.00000E78 51414D4947410000             dc.b    'QAMIGA',0,0
  547 00.00000E80                              even
  548 00.00000E80 00000E96             tok55   dc.l    tok56   ;*****
  549 00.00000E84 0037                         dc      55
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 24
blitz2.s


  550 00.00000E86 565761697400                 dc.b    'VWait',0
  551 00.00000E8C 5B4672616D65735D00           dc.b    '[Frames]',0
  552 00.00000E96                              even
  553 00.00000E96 00000EB2             tok56   dc.l    tok57   ;*****
  554 00.00000E9A 0038                         dc      56
  555 00.00000E9C 414C69624A737200             dc.b    'ALibJsr',0
  556 00.00000EA4 546F6B656E5B2C466F72         dc.b    'Token[,Form]',0
  557 00.00000EB2                              even
  558 00.00000EB2 00000ECE             tok57   dc.l    tok58   ;*****
  559 00.00000EB6 0039                         dc      57
  560 00.00000EB8 546F6B654A737200             dc.b    'TokeJsr',0
  561 00.00000EC0 546F6B656E5B2C466F72         dc.b    'Token[,Form]',0
  562 00.00000ECE                              even
  563 00.00000ECE 00000EEA             tok58   dc.l    tok59   ;*****
  564 00.00000ED2 003A                         dc      58
  565 00.00000ED4 424C69624A737200             dc.b    'BLibJsr',0
  566 00.00000EDC 546F6B656E5B2C466F72         dc.b    'Token[,Form]',0
  567 00.00000EEA                              even
  568 00.00000EEA 00000EF6             tok59   dc.l    tokasm
  569 00.00000EEE 003B                         dc      59
  570 00.00000EF0 4A696D690000                 dc.b    'Jimi',0,0      ;'AbortVBOK',0
  571 00.00000EF6                              even
  572 00.00000EF6                              ;
  573   =0000003C                      lnum    equ     60
  574   =0000003C                      fnum    equ     60
  575   =0000003C                      tnum    set     fnum
  576 00.00000EF6                              ;
    0 00.00000EF6                      tokasm  include asmmac
    1 00.00000EF6                      ;tnum   set     0
    2 00.00000EF6                              opt     m+
    3 00.00000EF6                              ;
    4 00.00000EF6                      a       macro
    5 00.00000EF6                              dc.l    n\@
    6 00.00000EF6                              dc      tnum
    7 00.00000EF6                      tnum    set     tnum+1
    8 00.00000EF6                              dc.b    '\1',0,0
    9 00.00000EF6                              even
   10 00.00000EF6                              dc      \2
   11 00.00000EF6                              ;
   12 00.00000EF6                              dc      \3,\4
   13 00.00000EF6                              dc.b    (\5<<4)+\6,(\7<<4)+\8
   14 00.00000EF6                              dc      (\9<<12)+\a
   15 00.00000EF6                              dc.l    \b
   16 00.00000EF6                              dc      \c
   17 00.00000EF6                      n\@     ;
   18 00.00000EF6                              endm
   19 00.00000EF6                      
   20 00.00000EF6                      c       macro
   21 00.00000EF6                              dc.l    toktnum
   22 00.00000EF6                              dc      tnum
   23 00.00000EF6                      tnum    set     tnum+1
   24 00.00000EF6                              dc.b    'EndAsm',0,0
   25 00.00000EF6                              even
   26 00.00000EF6                              endm
   27 00.00000EF6                      
   28   =0000FFFE                      ndn     equ     $fffe
   29   =0000FFFD                      nan     equ     $fffd
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 25
ASMMAC


   30   =0000FFFB                      nian    equ     $fffb
   31   =0000FFF7                      nanp    equ     $fff7
   32   =0000FFEF                      npan    equ     $ffef
   33   =0000FFDF                      ndan    equ     $ffdf
   34   =0000FFBF                      ndanxi  equ     $ffbf
   35   =0000FF7F                      nabsw   equ     $ff7f
   36   =0000FEFF                      nabsl   equ     $feff
   37   =0000FDFF                      ndpc    equ     $fdff
   38   =0000FBFF                      ndpcxi  equ     $fbff
   39   =0000F7FF                      nimm    equ     $f7ff
   40   =0000EFFF                      nccr    equ     $efff
   41   =0000DFFF                      nsr     equ     $dfff
   42   =0000BFFF                      nusp    equ     $bfff
   43   =00007FFF                      nmem    equ     $7fff
   44   =00000000                      nall    equ     0
   45 00.00000EF6                      
   46   =00000001                      dn      equ     1
   47   =00000002                      an      equ     2
   48   =00000004                      ian     equ     4
   49   =00000008                      anp     equ     8
   50   =00000010                      pan     equ     16
   51   =00000020                      dan     equ     32
   52   =00000040                      danxi   equ     64
   53   =00000080                      absw    equ     128
   54   =00000100                      absl    equ     256
   55   =00000200                      dpc     equ     512
   56   =00000400                      dpcxi   equ     1024
   57   =00000800                      imm     equ     2048
   58   =00001000                      ccr     equ     4096
   59   =00002000                      sr      equ     8192
   60   =00004000                      usp     equ     16384
   61   =00008000                      mem     equ     32768
   62   =00000FFF                      all     equ     $fff
   63 00.00000EF6                      
   64   =00000FF0                      byte    equ     $ff0
   65   =00000F1F                      word    equ     $f1f
   66   =000002FF                      long    equ     $2ff
   67   =00000210                      sall    equ     $210
   68   =00000FFF                      nosz    equ     $fff
   69 00.00000EF6                              ;
   70   =00000F10                      byteword        equ     $f10
   71   =0000010F                      wordlong        equ     $10f
   72 00.00000EF6                              
   73 00.00000EF6                              ;the last parameter is a 'do it yourself' subroutine
   74 00.00000EF6                              ;that allows you to do your own error chking for
   75 00.00000EF6                              ;silly opmodes!
   76 00.00000EF6                              ;
   77 00.00000EF6                              ;size/ea's have already been created
   78 00.00000EF6                              ;
   79 00.00000EF6                              ;d1=opcode,d2=srcreg,d3=srcea,d4=destreg,d5=destea
   80 00.00000EF6                              ;
   81 00.00000EF6                              ;return ne if no can do!
   82 00.00000EF6                      
   83 00.00000EF6                      opabcd  a       ABCD,$c100,dn^pan,dn^pan,9,0,0,0,15,byte,abcdchk,0,0
   83 00.00000EF6+00000F12                     dc.l    n_001
   83 00.00000EFA+003C                         dc      tnum
   83   =0000003D+                     tnum    set     tnum+1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 26
ASMMAC


   83 00.00000EFC+414243440000                 dc.b    'ABCD',0,0
   83 00.00000F02+                             even
   83 00.00000F02+C100                         dc      $c100
   83 00.00000F04+                             ;
   83 00.00000F04+00110011                     dc      dn^pan,dn^pan
   83 00.00000F08+9000                         dc.b    (9<<4)+0,(0<<4)+0
   83 00.00000F0A+FFF0                         dc      (15<<12)+byte
   83 00.00000F0C+00001E0A                     dc.l    abcdchk
   83 00.00000F10+0000                         dc      0
   83 00.00000F12+                     n_001   ;
   83 00.00000F12                              endm
   84 00.00000F12                              
   85 00.00000F12                              ;add <ea>,d0
   86 00.00000F12                      opadd   a       ADD,$d000,all,$1fd,0,3,9,15,6,sall,addchk,$8003
   86 00.00000F12+00000F2E                     dc.l    n_002
   86 00.00000F16+003D                         dc      tnum
   86   =0000003E+                     tnum    set     tnum+1
   86 00.00000F18+4144440000                   dc.b    'ADD',0,0
   86 00.00000F1E+                             even
   86 00.00000F1E+D000                         dc      $d000
   86 00.00000F20+                             ;
   86 00.00000F20+0FFF01FD                     dc      all,$1fd
   86 00.00000F24+039F                         dc.b    (0<<4)+3,(9<<4)+15
   86 00.00000F26+6210                         dc      (6<<12)+sall
   86 00.00000F28+00001E1E                     dc.l    addchk
   86 00.00000F2C+8003                         dc      $8003
   86 00.00000F2E+                     n_002   ;
   86 00.00000F2E                              endm
   87 00.00000F2E                      
   88 00.00000F2E                      opaddi  a       ADDI,$600,imm,$1fd,15,15,0,3,6,sall,0,0
   88 00.00000F2E+00000F4A                     dc.l    n_003
   88 00.00000F32+003E                         dc      tnum
   88   =0000003F+                     tnum    set     tnum+1
   88 00.00000F34+414444490000                 dc.b    'ADDI',0,0
   88 00.00000F3A+                             even
   88 00.00000F3A+0600                         dc      $600
   88 00.00000F3C+                             ;
   88 00.00000F3C+080001FD                     dc      imm,$1fd
   88 00.00000F40+FF03                         dc.b    (15<<4)+15,(0<<4)+3
   88 00.00000F42+6210                         dc      (6<<12)+sall
   88 00.00000F44+00000000                     dc.l    0
   88 00.00000F48+0000                         dc      0
   88 00.00000F4A+                     n_003   ;
   88 00.00000F4A                              endm
   89 00.00000F4A                      
   90 00.00000F4A                      opadda  a       ADDA,$d0c0,all,2,0,3,9,15,8,wordlong,0,0
   90 00.00000F4A+00000F66                     dc.l    n_004
   90 00.00000F4E+003F                         dc      tnum
   90   =00000040+                     tnum    set     tnum+1
   90 00.00000F50+414444410000                 dc.b    'ADDA',0,0
   90 00.00000F56+                             even
   90 00.00000F56+D0C0                         dc      $d0c0
   90 00.00000F58+                             ;
   90 00.00000F58+0FFF0002                     dc      all,2
   90 00.00000F5C+039F                         dc.b    (0<<4)+3,(9<<4)+15
   90 00.00000F5E+810F                         dc      (8<<12)+wordlong
   90 00.00000F60+00000000                     dc.l    0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 27
ASMMAC


   90 00.00000F64+0000                         dc      0
   90 00.00000F66+                     n_004   ;
   90 00.00000F66                              endm
   91 00.00000F66                      
   92 00.00000F66                      opaddq  a       ADDQ,$5000,imm,$1ff,15,15,0,3,6,sall,0,1
   92 00.00000F66+00000F82                     dc.l    n_005
   92 00.00000F6A+0040                         dc      tnum
   92   =00000041+                     tnum    set     tnum+1
   92 00.00000F6C+414444510000                 dc.b    'ADDQ',0,0
   92 00.00000F72+                             even
   92 00.00000F72+5000                         dc      $5000
   92 00.00000F74+                             ;
   92 00.00000F74+080001FF                     dc      imm,$1ff
   92 00.00000F78+FF03                         dc.b    (15<<4)+15,(0<<4)+3
   92 00.00000F7A+6210                         dc      (6<<12)+sall
   92 00.00000F7C+00000000                     dc.l    0
   92 00.00000F80+0001                         dc      1
   92 00.00000F82+                     n_005   ;
   92 00.00000F82                              endm
   93 00.00000F82                      
   94 00.00000F82                      opaddx  a       ADDX,$d100,dn^pan,dn^pan,0,15,9,15,6,sall,abcdchk,0
   94 00.00000F82+00000F9E                     dc.l    n_006
   94 00.00000F86+0041                         dc      tnum
   94   =00000042+                     tnum    set     tnum+1
   94 00.00000F88+414444580000                 dc.b    'ADDX',0,0
   94 00.00000F8E+                             even
   94 00.00000F8E+D100                         dc      $d100
   94 00.00000F90+                             ;
   94 00.00000F90+00110011                     dc      dn^pan,dn^pan
   94 00.00000F94+0F9F                         dc.b    (0<<4)+15,(9<<4)+15
   94 00.00000F96+6210                         dc      (6<<12)+sall
   94 00.00000F98+00001E0A                     dc.l    abcdchk
   94 00.00000F9C+0000                         dc      0
   94 00.00000F9E+                     n_006   ;
   94 00.00000F9E                              endm
   95 00.00000F9E                      
   96 00.00000F9E                      opand   a       AND,$c000,all&nan,$1fd,0,3,9,15,6,sall,addchk,0
   96 00.00000F9E+00000FBA                     dc.l    n_007
   96 00.00000FA2+0042                         dc      tnum
   96   =00000043+                     tnum    set     tnum+1
   96 00.00000FA4+414E440000                   dc.b    'AND',0,0
   96 00.00000FAA+                             even
   96 00.00000FAA+C000                         dc      $c000
   96 00.00000FAC+                             ;
   96 00.00000FAC+0FFD01FD                     dc      all&nan,$1fd
   96 00.00000FB0+039F                         dc.b    (0<<4)+3,(9<<4)+15
   96 00.00000FB2+6210                         dc      (6<<12)+sall
   96 00.00000FB4+00001E1E                     dc.l    addchk
   96 00.00000FB8+0000                         dc      0
   96 00.00000FBA+                     n_007   ;
   96 00.00000FBA                              endm
   97 00.00000FBA                      
   98 00.00000FBA                      opandi  a       ANDI,$200,imm,$1fd^ccr^sr^imm,15,15,0,3,6,sall,andichk,0
   98 00.00000FBA+00000FD6                     dc.l    n_008
   98 00.00000FBE+0043                         dc      tnum
   98   =00000044+                     tnum    set     tnum+1
   98 00.00000FC0+414E44490000                 dc.b    'ANDI',0,0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 28
ASMMAC


   98 00.00000FC6+                             even
   98 00.00000FC6+0200                         dc      $200
   98 00.00000FC8+                             ;
   98 00.00000FC8+080039FD                     dc      imm,$1fd^ccr^sr^imm
   98 00.00000FCC+FF03                         dc.b    (15<<4)+15,(0<<4)+3
   98 00.00000FCE+6210                         dc      (6<<12)+sall
   98 00.00000FD0+00001E34                     dc.l    andichk
   98 00.00000FD4+0000                         dc      0
   98 00.00000FD6+                     n_008   ;
   98 00.00000FD6                              endm
   99 00.00000FD6                      
  100 00.00000FD6                      opasl   a       ASL,$e100,imm^$1fd,1,15,15,15,15,15,sall,aslchk,1
  100 00.00000FD6+00000FF2                     dc.l    n_009
  100 00.00000FDA+0044                         dc      tnum
  100   =00000045+                     tnum    set     tnum+1
  100 00.00000FDC+41534C0000                   dc.b    'ASL',0,0
  100 00.00000FE2+                             even
  100 00.00000FE2+E100                         dc      $e100
  100 00.00000FE4+                             ;
  100 00.00000FE4+09FD0001                     dc      imm^$1fd,1
  100 00.00000FE8+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  100 00.00000FEA+F210                         dc      (15<<12)+sall
  100 00.00000FEC+00001DA4                     dc.l    aslchk
  100 00.00000FF0+0001                         dc      1
  100 00.00000FF2+                     n_009   ;
  100 00.00000FF2                              endm
  101 00.00000FF2                      
  102 00.00000FF2                      opasr   a       ASR,$e000,imm^$1fd,1,15,15,15,15,15,sall,aslchk,1
  102 00.00000FF2+0000100E                     dc.l    n_010
  102 00.00000FF6+0045                         dc      tnum
  102   =00000046+                     tnum    set     tnum+1
  102 00.00000FF8+4153520000                   dc.b    'ASR',0,0
  102 00.00000FFE+                             even
  102 00.00000FFE+E000                         dc      $e000
  102 00.00001000+                             ;
  102 00.00001000+09FD0001                     dc      imm^$1fd,1
  102 00.00001004+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  102 00.00001006+F210                         dc      (15<<12)+sall
  102 00.00001008+00001DA4                     dc.l    aslchk
  102 00.0000100C+0001                         dc      1
  102 00.0000100E+                     n_010   ;
  102 00.0000100E                              endm
  103 00.0000100E                      
  104 00.0000100E                      opbcc   a       BCC,$6400,dpc,0,15,15,15,15,15,0,0,2
  104 00.0000100E+0000102A                     dc.l    n_011
  104 00.00001012+0046                         dc      tnum
  104   =00000047+                     tnum    set     tnum+1
  104 00.00001014+4243430000                   dc.b    'BCC',0,0
  104 00.0000101A+                             even
  104 00.0000101A+6400                         dc      $6400
  104 00.0000101C+                             ;
  104 00.0000101C+02000000                     dc      dpc,0
  104 00.00001020+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  104 00.00001022+F000                         dc      (15<<12)+0
  104 00.00001024+00000000                     dc.l    0
  104 00.00001028+0002                         dc      2
  104 00.0000102A+                     n_011   ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 29
ASMMAC


  104 00.0000102A                              endm
  105 00.0000102A                      
  106 00.0000102A                      opbcs   a       BCS,$6500,dpc,0,15,15,15,15,15,0,0,2
  106 00.0000102A+00001046                     dc.l    n_012
  106 00.0000102E+0047                         dc      tnum
  106   =00000048+                     tnum    set     tnum+1
  106 00.00001030+4243530000                   dc.b    'BCS',0,0
  106 00.00001036+                             even
  106 00.00001036+6500                         dc      $6500
  106 00.00001038+                             ;
  106 00.00001038+02000000                     dc      dpc,0
  106 00.0000103C+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  106 00.0000103E+F000                         dc      (15<<12)+0
  106 00.00001040+00000000                     dc.l    0
  106 00.00001044+0002                         dc      2
  106 00.00001046+                     n_012   ;
  106 00.00001046                              endm
  107 00.00001046                      
  108 00.00001046                      opbeq   a       BEQ,$6700,dpc,0,15,15,15,15,15,0,0,2
  108 00.00001046+00001062                     dc.l    n_013
  108 00.0000104A+0048                         dc      tnum
  108   =00000049+                     tnum    set     tnum+1
  108 00.0000104C+4245510000                   dc.b    'BEQ',0,0
  108 00.00001052+                             even
  108 00.00001052+6700                         dc      $6700
  108 00.00001054+                             ;
  108 00.00001054+02000000                     dc      dpc,0
  108 00.00001058+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  108 00.0000105A+F000                         dc      (15<<12)+0
  108 00.0000105C+00000000                     dc.l    0
  108 00.00001060+0002                         dc      2
  108 00.00001062+                     n_013   ;
  108 00.00001062                              endm
  109 00.00001062                      
  110 00.00001062                      opbge   a       BGE,$6C00,dpc,0,15,15,15,15,15,0,0,2
  110 00.00001062+0000107E                     dc.l    n_014
  110 00.00001066+0049                         dc      tnum
  110   =0000004A+                     tnum    set     tnum+1
  110 00.00001068+4247450000                   dc.b    'BGE',0,0
  110 00.0000106E+                             even
  110 00.0000106E+6C00                         dc      $6C00
  110 00.00001070+                             ;
  110 00.00001070+02000000                     dc      dpc,0
  110 00.00001074+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  110 00.00001076+F000                         dc      (15<<12)+0
  110 00.00001078+00000000                     dc.l    0
  110 00.0000107C+0002                         dc      2
  110 00.0000107E+                     n_014   ;
  110 00.0000107E                              endm
  111 00.0000107E                      
  112 00.0000107E                      opbgt   a       BGT,$6E00,dpc,0,15,15,15,15,15,0,0,2
  112 00.0000107E+0000109A                     dc.l    n_015
  112 00.00001082+004A                         dc      tnum
  112   =0000004B+                     tnum    set     tnum+1
  112 00.00001084+4247540000                   dc.b    'BGT',0,0
  112 00.0000108A+                             even
  112 00.0000108A+6E00                         dc      $6E00
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 30
ASMMAC


  112 00.0000108C+                             ;
  112 00.0000108C+02000000                     dc      dpc,0
  112 00.00001090+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  112 00.00001092+F000                         dc      (15<<12)+0
  112 00.00001094+00000000                     dc.l    0
  112 00.00001098+0002                         dc      2
  112 00.0000109A+                     n_015   ;
  112 00.0000109A                              endm
  113 00.0000109A                      
  114 00.0000109A                      opbhi   a       BHI,$6200,dpc,0,15,15,15,15,15,0,0,2
  114 00.0000109A+000010B6                     dc.l    n_016
  114 00.0000109E+004B                         dc      tnum
  114   =0000004C+                     tnum    set     tnum+1
  114 00.000010A0+4248490000                   dc.b    'BHI',0,0
  114 00.000010A6+                             even
  114 00.000010A6+6200                         dc      $6200
  114 00.000010A8+                             ;
  114 00.000010A8+02000000                     dc      dpc,0
  114 00.000010AC+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  114 00.000010AE+F000                         dc      (15<<12)+0
  114 00.000010B0+00000000                     dc.l    0
  114 00.000010B4+0002                         dc      2
  114 00.000010B6+                     n_016   ;
  114 00.000010B6                              endm
  115 00.000010B6                      
  116 00.000010B6                      opble   a       BLE,$6F00,dpc,0,15,15,15,15,15,0,0,2
  116 00.000010B6+000010D2                     dc.l    n_017
  116 00.000010BA+004C                         dc      tnum
  116   =0000004D+                     tnum    set     tnum+1
  116 00.000010BC+424C450000                   dc.b    'BLE',0,0
  116 00.000010C2+                             even
  116 00.000010C2+6F00                         dc      $6F00
  116 00.000010C4+                             ;
  116 00.000010C4+02000000                     dc      dpc,0
  116 00.000010C8+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  116 00.000010CA+F000                         dc      (15<<12)+0
  116 00.000010CC+00000000                     dc.l    0
  116 00.000010D0+0002                         dc      2
  116 00.000010D2+                     n_017   ;
  116 00.000010D2                              endm
  117 00.000010D2                      
  118 00.000010D2                      opbls   a       BLS,$6300,dpc,0,15,15,15,15,15,0,0,2
  118 00.000010D2+000010EE                     dc.l    n_018
  118 00.000010D6+004D                         dc      tnum
  118   =0000004E+                     tnum    set     tnum+1
  118 00.000010D8+424C530000                   dc.b    'BLS',0,0
  118 00.000010DE+                             even
  118 00.000010DE+6300                         dc      $6300
  118 00.000010E0+                             ;
  118 00.000010E0+02000000                     dc      dpc,0
  118 00.000010E4+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  118 00.000010E6+F000                         dc      (15<<12)+0
  118 00.000010E8+00000000                     dc.l    0
  118 00.000010EC+0002                         dc      2
  118 00.000010EE+                     n_018   ;
  118 00.000010EE                              endm
  119 00.000010EE                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 31
ASMMAC


  120 00.000010EE                      opblt   a       BLT,$6D00,dpc,0,15,15,15,15,15,0,0,2
  120 00.000010EE+0000110A                     dc.l    n_019
  120 00.000010F2+004E                         dc      tnum
  120   =0000004F+                     tnum    set     tnum+1
  120 00.000010F4+424C540000                   dc.b    'BLT',0,0
  120 00.000010FA+                             even
  120 00.000010FA+6D00                         dc      $6D00
  120 00.000010FC+                             ;
  120 00.000010FC+02000000                     dc      dpc,0
  120 00.00001100+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  120 00.00001102+F000                         dc      (15<<12)+0
  120 00.00001104+00000000                     dc.l    0
  120 00.00001108+0002                         dc      2
  120 00.0000110A+                     n_019   ;
  120 00.0000110A                              endm
  121 00.0000110A                      
  122 00.0000110A                      opbmi   a       BMI,$6B00,dpc,0,15,15,15,15,15,0,0,2
  122 00.0000110A+00001126                     dc.l    n_020
  122 00.0000110E+004F                         dc      tnum
  122   =00000050+                     tnum    set     tnum+1
  122 00.00001110+424D490000                   dc.b    'BMI',0,0
  122 00.00001116+                             even
  122 00.00001116+6B00                         dc      $6B00
  122 00.00001118+                             ;
  122 00.00001118+02000000                     dc      dpc,0
  122 00.0000111C+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  122 00.0000111E+F000                         dc      (15<<12)+0
  122 00.00001120+00000000                     dc.l    0
  122 00.00001124+0002                         dc      2
  122 00.00001126+                     n_020   ;
  122 00.00001126                              endm
  123 00.00001126                      
  124 00.00001126                      opbne   a       BNE,$6600,dpc,0,15,15,15,15,15,0,0,2
  124 00.00001126+00001142                     dc.l    n_021
  124 00.0000112A+0050                         dc      tnum
  124   =00000051+                     tnum    set     tnum+1
  124 00.0000112C+424E450000                   dc.b    'BNE',0,0
  124 00.00001132+                             even
  124 00.00001132+6600                         dc      $6600
  124 00.00001134+                             ;
  124 00.00001134+02000000                     dc      dpc,0
  124 00.00001138+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  124 00.0000113A+F000                         dc      (15<<12)+0
  124 00.0000113C+00000000                     dc.l    0
  124 00.00001140+0002                         dc      2
  124 00.00001142+                     n_021   ;
  124 00.00001142                              endm
  125 00.00001142                      
  126 00.00001142                      opbpl   a       BPL,$6A00,dpc,0,15,15,15,15,15,0,0,2
  126 00.00001142+0000115E                     dc.l    n_022
  126 00.00001146+0051                         dc      tnum
  126   =00000052+                     tnum    set     tnum+1
  126 00.00001148+42504C0000                   dc.b    'BPL',0,0
  126 00.0000114E+                             even
  126 00.0000114E+6A00                         dc      $6A00
  126 00.00001150+                             ;
  126 00.00001150+02000000                     dc      dpc,0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 32
ASMMAC


  126 00.00001154+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  126 00.00001156+F000                         dc      (15<<12)+0
  126 00.00001158+00000000                     dc.l    0
  126 00.0000115C+0002                         dc      2
  126 00.0000115E+                     n_022   ;
  126 00.0000115E                              endm
  127 00.0000115E                      
  128 00.0000115E                      opbvc   a       BVC,$6800,dpc,0,15,15,15,15,15,0,0,2
  128 00.0000115E+0000117A                     dc.l    n_023
  128 00.00001162+0052                         dc      tnum
  128   =00000053+                     tnum    set     tnum+1
  128 00.00001164+4256430000                   dc.b    'BVC',0,0
  128 00.0000116A+                             even
  128 00.0000116A+6800                         dc      $6800
  128 00.0000116C+                             ;
  128 00.0000116C+02000000                     dc      dpc,0
  128 00.00001170+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  128 00.00001172+F000                         dc      (15<<12)+0
  128 00.00001174+00000000                     dc.l    0
  128 00.00001178+0002                         dc      2
  128 00.0000117A+                     n_023   ;
  128 00.0000117A                              endm
  129 00.0000117A                      
  130 00.0000117A                      opbvs   a       BVS,$6900,dpc,0,15,15,15,15,15,0,0,2
  130 00.0000117A+00001196                     dc.l    n_024
  130 00.0000117E+0053                         dc      tnum
  130   =00000054+                     tnum    set     tnum+1
  130 00.00001180+4256530000                   dc.b    'BVS',0,0
  130 00.00001186+                             even
  130 00.00001186+6900                         dc      $6900
  130 00.00001188+                             ;
  130 00.00001188+02000000                     dc      dpc,0
  130 00.0000118C+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  130 00.0000118E+F000                         dc      (15<<12)+0
  130 00.00001190+00000000                     dc.l    0
  130 00.00001194+0002                         dc      2
  130 00.00001196+                     n_024   ;
  130 00.00001196                              endm
  131 00.00001196                      
  132 00.00001196                      opbchg  a       BCHG,$140,imm^dn,$1fd,15,15,0,3,15,sall,bitchk,0
  132 00.00001196+000011B2                     dc.l    n_025
  132 00.0000119A+0054                         dc      tnum
  132   =00000055+                     tnum    set     tnum+1
  132 00.0000119C+424348470000                 dc.b    'BCHG',0,0
  132 00.000011A2+                             even
  132 00.000011A2+0140                         dc      $140
  132 00.000011A4+                             ;
  132 00.000011A4+080101FD                     dc      imm^dn,$1fd
  132 00.000011A8+FF03                         dc.b    (15<<4)+15,(0<<4)+3
  132 00.000011AA+F210                         dc      (15<<12)+sall
  132 00.000011AC+00001D6C                     dc.l    bitchk
  132 00.000011B0+0000                         dc      0
  132 00.000011B2+                     n_025   ;
  132 00.000011B2                              endm
  133 00.000011B2                      
  134 00.000011B2                      opbclr  a       BCLR,$180,imm^dn,$1fd,15,15,0,3,15,sall,bitchk,0
  134 00.000011B2+000011CE                     dc.l    n_026
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 33
ASMMAC


  134 00.000011B6+0055                         dc      tnum
  134   =00000056+                     tnum    set     tnum+1
  134 00.000011B8+42434C520000                 dc.b    'BCLR',0,0
  134 00.000011BE+                             even
  134 00.000011BE+0180                         dc      $180
  134 00.000011C0+                             ;
  134 00.000011C0+080101FD                     dc      imm^dn,$1fd
  134 00.000011C4+FF03                         dc.b    (15<<4)+15,(0<<4)+3
  134 00.000011C6+F210                         dc      (15<<12)+sall
  134 00.000011C8+00001D6C                     dc.l    bitchk
  134 00.000011CC+0000                         dc      0
  134 00.000011CE+                     n_026   ;
  134 00.000011CE                              endm
  135 00.000011CE                      
  136 00.000011CE                      opbset  a       BSET,$1c0,imm^dn,$1fd,15,15,0,3,15,sall,bitchk,0
  136 00.000011CE+000011EA                     dc.l    n_027
  136 00.000011D2+0056                         dc      tnum
  136   =00000057+                     tnum    set     tnum+1
  136 00.000011D4+425345540000                 dc.b    'BSET',0,0
  136 00.000011DA+                             even
  136 00.000011DA+01C0                         dc      $1c0
  136 00.000011DC+                             ;
  136 00.000011DC+080101FD                     dc      imm^dn,$1fd
  136 00.000011E0+FF03                         dc.b    (15<<4)+15,(0<<4)+3
  136 00.000011E2+F210                         dc      (15<<12)+sall
  136 00.000011E4+00001D6C                     dc.l    bitchk
  136 00.000011E8+0000                         dc      0
  136 00.000011EA+                     n_027   ;
  136 00.000011EA                              endm
  137 00.000011EA                      
  138 00.000011EA                      opbtst  a       BTST,$100,imm^dn,$1fd,15,15,0,3,15,sall,bitchk,0
  138 00.000011EA+00001206                     dc.l    n_028
  138 00.000011EE+0057                         dc      tnum
  138   =00000058+                     tnum    set     tnum+1
  138 00.000011F0+425453540000                 dc.b    'BTST',0,0
  138 00.000011F6+                             even
  138 00.000011F6+0100                         dc      $100
  138 00.000011F8+                             ;
  138 00.000011F8+080101FD                     dc      imm^dn,$1fd
  138 00.000011FC+FF03                         dc.b    (15<<4)+15,(0<<4)+3
  138 00.000011FE+F210                         dc      (15<<12)+sall
  138 00.00001200+00001D6C                     dc.l    bitchk
  138 00.00001204+0000                         dc      0
  138 00.00001206+                     n_028   ;
  138 00.00001206                              endm
  139 00.00001206                      
  140 00.00001206                      opbra   a       BRA,$6000,dpc,0,15,15,15,15,15,nosz,0,2
  140 00.00001206+00001222                     dc.l    n_029
  140 00.0000120A+0058                         dc      tnum
  140   =00000059+                     tnum    set     tnum+1
  140 00.0000120C+4252410000                   dc.b    'BRA',0,0
  140 00.00001212+                             even
  140 00.00001212+6000                         dc      $6000
  140 00.00001214+                             ;
  140 00.00001214+02000000                     dc      dpc,0
  140 00.00001218+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  140 00.0000121A+FFFF                         dc      (15<<12)+nosz
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 34
ASMMAC


  140 00.0000121C+00000000                     dc.l    0
  140 00.00001220+0002                         dc      2
  140 00.00001222+                     n_029   ;
  140 00.00001222                              endm
  141 00.00001222                      
  142 00.00001222                      opbsr   a       BSR,$6100,dpc,0,15,15,15,15,15,nosz,0,2
  142 00.00001222+0000123E                     dc.l    n_030
  142 00.00001226+0059                         dc      tnum
  142   =0000005A+                     tnum    set     tnum+1
  142 00.00001228+4253520000                   dc.b    'BSR',0,0
  142 00.0000122E+                             even
  142 00.0000122E+6100                         dc      $6100
  142 00.00001230+                             ;
  142 00.00001230+02000000                     dc      dpc,0
  142 00.00001234+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  142 00.00001236+FFFF                         dc      (15<<12)+nosz
  142 00.00001238+00000000                     dc.l    0
  142 00.0000123C+0002                         dc      2
  142 00.0000123E+                     n_030   ;
  142 00.0000123E                              endm
  143 00.0000123E                      
  144 00.0000123E                      opchk   a       CHK,$4180,$ffd,dn,0,3,9,15,15,word,0,0
  144 00.0000123E+0000125A                     dc.l    n_031
  144 00.00001242+005A                         dc      tnum
  144   =0000005B+                     tnum    set     tnum+1
  144 00.00001244+43484B0000                   dc.b    'CHK',0,0
  144 00.0000124A+                             even
  144 00.0000124A+4180                         dc      $4180
  144 00.0000124C+                             ;
  144 00.0000124C+0FFD0001                     dc      $ffd,dn
  144 00.00001250+039F                         dc.b    (0<<4)+3,(9<<4)+15
  144 00.00001252+FF1F                         dc      (15<<12)+word
  144 00.00001254+00000000                     dc.l    0
  144 00.00001258+0000                         dc      0
  144 00.0000125A+                     n_031   ;
  144 00.0000125A                              endm
  145 00.0000125A                      
  146 00.0000125A                      opclr   a       CLR,$4200,$1fd,0,0,3,15,15,6,sall,0,0
  146 00.0000125A+00001276                     dc.l    n_032
  146 00.0000125E+005B                         dc      tnum
  146   =0000005C+                     tnum    set     tnum+1
  146 00.00001260+434C520000                   dc.b    'CLR',0,0
  146 00.00001266+                             even
  146 00.00001266+4200                         dc      $4200
  146 00.00001268+                             ;
  146 00.00001268+01FD0000                     dc      $1fd,0
  146 00.0000126C+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  146 00.0000126E+6210                         dc      (6<<12)+sall
  146 00.00001270+00000000                     dc.l    0
  146 00.00001274+0000                         dc      0
  146 00.00001276+                     n_032   ;
  146 00.00001276                              endm
  147 00.00001276                      
  148 00.00001276                      opcmp   a       CMP,$b000,all,dn,0,3,9,15,6,sall,0,$8003
  148 00.00001276+00001292                     dc.l    n_033
  148 00.0000127A+005C                         dc      tnum
  148   =0000005D+                     tnum    set     tnum+1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 35
ASMMAC


  148 00.0000127C+434D500000                   dc.b    'CMP',0,0
  148 00.00001282+                             even
  148 00.00001282+B000                         dc      $b000
  148 00.00001284+                             ;
  148 00.00001284+0FFF0001                     dc      all,dn
  148 00.00001288+039F                         dc.b    (0<<4)+3,(9<<4)+15
  148 00.0000128A+6210                         dc      (6<<12)+sall
  148 00.0000128C+00000000                     dc.l    0
  148 00.00001290+8003                         dc      $8003
  148 00.00001292+                     n_033   ;
  148 00.00001292                              endm
  149 00.00001292                      
  150 00.00001292                      opcmpi  a       CMPI,$c00,imm,$1fd,15,15,0,3,6,sall,0,0
  150 00.00001292+000012AE                     dc.l    n_034
  150 00.00001296+005D                         dc      tnum
  150   =0000005E+                     tnum    set     tnum+1
  150 00.00001298+434D50490000                 dc.b    'CMPI',0,0
  150 00.0000129E+                             even
  150 00.0000129E+0C00                         dc      $c00
  150 00.000012A0+                             ;
  150 00.000012A0+080001FD                     dc      imm,$1fd
  150 00.000012A4+FF03                         dc.b    (15<<4)+15,(0<<4)+3
  150 00.000012A6+6210                         dc      (6<<12)+sall
  150 00.000012A8+00000000                     dc.l    0
  150 00.000012AC+0000                         dc      0
  150 00.000012AE+                     n_034   ;
  150 00.000012AE                              endm
  151 00.000012AE                      
  152 00.000012AE                      opcmpa  a       CMPA,$b0c0,all,an,0,3,9,15,8,wordlong,0,0
  152 00.000012AE+000012CA                     dc.l    n_035
  152 00.000012B2+005E                         dc      tnum
  152   =0000005F+                     tnum    set     tnum+1
  152 00.000012B4+434D50410000                 dc.b    'CMPA',0,0
  152 00.000012BA+                             even
  152 00.000012BA+B0C0                         dc      $b0c0
  152 00.000012BC+                             ;
  152 00.000012BC+0FFF0002                     dc      all,an
  152 00.000012C0+039F                         dc.b    (0<<4)+3,(9<<4)+15
  152 00.000012C2+810F                         dc      (8<<12)+wordlong
  152 00.000012C4+00000000                     dc.l    0
  152 00.000012C8+0000                         dc      0
  152 00.000012CA+                     n_035   ;
  152 00.000012CA                              endm
  153 00.000012CA                      
  154 00.000012CA                      opcmpm  a       CMPM,$b108,anp,anp,0,15,9,15,6,sall,0,0
  154 00.000012CA+000012E6                     dc.l    n_036
  154 00.000012CE+005F                         dc      tnum
  154   =00000060+                     tnum    set     tnum+1
  154 00.000012D0+434D504D0000                 dc.b    'CMPM',0,0
  154 00.000012D6+                             even
  154 00.000012D6+B108                         dc      $b108
  154 00.000012D8+                             ;
  154 00.000012D8+00080008                     dc      anp,anp
  154 00.000012DC+0F9F                         dc.b    (0<<4)+15,(9<<4)+15
  154 00.000012DE+6210                         dc      (6<<12)+sall
  154 00.000012E0+00000000                     dc.l    0
  154 00.000012E4+0000                         dc      0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 36
ASMMAC


  154 00.000012E6+                     n_036   ;
  154 00.000012E6                              endm
  155 00.000012E6                      
  156 00.000012E6                      opdbcc  a       DBCC,$54C8,dn,dpc,15,15,15,15,15,nosz,0,5
  156 00.000012E6+00001302                     dc.l    n_037
  156 00.000012EA+0060                         dc      tnum
  156   =00000061+                     tnum    set     tnum+1
  156 00.000012EC+444243430000                 dc.b    'DBCC',0,0
  156 00.000012F2+                             even
  156 00.000012F2+54C8                         dc      $54C8
  156 00.000012F4+                             ;
  156 00.000012F4+00010200                     dc      dn,dpc
  156 00.000012F8+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  156 00.000012FA+FFFF                         dc      (15<<12)+nosz
  156 00.000012FC+00000000                     dc.l    0
  156 00.00001300+0005                         dc      5
  156 00.00001302+                     n_037   ;
  156 00.00001302                              endm
  157 00.00001302                      
  158 00.00001302                      opdbcs  a       DBCS,$55C8,dn,dpc,15,15,15,15,15,nosz,0,5
  158 00.00001302+0000131E                     dc.l    n_038
  158 00.00001306+0061                         dc      tnum
  158   =00000062+                     tnum    set     tnum+1
  158 00.00001308+444243530000                 dc.b    'DBCS',0,0
  158 00.0000130E+                             even
  158 00.0000130E+55C8                         dc      $55C8
  158 00.00001310+                             ;
  158 00.00001310+00010200                     dc      dn,dpc
  158 00.00001314+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  158 00.00001316+FFFF                         dc      (15<<12)+nosz
  158 00.00001318+00000000                     dc.l    0
  158 00.0000131C+0005                         dc      5
  158 00.0000131E+                     n_038   ;
  158 00.0000131E                              endm
  159 00.0000131E                      
  160 00.0000131E                      opdbeq  a       DBEQ,$57C8,dn,dpc,15,15,15,15,15,nosz,0,5
  160 00.0000131E+0000133A                     dc.l    n_039
  160 00.00001322+0062                         dc      tnum
  160   =00000063+                     tnum    set     tnum+1
  160 00.00001324+444245510000                 dc.b    'DBEQ',0,0
  160 00.0000132A+                             even
  160 00.0000132A+57C8                         dc      $57C8
  160 00.0000132C+                             ;
  160 00.0000132C+00010200                     dc      dn,dpc
  160 00.00001330+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  160 00.00001332+FFFF                         dc      (15<<12)+nosz
  160 00.00001334+00000000                     dc.l    0
  160 00.00001338+0005                         dc      5
  160 00.0000133A+                     n_039   ;
  160 00.0000133A                              endm
  161 00.0000133A                      
  162 00.0000133A                      opdbge  a       DBGE,$5CC8,dn,dpc,15,15,15,15,15,nosz,0,5
  162 00.0000133A+00001356                     dc.l    n_040
  162 00.0000133E+0063                         dc      tnum
  162   =00000064+                     tnum    set     tnum+1
  162 00.00001340+444247450000                 dc.b    'DBGE',0,0
  162 00.00001346+                             even
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 37
ASMMAC


  162 00.00001346+5CC8                         dc      $5CC8
  162 00.00001348+                             ;
  162 00.00001348+00010200                     dc      dn,dpc
  162 00.0000134C+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  162 00.0000134E+FFFF                         dc      (15<<12)+nosz
  162 00.00001350+00000000                     dc.l    0
  162 00.00001354+0005                         dc      5
  162 00.00001356+                     n_040   ;
  162 00.00001356                              endm
  163 00.00001356                      
  164 00.00001356                      opdbgt  a       DBGT,$5EC8,dn,dpc,15,15,15,15,15,nosz,0,5
  164 00.00001356+00001372                     dc.l    n_041
  164 00.0000135A+0064                         dc      tnum
  164   =00000065+                     tnum    set     tnum+1
  164 00.0000135C+444247540000                 dc.b    'DBGT',0,0
  164 00.00001362+                             even
  164 00.00001362+5EC8                         dc      $5EC8
  164 00.00001364+                             ;
  164 00.00001364+00010200                     dc      dn,dpc
  164 00.00001368+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  164 00.0000136A+FFFF                         dc      (15<<12)+nosz
  164 00.0000136C+00000000                     dc.l    0
  164 00.00001370+0005                         dc      5
  164 00.00001372+                     n_041   ;
  164 00.00001372                              endm
  165 00.00001372                      
  166 00.00001372                      opdbhi  a       DBHI,$52C8,dn,dpc,15,15,15,15,15,nosz,0,5
  166 00.00001372+0000138E                     dc.l    n_042
  166 00.00001376+0065                         dc      tnum
  166   =00000066+                     tnum    set     tnum+1
  166 00.00001378+444248490000                 dc.b    'DBHI',0,0
  166 00.0000137E+                             even
  166 00.0000137E+52C8                         dc      $52C8
  166 00.00001380+                             ;
  166 00.00001380+00010200                     dc      dn,dpc
  166 00.00001384+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  166 00.00001386+FFFF                         dc      (15<<12)+nosz
  166 00.00001388+00000000                     dc.l    0
  166 00.0000138C+0005                         dc      5
  166 00.0000138E+                     n_042   ;
  166 00.0000138E                              endm
  167 00.0000138E                      
  168 00.0000138E                      opdble  a       DBLE,$5FC8,dn,dpc,15,15,15,15,15,nosz,0,5
  168 00.0000138E+000013AA                     dc.l    n_043
  168 00.00001392+0066                         dc      tnum
  168   =00000067+                     tnum    set     tnum+1
  168 00.00001394+44424C450000                 dc.b    'DBLE',0,0
  168 00.0000139A+                             even
  168 00.0000139A+5FC8                         dc      $5FC8
  168 00.0000139C+                             ;
  168 00.0000139C+00010200                     dc      dn,dpc
  168 00.000013A0+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  168 00.000013A2+FFFF                         dc      (15<<12)+nosz
  168 00.000013A4+00000000                     dc.l    0
  168 00.000013A8+0005                         dc      5
  168 00.000013AA+                     n_043   ;
  168 00.000013AA                              endm
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 38
ASMMAC


  169 00.000013AA                      
  170 00.000013AA                      opdbls  a       DBLS,$53C8,dn,dpc,15,15,15,15,15,nosz,0,5
  170 00.000013AA+000013C6                     dc.l    n_044
  170 00.000013AE+0067                         dc      tnum
  170   =00000068+                     tnum    set     tnum+1
  170 00.000013B0+44424C530000                 dc.b    'DBLS',0,0
  170 00.000013B6+                             even
  170 00.000013B6+53C8                         dc      $53C8
  170 00.000013B8+                             ;
  170 00.000013B8+00010200                     dc      dn,dpc
  170 00.000013BC+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  170 00.000013BE+FFFF                         dc      (15<<12)+nosz
  170 00.000013C0+00000000                     dc.l    0
  170 00.000013C4+0005                         dc      5
  170 00.000013C6+                     n_044   ;
  170 00.000013C6                              endm
  171 00.000013C6                      
  172 00.000013C6                      opdblt  a       DBLT,$5DC8,dn,dpc,15,15,15,15,15,nosz,0,5
  172 00.000013C6+000013E2                     dc.l    n_045
  172 00.000013CA+0068                         dc      tnum
  172   =00000069+                     tnum    set     tnum+1
  172 00.000013CC+44424C540000                 dc.b    'DBLT',0,0
  172 00.000013D2+                             even
  172 00.000013D2+5DC8                         dc      $5DC8
  172 00.000013D4+                             ;
  172 00.000013D4+00010200                     dc      dn,dpc
  172 00.000013D8+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  172 00.000013DA+FFFF                         dc      (15<<12)+nosz
  172 00.000013DC+00000000                     dc.l    0
  172 00.000013E0+0005                         dc      5
  172 00.000013E2+                     n_045   ;
  172 00.000013E2                              endm
  173 00.000013E2                      
  174 00.000013E2                      opdbmi  a       DBMI,$5BC8,dn,dpc,15,15,15,15,15,nosz,0,5
  174 00.000013E2+000013FE                     dc.l    n_046
  174 00.000013E6+0069                         dc      tnum
  174   =0000006A+                     tnum    set     tnum+1
  174 00.000013E8+44424D490000                 dc.b    'DBMI',0,0
  174 00.000013EE+                             even
  174 00.000013EE+5BC8                         dc      $5BC8
  174 00.000013F0+                             ;
  174 00.000013F0+00010200                     dc      dn,dpc
  174 00.000013F4+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  174 00.000013F6+FFFF                         dc      (15<<12)+nosz
  174 00.000013F8+00000000                     dc.l    0
  174 00.000013FC+0005                         dc      5
  174 00.000013FE+                     n_046   ;
  174 00.000013FE                              endm
  175 00.000013FE                      
  176 00.000013FE                      opdbne  a       DBNE,$56C8,dn,dpc,15,15,15,15,15,nosz,0,5
  176 00.000013FE+0000141A                     dc.l    n_047
  176 00.00001402+006A                         dc      tnum
  176   =0000006B+                     tnum    set     tnum+1
  176 00.00001404+44424E450000                 dc.b    'DBNE',0,0
  176 00.0000140A+                             even
  176 00.0000140A+56C8                         dc      $56C8
  176 00.0000140C+                             ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 39
ASMMAC


  176 00.0000140C+00010200                     dc      dn,dpc
  176 00.00001410+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  176 00.00001412+FFFF                         dc      (15<<12)+nosz
  176 00.00001414+00000000                     dc.l    0
  176 00.00001418+0005                         dc      5
  176 00.0000141A+                     n_047   ;
  176 00.0000141A                              endm
  177 00.0000141A                      
  178 00.0000141A                      opdbpl  a       DBPL,$5AC8,dn,dpc,15,15,15,15,15,nosz,0,5
  178 00.0000141A+00001436                     dc.l    n_048
  178 00.0000141E+006B                         dc      tnum
  178   =0000006C+                     tnum    set     tnum+1
  178 00.00001420+4442504C0000                 dc.b    'DBPL',0,0
  178 00.00001426+                             even
  178 00.00001426+5AC8                         dc      $5AC8
  178 00.00001428+                             ;
  178 00.00001428+00010200                     dc      dn,dpc
  178 00.0000142C+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  178 00.0000142E+FFFF                         dc      (15<<12)+nosz
  178 00.00001430+00000000                     dc.l    0
  178 00.00001434+0005                         dc      5
  178 00.00001436+                     n_048   ;
  178 00.00001436                              endm
  179 00.00001436                      
  180 00.00001436                      opdbvc  a       DBVC,$58C8,dn,dpc,15,15,15,15,15,nosz,0,5
  180 00.00001436+00001452                     dc.l    n_049
  180 00.0000143A+006C                         dc      tnum
  180   =0000006D+                     tnum    set     tnum+1
  180 00.0000143C+444256430000                 dc.b    'DBVC',0,0
  180 00.00001442+                             even
  180 00.00001442+58C8                         dc      $58C8
  180 00.00001444+                             ;
  180 00.00001444+00010200                     dc      dn,dpc
  180 00.00001448+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  180 00.0000144A+FFFF                         dc      (15<<12)+nosz
  180 00.0000144C+00000000                     dc.l    0
  180 00.00001450+0005                         dc      5
  180 00.00001452+                     n_049   ;
  180 00.00001452                              endm
  181 00.00001452                      
  182 00.00001452                      opdbvs  a       DBVS,$59C8,dn,dpc,15,15,15,15,15,nosz,0,5
  182 00.00001452+0000146E                     dc.l    n_050
  182 00.00001456+006D                         dc      tnum
  182   =0000006E+                     tnum    set     tnum+1
  182 00.00001458+444256530000                 dc.b    'DBVS',0,0
  182 00.0000145E+                             even
  182 00.0000145E+59C8                         dc      $59C8
  182 00.00001460+                             ;
  182 00.00001460+00010200                     dc      dn,dpc
  182 00.00001464+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  182 00.00001466+FFFF                         dc      (15<<12)+nosz
  182 00.00001468+00000000                     dc.l    0
  182 00.0000146C+0005                         dc      5
  182 00.0000146E+                     n_050   ;
  182 00.0000146E                              endm
  183 00.0000146E                      
  184 00.0000146E                      opdbf   a       DBF,$51c8,dn,dpc,15,15,15,15,15,nosz,0,5
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 40
ASMMAC


  184 00.0000146E+0000148A                     dc.l    n_051
  184 00.00001472+006E                         dc      tnum
  184   =0000006F+                     tnum    set     tnum+1
  184 00.00001474+4442460000                   dc.b    'DBF',0,0
  184 00.0000147A+                             even
  184 00.0000147A+51C8                         dc      $51c8
  184 00.0000147C+                             ;
  184 00.0000147C+00010200                     dc      dn,dpc
  184 00.00001480+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  184 00.00001482+FFFF                         dc      (15<<12)+nosz
  184 00.00001484+00000000                     dc.l    0
  184 00.00001488+0005                         dc      5
  184 00.0000148A+                     n_051   ;
  184 00.0000148A                              endm
  185 00.0000148A                      
  186 00.0000148A                      opdra   a       DBRA,$51c8,dn,dpc,15,15,15,15,15,nosz,0,5
  186 00.0000148A+000014A6                     dc.l    n_052
  186 00.0000148E+006F                         dc      tnum
  186   =00000070+                     tnum    set     tnum+1
  186 00.00001490+444252410000                 dc.b    'DBRA',0,0
  186 00.00001496+                             even
  186 00.00001496+51C8                         dc      $51c8
  186 00.00001498+                             ;
  186 00.00001498+00010200                     dc      dn,dpc
  186 00.0000149C+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  186 00.0000149E+FFFF                         dc      (15<<12)+nosz
  186 00.000014A0+00000000                     dc.l    0
  186 00.000014A4+0005                         dc      5
  186 00.000014A6+                     n_052   ;
  186 00.000014A6                              endm
  187 00.000014A6                      
  188 00.000014A6                      opdbt   a       DBT,$50c8,dn,dpc,15,15,15,15,15,nosz,0,5
  188 00.000014A6+000014C2                     dc.l    n_053
  188 00.000014AA+0070                         dc      tnum
  188   =00000071+                     tnum    set     tnum+1
  188 00.000014AC+4442540000                   dc.b    'DBT',0,0
  188 00.000014B2+                             even
  188 00.000014B2+50C8                         dc      $50c8
  188 00.000014B4+                             ;
  188 00.000014B4+00010200                     dc      dn,dpc
  188 00.000014B8+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  188 00.000014BA+FFFF                         dc      (15<<12)+nosz
  188 00.000014BC+00000000                     dc.l    0
  188 00.000014C0+0005                         dc      5
  188 00.000014C2+                     n_053   ;
  188 00.000014C2                              endm
  189 00.000014C2                      
  190 00.000014C2                      opdivs  a       DIVS,$81c0,$ffd,dn,0,3,9,15,15,word,0,0
  190 00.000014C2+000014DE                     dc.l    n_054
  190 00.000014C6+0071                         dc      tnum
  190   =00000072+                     tnum    set     tnum+1
  190 00.000014C8+444956530000                 dc.b    'DIVS',0,0
  190 00.000014CE+                             even
  190 00.000014CE+81C0                         dc      $81c0
  190 00.000014D0+                             ;
  190 00.000014D0+0FFD0001                     dc      $ffd,dn
  190 00.000014D4+039F                         dc.b    (0<<4)+3,(9<<4)+15
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 41
ASMMAC


  190 00.000014D6+FF1F                         dc      (15<<12)+word
  190 00.000014D8+00000000                     dc.l    0
  190 00.000014DC+0000                         dc      0
  190 00.000014DE+                     n_054   ;
  190 00.000014DE                              endm
  191 00.000014DE                      
  192 00.000014DE                      opdivu  a       DIVU,$80c0,$ffd,dn,0,3,9,15,15,word,0,0
  192 00.000014DE+000014FA                     dc.l    n_055
  192 00.000014E2+0072                         dc      tnum
  192   =00000073+                     tnum    set     tnum+1
  192 00.000014E4+444956550000                 dc.b    'DIVU',0,0
  192 00.000014EA+                             even
  192 00.000014EA+80C0                         dc      $80c0
  192 00.000014EC+                             ;
  192 00.000014EC+0FFD0001                     dc      $ffd,dn
  192 00.000014F0+039F                         dc.b    (0<<4)+3,(9<<4)+15
  192 00.000014F2+FF1F                         dc      (15<<12)+word
  192 00.000014F4+00000000                     dc.l    0
  192 00.000014F8+0000                         dc      0
  192 00.000014FA+                     n_055   ;
  192 00.000014FA                              endm
  193 00.000014FA                      
  194 00.000014FA                      opeor   a       EOR,$b100,dn,$1fd,9,15,0,3,6,sall,0,$8002
  194 00.000014FA+00001516                     dc.l    n_056
  194 00.000014FE+0073                         dc      tnum
  194   =00000074+                     tnum    set     tnum+1
  194 00.00001500+454F520000                   dc.b    'EOR',0,0
  194 00.00001506+                             even
  194 00.00001506+B100                         dc      $b100
  194 00.00001508+                             ;
  194 00.00001508+000101FD                     dc      dn,$1fd
  194 00.0000150C+9F03                         dc.b    (9<<4)+15,(0<<4)+3
  194 00.0000150E+6210                         dc      (6<<12)+sall
  194 00.00001510+00000000                     dc.l    0
  194 00.00001514+8002                         dc      $8002
  194 00.00001516+                     n_056   ;
  194 00.00001516                              endm
  195 00.00001516                      
  196 00.00001516                      opeori  a       EORI,$a00,imm,$1fd^ccr^sr^imm,15,15,0,3,6,sall,andichk,0
  196 00.00001516+00001532                     dc.l    n_057
  196 00.0000151A+0074                         dc      tnum
  196   =00000075+                     tnum    set     tnum+1
  196 00.0000151C+454F52490000                 dc.b    'EORI',0,0
  196 00.00001522+                             even
  196 00.00001522+0A00                         dc      $a00
  196 00.00001524+                             ;
  196 00.00001524+080039FD                     dc      imm,$1fd^ccr^sr^imm
  196 00.00001528+FF03                         dc.b    (15<<4)+15,(0<<4)+3
  196 00.0000152A+6210                         dc      (6<<12)+sall
  196 00.0000152C+00001E34                     dc.l    andichk
  196 00.00001530+0000                         dc      0
  196 00.00001532+                     n_057   ;
  196 00.00001532                              endm
  197 00.00001532                      
  198 00.00001532                      opexg   a       EXG,$c100,dn^an,dn^an,9,15,0,15,15,long,exgchk,0
  198 00.00001532+0000154E                     dc.l    n_058
  198 00.00001536+0075                         dc      tnum
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 42
ASMMAC


  198   =00000076+                     tnum    set     tnum+1
  198 00.00001538+4558470000                   dc.b    'EXG',0,0
  198 00.0000153E+                             even
  198 00.0000153E+C100                         dc      $c100
  198 00.00001540+                             ;
  198 00.00001540+00030003                     dc      dn^an,dn^an
  198 00.00001544+9F0F                         dc.b    (9<<4)+15,(0<<4)+15
  198 00.00001546+F2FF                         dc      (15<<12)+long
  198 00.00001548+00001D42                     dc.l    exgchk
  198 00.0000154C+0000                         dc      0
  198 00.0000154E+                     n_058   ;
  198 00.0000154E                              endm
  199 00.0000154E                      
  200 00.0000154E                      opext   a       EXT,$4800,dn,0,0,15,15,15,6,$32f,0,0
  200 00.0000154E+0000156A                     dc.l    n_059
  200 00.00001552+0076                         dc      tnum
  200   =00000077+                     tnum    set     tnum+1
  200 00.00001554+4558540000                   dc.b    'EXT',0,0
  200 00.0000155A+                             even
  200 00.0000155A+4800                         dc      $4800
  200 00.0000155C+                             ;
  200 00.0000155C+00010000                     dc      dn,0
  200 00.00001560+0FFF                         dc.b    (0<<4)+15,(15<<4)+15
  200 00.00001562+632F                         dc      (6<<12)+$32f
  200 00.00001564+00000000                     dc.l    0
  200 00.00001568+0000                         dc      0
  200 00.0000156A+                     n_059   ;
  200 00.0000156A                              endm
  201 00.0000156A                      
  202 00.0000156A                      opillegal       a       ILLEGAL,$4afc,0,0,15,15,15,15,15,nosz,0,0
  202 00.0000156A+0000158A                     dc.l    n_060
  202 00.0000156E+0077                         dc      tnum
  202   =00000078+                     tnum    set     tnum+1
  202 00.00001570+494C4C4547414C0000           dc.b    'ILLEGAL',0,0
  202 00.0000157A+                             even
  202 00.0000157A+4AFC                         dc      $4afc
  202 00.0000157C+                             ;
  202 00.0000157C+00000000                     dc      0,0
  202 00.00001580+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  202 00.00001582+FFFF                         dc      (15<<12)+nosz
  202 00.00001584+00000000                     dc.l    0
  202 00.00001588+0000                         dc      0
  202 00.0000158A+                     n_060   ;
  202 00.0000158A                              endm
  203 00.0000158A                      
  204 00.0000158A                      opjmp   a       JMP,$4ec0,$7e4,0,0,3,15,15,15,nosz,0,0
  204 00.0000158A+000015A6                     dc.l    n_061
  204 00.0000158E+0078                         dc      tnum
  204   =00000079+                     tnum    set     tnum+1
  204 00.00001590+4A4D500000                   dc.b    'JMP',0,0
  204 00.00001596+                             even
  204 00.00001596+4EC0                         dc      $4ec0
  204 00.00001598+                             ;
  204 00.00001598+07E40000                     dc      $7e4,0
  204 00.0000159C+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  204 00.0000159E+FFFF                         dc      (15<<12)+nosz
  204 00.000015A0+00000000                     dc.l    0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 43
ASMMAC


  204 00.000015A4+0000                         dc      0
  204 00.000015A6+                     n_061   ;
  204 00.000015A6                              endm
  205 00.000015A6                      
  206 00.000015A6                      opjsr   a       JSR,$4e80,$7e4,0,0,3,15,15,15,nosz,0,0
  206 00.000015A6+000015C2                     dc.l    n_062
  206 00.000015AA+0079                         dc      tnum
  206   =0000007A+                     tnum    set     tnum+1
  206 00.000015AC+4A53520000                   dc.b    'JSR',0,0
  206 00.000015B2+                             even
  206 00.000015B2+4E80                         dc      $4e80
  206 00.000015B4+                             ;
  206 00.000015B4+07E40000                     dc      $7e4,0
  206 00.000015B8+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  206 00.000015BA+FFFF                         dc      (15<<12)+nosz
  206 00.000015BC+00000000                     dc.l    0
  206 00.000015C0+0000                         dc      0
  206 00.000015C2+                     n_062   ;
  206 00.000015C2                              endm
  207 00.000015C2                      
  208 00.000015C2                      oplea   a       LEA,$41c0,$7e4,an,0,3,9,15,15,long,0,0
  208 00.000015C2+000015DE                     dc.l    n_063
  208 00.000015C6+007A                         dc      tnum
  208   =0000007B+                     tnum    set     tnum+1
  208 00.000015C8+4C45410000                   dc.b    'LEA',0,0
  208 00.000015CE+                             even
  208 00.000015CE+41C0                         dc      $41c0
  208 00.000015D0+                             ;
  208 00.000015D0+07E40002                     dc      $7e4,an
  208 00.000015D4+039F                         dc.b    (0<<4)+3,(9<<4)+15
  208 00.000015D6+F2FF                         dc      (15<<12)+long
  208 00.000015D8+00000000                     dc.l    0
  208 00.000015DC+0000                         dc      0
  208 00.000015DE+                     n_063   ;
  208 00.000015DE                              endm
  209 00.000015DE                      
  210 00.000015DE                      oplink  a       LINK,$4e50,an,imm,0,15,15,15,15,nosz,0,0
  210 00.000015DE+000015FA                     dc.l    n_064
  210 00.000015E2+007B                         dc      tnum
  210   =0000007C+                     tnum    set     tnum+1
  210 00.000015E4+4C494E4B0000                 dc.b    'LINK',0,0
  210 00.000015EA+                             even
  210 00.000015EA+4E50                         dc      $4e50
  210 00.000015EC+                             ;
  210 00.000015EC+00020800                     dc      an,imm
  210 00.000015F0+0FFF                         dc.b    (0<<4)+15,(15<<4)+15
  210 00.000015F2+FFFF                         dc      (15<<12)+nosz
  210 00.000015F4+00000000                     dc.l    0
  210 00.000015F8+0000                         dc      0
  210 00.000015FA+                     n_064   ;
  210 00.000015FA                              endm
  211 00.000015FA                      
  212 00.000015FA                      oplsl   a       LSL,$e108,imm^$1fd,1,15,15,15,15,15,sall,lslchk,1
  212 00.000015FA+00001616                     dc.l    n_065
  212 00.000015FE+007C                         dc      tnum
  212   =0000007D+                     tnum    set     tnum+1
  212 00.00001600+4C534C0000                   dc.b    'LSL',0,0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 44
ASMMAC


  212 00.00001606+                             even
  212 00.00001606+E108                         dc      $e108
  212 00.00001608+                             ;
  212 00.00001608+09FD0001                     dc      imm^$1fd,1
  212 00.0000160C+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  212 00.0000160E+F210                         dc      (15<<12)+sall
  212 00.00001610+00001D9C                     dc.l    lslchk
  212 00.00001614+0001                         dc      1
  212 00.00001616+                     n_065   ;
  212 00.00001616                              endm
  213 00.00001616                      
  214 00.00001616                      oplsr   a       LSR,$e008,imm^$1fd,1,15,15,15,15,15,sall,lslchk,1
  214 00.00001616+00001632                     dc.l    n_066
  214 00.0000161A+007D                         dc      tnum
  214   =0000007E+                     tnum    set     tnum+1
  214 00.0000161C+4C53520000                   dc.b    'LSR',0,0
  214 00.00001622+                             even
  214 00.00001622+E008                         dc      $e008
  214 00.00001624+                             ;
  214 00.00001624+09FD0001                     dc      imm^$1fd,1
  214 00.00001628+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  214 00.0000162A+F210                         dc      (15<<12)+sall
  214 00.0000162C+00001D9C                     dc.l    lslchk
  214 00.00001630+0001                         dc      1
  214 00.00001632+                     n_066   ;
  214 00.00001632                              endm
  215 00.00001632                      
  216 00.00001632                      opmove  a       MOVE,0,all^ccr^sr^usp,$1fd^ccr^sr^usp,0,3,9,6,15,sall,movechk,$8001
  216 00.00001632+0000164E                     dc.l    n_067
  216 00.00001636+007E                         dc      tnum
  216   =0000007F+                     tnum    set     tnum+1
  216 00.00001638+4D4F56450000                 dc.b    'MOVE',0,0
  216 00.0000163E+                             even
  216 00.0000163E+0000                         dc      0
  216 00.00001640+                             ;
  216 00.00001640+7FFF71FD                     dc      all^ccr^sr^usp,$1fd^ccr^sr^usp
  216 00.00001644+0396                         dc.b    (0<<4)+3,(9<<4)+6
  216 00.00001646+F210                         dc      (15<<12)+sall
  216 00.00001648+00001C68                     dc.l    movechk
  216 00.0000164C+8001                         dc      $8001
  216 00.0000164E+                     n_067   ;
  216 00.0000164E                              endm
  217 00.0000164E                      
  218 00.0000164E                      opmovep a       MOVEP,$108,dn^dan,dn^dan,9,15,0,15,6,$10f,movepchk,0
  218 00.0000164E+0000166C                     dc.l    n_068
  218 00.00001652+007F                         dc      tnum
  218   =00000080+                     tnum    set     tnum+1
  218 00.00001654+4D4F5645500000               dc.b    'MOVEP',0,0
  218 00.0000165C+                             even
  218 00.0000165C+0108                         dc      $108
  218 00.0000165E+                             ;
  218 00.0000165E+00210021                     dc      dn^dan,dn^dan
  218 00.00001662+9F0F                         dc.b    (9<<4)+15,(0<<4)+15
  218 00.00001664+610F                         dc      (6<<12)+$10f
  218 00.00001666+00001C54                     dc.l    movepchk
  218 00.0000166A+0000                         dc      0
  218 00.0000166C+                     n_068   ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 45
ASMMAC


  218 00.0000166C                              endm
  219 00.0000166C                      
  220 00.0000166C                      opmovea a       MOVEA,$40,all,an,0,3,9,15,12,$23f,0,0
  220 00.0000166C+0000168A                     dc.l    n_069
  220 00.00001670+0080                         dc      tnum
  220   =00000081+                     tnum    set     tnum+1
  220 00.00001672+4D4F5645410000               dc.b    'MOVEA',0,0
  220 00.0000167A+                             even
  220 00.0000167A+0040                         dc      $40
  220 00.0000167C+                             ;
  220 00.0000167C+0FFF0002                     dc      all,an
  220 00.00001680+039F                         dc.b    (0<<4)+3,(9<<4)+15
  220 00.00001682+C23F                         dc      (12<<12)+$23f
  220 00.00001684+00000000                     dc.l    0
  220 00.00001688+0000                         dc      0
  220 00.0000168A+                     n_069   ;
  220 00.0000168A                              endm
  221 00.0000168A                      
  222 00.0000168A                      opmoveq a       MOVEQ,$7000,imm,dn,15,15,9,15,15,long,0,3
  222 00.0000168A+000016A8                     dc.l    n_070
  222 00.0000168E+0081                         dc      tnum
  222   =00000082+                     tnum    set     tnum+1
  222 00.00001690+4D4F5645510000               dc.b    'MOVEQ',0,0
  222 00.00001698+                             even
  222 00.00001698+7000                         dc      $7000
  222 00.0000169A+                             ;
  222 00.0000169A+08000001                     dc      imm,dn
  222 00.0000169E+FF9F                         dc.b    (15<<4)+15,(9<<4)+15
  222 00.000016A0+F2FF                         dc      (15<<12)+long
  222 00.000016A2+00000000                     dc.l    0
  222 00.000016A6+0003                         dc      3
  222 00.000016A8+                     n_070   ;
  222 00.000016A8                              endm
  223 00.000016A8                      
  224 00.000016A8                      opmovem a       MOVEM,$4880,mem^$7fc,mem^$7fc,0,3,0,3,6,$10f,movemchk,0
  224 00.000016A8+000016C6                     dc.l    n_071
  224 00.000016AC+0082                         dc      tnum
  224   =00000083+                     tnum    set     tnum+1
  224 00.000016AE+4D4F56454D0000               dc.b    'MOVEM',0,0
  224 00.000016B6+                             even
  224 00.000016B6+4880                         dc      $4880
  224 00.000016B8+                             ;
  224 00.000016B8+87FC87FC                     dc      mem^$7fc,mem^$7fc
  224 00.000016BC+0303                         dc.b    (0<<4)+3,(0<<4)+3
  224 00.000016BE+610F                         dc      (6<<12)+$10f
  224 00.000016C0+00001C06                     dc.l    movemchk
  224 00.000016C4+0000                         dc      0
  224 00.000016C6+                     n_071   ;
  224 00.000016C6                              endm
  225 00.000016C6                      
  226 00.000016C6                      opmuls  a       MULS,$c1c0,$ffd,dn,0,3,9,15,15,word,0,0
  226 00.000016C6+000016E2                     dc.l    n_072
  226 00.000016CA+0083                         dc      tnum
  226   =00000084+                     tnum    set     tnum+1
  226 00.000016CC+4D554C530000                 dc.b    'MULS',0,0
  226 00.000016D2+                             even
  226 00.000016D2+C1C0                         dc      $c1c0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 46
ASMMAC


  226 00.000016D4+                             ;
  226 00.000016D4+0FFD0001                     dc      $ffd,dn
  226 00.000016D8+039F                         dc.b    (0<<4)+3,(9<<4)+15
  226 00.000016DA+FF1F                         dc      (15<<12)+word
  226 00.000016DC+00000000                     dc.l    0
  226 00.000016E0+0000                         dc      0
  226 00.000016E2+                     n_072   ;
  226 00.000016E2                              endm
  227 00.000016E2                      
  228 00.000016E2                      opmulu  a       MULU,$c0c0,$ffd,dn,0,3,9,15,15,word,0,0
  228 00.000016E2+000016FE                     dc.l    n_073
  228 00.000016E6+0084                         dc      tnum
  228   =00000085+                     tnum    set     tnum+1
  228 00.000016E8+4D554C550000                 dc.b    'MULU',0,0
  228 00.000016EE+                             even
  228 00.000016EE+C0C0                         dc      $c0c0
  228 00.000016F0+                             ;
  228 00.000016F0+0FFD0001                     dc      $ffd,dn
  228 00.000016F4+039F                         dc.b    (0<<4)+3,(9<<4)+15
  228 00.000016F6+FF1F                         dc      (15<<12)+word
  228 00.000016F8+00000000                     dc.l    0
  228 00.000016FC+0000                         dc      0
  228 00.000016FE+                     n_073   ;
  228 00.000016FE                              endm
  229 00.000016FE                      
  230 00.000016FE                      opnbcd  a       NBCD,$4800,$1fd,0,0,3,15,15,15,byte,0,0
  230 00.000016FE+0000171A                     dc.l    n_074
  230 00.00001702+0085                         dc      tnum
  230   =00000086+                     tnum    set     tnum+1
  230 00.00001704+4E4243440000                 dc.b    'NBCD',0,0
  230 00.0000170A+                             even
  230 00.0000170A+4800                         dc      $4800
  230 00.0000170C+                             ;
  230 00.0000170C+01FD0000                     dc      $1fd,0
  230 00.00001710+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  230 00.00001712+FFF0                         dc      (15<<12)+byte
  230 00.00001714+00000000                     dc.l    0
  230 00.00001718+0000                         dc      0
  230 00.0000171A+                     n_074   ;
  230 00.0000171A                              endm
  231 00.0000171A                      
  232 00.0000171A                      opneg   a       NEG,$4400,$1fd,0,0,3,15,15,6,sall,0,0
  232 00.0000171A+00001736                     dc.l    n_075
  232 00.0000171E+0086                         dc      tnum
  232   =00000087+                     tnum    set     tnum+1
  232 00.00001720+4E45470000                   dc.b    'NEG',0,0
  232 00.00001726+                             even
  232 00.00001726+4400                         dc      $4400
  232 00.00001728+                             ;
  232 00.00001728+01FD0000                     dc      $1fd,0
  232 00.0000172C+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  232 00.0000172E+6210                         dc      (6<<12)+sall
  232 00.00001730+00000000                     dc.l    0
  232 00.00001734+0000                         dc      0
  232 00.00001736+                     n_075   ;
  232 00.00001736                              endm
  233 00.00001736                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 47
ASMMAC


  234 00.00001736                      opnegx  a       NEGX,$4000,$1fd,0,0,3,15,15,6,sall,0,0
  234 00.00001736+00001752                     dc.l    n_076
  234 00.0000173A+0087                         dc      tnum
  234   =00000088+                     tnum    set     tnum+1
  234 00.0000173C+4E4547580000                 dc.b    'NEGX',0,0
  234 00.00001742+                             even
  234 00.00001742+4000                         dc      $4000
  234 00.00001744+                             ;
  234 00.00001744+01FD0000                     dc      $1fd,0
  234 00.00001748+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  234 00.0000174A+6210                         dc      (6<<12)+sall
  234 00.0000174C+00000000                     dc.l    0
  234 00.00001750+0000                         dc      0
  234 00.00001752+                     n_076   ;
  234 00.00001752                              endm
  235 00.00001752                      
  236 00.00001752                      opnop   a       NOP,$4e71,0,0,15,15,15,15,15,nosz,0,0
  236 00.00001752+0000176E                     dc.l    n_077
  236 00.00001756+0088                         dc      tnum
  236   =00000089+                     tnum    set     tnum+1
  236 00.00001758+4E4F500000                   dc.b    'NOP',0,0
  236 00.0000175E+                             even
  236 00.0000175E+4E71                         dc      $4e71
  236 00.00001760+                             ;
  236 00.00001760+00000000                     dc      0,0
  236 00.00001764+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  236 00.00001766+FFFF                         dc      (15<<12)+nosz
  236 00.00001768+00000000                     dc.l    0
  236 00.0000176C+0000                         dc      0
  236 00.0000176E+                     n_077   ;
  236 00.0000176E                              endm
  237 00.0000176E                      
  238 00.0000176E                      opnot   a       NOT,$4600,$1fd,0,0,3,15,15,6,sall,0,0
  238 00.0000176E+0000178A                     dc.l    n_078
  238 00.00001772+0089                         dc      tnum
  238   =0000008A+                     tnum    set     tnum+1
  238 00.00001774+4E4F540000                   dc.b    'NOT',0,0
  238 00.0000177A+                             even
  238 00.0000177A+4600                         dc      $4600
  238 00.0000177C+                             ;
  238 00.0000177C+01FD0000                     dc      $1fd,0
  238 00.00001780+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  238 00.00001782+6210                         dc      (6<<12)+sall
  238 00.00001784+00000000                     dc.l    0
  238 00.00001788+0000                         dc      0
  238 00.0000178A+                     n_078   ;
  238 00.0000178A                              endm
  239 00.0000178A                      
  240 00.0000178A                      opor    a       OR,$8000,all&nan,$1fd,0,3,9,15,6,sall,addchk,$8002
  240 00.0000178A+000017A4                     dc.l    n_079
  240 00.0000178E+008A                         dc      tnum
  240   =0000008B+                     tnum    set     tnum+1
  240 00.00001790+4F520000                     dc.b    'OR',0,0
  240 00.00001794+                             even
  240 00.00001794+8000                         dc      $8000
  240 00.00001796+                             ;
  240 00.00001796+0FFD01FD                     dc      all&nan,$1fd
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 48
ASMMAC


  240 00.0000179A+039F                         dc.b    (0<<4)+3,(9<<4)+15
  240 00.0000179C+6210                         dc      (6<<12)+sall
  240 00.0000179E+00001E1E                     dc.l    addchk
  240 00.000017A2+8002                         dc      $8002
  240 00.000017A4+                     n_079   ;
  240 00.000017A4                              endm
  241 00.000017A4                      
  242 00.000017A4                      opori   a       ORI,0,imm,$1fd^ccr^sr^imm,15,15,0,3,6,sall,andichk,0
  242 00.000017A4+000017C0                     dc.l    n_080
  242 00.000017A8+008B                         dc      tnum
  242   =0000008C+                     tnum    set     tnum+1
  242 00.000017AA+4F52490000                   dc.b    'ORI',0,0
  242 00.000017B0+                             even
  242 00.000017B0+0000                         dc      0
  242 00.000017B2+                             ;
  242 00.000017B2+080039FD                     dc      imm,$1fd^ccr^sr^imm
  242 00.000017B6+FF03                         dc.b    (15<<4)+15,(0<<4)+3
  242 00.000017B8+6210                         dc      (6<<12)+sall
  242 00.000017BA+00001E34                     dc.l    andichk
  242 00.000017BE+0000                         dc      0
  242 00.000017C0+                     n_080   ;
  242 00.000017C0                              endm
  243 00.000017C0                      
  244 00.000017C0                      oppea   a       PEA,$4840,$7e4,0,0,3,15,15,15,long,0,0
  244 00.000017C0+000017DC                     dc.l    n_081
  244 00.000017C4+008C                         dc      tnum
  244   =0000008D+                     tnum    set     tnum+1
  244 00.000017C6+5045410000                   dc.b    'PEA',0,0
  244 00.000017CC+                             even
  244 00.000017CC+4840                         dc      $4840
  244 00.000017CE+                             ;
  244 00.000017CE+07E40000                     dc      $7e4,0
  244 00.000017D2+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  244 00.000017D4+F2FF                         dc      (15<<12)+long
  244 00.000017D6+00000000                     dc.l    0
  244 00.000017DA+0000                         dc      0
  244 00.000017DC+                     n_081   ;
  244 00.000017DC                              endm
  245 00.000017DC                      
  246 00.000017DC                      opreset a       RESET,$4e70,0,0,15,15,15,15,15,nosz,0,0
  246 00.000017DC+000017FA                     dc.l    n_082
  246 00.000017E0+008D                         dc      tnum
  246   =0000008E+                     tnum    set     tnum+1
  246 00.000017E2+52455345540000               dc.b    'RESET',0,0
  246 00.000017EA+                             even
  246 00.000017EA+4E70                         dc      $4e70
  246 00.000017EC+                             ;
  246 00.000017EC+00000000                     dc      0,0
  246 00.000017F0+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  246 00.000017F2+FFFF                         dc      (15<<12)+nosz
  246 00.000017F4+00000000                     dc.l    0
  246 00.000017F8+0000                         dc      0
  246 00.000017FA+                     n_082   ;
  246 00.000017FA                              endm
  247 00.000017FA                      
  248 00.000017FA                      oprol   a       ROL,$e118,imm^$1fd,1,15,15,15,15,15,sall,rolchk,1
  248 00.000017FA+00001816                     dc.l    n_083
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 49
ASMMAC


  248 00.000017FE+008E                         dc      tnum
  248   =0000008F+                     tnum    set     tnum+1
  248 00.00001800+524F4C0000                   dc.b    'ROL',0,0
  248 00.00001806+                             even
  248 00.00001806+E118                         dc      $e118
  248 00.00001808+                             ;
  248 00.00001808+09FD0001                     dc      imm^$1fd,1
  248 00.0000180C+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  248 00.0000180E+F210                         dc      (15<<12)+sall
  248 00.00001810+00001D94                     dc.l    rolchk
  248 00.00001814+0001                         dc      1
  248 00.00001816+                     n_083   ;
  248 00.00001816                              endm
  249 00.00001816                      
  250 00.00001816                      opror   a       ROR,$e018,imm^$1fd,1,15,15,15,15,15,sall,rolchk,1
  250 00.00001816+00001832                     dc.l    n_084
  250 00.0000181A+008F                         dc      tnum
  250   =00000090+                     tnum    set     tnum+1
  250 00.0000181C+524F520000                   dc.b    'ROR',0,0
  250 00.00001822+                             even
  250 00.00001822+E018                         dc      $e018
  250 00.00001824+                             ;
  250 00.00001824+09FD0001                     dc      imm^$1fd,1
  250 00.00001828+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  250 00.0000182A+F210                         dc      (15<<12)+sall
  250 00.0000182C+00001D94                     dc.l    rolchk
  250 00.00001830+0001                         dc      1
  250 00.00001832+                     n_084   ;
  250 00.00001832                              endm
  251 00.00001832                      
  252 00.00001832                      oproxl  a       ROXL,$e110,imm^$1fd,1,15,15,15,15,15,sall,roxlchk,1
  252 00.00001832+0000184E                     dc.l    n_085
  252 00.00001836+0090                         dc      tnum
  252   =00000091+                     tnum    set     tnum+1
  252 00.00001838+524F584C0000                 dc.b    'ROXL',0,0
  252 00.0000183E+                             even
  252 00.0000183E+E110                         dc      $e110
  252 00.00001840+                             ;
  252 00.00001840+09FD0001                     dc      imm^$1fd,1
  252 00.00001844+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  252 00.00001846+F210                         dc      (15<<12)+sall
  252 00.00001848+00001D8C                     dc.l    roxlchk
  252 00.0000184C+0001                         dc      1
  252 00.0000184E+                     n_085   ;
  252 00.0000184E                              endm
  253 00.0000184E                      
  254 00.0000184E                      oproxr  a       ROXR,$e010,imm^$1fd,1,15,15,15,15,15,sall,roxlchk,1
  254 00.0000184E+0000186A                     dc.l    n_086
  254 00.00001852+0091                         dc      tnum
  254   =00000092+                     tnum    set     tnum+1
  254 00.00001854+524F58520000                 dc.b    'ROXR',0,0
  254 00.0000185A+                             even
  254 00.0000185A+E010                         dc      $e010
  254 00.0000185C+                             ;
  254 00.0000185C+09FD0001                     dc      imm^$1fd,1
  254 00.00001860+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  254 00.00001862+F210                         dc      (15<<12)+sall
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 50
ASMMAC


  254 00.00001864+00001D8C                     dc.l    roxlchk
  254 00.00001868+0001                         dc      1
  254 00.0000186A+                     n_086   ;
  254 00.0000186A                              endm
  255 00.0000186A                      
  256 00.0000186A                      oprte   a       RTE,$4e73,0,0,15,15,15,15,15,nosz,0,0
  256 00.0000186A+00001886                     dc.l    n_087
  256 00.0000186E+0092                         dc      tnum
  256   =00000093+                     tnum    set     tnum+1
  256 00.00001870+5254450000                   dc.b    'RTE',0,0
  256 00.00001876+                             even
  256 00.00001876+4E73                         dc      $4e73
  256 00.00001878+                             ;
  256 00.00001878+00000000                     dc      0,0
  256 00.0000187C+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  256 00.0000187E+FFFF                         dc      (15<<12)+nosz
  256 00.00001880+00000000                     dc.l    0
  256 00.00001884+0000                         dc      0
  256 00.00001886+                     n_087   ;
  256 00.00001886                              endm
  257 00.00001886                      
  258 00.00001886                      oprtr   a       RTR,$4e77,0,0,15,15,15,15,15,nosz,0,0
  258 00.00001886+000018A2                     dc.l    n_088
  258 00.0000188A+0093                         dc      tnum
  258   =00000094+                     tnum    set     tnum+1
  258 00.0000188C+5254520000                   dc.b    'RTR',0,0
  258 00.00001892+                             even
  258 00.00001892+4E77                         dc      $4e77
  258 00.00001894+                             ;
  258 00.00001894+00000000                     dc      0,0
  258 00.00001898+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  258 00.0000189A+FFFF                         dc      (15<<12)+nosz
  258 00.0000189C+00000000                     dc.l    0
  258 00.000018A0+0000                         dc      0
  258 00.000018A2+                     n_088   ;
  258 00.000018A2                              endm
  259 00.000018A2                      
  260 00.000018A2                      oprts   a       RTS,$4e75,0,0,15,15,15,15,15,nosz,0,0
  260 00.000018A2+000018BE                     dc.l    n_089
  260 00.000018A6+0094                         dc      tnum
  260   =00000095+                     tnum    set     tnum+1
  260 00.000018A8+5254530000                   dc.b    'RTS',0,0
  260 00.000018AE+                             even
  260 00.000018AE+4E75                         dc      $4e75
  260 00.000018B0+                             ;
  260 00.000018B0+00000000                     dc      0,0
  260 00.000018B4+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  260 00.000018B6+FFFF                         dc      (15<<12)+nosz
  260 00.000018B8+00000000                     dc.l    0
  260 00.000018BC+0000                         dc      0
  260 00.000018BE+                     n_089   ;
  260 00.000018BE                              endm
  261 00.000018BE                      
  262 00.000018BE                      opsbcd  a       SBCD,$8100,dn^pan,dn^pan,9,0,0,0,15,byte,abcdchk,0
  262 00.000018BE+000018DA                     dc.l    n_090
  262 00.000018C2+0095                         dc      tnum
  262   =00000096+                     tnum    set     tnum+1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 51
ASMMAC


  262 00.000018C4+534243440000                 dc.b    'SBCD',0,0
  262 00.000018CA+                             even
  262 00.000018CA+8100                         dc      $8100
  262 00.000018CC+                             ;
  262 00.000018CC+00110011                     dc      dn^pan,dn^pan
  262 00.000018D0+9000                         dc.b    (9<<4)+0,(0<<4)+0
  262 00.000018D2+FFF0                         dc      (15<<12)+byte
  262 00.000018D4+00001E0A                     dc.l    abcdchk
  262 00.000018D8+0000                         dc      0
  262 00.000018DA+                     n_090   ;
  262 00.000018DA                              endm
  263 00.000018DA                      
  264 00.000018DA                      opscc   a       SCC,$54c0,$1fd,0,0,3,15,15,15,byte,0,0
  264 00.000018DA+000018F6                     dc.l    n_091
  264 00.000018DE+0096                         dc      tnum
  264   =00000097+                     tnum    set     tnum+1
  264 00.000018E0+5343430000                   dc.b    'SCC',0,0
  264 00.000018E6+                             even
  264 00.000018E6+54C0                         dc      $54c0
  264 00.000018E8+                             ;
  264 00.000018E8+01FD0000                     dc      $1fd,0
  264 00.000018EC+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  264 00.000018EE+FFF0                         dc      (15<<12)+byte
  264 00.000018F0+00000000                     dc.l    0
  264 00.000018F4+0000                         dc      0
  264 00.000018F6+                     n_091   ;
  264 00.000018F6                              endm
  265 00.000018F6                      
  266 00.000018F6                      opscs   a       SCS,$55c0,$1fd,0,0,3,15,15,15,byte,0,0
  266 00.000018F6+00001912                     dc.l    n_092
  266 00.000018FA+0097                         dc      tnum
  266   =00000098+                     tnum    set     tnum+1
  266 00.000018FC+5343530000                   dc.b    'SCS',0,0
  266 00.00001902+                             even
  266 00.00001902+55C0                         dc      $55c0
  266 00.00001904+                             ;
  266 00.00001904+01FD0000                     dc      $1fd,0
  266 00.00001908+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  266 00.0000190A+FFF0                         dc      (15<<12)+byte
  266 00.0000190C+00000000                     dc.l    0
  266 00.00001910+0000                         dc      0
  266 00.00001912+                     n_092   ;
  266 00.00001912                              endm
  267 00.00001912                      
  268 00.00001912                      opseq   a       SEQ,$57c0,$1fd,0,0,3,15,15,15,byte,0,0
  268 00.00001912+0000192E                     dc.l    n_093
  268 00.00001916+0098                         dc      tnum
  268   =00000099+                     tnum    set     tnum+1
  268 00.00001918+5345510000                   dc.b    'SEQ',0,0
  268 00.0000191E+                             even
  268 00.0000191E+57C0                         dc      $57c0
  268 00.00001920+                             ;
  268 00.00001920+01FD0000                     dc      $1fd,0
  268 00.00001924+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  268 00.00001926+FFF0                         dc      (15<<12)+byte
  268 00.00001928+00000000                     dc.l    0
  268 00.0000192C+0000                         dc      0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 52
ASMMAC


  268 00.0000192E+                     n_093   ;
  268 00.0000192E                              endm
  269 00.0000192E                      
  270 00.0000192E                      opsge   a       SGE,$5Cc0,$1fd,0,0,3,15,15,15,byte,0,0
  270 00.0000192E+0000194A                     dc.l    n_094
  270 00.00001932+0099                         dc      tnum
  270   =0000009A+                     tnum    set     tnum+1
  270 00.00001934+5347450000                   dc.b    'SGE',0,0
  270 00.0000193A+                             even
  270 00.0000193A+5CC0                         dc      $5Cc0
  270 00.0000193C+                             ;
  270 00.0000193C+01FD0000                     dc      $1fd,0
  270 00.00001940+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  270 00.00001942+FFF0                         dc      (15<<12)+byte
  270 00.00001944+00000000                     dc.l    0
  270 00.00001948+0000                         dc      0
  270 00.0000194A+                     n_094   ;
  270 00.0000194A                              endm
  271 00.0000194A                      
  272 00.0000194A                      opsgt   a       SGT,$5Ec0,$1fd,0,0,3,15,15,15,byte,0,0
  272 00.0000194A+00001966                     dc.l    n_095
  272 00.0000194E+009A                         dc      tnum
  272   =0000009B+                     tnum    set     tnum+1
  272 00.00001950+5347540000                   dc.b    'SGT',0,0
  272 00.00001956+                             even
  272 00.00001956+5EC0                         dc      $5Ec0
  272 00.00001958+                             ;
  272 00.00001958+01FD0000                     dc      $1fd,0
  272 00.0000195C+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  272 00.0000195E+FFF0                         dc      (15<<12)+byte
  272 00.00001960+00000000                     dc.l    0
  272 00.00001964+0000                         dc      0
  272 00.00001966+                     n_095   ;
  272 00.00001966                              endm
  273 00.00001966                      
  274 00.00001966                      opshi   a       SHI,$52c0,$1fd,0,0,3,15,15,15,byte,0,0
  274 00.00001966+00001982                     dc.l    n_096
  274 00.0000196A+009B                         dc      tnum
  274   =0000009C+                     tnum    set     tnum+1
  274 00.0000196C+5348490000                   dc.b    'SHI',0,0
  274 00.00001972+                             even
  274 00.00001972+52C0                         dc      $52c0
  274 00.00001974+                             ;
  274 00.00001974+01FD0000                     dc      $1fd,0
  274 00.00001978+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  274 00.0000197A+FFF0                         dc      (15<<12)+byte
  274 00.0000197C+00000000                     dc.l    0
  274 00.00001980+0000                         dc      0
  274 00.00001982+                     n_096   ;
  274 00.00001982                              endm
  275 00.00001982                      
  276 00.00001982                      opsle   a       SLE,$5Fc0,$1fd,0,0,3,15,15,15,byte,0,0
  276 00.00001982+0000199E                     dc.l    n_097
  276 00.00001986+009C                         dc      tnum
  276   =0000009D+                     tnum    set     tnum+1
  276 00.00001988+534C450000                   dc.b    'SLE',0,0
  276 00.0000198E+                             even
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 53
ASMMAC


  276 00.0000198E+5FC0                         dc      $5Fc0
  276 00.00001990+                             ;
  276 00.00001990+01FD0000                     dc      $1fd,0
  276 00.00001994+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  276 00.00001996+FFF0                         dc      (15<<12)+byte
  276 00.00001998+00000000                     dc.l    0
  276 00.0000199C+0000                         dc      0
  276 00.0000199E+                     n_097   ;
  276 00.0000199E                              endm
  277 00.0000199E                      
  278 00.0000199E                      opsls   a       SLS,$53c0,$1fd,0,0,3,15,15,15,byte,0,0
  278 00.0000199E+000019BA                     dc.l    n_098
  278 00.000019A2+009D                         dc      tnum
  278   =0000009E+                     tnum    set     tnum+1
  278 00.000019A4+534C530000                   dc.b    'SLS',0,0
  278 00.000019AA+                             even
  278 00.000019AA+53C0                         dc      $53c0
  278 00.000019AC+                             ;
  278 00.000019AC+01FD0000                     dc      $1fd,0
  278 00.000019B0+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  278 00.000019B2+FFF0                         dc      (15<<12)+byte
  278 00.000019B4+00000000                     dc.l    0
  278 00.000019B8+0000                         dc      0
  278 00.000019BA+                     n_098   ;
  278 00.000019BA                              endm
  279 00.000019BA                      
  280 00.000019BA                      opslt   a       SLT,$5Dc0,$1fd,0,0,3,15,15,15,byte,0,0
  280 00.000019BA+000019D6                     dc.l    n_099
  280 00.000019BE+009E                         dc      tnum
  280   =0000009F+                     tnum    set     tnum+1
  280 00.000019C0+534C540000                   dc.b    'SLT',0,0
  280 00.000019C6+                             even
  280 00.000019C6+5DC0                         dc      $5Dc0
  280 00.000019C8+                             ;
  280 00.000019C8+01FD0000                     dc      $1fd,0
  280 00.000019CC+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  280 00.000019CE+FFF0                         dc      (15<<12)+byte
  280 00.000019D0+00000000                     dc.l    0
  280 00.000019D4+0000                         dc      0
  280 00.000019D6+                     n_099   ;
  280 00.000019D6                              endm
  281 00.000019D6                      
  282 00.000019D6                      opsmi   a       SMI,$5Bc0,$1fd,0,0,3,15,15,15,byte,0,0
  282 00.000019D6+000019F2                     dc.l    n_100
  282 00.000019DA+009F                         dc      tnum
  282   =000000A0+                     tnum    set     tnum+1
  282 00.000019DC+534D490000                   dc.b    'SMI',0,0
  282 00.000019E2+                             even
  282 00.000019E2+5BC0                         dc      $5Bc0
  282 00.000019E4+                             ;
  282 00.000019E4+01FD0000                     dc      $1fd,0
  282 00.000019E8+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  282 00.000019EA+FFF0                         dc      (15<<12)+byte
  282 00.000019EC+00000000                     dc.l    0
  282 00.000019F0+0000                         dc      0
  282 00.000019F2+                     n_100   ;
  282 00.000019F2                              endm
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 54
ASMMAC


  283 00.000019F2                      
  284 00.000019F2                      opsne   a       SNE,$56c0,$1fd,0,0,3,15,15,15,byte,0,0
  284 00.000019F2+00001A0E                     dc.l    n_101
  284 00.000019F6+00A0                         dc      tnum
  284   =000000A1+                     tnum    set     tnum+1
  284 00.000019F8+534E450000                   dc.b    'SNE',0,0
  284 00.000019FE+                             even
  284 00.000019FE+56C0                         dc      $56c0
  284 00.00001A00+                             ;
  284 00.00001A00+01FD0000                     dc      $1fd,0
  284 00.00001A04+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  284 00.00001A06+FFF0                         dc      (15<<12)+byte
  284 00.00001A08+00000000                     dc.l    0
  284 00.00001A0C+0000                         dc      0
  284 00.00001A0E+                     n_101   ;
  284 00.00001A0E                              endm
  285 00.00001A0E                      
  286 00.00001A0E                      opspl   a       SPL,$5Ac0,$1fd,0,0,3,15,15,15,byte,0,0
  286 00.00001A0E+00001A2A                     dc.l    n_102
  286 00.00001A12+00A1                         dc      tnum
  286   =000000A2+                     tnum    set     tnum+1
  286 00.00001A14+53504C0000                   dc.b    'SPL',0,0
  286 00.00001A1A+                             even
  286 00.00001A1A+5AC0                         dc      $5Ac0
  286 00.00001A1C+                             ;
  286 00.00001A1C+01FD0000                     dc      $1fd,0
  286 00.00001A20+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  286 00.00001A22+FFF0                         dc      (15<<12)+byte
  286 00.00001A24+00000000                     dc.l    0
  286 00.00001A28+0000                         dc      0
  286 00.00001A2A+                     n_102   ;
  286 00.00001A2A                              endm
  287 00.00001A2A                      
  288 00.00001A2A                      opsvc   a       SVC,$58c0,$1fd,0,0,3,15,15,15,byte,0,0
  288 00.00001A2A+00001A46                     dc.l    n_103
  288 00.00001A2E+00A2                         dc      tnum
  288   =000000A3+                     tnum    set     tnum+1
  288 00.00001A30+5356430000                   dc.b    'SVC',0,0
  288 00.00001A36+                             even
  288 00.00001A36+58C0                         dc      $58c0
  288 00.00001A38+                             ;
  288 00.00001A38+01FD0000                     dc      $1fd,0
  288 00.00001A3C+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  288 00.00001A3E+FFF0                         dc      (15<<12)+byte
  288 00.00001A40+00000000                     dc.l    0
  288 00.00001A44+0000                         dc      0
  288 00.00001A46+                     n_103   ;
  288 00.00001A46                              endm
  289 00.00001A46                      
  290 00.00001A46                      opsvs   a       SVS,$59c0,$1fd,0,0,3,15,15,15,byte,0,0
  290 00.00001A46+00001A62                     dc.l    n_104
  290 00.00001A4A+00A3                         dc      tnum
  290   =000000A4+                     tnum    set     tnum+1
  290 00.00001A4C+5356530000                   dc.b    'SVS',0,0
  290 00.00001A52+                             even
  290 00.00001A52+59C0                         dc      $59c0
  290 00.00001A54+                             ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 55
ASMMAC


  290 00.00001A54+01FD0000                     dc      $1fd,0
  290 00.00001A58+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  290 00.00001A5A+FFF0                         dc      (15<<12)+byte
  290 00.00001A5C+00000000                     dc.l    0
  290 00.00001A60+0000                         dc      0
  290 00.00001A62+                     n_104   ;
  290 00.00001A62                              endm
  291 00.00001A62                      
  292 00.00001A62                      opst    a       ST,$50c0,$1fd,0,0,3,15,15,15,byte,0,0
  292 00.00001A62+00001A7C                     dc.l    n_105
  292 00.00001A66+00A4                         dc      tnum
  292   =000000A5+                     tnum    set     tnum+1
  292 00.00001A68+53540000                     dc.b    'ST',0,0
  292 00.00001A6C+                             even
  292 00.00001A6C+50C0                         dc      $50c0
  292 00.00001A6E+                             ;
  292 00.00001A6E+01FD0000                     dc      $1fd,0
  292 00.00001A72+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  292 00.00001A74+FFF0                         dc      (15<<12)+byte
  292 00.00001A76+00000000                     dc.l    0
  292 00.00001A7A+0000                         dc      0
  292 00.00001A7C+                     n_105   ;
  292 00.00001A7C                              endm
  293 00.00001A7C                      
  294 00.00001A7C                      opsf    a       SF,$51c0,$1fd,0,0,3,15,15,15,byte,0,0
  294 00.00001A7C+00001A96                     dc.l    n_106
  294 00.00001A80+00A5                         dc      tnum
  294   =000000A6+                     tnum    set     tnum+1
  294 00.00001A82+53460000                     dc.b    'SF',0,0
  294 00.00001A86+                             even
  294 00.00001A86+51C0                         dc      $51c0
  294 00.00001A88+                             ;
  294 00.00001A88+01FD0000                     dc      $1fd,0
  294 00.00001A8C+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  294 00.00001A8E+FFF0                         dc      (15<<12)+byte
  294 00.00001A90+00000000                     dc.l    0
  294 00.00001A94+0000                         dc      0
  294 00.00001A96+                     n_106   ;
  294 00.00001A96                              endm
  295 00.00001A96                      
  296 00.00001A96                      opstop  a       STOP,$4e72,imm,0,15,15,15,15,15,nosz,0,0
  296 00.00001A96+00001AB2                     dc.l    n_107
  296 00.00001A9A+00A6                         dc      tnum
  296   =000000A7+                     tnum    set     tnum+1
  296 00.00001A9C+53544F500000                 dc.b    'STOP',0,0
  296 00.00001AA2+                             even
  296 00.00001AA2+4E72                         dc      $4e72
  296 00.00001AA4+                             ;
  296 00.00001AA4+08000000                     dc      imm,0
  296 00.00001AA8+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  296 00.00001AAA+FFFF                         dc      (15<<12)+nosz
  296 00.00001AAC+00000000                     dc.l    0
  296 00.00001AB0+0000                         dc      0
  296 00.00001AB2+                     n_107   ;
  296 00.00001AB2                              endm
  297 00.00001AB2                      
  298 00.00001AB2                      opsub   a       SUB,$9000,all,$1fd,0,3,9,15,6,sall,addchk,$8003
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 56
ASMMAC


  298 00.00001AB2+00001ACE                     dc.l    n_108
  298 00.00001AB6+00A7                         dc      tnum
  298   =000000A8+                     tnum    set     tnum+1
  298 00.00001AB8+5355420000                   dc.b    'SUB',0,0
  298 00.00001ABE+                             even
  298 00.00001ABE+9000                         dc      $9000
  298 00.00001AC0+                             ;
  298 00.00001AC0+0FFF01FD                     dc      all,$1fd
  298 00.00001AC4+039F                         dc.b    (0<<4)+3,(9<<4)+15
  298 00.00001AC6+6210                         dc      (6<<12)+sall
  298 00.00001AC8+00001E1E                     dc.l    addchk
  298 00.00001ACC+8003                         dc      $8003
  298 00.00001ACE+                     n_108   ;
  298 00.00001ACE                              endm
  299 00.00001ACE                      
  300 00.00001ACE                      opsubi  a       SUBI,$400,imm,$1fd,15,15,0,3,6,sall,0,0
  300 00.00001ACE+00001AEA                     dc.l    n_109
  300 00.00001AD2+00A8                         dc      tnum
  300   =000000A9+                     tnum    set     tnum+1
  300 00.00001AD4+535542490000                 dc.b    'SUBI',0,0
  300 00.00001ADA+                             even
  300 00.00001ADA+0400                         dc      $400
  300 00.00001ADC+                             ;
  300 00.00001ADC+080001FD                     dc      imm,$1fd
  300 00.00001AE0+FF03                         dc.b    (15<<4)+15,(0<<4)+3
  300 00.00001AE2+6210                         dc      (6<<12)+sall
  300 00.00001AE4+00000000                     dc.l    0
  300 00.00001AE8+0000                         dc      0
  300 00.00001AEA+                     n_109   ;
  300 00.00001AEA                              endm
  301 00.00001AEA                      
  302 00.00001AEA                      opsuba  a       SUBA,$90c0,all,2,0,3,9,15,8,wordlong,0,0
  302 00.00001AEA+00001B06                     dc.l    n_110
  302 00.00001AEE+00A9                         dc      tnum
  302   =000000AA+                     tnum    set     tnum+1
  302 00.00001AF0+535542410000                 dc.b    'SUBA',0,0
  302 00.00001AF6+                             even
  302 00.00001AF6+90C0                         dc      $90c0
  302 00.00001AF8+                             ;
  302 00.00001AF8+0FFF0002                     dc      all,2
  302 00.00001AFC+039F                         dc.b    (0<<4)+3,(9<<4)+15
  302 00.00001AFE+810F                         dc      (8<<12)+wordlong
  302 00.00001B00+00000000                     dc.l    0
  302 00.00001B04+0000                         dc      0
  302 00.00001B06+                     n_110   ;
  302 00.00001B06                              endm
  303 00.00001B06                      
  304 00.00001B06                      opsubq  a       SUBQ,$5100,imm,$1ff,15,15,0,3,6,sall,0,1
  304 00.00001B06+00001B22                     dc.l    n_111
  304 00.00001B0A+00AA                         dc      tnum
  304   =000000AB+                     tnum    set     tnum+1
  304 00.00001B0C+535542510000                 dc.b    'SUBQ',0,0
  304 00.00001B12+                             even
  304 00.00001B12+5100                         dc      $5100
  304 00.00001B14+                             ;
  304 00.00001B14+080001FF                     dc      imm,$1ff
  304 00.00001B18+FF03                         dc.b    (15<<4)+15,(0<<4)+3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 57
ASMMAC


  304 00.00001B1A+6210                         dc      (6<<12)+sall
  304 00.00001B1C+00000000                     dc.l    0
  304 00.00001B20+0001                         dc      1
  304 00.00001B22+                     n_111   ;
  304 00.00001B22                              endm
  305 00.00001B22                      
  306 00.00001B22                      opsubx  a       SUBX,$9100,dn^pan,dn^pan,0,15,9,15,6,sall,abcdchk,0
  306 00.00001B22+00001B3E                     dc.l    n_112
  306 00.00001B26+00AB                         dc      tnum
  306   =000000AC+                     tnum    set     tnum+1
  306 00.00001B28+535542580000                 dc.b    'SUBX',0,0
  306 00.00001B2E+                             even
  306 00.00001B2E+9100                         dc      $9100
  306 00.00001B30+                             ;
  306 00.00001B30+00110011                     dc      dn^pan,dn^pan
  306 00.00001B34+0F9F                         dc.b    (0<<4)+15,(9<<4)+15
  306 00.00001B36+6210                         dc      (6<<12)+sall
  306 00.00001B38+00001E0A                     dc.l    abcdchk
  306 00.00001B3C+0000                         dc      0
  306 00.00001B3E+                     n_112   ;
  306 00.00001B3E                              endm
  307 00.00001B3E                      
  308 00.00001B3E                      opswap  a       SWAP,$4840,dn,0,0,15,15,15,15,word,0,0
  308 00.00001B3E+00001B5A                     dc.l    n_113
  308 00.00001B42+00AC                         dc      tnum
  308   =000000AD+                     tnum    set     tnum+1
  308 00.00001B44+535741500000                 dc.b    'SWAP',0,0
  308 00.00001B4A+                             even
  308 00.00001B4A+4840                         dc      $4840
  308 00.00001B4C+                             ;
  308 00.00001B4C+00010000                     dc      dn,0
  308 00.00001B50+0FFF                         dc.b    (0<<4)+15,(15<<4)+15
  308 00.00001B52+FF1F                         dc      (15<<12)+word
  308 00.00001B54+00000000                     dc.l    0
  308 00.00001B58+0000                         dc      0
  308 00.00001B5A+                     n_113   ;
  308 00.00001B5A                              endm
  309 00.00001B5A                      
  310 00.00001B5A                      optas   a       TAS,$4ac0,$1fd,0,0,3,15,15,15,byte,0,0
  310 00.00001B5A+00001B76                     dc.l    n_114
  310 00.00001B5E+00AD                         dc      tnum
  310   =000000AE+                     tnum    set     tnum+1
  310 00.00001B60+5441530000                   dc.b    'TAS',0,0
  310 00.00001B66+                             even
  310 00.00001B66+4AC0                         dc      $4ac0
  310 00.00001B68+                             ;
  310 00.00001B68+01FD0000                     dc      $1fd,0
  310 00.00001B6C+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  310 00.00001B6E+FFF0                         dc      (15<<12)+byte
  310 00.00001B70+00000000                     dc.l    0
  310 00.00001B74+0000                         dc      0
  310 00.00001B76+                     n_114   ;
  310 00.00001B76                              endm
  311 00.00001B76                      
  312 00.00001B76                      optrap  a       TRAP,$4e40,imm,0,15,15,15,15,15,nosz,0,4
  312 00.00001B76+00001B92                     dc.l    n_115
  312 00.00001B7A+00AE                         dc      tnum
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 58
ASMMAC


  312   =000000AF+                     tnum    set     tnum+1
  312 00.00001B7C+545241500000                 dc.b    'TRAP',0,0
  312 00.00001B82+                             even
  312 00.00001B82+4E40                         dc      $4e40
  312 00.00001B84+                             ;
  312 00.00001B84+08000000                     dc      imm,0
  312 00.00001B88+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  312 00.00001B8A+FFFF                         dc      (15<<12)+nosz
  312 00.00001B8C+00000000                     dc.l    0
  312 00.00001B90+0004                         dc      4
  312 00.00001B92+                     n_115   ;
  312 00.00001B92                              endm
  313 00.00001B92                      
  314 00.00001B92                      optrapv a       TRAPV,$4e76,0,0,15,15,15,15,15,nosz,0,0
  314 00.00001B92+00001BB0                     dc.l    n_116
  314 00.00001B96+00AF                         dc      tnum
  314   =000000B0+                     tnum    set     tnum+1
  314 00.00001B98+54524150560000               dc.b    'TRAPV',0,0
  314 00.00001BA0+                             even
  314 00.00001BA0+4E76                         dc      $4e76
  314 00.00001BA2+                             ;
  314 00.00001BA2+00000000                     dc      0,0
  314 00.00001BA6+FFFF                         dc.b    (15<<4)+15,(15<<4)+15
  314 00.00001BA8+FFFF                         dc      (15<<12)+nosz
  314 00.00001BAA+00000000                     dc.l    0
  314 00.00001BAE+0000                         dc      0
  314 00.00001BB0+                     n_116   ;
  314 00.00001BB0                              endm
  315 00.00001BB0                      
  316 00.00001BB0                      optst   a       TST,$4a00,$1fd,0,0,3,15,15,6,sall,0,0
  316 00.00001BB0+00001BCC                     dc.l    n_117
  316 00.00001BB4+00B0                         dc      tnum
  316   =000000B1+                     tnum    set     tnum+1
  316 00.00001BB6+5453540000                   dc.b    'TST',0,0
  316 00.00001BBC+                             even
  316 00.00001BBC+4A00                         dc      $4a00
  316 00.00001BBE+                             ;
  316 00.00001BBE+01FD0000                     dc      $1fd,0
  316 00.00001BC2+03FF                         dc.b    (0<<4)+3,(15<<4)+15
  316 00.00001BC4+6210                         dc      (6<<12)+sall
  316 00.00001BC6+00000000                     dc.l    0
  316 00.00001BCA+0000                         dc      0
  316 00.00001BCC+                     n_117   ;
  316 00.00001BCC                              endm
  317 00.00001BCC                      
  318 00.00001BCC                      opunlk  a       UNLK,$4e58,an,0,0,15,15,15,15,nosz,0,0
  318 00.00001BCC+00001BE8                     dc.l    n_118
  318 00.00001BD0+00B1                         dc      tnum
  318   =000000B2+                     tnum    set     tnum+1
  318 00.00001BD2+554E4C4B0000                 dc.b    'UNLK',0,0
  318 00.00001BD8+                             even
  318 00.00001BD8+4E58                         dc      $4e58
  318 00.00001BDA+                             ;
  318 00.00001BDA+00020000                     dc      an,0
  318 00.00001BDE+0FFF                         dc.b    (0<<4)+15,(15<<4)+15
  318 00.00001BE0+FFFF                         dc      (15<<12)+nosz
  318 00.00001BE2+00000000                     dc.l    0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 59
ASMMAC


  318 00.00001BE6+0000                         dc      0
  318 00.00001BE8+                     n_118   ;
  318 00.00001BE8                              endm
  319 00.00001BE8                      
  320 00.00001BE8                      ;-----------The End------------;
  321 00.00001BE8                      
  322 00.00001BE8                              c
  322 00.00001BE8+00001E5A                     dc.l    toktnum
  322 00.00001BEC+00B2                         dc      tnum
  322   =000000B3+                     tnum    set     tnum+1
  322 00.00001BEE+456E6441736D0000             dc.b    'EndAsm',0,0
  322 00.00001BF6+                             even
  322 00.00001BF6                              endm
  323 00.00001BF6                      
  324 00.00001BF6                      ;-----------The code-----------;
  325 00.00001BF6                      
  326 00.00001BF6                              ;d1=opcode
  327 00.00001BF6                              ;d2=src  reg,d3=src  mode
  328 00.00001BF6                              ;d4=dest reg,d5=dest mode
  329 00.00001BF6                              ;d6.l=src  longint
  330 00.00001BF6                              ;d7.l=dest longint
  331 00.00001BF6                              ;d0.l=extraword1<<16+extraword2
  332 00.00001BF6                              ;all changes get used in assembly!
  333 00.00001BF6                      
  334 00.00001BF6 7000                 noerror moveq   #0,d0
  335 00.00001BF8 4E75                         rts
  336 00.00001BFA                      
  337 00.00001BFA 70FF                 eaerror moveq   #-1,d0
  338 00.00001BFC 4E75                         rts
  339 00.00001BFE                      
  340 00.00001BFE 70FE                 szerror moveq   #-2,d0
  341 00.00001C00 4E75                         rts
  342 00.00001C02                      
  343 00.00001C02 7001                 swapem  moveq   #1,d0
  344 00.00001C04 4E75                         rts
  345 00.00001C06                      
  346 00.00001C06 BA43                 movemchk        cmp     d3,d5
  347 00.00001C08 6700FFF0                     beq     eaerror
  348 00.00001C0C B67C000F                     cmp     #15,d3
  349 00.00001C10 6700001E                     beq     .regsrc
  350 00.00001C14 BA7C000F                     cmp     #15,d5
  351 00.00001C18 6600FFE0                     bne     eaerror
  352 00.00001C1C                      .regdest        ;
  353 00.00001C1C 7000                         moveq   #0,d0
  354 00.00001C1E 07C0                         bset    d3,d0
  355 00.00001C20 02400813                     and     #$813,d0
  356 00.00001C24 6600FFD4                     bne     eaerror
  357 00.00001C28 08C1000A                     bset    #10,d1
  358 00.00001C2C 6000FFD4                     bra     swapem
  359 00.00001C30                              ;
  360 00.00001C30                      .regsrc ;
  361 00.00001C30 7000                         moveq   #0,d0
  362 00.00001C32 0BC0                         bset    d5,d0    
  363 00.00001C34 02400E0B                     and     #$e0b,d0
  364 00.00001C38 6600FFC0                     bne     eaerror
  365 00.00001C3C BA7C0004                     cmp     #4,d5
  366 00.00001C40 6600FFB4                     bne     noerror
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 60
ASMMAC


  367 00.00001C44 700F                         moveq   #15,d0
  368 00.00001C46 E34A                 .loop   lsl     #1,d2
  369 00.00001C48 E256                         roxr    #1,d6
  370 00.00001C4A 51C8FFFA                     dbf     d0,.loop
  371 00.00001C4E 3406                         move    d6,d2
  372 00.00001C50 6000FFA4                     bra     noerror
  373 00.00001C54                      
  374 00.00001C54 BA43                 movepchk        cmp     d3,d5
  375 00.00001C56 6700FFA2                     beq     eaerror
  376 00.00001C5A 4A43                         tst     d3
  377 00.00001C5C 6600FF98                     bne     noerror
  378 00.00001C60 08C10007                     bset    #7,d1
  379 00.00001C64 6000FF90                     bra     noerror
  380 00.00001C68                      
  381 00.00001C68 B67C000C             movechk cmp     #12,d3
  382 00.00001C6C 65000026                     bcs     .notfrom
  383 00.00001C70                              ;
  384 00.00001C70 BA7C000C                     cmp     #12,d5
  385 00.00001C74 6400FF84                     bcc     eaerror
  386 00.00001C78 B67C000C                     cmp     #12,d3
  387 00.00001C7C 6700008C                     beq     .fromccr
  388 00.00001C80 B67C000D                     cmp     #13,d3
  389 00.00001C84 67000098                     beq     .fromsr
  390 00.00001C88 B67C000E                     cmp     #14,d3
  391 00.00001C8C 67000050                     beq     .fromusp
  392 00.00001C90                              ;
  393 00.00001C90 6000FF68                     bra     eaerror
  394 00.00001C94                              ;
  395 00.00001C94 BA7C000C             .notfrom        cmp     #12,d5
  396 00.00001C98 65000026                     bcs     .dosize
  397 00.00001C9C                              ;
  398 00.00001C9C B67C000C                     cmp     #12,d3
  399 00.00001CA0 6400FF58                     bcc     eaerror
  400 00.00001CA4 BA7C000C                     cmp     #12,d5
  401 00.00001CA8 6700007C                     beq     .toccr
  402 00.00001CAC BA7C000D                     cmp     #13,d5
  403 00.00001CB0 67000088                     beq     .tosr
  404 00.00001CB4 BA7C000E                     cmp     #14,d5
  405 00.00001CB8 6700003E                     beq     .tousp
  406 00.00001CBC                              ;
  407 00.00001CBC 6000FF3C                     bra     eaerror
  408 00.00001CC0                              ;
  409 00.00001CC0 323C1000             .dosize move    #$1000,d1
  410 00.00001CC4 4A46                         tst     d6
  411 00.00001CC6 6700FF2E                     beq     noerror
  412 00.00001CCA 323C3000                     move    #$3000,d1
  413 00.00001CCE BC7C0004                     cmp     #4,d6
  414 00.00001CD2 6700FF22                     beq     noerror
  415 00.00001CD6 323C2000                     move    #$2000,d1
  416 00.00001CDA 6000FF1A                     bra     noerror
  417 00.00001CDE                      
  418 00.00001CDE BA7C0001             .fromusp        cmp     #1,d5   ;to address reg?
  419 00.00001CE2 6600FF16                     bne     eaerror
  420 00.00001CE6 323C4E68                     move    #$4e68,d1
  421 00.00001CEA 8244                         or      d4,d1
  422 00.00001CEC 7400                 .usp    moveq   #0,d2
  423 00.00001CEE 7600                         moveq   #0,d3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 61
ASMMAC


  424 00.00001CF0 7800                         moveq   #0,d4
  425 00.00001CF2 7A00                         moveq   #0,d5
  426 00.00001CF4 6000FF00                     bra     noerror
  427 00.00001CF8 B67C0001             .tousp  cmp     #1,d3
  428 00.00001CFC 6600FEFC                     bne     eaerror
  429 00.00001D00 323C4E60                     move    #$4e60,d1
  430 00.00001D04 8242                         or      d2,d1
  431 00.00001D06 6000FFE4                     bra     .usp
  432 00.00001D0A                              ;
  433 00.00001D0A 323C42C0             .fromccr        move    #$42c0,d1
  434 00.00001D0E BC7C0004             .from   cmp     #4,d6
  435 00.00001D12 6600FEEA                     bne     szerror
  436 00.00001D16 7600                         moveq   #0,d3
  437 00.00001D18 7400                         moveq   #0,d2
  438 00.00001D1A 6000FEE6                     bra     swapem
  439 00.00001D1E 323C40C0             .fromsr move    #$40c0,d1
  440 00.00001D22 6000FFEA                     bra     .from
  441 00.00001D26                              ;
  442 00.00001D26 323C44C0             .toccr  move    #$44c0,d1
  443 00.00001D2A BC7C0004             .to     cmp     #4,d6
  444 00.00001D2E 6600FECE                     bne     szerror
  445 00.00001D32 7A00                         moveq   #0,d5
  446 00.00001D34 7800                         moveq   #0,d4
  447 00.00001D36 6000FEBE                     bra     noerror
  448 00.00001D3A 323C46C0             .tosr   move    #$46c0,d1
  449 00.00001D3E 6000FFEA                     bra     .to
  450 00.00001D42                      
  451 00.00001D42 BA43                 exgchk  cmp     d3,d5
  452 00.00001D44 67000010                     beq     .skip
  453 00.00001D48 00410088                     or      #$88,d1
  454 00.00001D4C 4A43                         tst     d3
  455 00.00001D4E 6700FEA6                     beq     noerror
  456 00.00001D52 6000FEAE                     bra     swapem
  457 00.00001D56 4A43                 .skip   tst     d3
  458 00.00001D58 6700000A                     beq     .data
  459 00.00001D5C 00410048                     or      #$48,d1
  460 00.00001D60 6000FE94                     bra     noerror
  461 00.00001D64 00410040             .data   or      #$40,d1
  462 00.00001D68 6000FE8C                     bra     noerror
  463 00.00001D6C                      
  464 00.00001D6C 4A43                 bitchk  tst     d3
  465 00.00001D6E 6600000C                     bne     .notdn
  466 00.00001D72 E14A                         lsl     #8,d2
  467 00.00001D74 E34A                         lsl     #1,d2
  468 00.00001D76 8242                         or      d2,d1
  469 00.00001D78 6000FE7C                     bra     noerror
  470 00.00001D7C BC7C0008             .notdn  cmp     #8,d6
  471 00.00001D80 6400FE7C                     bcc     szerror
  472 00.00001D84 0A410900                     eor     #$900,d1
  473 00.00001D88 6000FE6C                     bra     noerror
  474 00.00001D8C                      
  475 00.00001D8C 303CE4C0             roxlchk move    #$e4c0,d0
  476 00.00001D90 60000016                     bra     aslchk2
  477 00.00001D94                      
  478 00.00001D94 303CE6C0             rolchk  move    #$e6c0,d0
  479 00.00001D98 6000000E                     bra     aslchk2
  480 00.00001D9C                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 62
ASMMAC


  481 00.00001D9C 303CE2C0             lslchk  move    #$e2c0,d0
  482 00.00001DA0 60000006                     bra     aslchk2
  483 00.00001DA4                      
  484 00.00001DA4 303CE0C0             aslchk  move    #$e0c0,d0
  485 00.00001DA8 4A45                 aslchk2 tst     d5
  486 00.00001DAA 6B000028                     bmi     .word
  487 00.00001DAE 6600FE4A                     bne     eaerror
  488 00.00001DB2 E94E                         lsl     #4,d6
  489 00.00001DB4 8246                         or      d6,d1
  490 00.00001DB6 8244                         or      d4,d1
  491 00.00001DB8 B67C000B                     cmp     #11,d3
  492 00.00001DBC 6700FE38                     beq     noerror
  493 00.00001DC0 4A43                         tst     d3
  494 00.00001DC2 6600FE36                     bne     eaerror
  495 00.00001DC6 E14A                         lsl     #8,d2
  496 00.00001DC8 E34A                         lsl     #1,d2
  497 00.00001DCA 8242                         or      d2,d1
  498 00.00001DCC 08C10005                     bset    #5,d1
  499 00.00001DD0 6000FE24                     bra     noerror
  500 00.00001DD4 7A00                 .word   moveq   #0,d5   ;dummy d0
  501 00.00001DD6 4A43                         tst     d3
  502 00.00001DD8 6700FE20                     beq     eaerror
  503 00.00001DDC BC7C0004                     cmp     #4,d6
  504 00.00001DE0 6600FE1C                     bne     szerror
  505 00.00001DE4 02410100                     and     #$100,d1
  506 00.00001DE8 8240                         or      d0,d1
  507 00.00001DEA 48A73000                     movem   d2-d3,-(a7)
  508 00.00001DEE B67C0007                     cmp     #7,d3
  509 00.00001DF2 65000008                     bcs     .skip
  510 00.00001DF6 3403                         move    d3,d2
  511 00.00001DF8 5F42                         subq    #7,d2
  512 00.00001DFA 7607                         moveq   #7,d3
  513 00.00001DFC 8242                 .skip   or      d2,d1
  514 00.00001DFE E74B                         lsl     #3,d3
  515 00.00001E00 8243                         or      d3,d1
  516 00.00001E02 4C9F000C                     movem   (a7)+,d2-d3
  517 00.00001E06 6000FDEE                     bra     noerror
  518 00.00001E0A                      
  519 00.00001E0A BA43                 abcdchk cmp     d3,d5
  520 00.00001E0C 6600FDEC                     bne     eaerror
  521 00.00001E10 4A43                         tst     d3
  522 00.00001E12 67000008                     beq     .ok
  523 00.00001E16 08C10003                     bset    #3,d1
  524 00.00001E1A B643                         cmp     d3,d3
  525 00.00001E1C 4E75                 .ok     rts
  526 00.00001E1E                      
  527 00.00001E1E 4A45                 addchk  tst     d5      ;if dest is dn, ok
  528 00.00001E20 67000010                     beq     .ok
  529 00.00001E24 4A43                         tst     d3
  530 00.00001E26 6600FDD2                     bne     eaerror ;src not dn - fuct
  531 00.00001E2A 08C10008                     bset    #8,d1   ;turn into dn,<ea>
  532 00.00001E2E 6000FDD2                     bra     swapem
  533 00.00001E32 4E75                 .ok     rts
  534 00.00001E34                      
  535 00.00001E34 BA7C000C             andichk cmp     #12,d5  ;dest ccr?
  536 00.00001E38 6600000C                     bne     .notccr
  537 00.00001E3C 4A46                         tst     d6
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 63
ASMMAC


  538 00.00001E3E 6600FDBE                     bne     szerror
  539 00.00001E42 6000FDB2                     bra     noerror
  540 00.00001E46 BA7C000D             .notccr cmp     #13,d5  ;or ccr?
  541 00.00001E4A 6600FDAA                     bne     noerror
  542 00.00001E4E BC7C0004                     cmp     #4,d6
  543 00.00001E52 6600FDAA                     bne     szerror
  544 00.00001E56 6000FD9E                     bra     noerror
  545 00.00001E5A                      
  546 00.00001E5A                      
  578 00.00001E5A                              ;
  579 00.00001E5A 00001E66             toktnum dc.l    toktnum2        ;*****
  580 00.00001E5E 00B3                         dc      tnum    ;next one is tnum+1, tnum+2...
  581 00.00001E60 4C6973740000                 dc.b    'List',0,0
  582 00.00001E66                              even
  583 00.00001E66 00001E74             toktnum2        dc.l    toktnum3        ;*****
  584 00.00001E6A 00B4                         dc      tnum+1
  585 00.00001E6C 5365744572720000             dc.b    'SetErr',0,0
  586 00.00001E74                              even
  587 00.00001E74 00001E82             toktnum3        dc.l    toktnum5        ;toktnum4       ;*****
  588 00.00001E78 00B5                         dc      tnum+2
  589 00.00001E7A 436C724572720000             dc.b    'ClrErr',0,0
  590 00.00001E82                              even
  591 00.00001E82                      ;toktnum4       dc.l    toktnum5
  592 00.00001E82                      ;       dc      tnum+3
  593 00.00001E82                      ;       dc.b    'Ern',0,0
  594 00.00001E82                      ;       even
  595 00.00001E82 00001E92             toktnum5        dc.l    toktnum6        ;*****
  596 00.00001E86 00B7                         dc      tnum+4
  597 00.00001E88 4572724661696C0000           dc.b    'ErrFail',0,0
  598 00.00001E92                              even
  599 00.00001E92 00001EB2             toktnum6        dc.l    toktnum7        ;*****
  600 00.00001E96 00B8                         dc      tnum+5
  601 00.00001E98 4164647200                   dc.b    'Addr',0
  602 00.00001E9D 4F626A6563746E616D65         dc.b    'Objectname(Object#)',0
  603 00.00001EB2                              even
  604 00.00001EB2 00001EBE             toktnum7        dc.l    toktnum8
  605 00.00001EB6 00B9                         dc      tnum+6
  606 00.00001EB8 4D4F440000                   dc.b    'MOD',0,0
  607 00.00001EBE                              even
  608 00.00001EBE 00001EC8             toktnum8        dc.l    toktnum9
  609 00.00001EC2 00BA                         dc      tnum+7
  610 00.00001EC4 50690000                     dc.b    'Pi',0,0
  611 00.00001EC8                              even
  612 00.00001EC8 00001ED6             toktnum9        dc.l    toktnum10       ;*****
  613 00.00001ECC 00BB                         dc      tnum+8
  614 00.00001ECE 5265706561740000             dc.b    'Repeat',0,0
  615 00.00001ED6                              even
  616 00.00001ED6 00001EEE             toktnum10       dc.l    toktnum11       ;*****
  617 00.00001EDA 00BC                         dc      tnum+9
  618 00.00001EDC 556E74696C00                 dc.b    'Until',0
  619 00.00001EE2 45787072657373696F6E         dc.b    'Expression',0
  620 00.00001EEE                              even
  621 00.00001EEE 00001F0E             toktnum11       dc.l    toktnum12       ;*****
  622 00.00001EF2 00BD                         dc      tnum+10
  623 00.00001EF4 50757452656700               dc.b    'PutReg',0
  624 00.00001EFB 3638303030205265672C         dc.b    '68000 Reg,Variable',0
  625 00.00001F0E                              even
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 64
blitz2.s


  626 00.00001F0E 00001F3A             toktnum12       dc.l    toktnum13       ;*****
  627 00.00001F12 00BE                         dc      tnum+11
  628 00.00001F14 506F7000                     dc.b    'Pop',0
  629 00.00001F18 476F7375627C466F727C         dc.b    'Gosub|For|Select|If|While|Repeat',0
  630 00.00001F3A                              even
  631 00.00001F3A 00001F50             toktnum13       dc.l    toktnum14       ;*****
  632 00.00001F3E 00BF                         dc      tnum+12
  633 00.00001F40 494E4344495200               dc.b    'INCDIR',0
  634 00.00001F47 506174686E616D6500           dc.b    'Pathname',0
  635 00.00001F50                              even
  636 00.00001F50 00001F5E             toktnum14       dc.l    toktnum15       ;*****
  637 00.00001F54 00C0                         dc      tnum+13
  638 00.00001F56 456E6449660000               dc.b    'EndIf',0,0
  639 00.00001F5E                              even
  640 00.00001F5E 00001F6A             toktnum15       dc.l    toktnum16       ;*****
  641 00.00001F62 00C1                         dc      tnum+14
  642 00.00001F64 57656E640000                 dc.b    'Wend',0,0
  643 00.00001F6A                              even
  644 00.00001F6A 00001F80             toktnum16       dc.l    toktnum17       ;*****
  645 00.00001F6E 00C2                         dc      tnum+15
  646 00.00001F70 5379734A737200               dc.b    'SysJsr',0
  647 00.00001F77 526F7574696E6500             dc.b    'Routine',0
  648 00.00001F80                              even
  649 00.00001F80 00001F92             toktnum17       dc.l    toktnum18       ;*****
  650 00.00001F84 00C3                         dc      tnum+16
  651 00.00001F86 57425374617274757000         dc.b    'WBStartup',0,0
  652 00.00001F92                              even
  653 00.00001F92 00001FAC             toktnum18       dc.l    toktnum19       ;*****
  654 00.00001F96 00C4                         dc      tnum+17
  655 00.00001F98 4D6178696D756D00             dc.b    'Maximum',0
  656 00.00001FA0 4F626A6563746E616D65         dc.b    'Objectname',0
  657 00.00001FAC                              even
  658 00.00001FAC 00001FEC             toktnum19       dc.l    toktnum20       ;**???
  659 00.00001FB0 00C5                         dc      tnum+18
  660 00.00001FB2 4F6E00                       dc.b    'On',0
  661 00.00001FB5 45787072657373696F6E         dc.b    'Expression Goto|Gosub Program Label[,Program Label...]',0
  662 00.00001FEC                              even
  663 00.00001FEC 00001FF8             toktnum20       dc.l    toktnum21
  664 00.00001FF0 00C6                         dc      tnum+19
  665 00.00001FF2 4F66660000                   dc.b    'Off',0,0
  666 00.00001FF8                              even
  667 00.00001FF8 00002008             toktnum21       dc.l    toktnum22       ;*****
  668 00.00001FFC 00C7                         dc      tnum+20
  669 00.00001FFE 466F72657665720000           dc.b    'Forever',0,0
  670 00.00002008                              even
  671 00.00002008 00002026             toktnum22       dc.l    toktnum23       ;*****
  672 00.0000200C 00C8                         dc      tnum+21
  673 00.0000200E 526573746F726500             dc.b    'Restore',0
  674 00.00002016 5B50726F6772616D204C         dc.b    '[Program Label]',0
  675 00.00002026                              even
  676 00.00002026 0000203E             toktnum23       dc.l    toktnum24       ;*****
  677 00.0000202A 00C9                         dc      tnum+22
  678 00.0000202C 45786368616E676500           dc.b    'Exchange',0
  679 00.00002035 5661722C56617200             dc.b    'Var,Var',0
  680 00.0000203E                              even
  681 00.0000203E 00002056             toktnum24       dc.l    toktnum25
  682 00.00002042 00CA                         dc      tnum+23
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 65
blitz2.s


  683 00.00002044 5553455041544800             dc.b    'USEPATH',0
  684 00.0000204C 506174687465787400           dc.b    'Pathtext',0
  685 00.00002056                              even
  686 00.00002056 00002066             toktnum25       dc.l    toktnum26
  687 00.0000205A 00CB                         dc      tnum+24
  688 00.0000205C 436C6F736545640000           dc.b    'CloseEd',0,0
  689 00.00002066                              even
  690 00.00002066 00002074             toktnum26       dc.l    toktnum27
  691 00.0000206A 00CC                         dc      tnum+25
  692 00.0000206C 4E6F436C690000               dc.b    'NoCli',0,0
  693 00.00002074                              even
  694 00.00002074 00002082             toktnum27       dc.l    toktnum28
  695 00.00002078 00CD                         dc      tnum+26
  696 00.0000207A 4269745473740000             dc.b    'BitTst',0,0
  697 00.00002082                              even
  698 00.00002082 00002090             toktnum28       dc.l    toktnum29
  699 00.00002086 00CE                         dc      tnum+27
  700 00.00002088 4269745365740000             dc.b    'BitSet',0,0
  701 00.00002090                              even
  702 00.00002090 0000209E             toktnum29       dc.l    toktnum30
  703 00.00002094 00CF                         dc      tnum+28
  704 00.00002096 426974436C720000             dc.b    'BitClr',0,0
  705 00.0000209E                              even
  706 00.0000209E 000020AC             toktnum30       dc.l    toktnum31
  707 00.000020A2 00D0                         dc      tnum+29
  708 00.000020A4 4269744368670000             dc.b    'BitChg',0,0
  709 00.000020AC                              even
  710 00.000020AC 000020CC             toktnum31       dc.l    toktnum32
  711 00.000020B0 00D1                         dc      tnum+30
  712 00.000020B2 5573656400                   dc.b    'Used',0
  713 00.000020B7 4F626A6563746E616D65         dc.b    'Objectname(Object#)',0
  714 00.000020CC                              even
  715 00.000020CC 000020DE             toktnum32       dc.l    toktnum33       ;last must be zero, else pointer to next
  716 00.000020D0 00D2                         dc      tnum+31 ;increment this
  717 00.000020D2 52756E657272736F6E00         dc.b    'Runerrson',0,0 ;name
  718 00.000020DE                              even
  719 00.000020DE 00000000             toktnum33       dc.l    0
  720 00.000020E2 00D3                         dc      tnum+32
  721 00.000020E4 52756E657272736F6666         dc.b    'Runerrsoff',0,0
  722 00.000020F0                              even
  723 00.000020F0                      
  724 00.000020F0 434F4D50494C455200   menus   dc.b    'COMPILER',0
  725 00.000020F9 434F4D50494C4520414E         dc.b    'COMPILE AND RUN        ',0,'X'
  726 00.00002112 52554E20202020202020         dc.b    'RUN                    ',0,'M'
  727 00.0000212B 43524541544520455845         dc.b    'CREATE EXECUTABLE      ',0,'E'
  728 00.00002144 434F4D50494C4552204F         dc.b    'COMPILER OPTIONS       ',0,'O'
  729 00.0000215D 43524541544520524553         dc.b    'CREATE RESIDENT        ',0,';'
  730 00.00002176 56494557204E45575459         dc.b    'VIEW NEWTYPES          ',0,'-'
  731 00.0000218F 434C4920415247554D45         dc.b    'CLI ARGUMENT           ',0,'='
  732 00.000021A8 43414C43554C41544F52         dc.b    'CALCULATOR             ',0,'H'
  733 00.000021C1 52454C4F414420414C4C         dc.b    'RELOAD ALL LIBS        ',0,'\'
  734 00.000021DA 4C4F4144204445425547         dc.b    'LOAD DEBUG MODULE      ',0,'.'
  735   =FFFFFFFF                              ifeq    final
  736 00.000021F3                              dc.b    'PRINT TOKENS',0,0
  737 00.000021F3                              endc
  738 00.000021F3 00                           dc.b    0
  739 00.000021F4                              even
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 66
blitz2.s


  740 00.000021F4                      
  741 00.000021F4 00003396000033AC0000 menuadds        dc.l    menu0,menu10,menu1,menu4,menu5
  742 00.00002208 0000EF9600011EE80001         dc.l    menu6,menu9,menu7,menu8,menu_d
  743   =FFFFFFFF                              ifeq    final
  744 00.0000221C                              dc.l    menu3
  745 00.0000221C                              endc
  746 00.0000221C                      
  747 00.0000221C                              cnop    0,4
  748 00.0000221C                      undobuffer      ds.b    128
  749 00.0000229C                      
  750 00.0000229C 626C69747A323A757365 libsdir dc.b    'blitz2:userlibs/',0
  751 00.000022AE                              even
  752 00.000022AE                      
  753 00.000022AE 00000000             nomemreq        dc.l    0
  754 00.000022B2 0074003A013000440000         dc.w    116,58,304,68,0,0
  755 00.000022BE 000024B60000231E0000         dc.l    nomemreqga1,nomemreqbo1,nomemreqin1
  756 00.000022CA 0000                         dc.w    0
  757 00.000022CC 0000                         dc.b    0,0
  758 00.000022CE 00000000                     dc.l    0
  759 00.000022D2                              ds.b    32
  760 00.000022F2 0000000000000000             dc.l    0,0
  761 00.000022FA                              ds.b    36
  762 00.0000231E                      
  763 00.0000231E 00000000             nomemreqbo1     dc.w    0,0
  764 00.00002322 01020103                     dc.b    1,2,1,3
  765 00.00002326 0000232E0000233A             dc.l    nomemreqla1,nomemreqla2
  766 00.0000232E 012F0000000000000000 nomemreqla1     dc.w    303,0,0,0,0,67
  767 00.0000233A 00000000             nomemreqla2     dc.w    0,0
  768 00.0000233E 02010103                     dc.b    2,1,1,3
  769 00.00002342 0000234A00000000             dc.l    nomemreqla3,0
  770 00.0000234A 012F0001012F00430001 nomemreqla3     dc.w    303,1,303,67,1,67
  771 00.00002356 00000000             nomemreqbo2     dc.w    0,0
  772 00.0000235A 01020103                     dc.b    1,2,1,3
  773 00.0000235E 0000236600002372             dc.l    nomemreqla5,nomemreqla6
  774 00.00002366 00CF0000000000000000 nomemreqla5     dc.w    207,0,0,0,0,11
  775 00.00002372 00000000             nomemreqla6     dc.w    0,0
  776 00.00002376 02010103                     dc.b    2,1,1,3
  777 00.0000237A 0000238200000000             dc.l    nomemreqla7,0
  778 00.00002382 00CF000100CF000B0001 nomemreqla7     dc.w    207,1,207,11,1,11
  779 00.0000238E 00000000             nomemreqbo3     dc.w    0,0
  780 00.00002392 01020103                     dc.b    1,2,1,3
  781 00.00002396 0000239E000023AA             dc.l    nomemreqla9,nomemreqla10
  782 00.0000239E 00CF0000000000000000 nomemreqla9     dc.w    207,0,0,0,0,11
  783 00.000023AA 00000000             nomemreqla10    dc.w    0,0
  784 00.000023AE 02010103                     dc.b    2,1,1,3
  785 00.000023B2 000023BA00000000             dc.l    nomemreqla11,0
  786 00.000023BA 00CF000100CF000B0001 nomemreqla11    dc.w    207,1,207,11,1,11
  787 00.000023C6 00000000             nomemreqbo4     dc.w    0,0
  788 00.000023CA 01020103                     dc.b    1,2,1,3
  789 00.000023CE 000023D6000023E2             dc.l    nomemreqla13,nomemreqla14
  790 00.000023D6 00770000000000000000 nomemreqla13    dc.w    119,0,0,0,0,11
  791 00.000023E2 00000000             nomemreqla14    dc.w    0,0
  792 00.000023E6 02010103                     dc.b    2,1,1,3
  793 00.000023EA 000023F200000000             dc.l    nomemreqla15,0
  794 00.000023F2 007700010077000B0001 nomemreqla15    dc.w    119,1,119,11,1,11
  795 00.000023FE                      
  796 00.000023FE 01000100             nomemreqin1     dc.b    1,0,1,0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 67
blitz2.s


  797 00.00002402 000C0006                     dc.w    12,6
  798 00.00002406 00000000                     dc.l    0
  799 00.0000240A 0000241200000000             dc.l    nomemreqla4,0
  800 00.00002412 4E6F7420456E6F756768 nomemreqla4     dc.b    'Not Enough Object Memory Available!',0
  801 00.00002436                              even
  802 00.00002436 01000100             nomemreqin2     dc.b    1,0,1,0
  803 00.0000243A 00040002                     dc.w    4,2
  804 00.0000243E 00000000                     dc.l    0
  805 00.00002442 0000244A00000000             dc.l    nomemreqla8,0
  806 00.0000244A 494E4352454153452031 nomemreqla8     dc.b    'INCREASE 150% - RECOMPILE',0
  807 00.00002464                              even
  808 00.00002464 01000100             nomemreqin3     dc.b    1,0,1,0
  809 00.00002468 00040002                     dc.w    4,2
  810 00.0000246C 00000000                     dc.l    0
  811 00.00002470 0000247800000000             dc.l    nomemreqla12,0
  812 00.00002478 4D414B4520534D414C4C nomemreqla12    dc.b    'MAKE SMALLEST - RECOMPILE',0
  813 00.00002492                              even
  814 00.00002492 01000100             nomemreqin4     dc.b    1,0,1,0
  815 00.00002496 00040002                     dc.w    4,2
  816 00.0000249A 00000000                     dc.l    0
  817 00.0000249E 000024A600000000             dc.l    nomemreqla16,0
  818 00.000024A6 43414E43454C20434F4D nomemreqla16    dc.b    'CANCEL COMPILE',0
  819 00.000024B6                              even
  820 00.000024B6                      
  821 00.000024B6 000024E2             nomemreqga1     dc.l    nomemreqga2
  822 00.000024BA 0030001400D0000C0000         dc.w    48,20,208,12,0,5,1
  823 00.000024C8 00002356000000000000         dc.l    nomemreqbo2,0,nomemreqin2,0,0
  824 00.000024DC 0001                         dc.w    1
  825 00.000024DE 00000000                     dc.l    0
  826 00.000024E2 0000250E             nomemreqga2     dc.l    nomemreqga3
  827 00.000024E6 0030002400D0000C0000         dc.w    48,36,208,12,0,5,1
  828 00.000024F4 0000238E000000000000         dc.l    nomemreqbo3,0,nomemreqin3,0,0
  829 00.00002508 0002                         dc.w    2
  830 00.0000250A 00000000                     dc.l    0
  831 00.0000250E 00000000             nomemreqga3     dc.l    0
  832 00.00002512 006000340078000C0000         dc.w    96,52,120,12,0,5,1
  833 00.00002520 000023C6000000000000         dc.l    nomemreqbo4,0,nomemreqin4,0,0
  834 00.00002534 0003                         dc.w    3
  835 00.00002536 00000000                     dc.l    0
  836 00.0000253A                      
  837 00.0000253A                      asmpnts ds.l    tnum-fnum
  838 00.00002716                      
  839 00.00002716 00000000             verreq  dc.l    0
  840 00.0000271A 006C003A0118003C0000         dc.w    108,58,280,60,0,0
  841 00.00002726 000028A2000027860000         dc.l    verreqga1,verreqbo1,verreqin1
  842 00.00002732 0000                         dc.w    0
  843 00.00002734 0000                         dc.b    0,0
  844 00.00002736 00000000                     dc.l    0
  845 00.0000273A                              ds.b    32
  846 00.0000275A 0000000000000000             dc.l    0,0
  847 00.00002762                              ds.b    36
  848 00.00002786                      
  849 00.00002786 00000000             verreqbo1       dc.w    0,0
  850 00.0000278A 01020103                     dc.b    1,2,1,3
  851 00.0000278E 00002796000027A2             dc.l    verreqla1,verreqla2
  852 00.00002796 01170000000000000000 verreqla1       dc.w    279,0,0,0,0,59
  853 00.000027A2 00000000             verreqla2       dc.w    0,0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 68
blitz2.s


  854 00.000027A6 02010103                     dc.b    2,1,1,3
  855 00.000027AA 000027B200000000             dc.l    verreqla3,0
  856 00.000027B2 011700010117003B0001 verreqla3       dc.w    279,1,279,59,1,59
  857 00.000027BE 00000000             verreqbo2       dc.w    0,0
  858 00.000027C2 01020103                     dc.b    1,2,1,3
  859 00.000027C6 000027CE000027DA             dc.l    verreqla7,verreqla8
  860 00.000027CE 00670000000000000000 verreqla7       dc.w    103,0,0,0,0,11
  861 00.000027DA 00000000             verreqla8       dc.w    0,0
  862 00.000027DE 02010103                     dc.b    2,1,1,3
  863 00.000027E2 000027EA00000000             dc.l    verreqla9,0
  864 00.000027EA 006700010067000B0001 verreqla9       dc.w    103,1,103,11,1,11
  865 00.000027F6                      
  866 00.000027F6 01000100             verreqin1       dc.b    1,0,1,0
  867 00.000027FA 00240006                     dc.w    36,6
  868 00.000027FE 00000000                     dc.l    0
  869 00.00002802 0000280A00002826             dc.l    verreqla4,verreqin2
  870 00.0000280A 426C69747A2042617369 verreqla4       dc.b    'Blitz Basic 2 Version '
  871   =00000001                      tver    set     version/100
  872 00.00002820 312E                         dc.b    tver+48,'.'
  873   =0000005F                      tver    set     version-(tver*100)
  874   =00000009                      tver2   set     tver/10
  875 00.00002822 39                           dc.b    tver2+48
  876   =00000005                      tver    set     tver-(tver2*10)
  877 00.00002823 3500                         dc.b    tver+48,0
  878 00.00002825                              ;dc.b   (version/10)+48,'.',version-((version/10)*10)+48,'0',0
  879 00.00002826                              even
  880 00.00002826 01000100             verreqin2       dc.b    1,0,1,0
  881 00.0000282A 000C0012                     dc.w    12,18
  882 00.0000282E 00000000                     dc.l    0
  883 00.00002832 0000283A0000285C             dc.l    verreqla5,verreqin3
  884 00.0000283A 2843296F707972696768 verreqla5       dc.b    '(C)opyright 1995 - Acid Software',0
  885 00.0000285C                              even
  886 00.0000285C 01000100             verreqin3       dc.b    1,0,1,0
  887 00.00002860                              
  888   =00000000                              ifne    demo
  889 00.00002860                              dc      64-8,30
  890 00.00002860                              dc.l    0,verreqla6,0
  891 00.00002860                      verreqla6       dc.b    'Demonstartion Version',0
  892 00.00002860                              endc
  893 00.00002860                      
  894   =FFFFFFFF                              ifne    release
  895 00.00002860 0050001E                     dc      64+16,30
  896 00.00002864 00000000000028700000         dc.l    0,verreqla6,0
  897 00.00002870 52656C65617365205665 verreqla6       dc.b    'Release Version',0
  898 00.00002880                              endc
  899 00.00002880                      
  900 00.00002880                              even
  901 00.00002880 01000100             verreqin4       dc.b    1,0,1,0
  902 00.00002884 00040002                     dc.w    4,2
  903 00.00002888 00000000                     dc.l    0
  904 00.0000288C 0000289400000000             dc.l    verreqla10,0
  905 00.00002894 204F4B454520444F4B45 verreqla10      dc.b    ' OKEE DOKEE ',0
  906 00.000028A2                              even
  907 00.000028A2                      
  908 00.000028A2 00000000             verreqga1       dc.l    0
  909 00.000028A6 005C002C0068000C0000         dc.w    92,44,104,12,0,5,1
  910 00.000028B4 000027BE000000000000         dc.l    verreqbo2,0,verreqin4,0,0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 69
blitz2.s


  911 00.000028C8 0001                         dc.w    1
  912 00.000028CA 00000000                     dc.l    0
  913 00.000028CE                      
  914 00.000028CE                      objects ;some object codes for compile
  915 00.000028CE                      
  916 00.000028CE E148                 lslimm  lsl     #8,d0
  917 00.000028D0                      
  918 00.000028D0 266D0000             use     move.l  0(a5),a3
  919 00.000028D4 D6C0                         add     d0,a3
  920 00.000028D6 2B4B0000                     move.l  a3,0(a5)
  921 00.000028DA                      usef    ;
  922 00.000028DA                      
  923 00.000028DA 203C00000000         beginarr        move.l  #0,d0
  924 00.000028E0                      
  925 00.000028E0 C0C1                 mularr  mulu    d1,d0
  926 00.000028E2                      
  927 00.000028E2 2B400000             putarr  move.l  d0,0(a5)
  928 00.000028E6                      
  929 00.000028E6 343C0000             doarr   move    #0,d2
  930 00.000028EA 363C0000                     move    #0,d3
  931 00.000028EE                      doarrf  ;
  932 00.000028EE                      
  933 00.000028EE 4A40                 tstword tst.w   d0
  934 00.000028F0 4A80                 tstlong tst.l   d0
  935 00.000028F2                      
  936 00.000028F2 4E71                 nops8   nop
  937 00.000028F4 4E71                         nop
  938 00.000028F6 4E71                         nop
  939 00.000028F8 4E71                         nop
  940 00.000028FA 4E71                 nops4   nop
  941 00.000028FC 4E71                 nops3   nop
  942 00.000028FE 4E71                         nop
  943 00.00002900 4E71                         nop
  944 00.00002902                      nopsf   ;
  945 00.00002902                      
  946 00.00002902 266D0000             dataget move.l  0(a5),a3
  947 00.00002906                              
  948 00.00002906 2B4B0000             dataput move.l  a3,0(a5)
  949 00.0000290A                      
  950 00.0000290A 2F1B                 stlenget        move.l  (a3)+,-(a7)
  951 00.0000290C                      
  952 00.0000290C 524B                 stalign addq    #1,a3
  953 00.0000290E C18B                         exg     d0,a3
  954 00.00002910 08800000                     bclr    #0,d0
  955 00.00002914 C18B                         exg     d0,a3
  956 00.00002916                      stalignf
  957 00.00002916                      
  958 00.00002916                              ;byte...
  959 00.00002916                              ;
  960 00.00002916 524B                 dataletb        addq    #1,a3
  961 00.00002918 1B5B0000                     move.b  (a3)+,0(a5)
  962 00.0000291C                      dataletbf
  963 00.0000291C                      
  964 00.0000291C 524B                 dataletbl       addq    #1,a3
  965 00.0000291E 195B0000                     move.b  (a3)+,0(a4)
  966 00.00002922                      dataletblf
  967 00.00002922                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 70
blitz2.s


  968 00.00002922 524B                 dataletb2       addq    #1,a3
  969 00.00002924 149B                         move.b  (a3)+,(a2)
  970 00.00002926                      dataletb2f
  971 00.00002926                      
  972 00.00002926                              ;word...
  973 00.00002926                              ;
  974 00.00002926 3B5B0000             dataletw        move    (a3)+,0(a5)
  975 00.0000292A 349B                         move    (a3)+,(a2)
  976 00.0000292C                      
  977 00.0000292C 395B0000                     move    (a3)+,0(a4)
  978 00.00002930                      
  979 00.00002930                              ;long...
  980 00.00002930 2B5B0000             dataletl        move.l  (a3)+,0(a5)
  981 00.00002934 249B                         move.l  (a3)+,(a2)
  982 00.00002936                      
  983 00.00002936 295B0000                     move.l  (a3)+,0(a4)
  984 00.0000293A                      
  985 00.0000293A 504F                 nextfixw        addq    #8,a7
  986 00.0000293C                      
  987 00.0000293C 4FEF000A             nextfixw2       lea     10(a7),a7
  988 00.00002940                      
  989 00.00002940 4FEF000C             nextfixl        lea     12(a7),a7
  990 00.00002944                      
  991 00.00002944 4FEF000E             nextfixl2       lea     14(a7),a7
  992 00.00002948                      
  993 00.00002948                      nextb   ;
  994 00.00002948 246F0004                     move.l  4(a7),a2
  995 00.0000294C 3017                         move    (a7),d0
  996 00.0000294E D112                         add.b   d0,(a2)
  997 00.00002950                      nextbf
  998 00.00002950                      
  999 00.00002950                      nextw   ;a word type next
 1000 00.00002950                              ;
 1001 00.00002950 246F0004                     move.l  4(a7),a2
 1002 00.00002954 3017                         move    (a7),d0
 1003 00.00002956 D152                         add     d0,(a2)
 1004 00.00002958                      nextwf
 1005 00.00002958                      
 1006 00.00002958                      nextl   ;
 1007 00.00002958 246F0008                     move.l  8(a7),a2
 1008 00.0000295C 2017                         move.l  (a7),d0
 1009 00.0000295E D192                         add.l   d0,(a2)
 1010 00.00002960                      nextlf
 1011 00.00002960                      
 1012 00.00002960                      nextf   ;
 1013 00.00002960 246F0008                     move.l  8(a7),a2
 1014 00.00002964 2012                         move.l  (a2),d0
 1015 00.00002966 2217                         move.l  (a7),d1
 1016 00.00002968 4EAEFFBE                     jsr     -66(a6)
 1017 00.0000296C 2480                         move.l  d0,(a2)
 1018 00.0000296E                      nextff  ;
 1019 00.0000296E                      
 1020 00.0000296E                      forcompb        ;
 1021 00.0000296E 246F0004                     move.l  4(a7),a2
 1022 00.00002972 1012                         move.b  (a2),d0
 1023 00.00002974 322F0002                     move    2(a7),d1
 1024 00.00002978 4A57                         tst     (a7)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 71
blitz2.s


 1025 00.0000297A 6A000004                     bpl     .skip
 1026 00.0000297E C141                         exg     d0,d1
 1027 00.00002980 B001                 .skip   cmp.b   d1,d0
 1028 00.00002982                      forcompbf       ;
 1029 00.00002982                      
 1030 00.00002982                      forcompw        ;the For...Next Compare..... for words
 1031 00.00002982                              ;
 1032 00.00002982 246F0004                     move.l  4(a7),a2
 1033 00.00002986 3012                         move    (a2),d0
 1034 00.00002988 322F0002                     move    2(a7),d1
 1035 00.0000298C 4A57                         tst     (a7)
 1036 00.0000298E 6A000004                     bpl     .skip
 1037 00.00002992 C141                         exg     d0,d1
 1038 00.00002994 B041                 .skip   cmp     d1,d0
 1039 00.00002996                      forcompwf       ;
 1040 00.00002996                      
 1041 00.00002996                      forcompl        ;
 1042 00.00002996 246F0008                     move.l  8(a7),a2
 1043 00.0000299A 2012                         move.l  (a2),d0
 1044 00.0000299C 222F0004                     move.l  4(a7),d1
 1045 00.000029A0 4A57                         tst     (a7)
 1046 00.000029A2 6A000004                     bpl     .skip
 1047 00.000029A6 C141                         exg     d0,d1
 1048 00.000029A8 B081                 .skip   cmp.l   d1,d0
 1049 00.000029AA                      forcomplf       ;
 1050 00.000029AA                      
 1051 00.000029AA                      forcompf        ;floating point for/next compare.....
 1052 00.000029AA                              ;
 1053 00.000029AA 246F0008                     move.l  8(a7),a2
 1054 00.000029AE 2012                         move.l  (a2),d0
 1055 00.000029B0 222F0004                     move.l  4(a7),d1
 1056 00.000029B4 082F00070003                 btst    #7,3(a7)
 1057 00.000029BA 67000004                     beq     .skip
 1058 00.000029BE C141                         exg     d0,d1
 1059 00.000029C0                      .skip   ;
 1060 00.000029C0                      forcompff
 1061 00.000029C0                      
 1062 00.000029C0                      forcompf2       ;continuation
 1063 00.000029C0                              ;
 1064 00.000029C0 4EAEFFD6                     jsr     -42(a6)
 1065 00.000029C4                      forcompf2f      ;
 1066 00.000029C4                      
 1067 00.000029C4 4840                 swapd0  swap    d0
 1068 00.000029C6                      
 1069 00.000029C6 2F0A                 pushindex       move.l  a2,-(a7)
 1070 00.000029C8                      
 1071 00.000029C8 45ED0000             leaamp  lea     0(a5),a2
 1072 00.000029CC 200A                 leaamp2 move.l  a2,d0
 1073 00.000029CE                      
 1074 00.000029CE 45EC0000             leaampl lea     0(a4),a2
 1075 00.000029D2                      
 1076 00.000029D2 2012                 stamp   move.l  (a2),d0
 1077 00.000029D4                      
 1078 00.000029D4 246D0000             stamp2  move.l  0(a5),a2
 1079 00.000029D8                      
 1080 00.000029D8 584F                 stol    addq    #4,a7   ;lose string len!
 1081 00.000029DA                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 72
blitz2.s


 1082 00.000029DA 3F00                 pushd0wd        move    d0,-(a7)
 1083 00.000029DC                      
 1084 00.000029DC 2F00                 pushd0l move.l  d0,-(a7)
 1085 00.000029DE                      
 1086 00.000029DE 3E3C0000             movenumrep      move    #0,d7
 1087 00.000029E2                      
 1088 00.000029E2 45EF0000             preplibst       lea     0(a7),a2
 1089 00.000029E6                      
 1090 00.000029E6 4FEF0000             fixlibst        lea     0(a7),a7        
 1091 00.000029EA                      
 1092 00.000029EA 2F00                 pushdn  move.l  d0,-(a7)
 1093 00.000029EC                      
 1094 00.000029EC 2F0B                 movea3a7        move.l  a3,-(a7)
 1095 00.000029EE                      
 1096 00.000029EE 202F0006             movestst2       move.l  6(a7),d0
 1097 00.000029F2                              ;
 1098 00.000029F2 3F6F00040008                 move    4(a7),8(a7)
 1099 00.000029F8 2E9F                         move.l  (a7)+,(a7)
 1100 00.000029FA                              ;
 1101 00.000029FA                      movestst2f
 1102 00.000029FA                      
 1103 00.000029FA 202F0004             movea7dn        move.l  4(a7),d0
 1104 00.000029FE 2E9F                         move.l  (a7)+,(a7)
 1105 00.00002A00                      movea7dnf
 1106 00.00002A00                      
 1107 00.00002A00 2640                 moved0a3        move.l  d0,a3
 1108 00.00002A02                      
 1109 00.00002A02 202D0000             movestdn        move.l  0(a5),d0         
 1110 00.00002A06                      
 1111 00.00002A06 200B                 movea3dn        move.l  a3,d0
 1112 00.00002A08                      
 1113 00.00002A08 2F00                 putstlen        move.l  d0,-(a7)        ;push string length
 1114 00.00002A0A                      
 1115 00.00002A0A 201F                 getstlen        move.l  (a7)+,d0        ;pop string length
 1116 00.00002A0C                      
 1117 00.00002A0C 2F570000             moverts move.l  (a7),0(a7)
 1118 00.00002A10                      
 1119 00.00002A10 4FEF0000             fixstack        lea     0(a7),a7
 1120 00.00002A14                      
 1121 00.00002A14 504F                 fixq    addq    #8,a7
 1122 00.00002A16                      
 1123 00.00002A16 2E9F                 fix1    move.l  (a7)+,(a7)
 1124 00.00002A18                      
 1125 00.00002A18 2640                 movedna3        move.l  d0,a3
 1126 00.00002A1A                      
 1127 00.00002A1A 45EC0000             least   lea     0(a4),a2
 1128 00.00002A1E                      
 1129 00.00002A1E 2F2C0000             funcst  move.l  0(a4),-(a7)
 1130 00.00002A22                      
 1131 00.00002A22 584A                 addq4a2 addq    #4,a2
 1132 00.00002A24                      
 1133 00.00002A24 2F0B                 savesbase       move.l  a3,-(a7)
 1134 00.00002A26 2B4B0000             savesbase2      move.l  a3,0(a5)
 1135 00.00002A2A                      savesbasef
 1136 00.00002A2A                      
 1137 00.00002A2A 265F                 ressbase        move.l  (a7)+,a3
 1138 00.00002A2C 2B4B0000             ressbase2       move.l  a3,0(a5)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 73
blitz2.s


 1139 00.00002A30                      ressbasef
 1140 00.00002A30                      
 1141 00.00002A30 CB4C                 exga4a5 exg.l   a4,a5
 1142 00.00002A32                      
 1143 00.00002A32 4E540000             linka4  link    a4,#0
 1144 00.00002A36                      
 1145 00.00002A36 4E5C                 unlinka4        unlk    a4
 1146 00.00002A38                      
 1147 00.00002A38 2F0A                 a2toa7  move.l  a2,-(a7)
 1148 00.00002A3A                      
 1149 00.00002A3A 245F                 a7toa2  move.l  (a7)+,a2
 1150 00.00002A3C                      
 1151 00.00002A3C 4EF900000000         gotocode        jmp     0
 1152 00.00002A42                      
 1153 00.00002A42 4EB900000000         gosubcode       jsr     0
 1154 00.00002A48                      
 1155 00.00002A48 0839000600BFE001     mwait   btst    #6,$bfe001
 1156 00.00002A50 6600FFF6                     bne     mwait
 1157 00.00002A54                      mwaitf
 1158 00.00002A54                      
 1159 00.00002A54 2000                 libreg  move.l  d0,d0
 1160 00.00002A56                      
 1161 00.00002A56 2C6D0000             libbase move.l  0(a5),a6
 1162 00.00002A5A                      
 1163 00.00002A5A 4EAE0000             libjsr  jsr     0(a6)
 1164 00.00002A5E                      
 1165 00.00002A5E 202D0000             regtransd       move.l  0(a5),d0
 1166 00.00002A62 206D0000             regtransa       move.l  0(a5),a0
 1167 00.00002A66                      
 1168 00.00002A66 267C00000000         litget  move.l  #0,a3
 1169 00.00002A6C 3F1B                 litget2 move    (a3)+,-(a7)
 1170 00.00002A6E                      
 1171 00.00002A6E 2012                 movea2dn        move.l  (a2),d0
 1172 00.00002A70                      
 1173 00.00002A70 202D0000             moved3a5dn      move.l  0(a5),d0
 1174 00.00002A74                      
 1175 00.00002A74 7000                 stvarget2       moveq   #0,d0
 1176 00.00002A76 2F00                         move.l  d0,-(a7)
 1177 00.00002A78 4A92                         tst.l   (a2)
 1178 00.00002A7A 6700000E                     beq     varget2skip
 1179 00.00002A7E 2052                         move.l  (a2),a0
 1180 00.00002A80 5948                         subq    #4,a0
 1181 00.00002A82 2E98                         move.l  (a0)+,(a7)
 1182 00.00002A84                      stvarget2f      ;
 1183 00.00002A84 4EB900000000                 jsr     0
 1184 00.00002A8A                              ;
 1185 00.00002A8A                      varget2skip     ;
 1186 00.00002A8A                      
 1187 00.00002A8A 201F                 addcode move.l  (a7)+,d0
 1188 00.00002A8C D197                         add.l   d0,(a7)
 1189 00.00002A8E                      addcodef
 1190 00.00002A8E                      
 1191 00.00002A8E 2F18                 pushlen move.l  (a0)+,-(a7)
 1192 00.00002A90                      
 1193 00.00002A90 45ED0000             leaa5d3a2       lea     0(a5),a2
 1194 00.00002A94                      
 1195 00.00002A94 2F0A                 pusha2  move.l  a2,-(a7)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 74
blitz2.s


 1196 00.00002A96                      
 1197 00.00002A96 2457                 geta2   move.l  (a7),a2
 1198 00.00002A98                      
 1199 00.00002A98 245F                 pulla2  move.l  (a7)+,a2
 1200 00.00002A9A                      
 1201 00.00002A9A 246F0004             pulla2st        move.l  4(a7),a2
 1202 00.00002A9E 2E9F                         move.l  (a7)+,(a7)
 1203 00.00002AA0                      pulla2stf       ;
 1204 00.00002AA0                      
 1205 00.00002AA0 2F2D0000             pusha3  move.l  0(a5),-(a7)
 1206 00.00002AA4 2B4B0000             pusha32 move.l  a3,0(a5)
 1207 00.00002AA8                      pusha3f
 1208 00.00002AA8                      
 1209 00.00002AA8 2B5F0000             pulla3  move.l  (a7)+,0(a5)
 1210 00.00002AAC                      pulla3f
 1211 00.00002AAC                      
 1212 00.00002AAC 266D0000             geta3   move.l  0(a5),a3
 1213 00.00002AB0                      geta3f
 1214 00.00002AB0                      
 1215 00.00002AB0 207C00000000         numtoa0 move.l  #0,a0
 1216 00.00002AB6                      
 1217 00.00002AB6 247C00000000         numtoa2 move.l  #0,a2
 1218 00.00002ABC                      
 1219 00.00002ABC                              ;free up all arrays code
 1220 00.00002ABC 383C0000             endarray        move    #0,d4
 1221 00.00002AC0                      
 1222 00.00002AC0 343C0000             preparray       move    #0,d2
 1223 00.00002AC4 363C0000                     move    #0,d3
 1224 00.00002AC8                      preparrayf      ;
 1225 00.00002AC8                      
 1226 00.00002AC8 203C00000004         dimbegin        move.l  #4,d0
 1227 00.00002ACE                      dimbeginf       ;
 1228 00.00002ACE                      
 1229 00.00002ACE 2B400000             dimb4   move.l  d0,0(a5)
 1230 00.00002AD2                      dimb4f  ;
 1231 00.00002AD2                      
 1232 00.00002AD2 C0C1                 dimaf   mulu    d1,d0
 1233 00.00002AD4                      dimaff  ;
 1234 00.00002AD4                      
 1235 00.00002AD4 2B400000             dimfin  move.l  d0,0(a5)
 1236 00.00002AD8                      dimfinf ;
 1237 00.00002AD8                      
 1238 00.00002AD8 2452                 movea0  move.l  (a2),a2
 1239 00.00002ADA                      
 1240 00.00002ADA D5CA                 adda0a0 add.l   a2,a2
 1241 00.00002ADC D5CA                         add.l   a2,a2
 1242 00.00002ADE                      
 1243 00.00002ADE 2C780004             getebase        move.l  4.w,a6
 1244 00.00002AE2                      getebasef       ;
 1245 00.00002AE2                      
 1246 00.00002AE2 246D0000             movea5a0        move.l  0(a5),a2
 1247 00.00002AE6                      
 1248 00.00002AE6 246A0000             movea0a0        move.l  0(a2),a2
 1249 00.00002AEA                      
 1250 00.00002AEA 524A                 addqa0  addq    #1,a2
 1251 00.00002AEC                      
 1252 00.00002AEC 45EA0000             leaa0a0 lea     0(a2),a2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 75
blitz2.s


 1253 00.00002AF0                      
 1254 00.00002AF0 D4C0                 addrega2        add     d0,a2
 1255 00.00002AF2                      
 1256 00.00002AF2 72616D3A7465737400   tstname dc.b    'ram:test',0
 1257 00.00002AFC                              even
 1258 00.00002AFC                      
 1259 00.00002AFC                      ;-----------end of object codes!--------------;
 1260 00.00002AFC                      
 1261 00.00002AFC 00000000             memat   dc.l    0
 1262 00.00002B00 0000                 memlen  dc      0
 1263 00.00002B02                      
 1264 00.00002B02                      memstackf       ;
 1265 00.00002B02 00000000             maths   dc.l    0
 1266 00.00002B06 0000                 regat   dc      0       ;register being used!
 1267 00.00002B08 0000                 typelen dc      0
 1268 00.00002B0A 00000000             prevtype        dc.l    0
 1269 00.00002B0E 00000000             prevloc dc.l    0
 1270 00.00002B12 0000                 lastchar        dc      0
 1271 00.00002B14 00000000             thistype        dc.l    0
 1272 00.00002B18 00000000             errstack        dc.l    0
 1273 00.00002B1C 00000000             errcont dc.l    0
 1274 00.00002B20 0000                 linemode        dc      0       ;0 if norm, 1 if newtype
 1275 00.00002B22 0000                 linesleft       dc      0
 1276 00.00002B24 00000000             thisitem        dc.l    0
 1277 00.00002B28 00000000             firstvar        dc.l    0
 1278 00.00002B2C 00000000             alllocals       dc.l    0
 1279 00.00002B30 00000000             firstlocal      dc.l    0
 1280 00.00002B34 00000000             firstglob       dc.l    0
 1281 00.00002B38 0000                 varoff  dc      0
 1282 00.00002B3A 0000                 locvaroff       dc      0
 1283 00.00002B3C 00000000             firstitem       dc.l    0
 1284 00.00002B40 0000                 numlines        dc      0
 1285 00.00002B42 0000                 returncode      dc      0
 1286 00.00002B44 00000000             firstif dc.l    0
 1287 00.00002B48                      
 1288 00.00002B48 00000000             segadd  dc.l    0
 1289 00.00002B4C 626C69747A323A746564 segname dc.b    'blitz2:ted',0
 1290 00.00002B58                              even
 1291 00.00002B58 6D6174686666702E6C69 mathsname       dc.b    'mathffp.library',0
 1292 00.00002B68                              even
 1293 00.00002B68                      
 1294 00.00002B68 0000C4D80000C4C80000 cifbras dc.l    ciflt,cifeq,cifgt,0
 1295 00.00002B78 0000C4E00000C4D00000         dc.l    cifle,cifne,cifle,0
 1296 00.00002B88 0000C4F00000C4D00000         dc.l    cifge,cifne,cifge,0
 1297 00.00002B98                      
 1298 00.00002B98 0000D5F80000D8320000 atokens dc.l    donewtype,doend,dolet,dodim,dogoto
 1299 00.00002BAC 0000D21C0000D2B8             dc.l    dogosub,doreturn
 1300 00.00002BB4 0000D2E00000D2EE0000         dc.l    dostate,dofunc,domwait,doif,dowhile
 1301 00.00002BC8 0000CB820000CEFC0000         dc.l    domacro,doselect,docase
 1302 00.00002BD4 0000CDDE0000D25E             dc.l    dodefault,eos
 1303 00.00002BDC 0000CA540000CB0A0000         dc.l    doxinclude,doinclude,syntaxerr
 1304 00.00002BE8 0000C9CC0000DCFC0000         dc.l    doshared,dofor,donext,syntaxerr,syntaxerr
 1305 00.00002BFC 0000C8AA0000C57C             dc.l    dodata,doread
 1306 00.00002C04                              ;
 1307 00.00002C04                              ;the folowing should all be intercepted by getchar
 1308 00.00002C04                              ;       
 1309 00.00002C04 000083E2000083E20000         dc.l    syntaxerr,syntaxerr,syntaxerr,syntaxerr
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 76
blitz2.s


 1310 00.00002C14 0000C46E0000D1000000         dc.l    docerr,dothen,doelse,doeven4,doeven8
 1311 00.00002C28                              ;
 1312 00.00002C28 0000C7B60000C7800000         dc.l    dodc,dods,doeven,dodcb,dosetreg,doincbin
 1313 00.00002C40 0000C3E60000C40C0000         dc.l    dofree,douse,dostop,docont,syntaxerr
 1314 00.00002C54 00004FE200004F160000         dc.l    dosetint,doclrint,domaxlen,dodeftype
 1315 00.00002C64 00004E9400004ED00000         dc.l    doblitz,doamiga,doqamiga,dovwait,dolibjsr
 1316 00.00002C78 00004E2800004DF40000         dc.l    dotokejsr,doblibjsr,syntaxerr
 1317 00.00002C84                              ;
 1318 00.00002C84                              ;A break goes in here for the assembler stuff!
 1319 00.00002C84                              ;
 1320 00.00002C84 000083E2                     dc.l    syntaxerr       ;flash2 ; for list
 1321 00.00002C88 00004F7600004F400000         dc.l    doseterr,doclrerr,syntaxerr,doerrfail
 1322 00.00002C98 000083E2                     dc.l    syntaxerr
 1323 00.00002C9C 000083E2                     dc.l    syntaxerr       ;Mod
 1324 00.00002CA0 000083E2                     dc.l    syntaxerr       ;Pi
 1325 00.00002CA4 00004D10                     dc.l    dorepeat
 1326 00.00002CA8 0000CFE4                     dc.l    dountil
 1327 00.00002CAC 00005C40                     dc.l    doputreg
 1328 00.00002CB0 00004B82                     dc.l    dopop
 1329 00.00002CB4 0000C038                     dc.l    doincdir
 1330 00.00002CB8 0000D80A                     dc.l    mydoendif2
 1331 00.00002CBC 0000D800                     dc.l    dowend
 1332 00.00002CC0 00004E14                     dc.l    dosysjsr
 1333 00.00002CC4 00004B78                     dc.l    dowbstartup
 1334 00.00002CC8 000083E2                     dc.l    syntaxerr
 1335 00.00002CCC 0000D16E                     dc.l    doongo
 1336 00.00002CD0 000083E2                     dc.l    syntaxerr
 1337 00.00002CD4 0000CFB4                     dc.l    doforever
 1338 00.00002CD8 0000C526                     dc.l    dorestore
 1339 00.00002CDC 00004AD4                     dc.l    doexchange
 1340 00.00002CE0 00004AA0                     dc.l    dousepath
 1341 00.00002CE4 00003364                     dc.l    docloseed
 1342 00.00002CE8 0000336E                     dc.l    donocli
 1343 00.00002CEC 000083E2                     dc.l    syntaxerr
 1344 00.00002CF0 000083E2                     dc.l    syntaxerr
 1345 00.00002CF4 000083E2                     dc.l    syntaxerr
 1346 00.00002CF8 000083E2                     dc.l    syntaxerr
 1347 00.00002CFC 000083E2                     dc.l    syntaxerr
 1348 00.00002D00 00004A08                     dc.l    dorunerrson
 1349 00.00002D04 00004A18                     dc.l    dorunerrsoff
 1350 00.00002D08                              ;
 1351 00.00002D08                      atokensend
 1352 00.00002D08                      
 1353 00.00002D08                      actualbegin     ;
 1354 00.00002D08                              ;OKAY, Here it is - The actual compiler!
 1355 00.00002D08                              ;
 1356 00.00002D08                              ;
 1357 00.00002D08                      begin   ;find out how many system tokens exist
 1358 00.00002D08 7000                         moveq   #0,d0
 1359 00.00002D0A 41FADB6E                     lea     tokens(pc),a0
 1360 00.00002D0E 5240                 .loop   addq    #1,d0
 1361 00.00002D10 2210                         move.l  (a0),d1
 1362 00.00002D12 67000008                     beq     .gotlast
 1363 00.00002D16 2041                         move.l  d1,a0
 1364 00.00002D18 6000FFF4                     bra     .loop
 1365 00.00002D1C 23C80000EC3A         .gotlast        move.l  a0,lasttoken
 1366 00.00002D22 61002EA2                     bsr     makeasmtab
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 77
blitz2.s


 1367 00.00002D26 4EB9000102B0                 jsr     optreqprep
 1368 00.00002D2C                              ;
 1369 00.00002D2C 33FCFFFF00002B42             move    #-1,returncode
 1370 00.00002D34 227C00002B58                 move.l  #mathsname,a1
 1371 00.00002D3A 2C780004                     move.l  4.w,a6
 1372 00.00002D3E 4EAEFE68                     jsr     oldopenlibrary(a6)
 1373 00.00002D42 23C000002B02                 move.l  d0,maths
 1374 00.00002D48 6700017C                     beq     fail0
 1375 00.00002D4C                              ;
 1376 00.00002D4C 20390000E33E                 move.l  constmaxpc,d0
 1377 00.00002D52 7201                         moveq   #1,d1
 1378 00.00002D54 4EAEFF3A                     jsr     allocmem(a6)
 1379 00.00002D58 23C00000E336                 move.l  d0,constpcat
 1380 00.00002D5E 67000158                     beq     failme
 1381 00.00002D62 D0B90000E33E                 add.l   constmaxpc,d0
 1382 00.00002D68 23C00000E33A                 move.l  d0,constlibat
 1383 00.00002D6E                              ;
 1384 00.00002D6E 203900010E84                 move.l  macrolen,d0
 1385 00.00002D74 7201                         moveq   #1,d1
 1386 00.00002D76 4EAEFF3A                     jsr     allocmem(a6)
 1387 00.00002D7A 23C00000EC26                 move.l  d0,macrobuff
 1388 00.00002D80 67000114                     beq     fail2
 1389 00.00002D84 D0B900010E84                 add.l   macrolen,d0
 1390 00.00002D8A 23C00000EC2A                 move.l  d0,macrobufff
 1391 00.00002D90                              ;
 1392 00.00002D90 223C00002B4C                 move.l  #segname,d1
 1393 00.00002D96                              calldos loadseg
 1393 00.00002D96+2C7AD3BC                     move.l  dos(pc),a6
 1393 00.00002D9A+4EAEFF6A                     jsr     loadseg(a6)
 1393 00.00002D9E                              endm
 1394 00.00002D9E 23C000002B48                 move.l  d0,segadd
 1395 00.00002DA4 670000D8                     beq     fail2a
 1396 00.00002DA8 2440                         move.l  d0,a2
 1397 00.00002DAA D5CA                         add.l   a2,a2
 1398 00.00002DAC D5CA                         add.l   a2,a2
 1399 00.00002DAE 43F90000085E                 lea     edstruct,a1
 1400 00.00002DB4 4EAA0008                     jsr     8(a2)
 1401 00.00002DB8 660000B6                     bne     fail3
 1402 00.00002DBC 2F08                         move.l  a0,-(a7)
 1403 00.00002DBE 23C90000E372                 move.l  a1,comdata
 1404 00.00002DC4                              ;
 1405 00.00002DC4 427900002B42                 clr     returncode
 1406 00.00002DCA 23E9002C0000E836             move.l  44(a1),int
 1407 00.00002DD2 207C00002716                 move.l  #verreq,a0
 1408 00.00002DD8 2251                         move.l  (a1),a1
 1409 00.00002DDA 4E91                         jsr     (a1)
 1410 00.00002DDC                              ;
 1411 00.00002DDC 61000122                     bsr     sleepon
 1412 00.00002DE0 33FCFFFF0000E9E8             move    #-1,linenumat
 1413 00.00002DE8 6100084C                     bsr     makelibs
 1414 00.00002DEC 6100425A                     bsr     loadlibs
 1415 00.00002DF0 61002524                     bsr     makeiallox
 1416 00.00002DF4 610000FE                     bsr     pointeron
 1417 00.00002DF8                              ;
 1418 00.00002DF8                              ;click cancel of version requester...
 1419 00.00002DF8                              ;
 1420 00.00002DF8 20790000E372         .vloop  move.l  comdata,a0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 78
blitz2.s


 1421 00.00002DFE 20680008                     move.l  8(a0),a0
 1422 00.00002E02 4E90                         jsr     (a0)
 1423 00.00002E04 BE7CFFFF                     cmp     #-1,d7
 1424 00.00002E08 6600FFEE                     bne     .vloop
 1425 00.00002E0C BC7C0001                     cmp     #1,d6
 1426 00.00002E10 6600FFE6                     bne     .vloop
 1427 00.00002E14                              ;
 1428 00.00002E14                              ;grab a panic bit
 1429 00.00002E14                              ;
 1430 00.00002E14 70FF                         moveq   #-1,d0
 1431 00.00002E16 2C780004                     move.l  4.w,a6
 1432 00.00002E1A 4EAEFEB6                     jsr     allocsignal(a6)
 1433 00.00002E1E 23C00000348C                 move.l  d0,panicbit
 1434 00.00002E24 7200                         moveq   #0,d1
 1435 00.00002E26 01C1                         bset    d0,d1
 1436 00.00002E28 23C100003490                 move.l  d1,panicmask
 1437 00.00002E2E                              ;
 1438 00.00002E2E                              ;loadseg default debugger (blitz2:dhandler)
 1439 00.00002E2E                              ;
 1440 00.00002E2E 223C00002EDC                 move.l  #debugname,d1
 1441 00.00002E34                              calldos loadseg
 1441 00.00002E34+2C7AD31E                     move.l  dos(pc),a6
 1441 00.00002E38+4EAEFF6A                     jsr     loadseg(a6)
 1441 00.00002E3C                              endm
 1442 00.00002E3C 23C000002EF0                 move.l  d0,dseg
 1443 00.00002E42                              ;
 1444 00.00002E42 225F                         move.l  (a7)+,a1
 1445 00.00002E44 41FAD31A                     lea     progfile(pc),a0
 1446 00.00002E48 4E91                         jsr     (a1)    ;goto editor with filename!
 1447 00.00002E4A                              ;
 1448 00.00002E4A 203A0640             .skip   move.l  panicbit(pc),d0
 1449 00.00002E4E 2C780004                     move.l  4.w,a6
 1450 00.00002E52 4EAEFEB0                     jsr     freesignal(a6)
 1451 00.00002E56                              ;
 1452 00.00002E56 223A0098                     move.l  dseg(pc),d1
 1453 00.00002E5A 6708                         beq.s   .noseg
 1454 00.00002E5C                              calldos unloadseg
 1454 00.00002E5C+2C7AD2F6                     move.l  dos(pc),a6
 1454 00.00002E60+4EAEFF64                     jsr     unloadseg(a6)
 1454 00.00002E64                              endm
 1455 00.00002E64                      .noseg  ;
 1456 00.00002E64 61000A76                     bsr     freeemup
 1457 00.00002E68 61002B70                     bsr     freeres
 1458 00.00002E6C 61004502                     bsr     freelibs
 1459 00.00002E70                              ;
 1460 00.00002E70 223900002B48         fail3   move.l  segadd,d1
 1461 00.00002E76                              calldos unloadseg
 1461 00.00002E76+2C7AD2DC                     move.l  dos(pc),a6
 1461 00.00002E7A+4EAEFF64                     jsr     unloadseg(a6)
 1461 00.00002E7E                              endm
 1462 00.00002E7E 61002476             fail2a  bsr     freeallox
 1463 00.00002E82 22790000EC26         fail2b  move.l  macrobuff,a1
 1464 00.00002E88 203900010E84                 move.l  macrolen,d0
 1465 00.00002E8E 2C780004                     move.l  4.w,a6
 1466 00.00002E92 4EAEFF2E                     jsr     freemem(a6)
 1467 00.00002E96                      fail2   closedos
 1467 00.00002E96+227AD2BC                move.l   dos(pc),a1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 79
blitz2.s


 1467 00.00002E9A+2C7900000004            move.l   4,a6
 1467 00.00002EA0+4EAEFE62                jsr   closelibrary(a6)
 1467 00.00002EA4                         endm
 1468 00.00002EA4                      fail1a  ;
 1469 00.00002EA4 22790000E336         fail1   move.l  constpcat,a1
 1470 00.00002EAA 20390000E33E                 move.l  constmaxpc,d0
 1471 00.00002EB0 2C780004                     move.l  4.w,a6
 1472 00.00002EB4 4EAEFF2E                     jsr     freemem(a6)
 1473 00.00002EB8                              ;
 1474 00.00002EB8 227900002B02         failme  move.l  maths,a1
 1475 00.00002EBE 2C780004                     move.l  4.w,a6
 1476 00.00002EC2 4EAEFE62                     jsr     closelibrary(a6)
 1477 00.00002EC6 4EB9000102DE         fail0   jsr     optreqdone
 1478 00.00002ECC 610006F8                     bsr     flushlibs
 1479 00.00002ED0 303900002B42                 move    returncode,d0
 1480 00.00002ED6 48C0                         ext.l   d0
 1481 00.00002ED8 6000D232                     bra     wb_exit
 1482 00.00002EDC                      t
 1483 00.00002EDC 626C69747A323A646566 debugname       dc.b    'blitz2:defaultdbug',0
 1484 00.00002EF0                              even
 1485 00.00002EF0 00000000             dseg    dc.l    0
 1486 00.00002EF4                       
 1487 00.00002EF4                      ;-----------menu handler---------------;
 1488 00.00002EF4                      handler
 1489 00.00002EF4                      
 1490 00.00002EF4 20790000E372         pointeron       move.l  comdata,a0
 1491 00.00002EFA 20680048                     move.l  72(a0),a0
 1492 00.00002EFE 4ED0                         jmp     (a0)
 1493 00.00002F00                      
 1494 00.00002F00 20790000E372         sleepon move.l  comdata,a0
 1495 00.00002F06 2068004C                     move.l  76(a0),a0
 1496 00.00002F0A 4ED0                         jmp     (a0)
 1497 00.00002F0C                      
 1498 00.00002F0C 23CD00002B3C         menu    move.l  a5,firstitem
 1499 00.00002F12 33C700002B40                 move    d7,numlines
 1500 00.00002F18 E54E                         lsl     #2,d6
 1501 00.00002F1A 41F9000021F4                 lea     menuadds,a0
 1502 00.00002F20 20706000                     move.l  0(a0,d6),a0
 1503 00.00002F24 33FCFFFF0000E9E8             move    #-1,linenumat
 1504 00.00002F2C 33FCFFFF0000E9EA             move    #-1,menuret
 1505 00.00002F34 4E90                         jsr     (a0)
 1506 00.00002F36 30390000E9EA                 move    menuret,d0
 1507 00.00002F3C 4E75                         rts
 1508 00.00002F3E                      
 1509 00.00002F3E 4465627567206D6F6475 dtext   dc.b    'Debug module to load',0
 1510 00.00002F54                              even
 1511 00.00002F54 426C69747A323A       dpath   dc.b    'Blitz2:'
 1512 00.00002F5B                              dcb.b   192,0
 1513 00.0000301C                              even
 1514 00.0000301C                      dname   dcb.b   192,0
 1515 00.000030DC                              even
 1516 00.000030DC 00000000             dname2  dc.l    0
 1517 00.000030E0                      
 1518 00.000030E0                      menu_d  ;select debug module
 1519 00.000030E0                              ;
 1520 00.000030E0 26790000E372                 move.l  comdata,a3
 1521 00.000030E6 266B0018                     move.l  24(a3),a3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 80
blitz2.s


 1522 00.000030EA 45F900002F3E                 lea     dtext,a2
 1523 00.000030F0 41F900002F54                 lea     dpath,a0
 1524 00.000030F6 43F90000301C                 lea     dname,a1
 1525 00.000030FC 4E93                         jsr     (a3)
 1526 00.000030FE 67000048                     beq     nodload
 1527 00.00003102                              ;
 1528 00.00003102                      loaddmod        ;d0=name of module to load!
 1529 00.00003102                              ;
 1530 00.00003102 23C0000030DC                 move.l  d0,dname2
 1531 00.00003108 6100FDF6                     bsr     sleepon
 1532 00.0000310C 23CF00002B18                 move.l  a7,errstack
 1533 00.00003112 23FC0000314800002B1C         move.l  #nodload,errcont
 1534 00.0000311C 223AFFBE                     move.l  dname2(pc),d1
 1535 00.00003120                              calldos loadseg
 1535 00.00003120+2C7AD032                     move.l  dos(pc),a6
 1535 00.00003124+4EAEFF6A                     jsr     loadseg(a6)
 1535 00.00003128                              endm
 1536 00.00003128 2E00                         move.l  d0,d7
 1537 00.0000312A 6700001E                     beq     dloaderr
 1538 00.0000312E 223900002EF0                 move.l  dseg,d1
 1539 00.00003134 670C                         beq.s   .ndseg
 1540 00.00003136                              calldos unloadseg
 1540 00.00003136+2C7AD01C                     move.l  dos(pc),a6
 1540 00.0000313A+4EAEFF64                     jsr     unloadseg(a6)
 1540 00.0000313E                              endm
 1541 00.0000313E 6100FDB4                     bsr     pointeron
 1542 00.00003142 23C700002EF0         .ndseg  move.l  d7,dseg
 1543 00.00003148                              ;
 1544 00.00003148 4E75                 nodload rts
 1545 00.0000314A                      
 1546 00.0000314A 4EB900008B00         dloaderr        jsr     err
 1547 00.00003150 43616E2774204C6F6164         dc.b    "Can't LoadSeg debug module!",0
 1548 00.0000316C                              even
 1549 00.0000316C                      
 1550 00.0000316C 4E616D65206F66204578 xtext   dc.b    'Name of Executable to create',0
 1551 00.0000318A                              even
 1552 00.0000318A                      xpath   dcb.b   192,0
 1553 00.0000324A                      xname   dcb.b   192,0
 1554 00.0000330A 00000000             execname        dc.l    0
 1555 00.0000330E                      
 1556 00.0000330E                      menu1   ;compile/save
 1557 00.0000330E                              ;
 1558 00.0000330E 26790000E372                 move.l  comdata,a3
 1559 00.00003314 266B0018                     move.l  24(a3),a3
 1560 00.00003318 45F90000316C                 lea     xtext,a2
 1561 00.0000331E 41F90000318A                 lea     xpath,a0
 1562 00.00003324 43F90000324A                 lea     xname,a1
 1563 00.0000332A 4E93                         jsr     (a3)
 1564 00.0000332C 67000034                     beq     .err
 1565 00.00003330                      .tryit  ;
 1566 00.00003330                              ;O.K.... Now to create it
 1567 00.00003330 23C00000330A                 move.l  d0,execname
 1568 00.00003336 33FCFFFF0000E84E             move    #-1,makeexec
 1569 00.0000333E 3F39000110C0                 move    optreqga15+12,-(a7)
 1570 00.00003344 08F90007000110C1             bset    #7,optreqga15+13        ;make small!
 1571 00.0000334C 6100042E                     bsr     compile
 1572 00.00003350 4A790000E84C                 tst     anyerrs
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 81
blitz2.s


 1573 00.00003356 6604                         bne.s   .skip
 1574 00.00003358 610041CA                     bsr     savefile
 1575 00.0000335C 33DF000110C0         .skip   move    (a7)+,optreqga15+12
 1576 00.00003362 4E75                 .err    rts
 1577 00.00003364                      
 1578 00.00003364 33FCFFFF00003378     docloseed       move    #-1,closeed
 1579 00.0000336C 4E75                         rts
 1580 00.0000336E                      
 1581 00.0000336E 33FCFFFF0000337A     donocli move    #-1,nocli
 1582 00.00003376 4E75                         rts
 1583 00.00003378                      
 1584 00.00003378 0000                 closeed dc      0
 1585 00.0000337A 0000                 nocli   dc      0
 1586 00.0000337C                      
 1587 00.0000337C 48E7C0C2             flushc  movem.l a0-a1/d0-d1/a6,-(a7)
 1588 00.00003380 2C780004                     move.l  4.w,a6
 1589 00.00003384 0C6E027C0010                 cmp     #636,16(a6)
 1590 00.0000338A 6504                         bcs.s   .skip
 1591 00.0000338C 4EAEFD84                     jsr     -636(a6)
 1592 00.00003390 4CDF4303             .skip   movem.l (a7)+,a0-a1/d0-d1/a6
 1593 00.00003394 4E75                         rts
 1594 00.00003396                      
 1595 00.00003396                      menu0   ;compile/run
 1596 00.00003396                              ;
 1597 00.00003396 42790000E84E                 clr     makeexec
 1598 00.0000339C 427900003378                 clr     closeed
 1599 00.000033A2 42790000337A                 clr     nocli
 1600 00.000033A8                              ;
 1601 00.000033A8 610003D2                     bsr     compile
 1602 00.000033AC                              ;
 1603 00.000033AC                              ;RUN!
 1604 00.000033AC                              ;
 1605 00.000033AC 4A790000E84C         menu10  tst     anyerrs
 1606 00.000033B2 660000CE                     bne     dontrun
 1607 00.000033B6 323AFFC0                     move    closeed(pc),d1
 1608 00.000033BA 67000010                     beq     .noclose
 1609 00.000033BE 20790000E372                 move.l  comdata,a0
 1610 00.000033C4 2068FFF8                     move.l  -8(a0),a0
 1611 00.000033C8 4E90                         jsr     (a0)    ;close editor
 1612 00.000033CA 6008                         bra.s   .nopanic
 1613 00.000033CC                              ;
 1614 00.000033CC 41FA0C50             .noclose        lea     executing(pc),a0
 1615 00.000033D0 61000C5E                     bsr     openstopreq
 1616 00.000033D4                              ;
 1617 00.000033D4                      .nopanic        ;find current dir...
 1618 00.000033D4                              ;
 1619 00.000033D4 2C7900000154                 move.l  dos,a6
 1620 00.000033DA 7200                         moveq   #0,d1
 1621 00.000033DC 4EAEFF82                     jsr     currentdir(a6)
 1622 00.000033E0 23C000003484                 move.l  d0,tasklock
 1623 00.000033E6 2200                         move.l  d0,d1
 1624 00.000033E8 4EAEFF82                     jsr     currentdir(a6)
 1625 00.000033EC                              ;
 1626 00.000033EC 42B900003488                 clr.l   panictask
 1627 00.000033F2 223C00003494                 move.l  #procname,d1
 1628 00.000033F8 7400                         moveq   #0,d2
 1629 00.000033FA 263C000034B0                 move.l  #procstart,d3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 82
blitz2.s


 1630 00.00003400 E48B                         lsr.l   #2,d3
 1631 00.00003402 28390000E342                 move.l  stackfuck,d4
 1632 00.00003408 2C7900000154                 move.l  dos,a6
 1633 00.0000340E 4EAEFF76                     jsr     -138(a6)
 1634 00.00003412 4A80                         tst.l   d0
 1635 00.00003414 6738                         beq.s   .fatal
 1636 00.00003416                              ;
 1637 00.00003416                              ;OK, task should be running here! see if we get a panic!
 1638 00.00003416                              ;
 1639 00.00003416 203A0078             .nostop move.l  panicmask(pc),d0
 1640 00.0000341A 2C780004                     move.l  4.w,a6
 1641 00.0000341E 4EAEFEC2                     jsr     wait(a6)
 1642 00.00003422 4A7900003EDA                 tst     stopit
 1643 00.00003428 67EC                         beq.s   .nostop
 1644 00.0000342A 6A16                         bpl.s   .notpanic
 1645 00.0000342C                              ;
 1646 00.0000342C 61001012                     bsr     chkrealstop
 1647 00.00003430 67E4                         beq.s   .nostop
 1648 00.00003432                              ;
 1649 00.00003432 203A0054                     move.l  panictask(pc),d0
 1650 00.00003436 670A                         beq.s   .notpanic
 1651 00.00003438 2240                         move.l  d0,a1
 1652 00.0000343A 2C780004                     move.l  4.w,a6
 1653 00.0000343E 4EAEFEE0                     jsr     remtask(a6)
 1654 00.00003442                              ;
 1655 00.00003442 4A7900003378         .notpanic       tst     closeed
 1656 00.00003448 6604                         bne.s   .fatal
 1657 00.0000344A 61000AC4                     bsr     endstop
 1658 00.0000344E                              ;
 1659 00.0000344E 42B900002B30         .fatal  clr.l   firstlocal
 1660 00.00003454 42B900002B34                 clr.l   firstglob
 1661 00.0000345A                              ;
 1662 00.0000345A 323AFF1C                     move    closeed(pc),d1
 1663 00.0000345E 6700000E                     beq     .noopen
 1664 00.00003462 20790000E372                 move.l  comdata,a0
 1665 00.00003468 2068FFFC                     move.l  -4(a0),a0
 1666 00.0000346C 4E90                         jsr     (a0)
 1667 00.0000346E                              ;
 1668 00.0000346E 20790000E372         .noopen move.l  comdata,a0
 1669 00.00003474 20680050                     move.l  80(a0),a0       ;window
 1670 00.00003478 2C790000E836                 move.l  int,a6
 1671 00.0000347E 4EEEFE3E                     jmp     activatewindow(a6)
 1672 00.00003482                              ;
 1673 00.00003482 4E75                 dontrun rts
 1674 00.00003484                      
 1675 00.00003484 00000000             tasklock        dc.l    0
 1676 00.00003488 00000000             panictask       dc.l    0
 1677 00.0000348C 00000000             panicbit        dc.l    0
 1678 00.00003490 00000000             panicmask       dc.l    0
 1679 00.00003494                      
 1680 00.00003494 426C69747A205D5B2050 procname        dc.b    'Blitz ][ Program Proc',0
 1681 00.000034AA                              even
 1682 00.000034AA                              ;
 1683 00.000034AA 0000                         cnop    0,4
 1684 00.000034AC                              ;
 1685 00.000034AC 00000000                     dc.l    0       ;length
 1686 00.000034B0 00000000             procstart       dc.l    0       ;next
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 83
blitz2.s


 1687 00.000034B4                              ;
 1688 00.000034B4 20780004             runtheprog      move.l  4.w,a0
 1689 00.000034B8 23E8011400003488             move.l  276(a0),panictask
 1690 00.000034C0                              ;
 1691 00.000034C0 2C7900000154                 move.l  dos,a6
 1692 00.000034C6 223AFFBC                     move.l  tasklock(pc),d1
 1693 00.000034CA 4EAEFF82                     jsr     currentdir(a6)
 1694 00.000034CE                              ;
 1695 00.000034CE 323AFEAA                     move    nocli(pc),d1
 1696 00.000034D2 660C                         bne.s   .nocli
 1697 00.000034D4 20790000E372                 move.l  comdata,a0
 1698 00.000034DA 2068003C                     move.l  60(a0),a0
 1699 00.000034DE 4E90                         jsr     (a0)    ;open hendrix
 1700 00.000034E0                      .nocli  ;
 1701 00.000034E0 61000088                     bsr     calcvbr
 1702 00.000034E4 20790000E32A                 move.l  vbr,a0
 1703 00.000034EA 217C0000087A0084             move.l  #tokens,132(a0)
 1704 00.000034F2 21790000E7B80088             move.l  firsttype,136(a0)
 1705 00.000034FA 217C000050E000BC             move.l  #directtrap,128+15*4(a0)
 1706 00.00003502 42790000E834                 clr     dirmode
 1707 00.00003508 42B900002B34                 clr.l   firstglob
 1708 00.0000350E 42B900002B30                 clr.l   firstlocal
 1709 00.00003514 23F90000E8F60000E35C         move.l  pc,dirpcat
 1710 00.0000351E                              ;
 1711 00.0000351E 6100FE5C                     bsr     flushc
 1712 00.00003522                              ;
 1713 00.00003522 24390000E342                 move.l  stackfuck,d2
 1714 00.00003528 2E3C624C745A                 move.l  #'bLtZ',d7      ;force cli-type run
 1715 00.0000352E 41F900011E10                 lea     argreqla8,a0    ;cli arguement
 1716 00.00003534 22790000E8F2                 move.l  pcat,a1
 1717 00.0000353A                              ;
 1718 00.0000353A 4E91                 runthing        jsr     (a1)            ;Run the thing!
 1719 00.0000353C                              ;
 1720 00.0000353C 323AFE3C                     move    nocli(pc),d1
 1721 00.00003540 660C                         bne.s   .nocli2
 1722 00.00003542 20790000E372                 move.l  comdata,a0
 1723 00.00003548 20680040                     move.l  64(a0),a0
 1724 00.0000354C 4E90                         jsr     (a0)    ;close the Hendrix IO Window
 1725 00.0000354E                              ;
 1726 00.0000354E 33FC000100003EDA     .nocli2 move    #1,stopit       ;ended OK!
 1727 00.00003556 203AFF38                     move.l  panicmask(pc),d0
 1728 00.0000355A 227900000158                 move.l  us,a1
 1729 00.00003560 2C780004                     move.l  4.w,a6
 1730 00.00003564 4EAEFEBC                     jsr     signal(a6)
 1731 00.00003568                              ;
 1732 00.00003568 4E75                         rts
 1733 00.0000356A                      
 1734 00.0000356A 2C780004             calcvbr move.l  4.w,a6
 1735 00.0000356E 302E0128                     move    296(a6),d0
 1736 00.00003572 7200                         moveq   #0,d1
 1737 00.00003574 0240000F                     and     #15,d0
 1738 00.00003578 6706                 .loop   beq.s   .skip
 1739 00.0000357A 5241                         addq    #1,d1
 1740 00.0000357C E248                         lsr     #1,d0
 1741 00.0000357E 60F8                         bra.s   .loop
 1742 00.00003580 7400                 .skip   moveq   #0,d2
 1743 00.00003582 B27C0002                     cmp     #2,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 84
blitz2.s


 1744 00.00003586 650C                         bcs.s   .skip2
 1745 00.00003588 4EAEFF6A                     jsr     -150(a6)
 1746 00.0000358C 4E7A2801                     dc      $4e7a,$2801
 1747 00.00003590 4EAEFF64                     jsr     -156(a6)
 1748 00.00003594 23C20000E32A         .skip2  move.l  d2,vbr
 1749 00.0000359A 4E75                         rts
 1750 00.0000359C                      
 1751 00.0000359C 3F00                 flash   move    d0,-(a7)
 1752 00.0000359E 303CFFFF                     move    #-1,d0
 1753 00.000035A2 33C000DFF180         .loop   move    d0,$dff180
 1754 00.000035A8 51C8FFF8                     dbf     d0,.loop
 1755 00.000035AC 301F                         move    (a7)+,d0
 1756 00.000035AE 4E75                         rts
 1757 00.000035B0                      
 1758 00.000035B0 3F00                 flash2  move    d0,-(a7)
 1759 00.000035B2 303CFFFF                     move    #-1,d0
 1760 00.000035B6 33FC000F00DFF180     .loop   move    #15,$dff180
 1761 00.000035BE 51C8FFF6                     dbf     d0,.loop
 1762 00.000035C2 301F                         move    (a7)+,d0
 1763 00.000035C4 4E75                         rts
 1764 00.000035C6                      
 1765 00.000035C6 2C780004             flushlibs       move.l  4.w,a6
 1766 00.000035CA 203C10000000                 move.l  #1024*1024*256,d0       ;ask for 256 MEG!
 1767 00.000035D0 7201                         moveq   #1,d1
 1768 00.000035D2 4EEEFF3A                     jmp     -198(a6)
 1769 00.000035D6                      
 1770 00.000035D6 626C69747A323A646566 defname dc.b    'blitz2:deflibs',0
 1771 00.000035E6                              even
 1772 00.000035E6 00000000             deflibs dc.l    0
 1773 00.000035EA                      
 1774 00.000035EA 626C69747A323A616369 acidname        dc.b    'blitz2:acidlibs',0
 1775 00.000035FA                              even
 1776 00.000035FA 00000000             acidlibs        dc.l    0
 1777 00.000035FE                      
 1778 00.000035FE 6100F900             menu8   bsr     sleepon
 1779 00.00003602 61003D34                     bsr     freeblitzlibs
 1780 00.00003606 61000054                     bsr     makeblitzlibs
 1781 00.0000360A 61003A76                     bsr     loadblitzlibs
 1782 00.0000360E 6000F8E4                     bra     pointeron
 1783 00.00003612                      
 1784 00.00003612 74FE                 checklib        moveq   #-2,d2
 1785 00.00003614 4EAEFFAC                     jsr     lock(a6)
 1786 00.00003618 2E00                         move.l  d0,d7
 1787 00.0000361A 6718                         beq.s   .rts
 1788 00.0000361C                              ;
 1789 00.0000361C                              ;'deflibs' has been found! - lock in d7
 1790 00.0000361C                              ;
 1791 00.0000361C                              ;pick up file length
 1792 00.0000361C                              ;
 1793 00.0000361C 2207                         move.l  d7,d1
 1794 00.0000361E 243C0000EC68                 move.l  #namebuff,d2
 1795 00.00003624 4EAEFF9A                     jsr     examine(a6)
 1796 00.00003628 2207                         move.l  d7,d1
 1797 00.0000362A 4EAEFFA6                     jsr     unlock(a6)
 1798 00.0000362E 20390000ECE4                 move.l  namebuff+124,d0
 1799 00.00003634 4E75                 .rts    rts
 1800 00.00003636                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 85
blitz2.s


 1801 00.00003636                      makelibs        ;find all lib dirs in 'libsdir' and make a list of 'em
 1802 00.00003636                              ;unless 'blitz2:deflibs' is there!
 1803 00.00003636                              ;
 1804 00.00003636                              ;return eq if error
 1805 00.00003636                              ;
 1806 00.00003636 2C7900000154                 move.l  dos,a6
 1807 00.0000363C                              ;
 1808 00.0000363C 223C000035D6                 move.l  #defname,d1
 1809 00.00003642 6100FFCE                     bsr     checklib
 1810 00.00003646 23C0000035E6                 move.l  d0,deflibs
 1811 00.0000364C                              ;
 1812 00.0000364C 223C000035EA                 move.l  #acidname,d1
 1813 00.00003652 6100FFBE                     bsr     checklib
 1814 00.00003656 23C0000035FA                 move.l  d0,acidlibs
 1815 00.0000365C                              ;
 1816 00.0000365C 223C0000229C         makeblitzlibs   move.l  #libsdir,d1
 1817 00.00003662 74FE                         moveq   #-2,d2
 1818 00.00003664 2C7900000154                 move.l  dos,a6
 1819 00.0000366A 4EAEFFAC                     jsr     lock(a6)
 1820 00.0000366E 2E00                         move.l  d0,d7
 1821 00.00003670 670000D4                     beq     .done
 1822 00.00003674                              ;
 1823 00.00003674 2207                         move.l  d7,d1
 1824 00.00003676 243C0000EC68                 move.l  #namebuff,d2
 1825 00.0000367C 4EAEFF9A                     jsr     examine(a6)
 1826 00.00003680 4A80                         tst.l   d0
 1827 00.00003682 670000C4                     beq     .done2
 1828 00.00003686 20390000EC6C                 move.l  namebuff+4,d0
 1829 00.0000368C 6B0000BA                     bmi     .done2
 1830 00.00003690                              ;
 1831 00.00003690                              ;OK to do exnext on dir...
 1832 00.00003690                              ;
 1833 00.00003690 2207                 .loop   move.l  d7,d1
 1834 00.00003692 243C0000EC68                 move.l  #namebuff,d2
 1835 00.00003698 4EAEFF94                     jsr     exnext(a6)
 1836 00.0000369C 4A80                         tst.l   d0
 1837 00.0000369E 6700009E                     beq     .ok
 1838 00.000036A2 20390000EC6C                 move.l  namebuff+4,d0
 1839 00.000036A8 6B00FFE6                     bmi     .loop
 1840 00.000036AC                              ;
 1841 00.000036AC 41F90000EC70                 lea     namebuff+8,a0
 1842 00.000036B2 61001690                     bsr     endininfo
 1843 00.000036B6 6700FFD8                     beq     .loop
 1844 00.000036BA                              ;
 1845 00.000036BA 2C780004                     move.l  4.w,a6
 1846 00.000036BE 7026                         moveq   #38,d0
 1847 00.000036C0 7201                         moveq   #1,d1
 1848 00.000036C2 4EB900004B6C                 jsr     doallocmem
 1849 00.000036C8 2C7900000154                 move.l  dos,a6
 1850 00.000036CE                              ;
 1851 00.000036CE 2C00                         move.l  d0,d6
 1852 00.000036D0 41F90000E9B4                 lea     libslist,a0
 1853 00.000036D6 2A10                 .insloop        move.l  (a0),d5
 1854 00.000036D8 67000048                     beq     .here
 1855 00.000036DC 2445                         move.l  d5,a2
 1856 00.000036DE 5C4A                         addq    #6,a2
 1857 00.000036E0 43F90000EC70                 lea     namebuff+8,a1   ;filename
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 86
blitz2.s


 1858 00.000036E6 7000                 .comloop        moveq   #0,d0
 1859 00.000036E8 1019                         move.b  (a1)+,d0
 1860 00.000036EA 67000036                     beq     .here   ;I'm shorter
 1861 00.000036EE 7200                         moveq   #0,d1
 1862 00.000036F0 121A                         move.b  (a2)+,d1
 1863 00.000036F2 67000028                     beq     .next   ;I'm longer
 1864 00.000036F6 6100549A                     bsr     tstalpha
 1865 00.000036FA 66000006                     bne     .acskip
 1866 00.000036FE 024000DF                     and     #255-32,d0
 1867 00.00003702 C141                 .acskip exg     d0,d1
 1868 00.00003704 6100548C                     bsr     tstalpha
 1869 00.00003708 66000006                     bne     .acskip2
 1870 00.0000370C 024000DF                     and     #255-32,d0
 1871 00.00003710 C141                 .acskip2        exg     d0,d1
 1872 00.00003712 B001                         cmp.b   d1,d0
 1873 00.00003714 6700FFD0                     beq     .comloop
 1874 00.00003718 65000008                     bcs     .here   ;I'm less than
 1875 00.0000371C 2045                 .next   move.l  d5,a0
 1876 00.0000371E 6000FFB6                     bra     .insloop
 1877 00.00003722                              ;
 1878 00.00003722                      .here   ;addq   #1,numlibs
 1879 00.00003722 2246                         move.l  d6,a1
 1880 00.00003724 2290                         move.l  (a0),(a1)       ;next of last is next of me
 1881 00.00003726 2089                         move.l  a1,(a0) ;I am next of last
 1882 00.00003728 5849                         addq    #4,a1
 1883 00.0000372A 32FCFFFF                     move    #-1,(a1)+       ;set 'Used' flag
 1884 00.0000372E 207C0000EC70         .yo     move.l  #namebuff+8,a0
 1885 00.00003734 12D8                 .coploop        move.b  (a0)+,(a1)+
 1886 00.00003736 6600FFFC                     bne     .coploop
 1887 00.0000373A 6000FF54                     bra     .loop
 1888 00.0000373E                              ;
 1889 00.0000373E 2207                 .ok     move.l  d7,d1
 1890 00.00003740 4EAEFFA6                     jsr     unlock(a6)
 1891 00.00003744 70FF                         moveq   #-1,d0
 1892 00.00003746 4E75                 .done   rts
 1893 00.00003748 2207                 .done2  move.l  d7,d1
 1894 00.0000374A 4EAEFFA6                     jsr     unlock(a6)
 1895 00.0000374E 7000                         moveq   #0,d0
 1896 00.00003750 4E75                         rts
 1897 00.00003752                      
 1898 00.00003752                      frlibslist      ;free up a libs list
 1899 00.00003752 2C780004                     move.l  4.w,a6
 1900 00.00003756 24790000E9B4                 move.l  libslist,a2
 1901 00.0000375C 42B90000E9B4                 clr.l   libslist
 1902 00.00003762                              ;clr    numlibs
 1903 00.00003762 B4FC0000             .loop   cmp     #0,a2
 1904 00.00003766 67000010                     beq     .done
 1905 00.0000376A 224A                         move.l  a2,a1
 1906 00.0000376C 7026                         moveq   #38,d0
 1907 00.0000376E 2452                         move.l  (a2),a2
 1908 00.00003770 4EAEFF2E                     jsr     freemem(a6)
 1909 00.00003774 6000FFEC                     bra     .loop
 1910 00.00003778 4E75                 .done   rts
 1911 00.0000377A                      
 1912 00.0000377A                      ;-----------main compiler functions!------------;
 1913 00.0000377A                      funcs
 1914 00.0000377A                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 87
blitz2.s


 1915 00.0000377A 0000                 smallpass       dc      0
 1916 00.0000377C                      
 1917 00.0000377C                      compile ;O.K. Here we go.....
 1918 00.0000377C                              ;
 1919 00.0000377C 23CF00002B18                 move.l  a7,errstack
 1920 00.00003782 23FC000038DC00002B1C         move.l  #freeemup,errcont
 1921 00.0000378C 23FC0000E95C0000E99C         move.l  #concomstack,concomsp
 1922 00.00003796                              ;
 1923 00.00003796                              ;racing stripe stuff...
 1924 00.00003796                              ;
 1925 00.00003796 20790000E372                 move.l  comdata,a0
 1926 00.0000379C 20680050                     move.l  80(a0),a0
 1927 00.000037A0 30280008                     move    8(a0),d0
 1928 00.000037A4 E648                         lsr     #3,d0
 1929 00.000037A6 5F40                         subq    #7,d0
 1930 00.000037A8 33C00000393A                 move    d0,riteend
 1931 00.000037AE 4840                         swap    d0
 1932 00.000037B0 4240                         clr     d0
 1933 00.000037B2 80F900002B40                 divu    numlines,d0
 1934 00.000037B8 4A40                         tst     d0
 1935 00.000037BA 66000004                     bne     .ok
 1936 00.000037BE 70FF                         moveq   #-1,d0
 1937 00.000037C0 33C00000E93E         .ok     move    d0,titleadd
 1938 00.000037C6                              ;
 1939 00.000037C6 20790000E372                 move.l  comdata,a0
 1940 00.000037CC 3028005C                     move    92(a0),d0
 1941 00.000037D0 33C000003936                 move    d0,bmapmul
 1942 00.000037D6 C0FC0009                     mulu    #9,d0
 1943 00.000037DA 33C000003938                 move    d0,botline      ;offset to bottom of racing stripe
 1944 00.000037E0                              ;
 1945 00.000037E0 0839000700010FE5             btst    #7,optreqga10+13
 1946 00.000037E8 56F90000400A                 sne     debugga
 1947 00.000037EE                              ;
 1948 00.000037EE                      ;***;   clr     mywindow+2
 1949 00.000037EE 42790000E834                 clr     dirmode         ;direct mode flag
 1950 00.000037F4 427900008AFE                 clr     ezerr           ;quiet error
 1951 00.000037FA 42B90000EC04                 clr.l   thisproc
 1952 00.00003800 42790000E948                 clr     connest
 1953 00.00003806 42790000EC02                 clr     varmode
 1954 00.0000380C 42790000EC0C                 clr     procmode
 1955 00.00003812 42790000EC18                 clr     numincs
 1956 00.00003818 4279000050D2                 clr     intstring
 1957 00.0000381E 42790000377A                 clr     smallpass
 1958 00.00003824                              ;
 1959 00.00003824 6100086C             .retry  bsr     dopass
 1960 00.00003828                              ;
 1961 00.00003828 08390007000110C1             btst    #7,optreqga15+13
 1962 00.00003830 6712                         beq.s   .nosmall
 1963 00.00003832                              ;
 1964 00.00003832 61001A76             .makesmall      bsr     alloxadj
 1965 00.00003836 67000052                     beq     .anerr
 1966 00.0000383A 52790000377A                 addq    #1,smallpass
 1967 00.00003840 61000850                     bsr     dopass
 1968 00.00003844                              ;
 1969 00.00003844 32390000E858         .nosmall        move    nomemleft,d1
 1970 00.0000384A 67000056                     beq     .dosave
 1971 00.0000384E                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 88
blitz2.s


 1972 00.0000384E 207C000022AE                 move.l  #nomemreq,a0
 1973 00.00003854 22790000E372                 move.l  comdata,a1
 1974 00.0000385A 2251                         move.l  (a1),a1
 1975 00.0000385C 4E91                         jsr     (a1)    ;open the requester
 1976 00.0000385E                              ;
 1977 00.0000385E 22790000E372         .loop   move.l  comdata,a1
 1978 00.00003864 22690008                     move.l  8(a1),a1
 1979 00.00003868 4E91                         jsr     (a1)    ;getinput
 1980 00.0000386A                              ;
 1981 00.0000386A BE7CFFFF                     cmp     #-1,d7
 1982 00.0000386E 6600FFEE                     bne     .loop
 1983 00.00003872 BC7C0001                     cmp     #1,d6
 1984 00.00003876 6700001E                     beq     .inc
 1985 00.0000387A BC7C0002                     cmp     #2,d6
 1986 00.0000387E 6700FFB2                     beq     .makesmall
 1987 00.00003882 BC7C0003                     cmp     #3,d6
 1988 00.00003886 6600FFD6                     bne     .loop
 1989 00.0000388A 33FCFFFF0000E84C     .anerr  move    #-1,anyerrs
 1990 00.00003892 60000012                     bra     qfree
 1991 00.00003896                              ;
 1992 00.00003896 610019D6             .inc    bsr     alloxinc
 1993 00.0000389A 67000040                     beq     freeemup
 1994 00.0000389E 6000FF84                     bra     .retry
 1995 00.000038A2                              ;
 1996 00.000038A2 60000002             .dosave bra     qfree   ;used to go after beq .nosave
 1997 00.000038A6                      
 1998 00.000038A6                      qfree   ;free up un-necessary stuff
 1999 00.000038A6                              ;
 2000 00.000038A6 4EB90000CCFE                 jsr     freereps
 2001 00.000038AC 4EB90000CD0A                 jsr     freesels
 2002 00.000038B2 4EB900006DF2                 jsr     freetlist
 2003 00.000038B8 4EB900008DB8                 jsr     freepends
 2004 00.000038BE 4EB900003928                 jsr     freeifs
 2005 00.000038C4 4EB90000C188                 jsr     freeincs
 2006 00.000038CA 4EB90000C15C                 jsr     freexincs
 2007 00.000038D0 4EB90000D9BC                 jsr     freefors
 2008 00.000038D6 4EF9000073FC                 jmp     freeasms
 2009 00.000038DC                      
 2010 00.000038DC 6100FFC8             freeemup        bsr     qfree
 2011 00.000038E0 4EB900007962                 jsr     killoffs        ;free up DOS offset table
 2012 00.000038E6 4EB900003918                 jsr     frallvars       ;free up Global vars
 2013 00.000038EC 4EB90000390A                 jsr     fralltypes      ;free up all types
 2014 00.000038F2 4EB900008D6A                 jsr     freelabels      ;free up labels
 2015 00.000038F8 4EB9000073C0                 jsr     freemacs        ;free up actual macro defines.
 2016 00.000038FE 4EB900008DE0                 jsr     freeprocs       ;free up states/funcs
 2017 00.00003904 4EF900008D16                 jmp     freeprocvs      ;free up outstanding proc stuff
 2018 00.0000390A                      
 2019 00.0000390A 20790000E34E         fralltypes      move.l  lastrestype,a0
 2020 00.00003910 2450                         move.l  (a0),a2
 2021 00.00003912 4290                         clr.l   (a0)
 2022 00.00003914 600054F6                     bra     freetypes
 2023 00.00003918                              ;
 2024 00.00003918 267900002B28         frallvars       move.l  firstvar,a3
 2025 00.0000391E 42B900002B28                 clr.l   firstvar
 2026 00.00003924 60005424                     bra     freevars
 2027 00.00003928                      
 2028 00.00003928 45F900002B44         freeifs lea     firstif,a2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 89
blitz2.s


 2029 00.0000392E 740E                         moveq   #14,d2
 2030 00.00003930 4EF90000CD10                 jmp     freeslist
 2031 00.00003936                      
 2032 00.00003936 0000                 bmapmul dc      0
 2033 00.00003938 0000                 botline dc      0       ;offset to bottom of stripe
 2034 00.0000393A 0000                 riteend dc      0       ;right end of include strip
 2035 00.0000393C                      
 2036 00.0000393C 0000                 macmask dc      0
 2037 00.0000393E                      
 2038 00.0000393E                      nextline        ;
 2039 00.0000393E                              ;go on to the next line of the program.....
 2040 00.0000393E                              ;
 2041 00.0000393E 42790000393C                 clr     macmask
 2042 00.00003944 6100035E                     bsr     freembuff
 2043 00.00003948 42790000EC24                 clr     quoteflag
 2044 00.0000394E 4A790000EC18                 tst     numincs
 2045 00.00003954 6700005A                     beq     .skip3
 2046 00.00003958 4EB90000C09E                 jsr     readinc
 2047 00.0000395E 67000050                     beq     .skip3
 2048 00.00003962                              ;
 2049 00.00003962                              ;do include stripe
 2050 00.00003962                              ;
 2051 00.00003962 30390000EC18                 move    numincs,d0
 2052 00.00003968 B07C0004                     cmp     #4,d0
 2053 00.0000396C 6400003E                     bcc     .stskip
 2054 00.00003970 D040                         add     d0,d0
 2055 00.00003972 41F90000E93E                 lea     titleadd,a0
 2056 00.00003978 34300000                     move    0(a0,d0),d2     ;offset in line
 2057 00.0000397C B47AFFBC                     cmp     riteend(pc),d2
 2058 00.00003980 6400002A                     bcc     .stskip
 2059 00.00003984 52700000                     addq    #1,0(a0,d0)
 2060 00.00003988                              ;
 2061 00.00003988 E248                         lsr     #1,d0
 2062 00.0000398A C0FAFFAA                     mulu    bmapmul(pc),d0
 2063 00.0000398E                              ;
 2064 00.0000398E 20790000E372                 move.l  comdata,a0
 2065 00.00003994 22680024                     move.l  36(a0),a1
 2066 00.00003998 D2C0                         add     d0,a1
 2067 00.0000399A 46312000                     not.b   0(a1,d2)
 2068 00.0000399E 22680024                     move.l  36(a0),a1
 2069 00.000039A2 D2FAFF94                     add     botline(pc),a1
 2070 00.000039A6 92C0                         sub     d0,a1
 2071 00.000039A8 46312000                     not.b   0(a1,d2)
 2072 00.000039AC 70FF                 .stskip moveq   #-1,d0
 2073 00.000039AE 4E75                         rts
 2074 00.000039B0                              ;
 2075 00.000039B0                      .skip3  ;do main stripe
 2076 00.000039B0                              ;
 2077 00.000039B0 20390000E93A                 move.l  titleat,d0
 2078 00.000039B6 7200                         moveq   #0,d1
 2079 00.000039B8 32390000E93E                 move    titleadd,d1
 2080 00.000039BE D081                         add.l   d1,d0
 2081 00.000039C0 2200                         move.l  d0,d1
 2082 00.000039C2 4840                         swap    d0
 2083 00.000039C4 B0790000E93A                 cmp     titleat,d0
 2084 00.000039CA 67000018                     beq     .skip3a
 2085 00.000039CE 20790000E372                 move.l  comdata,a0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 90
blitz2.s


 2086 00.000039D4 20680024                     move.l  36(a0),a0
 2087 00.000039D8 463000FF                     not.b   -1(a0,d0)
 2088 00.000039DC D0FAFF5A                     add     botline(pc),a0
 2089 00.000039E0 463000FF                     not.b   -1(a0,d0)
 2090 00.000039E4 23C10000E93A         .skip3a move.l  d1,titleat
 2091 00.000039EA                              ;
 2092 00.000039EA                      .skip2  ;
 2093 00.000039EA 52790000E9E8                 addq    #1,linenumat
 2094 00.000039F0 42790000E35A                 clr     linedone
 2095 00.000039F6                              ;
 2096 00.000039F6 537900002B22         .norunerr       subq    #1,linesleft
 2097 00.000039FC 67000014                     beq     .skip
 2098 00.00003A00 207900002B24                 move.l  thisitem,a0
 2099 00.00003A06 2050                         move.l  (a0),a0
 2100 00.00003A08 23C800002B24                 move.l  a0,thisitem
 2101 00.00003A0E 4BE80009                     lea     9(a0),a5
 2102 00.00003A12                              ;
 2103 00.00003A12 4E75                 .skip   rts
 2104 00.00003A14                      
 2105 00.00003A14                      hexascii        ;convert d1.w to ascii at a0
 2106 00.00003A14                              ;
 2107 00.00003A14 3F00                         move    d0,-(a7)
 2108 00.00003A16 7003                         moveq   #3,d0
 2109 00.00003A18 3401                 .loop   move    d1,d2
 2110 00.00003A1A 0242000F                     and     #15,d2
 2111 00.00003A1E 06420030                     add     #48,d2
 2112 00.00003A22 B47C003A                     cmp     #58,d2
 2113 00.00003A26 65000004                     bcs     .skip
 2114 00.00003A2A 5E42                         addq    #7,d2
 2115 00.00003A2C 11820000             .skip   move.b  d2,0(a0,d0)
 2116 00.00003A30 E849                         lsr     #4,d1
 2117 00.00003A32 51C8FFE4                     dbf     d0,.loop
 2118 00.00003A36 301F                         move    (a7)+,d0
 2119 00.00003A38 4E75                         rts
 2120 00.00003A3A                      
 2121 00.00003A3A                      expandmax       ;
 2122 00.00003A3A                              ;go through statement and expand macros
 2123 00.00003A3A                              ;
 2124 00.00003A3A                              ;line at a5.....
 2125 00.00003A3A                              ;check it for !'s
 2126 00.00003A3A                              ;
 2127 00.00003A3A 32390000EC0E                 move    comflag,d1
 2128 00.00003A40 66000004                     bne     .loop0
 2129 00.00003A44 4E75                         rts
 2130 00.00003A46                              ;
 2131 00.00003A46 2F0D                 .loop0  move.l  a5,-(a7)
 2132 00.00003A48 723A                         moveq   #':',d1
 2133 00.00003A4A 7421                         moveq   #'!',d2
 2134 00.00003A4C 763B                         moveq   #';',d3
 2135 00.00003A4E 7822                         moveq   #'"',d4
 2136 00.00003A50                              ;
 2137 00.00003A50 101D                 .loop   move.b  (a5)+,d0
 2138 00.00003A52 6700024C                     beq     .done
 2139 00.00003A56 6A000008                     bpl     .test
 2140 00.00003A5A 101D                         move.b  (a5)+,d0
 2141 00.00003A5C 6000FFF2                     bra     .loop
 2142 00.00003A60 B004                 .test   cmp.b   d4,d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 91
blitz2.s


 2143 00.00003A62 6600001E                     bne     .notq
 2144 00.00003A66                              ;
 2145 00.00003A66 101D                 .qloop  move.b  (a5)+,d0
 2146 00.00003A68 670047BA                     beq     notqerr
 2147 00.00003A6C 6A000008                     bpl     .qskip
 2148 00.00003A70 101D                         move.b  (a5)+,d0
 2149 00.00003A72 6000FFF2                     bra     .qloop
 2150 00.00003A76 B03C0022             .qskip  cmp.b   #'"',d0
 2151 00.00003A7A 6600FFEA                     bne     .qloop
 2152 00.00003A7E 6000FFD0                     bra     .loop
 2153 00.00003A82                              ;
 2154 00.00003A82 B001                 .notq   cmp.b   d1,d0
 2155 00.00003A84 6700021A                     beq     .done
 2156 00.00003A88 B003                         cmp.b   d3,d0
 2157 00.00003A8A 67000214                     beq     .done
 2158 00.00003A8E B002                         cmp.b   d2,d0   ;macro character!
 2159 00.00003A90 6600FFBE                     bne     .loop
 2160 00.00003A94                              ;
 2161 00.00003A94                              ;expand the macro!
 2162 00.00003A94                              ;
 2163 00.00003A94 33FCFFFF0000393C             move    #-1,macmask
 2164 00.00003A9C 264D                         move.l  a5,a3
 2165 00.00003A9E                              ;
 2166 00.00003A9E 6100514C                     bsr     makename
 2167 00.00003AA2 66000008                     bne     .fkitme
 2168 00.00003AA6 4EF9000083E2                 jmp     syntaxerr
 2169 00.00003AAC 61004196             .fkitme bsr     bakup
 2170 00.00003AB0                              ;
 2171 00.00003AB0 610051F4                     bsr     findmac
 2172 00.00003AB4 67000008                     beq     .kl1
 2173 00.00003AB8 4EF90000876A                 jmp     nomacerr
 2174 00.00003ABE                      .kl1
 2175 00.00003ABE                              ;
 2176 00.00003ABE 284D                         move.l  a5,a4   ;start of parameters!
 2177 00.00003AC0 7800                         moveq   #0,d4   ;narg=0
 2178 00.00003AC2 0C1C007B                     cmp.b   #'{',(a4)+
 2179 00.00003AC6 66000022                     bne     .nops
 2180 00.00003ACA 20790000EC26                 move.l  macrobuff,a0    ;start of parameter collect     
 2181 00.00003AD0 5244                 .ppl    addq    #1,d4   ;another p
 2182 00.00003AD2 208C                         move.l  a4,(a0)
 2183 00.00003AD4 610001F0                     bsr     findit
 2184 00.00003AD8 220C                         move.l  a4,d1
 2185 00.00003ADA 9298                         sub.l   (a0)+,d1
 2186 00.00003ADC 5341                         subq    #1,d1
 2187 00.00003ADE 30C1                         move    d1,(a0)+
 2188 00.00003AE0 B03C007D                     cmp.b   #'}',d0
 2189 00.00003AE4 6600FFEA                     bne     .ppl
 2190 00.00003AE8 2A4C                         move.l  a4,a5
 2191 00.00003AEA 33C40000E94E         .nops   move    d4,numarg
 2192 00.00003AF0                              ;
 2193 00.00003AF0 203900010E84                 move.l  macrolen,d0
 2194 00.00003AF6 7201                         moveq   #1,d1
 2195 00.00003AF8 2C780004                     move.l  4.w,a6
 2196 00.00003AFC 4EB900004B6C                 jsr     doallocmem
 2197 00.00003B02                              ;
 2198 00.00003B02 23F90000E9540000E950         move.l  myline,myoline
 2199 00.00003B0C 23C00000E954                 move.l  d0,myline
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 92
blitz2.s


 2200 00.00003B12 2240                         move.l  d0,a1
 2201 00.00003B14 2C49                         move.l  a1,a6
 2202 00.00003B16 DDF900010E84                 add.l   macrolen,a6     ;end of macro buffer
 2203 00.00003B1C                              ;
 2204 00.00003B1C 205F                         move.l  (a7)+,a0        ;start of the line
 2205 00.00003B1E B3CE                 .loop2  cmp.l   a6,a1
 2206 00.00003B20 640046C4                     bcc     mbovererr
 2207 00.00003B24 12D8                         move.b  (a0)+,(a1)+
 2208 00.00003B26 B1CB                         cmp.l   a3,a0
 2209 00.00003B28 6500FFF4                     bcs     .loop2
 2210 00.00003B2C 5349                         subq    #1,a1   ;back over '#'
 2211 00.00003B2E                              ;
 2212 00.00003B2E 322A0008                     move    8(a2),d1        ;mac len
 2213 00.00003B32 6700013C                     beq     .loop4
 2214 00.00003B36 33EA000A0000E934             move    10(a2),macnum
 2215 00.00003B3E 526A000A                     addq    #1,10(a2)
 2216 00.00003B42 246A0004                     move.l  4(a2),a2
 2217 00.00003B46 5341                         subq    #1,d1
 2218 00.00003B48 7000                 .loop3  moveq   #0,d0
 2219 00.00003B4A 101A                         move.b  (a2)+,d0
 2220 00.00003B4C B03C0060                     cmp.b   #'`',d0
 2221 00.00003B50 66000104                     bne     .oky
 2222 00.00003B54 5341                         subq    #1,d1
 2223 00.00003B56 101A                         move.b  (a2)+,d0
 2224 00.00003B58 B07C007B                     cmp     #'{',d0
 2225 00.00003B5C 67000058                     beq     .evalit
 2226 00.00003B60 B07C0040                     cmp     #'@',d0
 2227 00.00003B64 6600001C                     bne     .notnum
 2228 00.00003B68                              ;
 2229 00.00003B68                              ;macro num parameter
 2230 00.00003B68                              ;
 2231 00.00003B68 7400                         moveq   #0,d2
 2232 00.00003B6A 34390000E934                 move    macnum,d2
 2233 00.00003B70 2049                         move.l  a1,a0
 2234 00.00003B72 3F01                         move    d1,-(a7)
 2235 00.00003B74 4EB9000053DC                 jsr     makelong
 2236 00.00003B7A 2248                         move.l  a0,a1
 2237 00.00003B7C 321F                         move    (a7)+,d1
 2238 00.00003B7E                              ;
 2239 00.00003B7E 600000EC                     bra     .oky2
 2240 00.00003B82                              ;
 2241 00.00003B82 00400020             .notnum or      #32,d0
 2242 00.00003B86 B07C007A                     cmp     #'z',d0
 2243 00.00003B8A 65000008                     bcs     .fkit
 2244 00.00003B8E 4EF9000085DA                 jmp     ilconsterr
 2245 00.00003B94 04400030             .fkit   sub     #48,d0
 2246 00.00003B98 B07C000A                     cmp     #10,d0
 2247 00.00003B9C 65000054                     bcs     .itsgot
 2248 00.00003BA0                              ;
 2249 00.00003BA0 04400027                     sub     #39,d0
 2250 00.00003BA4 B07C000A                     cmp     #10,d0
 2251 00.00003BA8 64000008                     bcc     .fkit2
 2252 00.00003BAC 4EF9000085DA                 jmp     ilconsterr
 2253 00.00003BB2 6000003E             .fkit2  bra     .itsgot
 2254 00.00003BB6                              ;
 2255 00.00003BB6 2F0D                 .evalit move.l  a5,-(a7)
 2256 00.00003BB8 48E74062                     movem.l d1/a1/a2/a6,-(a7)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 93
blitz2.s


 2257 00.00003BBC 2A4A                         move.l  a2,a5
 2258 00.00003BBE 4EB90000BF6E                 jsr     evalconst2
 2259 00.00003BC4 B07C007D                     cmp     #'}',d0
 2260 00.00003BC8 67000008                     beq     .allisok
 2261 00.00003BCC 4EF9000083E2                 jmp     syntaxerr
 2262 00.00003BD2 4CDF4602             .allisok        movem.l (a7)+,d1/a1/a2/a6
 2263 00.00003BD6 240D                         move.l  a5,d2
 2264 00.00003BD8 948A                         sub.l   a2,d2
 2265 00.00003BDA 9242                         sub     d2,d1
 2266 00.00003BDC 244D                         move.l  a5,a2
 2267 00.00003BDE                              ;
 2268 00.00003BDE 42790000EC24                 clr     quoteflag
 2269 00.00003BE4 2A5F                         move.l  (a7)+,a5
 2270 00.00003BE6                              ;
 2271 00.00003BE6 2003                         move.l  d3,d0
 2272 00.00003BE8 6A000008                     bpl     .itsgot
 2273 00.00003BEC 4EF9000085DA                 jmp     ilconsterr
 2274 00.00003BF2                              ;
 2275 00.00003BF2 5340                 .itsgot subq    #1,d0
 2276 00.00003BF4 6A00002A                     bpl     .ok
 2277 00.00003BF8                              ;
 2278 00.00003BF8                              ;here, we do a numarg text replace
 2279 00.00003BF8                              ;
 2280 00.00003BF8 30390000E94E                 move    numarg,d0
 2281 00.00003BFE 80FC000A                     divu    #10,d0
 2282 00.00003C02 06400030                     add     #48,d0
 2283 00.00003C06 B3CE                         cmp.l   a6,a1
 2284 00.00003C08 640045DC                     bcc     mbovererr
 2285 00.00003C0C 12C0                         move.b  d0,(a1)+
 2286 00.00003C0E 4840                         swap    d0
 2287 00.00003C10 06400030                     add     #48,d0
 2288 00.00003C14 B3CE                         cmp.l   a6,a1
 2289 00.00003C16 640045CE                     bcc     mbovererr
 2290 00.00003C1A 12C0                         move.b  d0,(a1)+
 2291 00.00003C1C 6000004E                     bra     .oky2
 2292 00.00003C20                              ;
 2293 00.00003C20                      .ok     ;ok to do parameter replacement
 2294 00.00003C20                              ;d0= number for parameter replacement!
 2295 00.00003C20                              ;
 2296 00.00003C20 B0790000E94E                 cmp     numarg,d0
 2297 00.00003C26 64000044                     bcc     .oky2
 2298 00.00003C2A E348                         lsl     #1,d0
 2299 00.00003C2C 3800                         move    d0,d4
 2300 00.00003C2E E348                         lsl     #1,d0
 2301 00.00003C30 D044                         add     d4,d0   ;*6
 2302 00.00003C32 20790000EC26                 move.l  macrobuff,a0
 2303 00.00003C38 D0C0                         add     d0,a0
 2304 00.00003C3A 38280004                     move    4(a0),d4        ;len of replacetext
 2305 00.00003C3E 6700002C                     beq     .oky2
 2306 00.00003C42 2050                         move.l  (a0),a0
 2307 00.00003C44 5344                         subq    #1,d4
 2308 00.00003C46 B3CE                 .plp    cmp.l   a6,a1
 2309 00.00003C48 6400459C                     bcc     mbovererr
 2310 00.00003C4C 12D8                         move.b  (a0)+,(a1)+
 2311 00.00003C4E 51CCFFF6                     dbf     d4,.plp
 2312 00.00003C52 60000018                     bra     .oky2
 2313 00.00003C56                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 94
blitz2.s


 2314 00.00003C56 B3CE                 .oky    cmp.l   a6,a1
 2315 00.00003C58 6400458C                     bcc     mbovererr
 2316 00.00003C5C 12C0                         move.b  d0,(a1)+
 2317 00.00003C5E 6A00000C                     bpl     .oky2
 2318 00.00003C62 B3CE                         cmp.l   a6,a1
 2319 00.00003C64 64004580                     bcc     mbovererr
 2320 00.00003C68 12DA                         move.b  (a2)+,(a1)+
 2321 00.00003C6A 5341                         subq    #1,d1
 2322 00.00003C6C 51C9FEDA             .oky2   dbf     d1,.loop3
 2323 00.00003C70                              ;
 2324 00.00003C70 B3CE                 .loop4  cmp.l   a6,a1
 2325 00.00003C72 64004572                     bcc     mbovererr
 2326 00.00003C76 12DD                         move.b  (a5)+,(a1)+
 2327 00.00003C78 6600FFF6                     bne     .loop4
 2328 00.00003C7C                              ;
 2329 00.00003C7C 2A790000E954                 move.l  myline,a5
 2330 00.00003C82                              ;
 2331 00.00003C82 20390000E950                 move.l  myoline,d0
 2332 00.00003C88 67000012                     beq     .skip3
 2333 00.00003C8C 2240                         move.l  d0,a1
 2334 00.00003C8E 203900010E84                 move.l  macrolen,d0
 2335 00.00003C94 2C780004                     move.l  4.w,a6
 2336 00.00003C98 4EAEFF2E                     jsr     freemem(a6)
 2337 00.00003C9C 6000FDA8             .skip3  bra     .loop0
 2338 00.00003CA0                              ;
 2339 00.00003CA0 2A5F                 .done   move.l  (a7)+,a5
 2340 00.00003CA2 4E75                         rts
 2341 00.00003CA4                      
 2342 00.00003CA4 20390000E954         freembuff       move.l  myline,d0
 2343 00.00003CAA 67000018                     beq     .no
 2344 00.00003CAE 42B90000E954                 clr.l   myline
 2345 00.00003CB4 2240                         move.l  d0,a1
 2346 00.00003CB6 203900010E84                 move.l  macrolen,d0
 2347 00.00003CBC 2C780004                     move.l  4.w,a6
 2348 00.00003CC0 4EEEFF2E                     jmp     freemem(a6)
 2349 00.00003CC4 4E75                 .no     rts
 2350 00.00003CC6                      
 2351 00.00003CC6                      findit  ;find the end of a parameter
 2352 00.00003CC6                              ;
 2353 00.00003CC6 7400                         moveq   #0,d2   ;no nesting
 2354 00.00003CC8 101C                 .loop   move.b  (a4)+,d0
 2355 00.00003CCA 67004716                     beq     syntaxerr
 2356 00.00003CCE 6A000008                     bpl     .tst
 2357 00.00003CD2 524C                         addq    #1,a4
 2358 00.00003CD4 6000FFF2                     bra     .loop
 2359 00.00003CD8 B03C0022             .tst    cmp.b   #'"',d0
 2360 00.00003CDC 6600000C                     bne     .notq
 2361 00.00003CE0 46790000EC24                 not     quoteflag
 2362 00.00003CE6 6000FFE0                     bra     .loop
 2363 00.00003CEA 4A790000EC24         .notq   tst     quoteflag
 2364 00.00003CF0 6600FFD6                     bne     .loop
 2365 00.00003CF4 B03C002C                     cmp.b   #',',d0
 2366 00.00003CF8 6600000C                     bne     .notc
 2367 00.00003CFC 4A42                         tst     d2
 2368 00.00003CFE 67000030                     beq     .done
 2369 00.00003D02 6000FFC4                     bra     .loop
 2370 00.00003D06 6100002A             .notc   bsr     isitopen
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 95
blitz2.s


 2371 00.00003D0A 66000008                     bne     .noto
 2372 00.00003D0E 5242                         addq    #1,d2
 2373 00.00003D10 6000FFB6                     bra     .loop
 2374 00.00003D14 B03C007D             .noto   cmp.b   #'}',d0
 2375 00.00003D18 66000008                     bne     .notcb
 2376 00.00003D1C 4A42                         tst     d2
 2377 00.00003D1E 67000010                     beq     .done
 2378 00.00003D22 6100001C             .notcb  bsr     isitclose
 2379 00.00003D26 6600FFA0                     bne     .loop
 2380 00.00003D2A 5342                         subq    #1,d2
 2381 00.00003D2C 6000FF9A                     bra     .loop
 2382 00.00003D30 4E75                 .done   rts
 2383 00.00003D32                      
 2384 00.00003D32 B03C007B             isitopen        cmp.b   #'{',d0
 2385 00.00003D36 67000006                     beq     .yes
 2386 00.00003D3A B03C0028                     cmp.b   #'(',d0
 2387 00.00003D3E 4E75                 .yes    rts
 2388 00.00003D40                      
 2389 00.00003D40 B03C007D             isitclose       cmp.b   #'}',d0
 2390 00.00003D44 67000006                     beq     .yes
 2391 00.00003D48 B03C0029                     cmp.b   #')',d0
 2392 00.00003D4C 4E75                 .yes    rts
 2393 00.00003D4E                      
 2394 00.00003D4E 00000000             stopreq dc.l    0
 2395 00.00003D52 00AC002600D0002C0000         dc.w    172,38,208,44,0,0
 2396 00.00003D5E 00003EAC00003DBE0000         dc.l    stopreqga1,stopreqbo1,stopreqin1
 2397 00.00003D6A 0000                         dc.w    0
 2398 00.00003D6C 0000                         dc.b    0,0
 2399 00.00003D6E 00000000                     dc.l    0
 2400 00.00003D72                              ds.b    32
 2401 00.00003D92 0000000000000000             dc.l    0,0
 2402 00.00003D9A                              ds.b    36
 2403 00.00003DBE                      
 2404 00.00003DBE 00000000             stopreqbo1      dc.w    0,0
 2405 00.00003DC2 01020103                     dc.b    1,2,1,3
 2406 00.00003DC6 00003DCE00003DDA             dc.l    stopreqla1,stopreqla2
 2407 00.00003DCE 00C70004000800040008 stopreqla1      dc.w    199,4,8,4,8,23
 2408 00.00003DDA 00000000             stopreqla2      dc.w    0,0
 2409 00.00003DDE 02010103                     dc.b    2,1,1,3
 2410 00.00003DE2 00003DEA00003DF6             dc.l    stopreqla3,stopreqbo2
 2411 00.00003DEA 00C7000500C700170009 stopreqla3      dc.w    199,5,199,23,9,23
 2412 00.00003DF6 00000000             stopreqbo2      dc.w    0,0
 2413 00.00003DFA 01020103                     dc.b    1,2,1,3
 2414 00.00003DFE 00003E0600003E12             dc.l    stopreqla4,stopreqla5
 2415 00.00003E06 00CF0000000000000000 stopreqla4      dc.w    207,0,0,0,0,43
 2416 00.00003E12 00000000             stopreqla5      dc.w    0,0
 2417 00.00003E16 02010103                     dc.b    2,1,1,3
 2418 00.00003E1A 00003E2200000000             dc.l    stopreqla6,0
 2419 00.00003E22 00CF000100CF002B0001 stopreqla6      dc.w    207,1,207,43,1,43
 2420 00.00003E2E 00000000             stopreqbo3      dc.w    0,0
 2421 00.00003E32 01020103                     dc.b    1,2,1,3
 2422 00.00003E36 00003E3E00003E4A             dc.l    stopreqla8,stopreqla9
 2423 00.00003E3E 003F0000000000000000 stopreqla8      dc.w    63,0,0,0,0,11
 2424 00.00003E4A 00000000             stopreqla9      dc.w    0,0
 2425 00.00003E4E 02010103                     dc.b    2,1,1,3
 2426 00.00003E52 00003E5A00000000             dc.l    stopreqla10,0
 2427 00.00003E5A 003F0001003F000B0001 stopreqla10     dc.w    63,1,63,11,1,11
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 96
blitz2.s


 2428 00.00003E66                      
 2429 00.00003E66 01000100             stopreqin1      dc.b    1,0,1,0
 2430 00.00003E6A 0014000A                     dc.w    20,10
 2431 00.00003E6E 00000000                     dc.l    0
 2432 00.00003E72 00003E7A00000000             dc.l    stopreqla7,0
 2433 00.00003E7A 2A2A2A2A2A20         stopreqla7      dc.b    '***** '
 2434 00.00003E80 434F4D50494C494E4720 reqmessage      dc.b    'COMPILING *****',0
 2435 00.00003E90                              even
 2436 00.00003E90 01000100             stopreqin2      dc.b    1,0,1,0
 2437 00.00003E94 00040002                     dc.w    4,2
 2438 00.00003E98 00000000                     dc.l    0
 2439 00.00003E9C 00003EA400000000             dc.l    stopreqla11,0
 2440 00.00003EA4 2053544F50212000     stopreqla11     dc.b    ' STOP! ',0
 2441 00.00003EAC                              even
 2442 00.00003EAC                              ;
 2443 00.00003EAC 00000000             stopreqga1      dc.l    0
 2444 00.00003EB0 0048001C0040000C0000         dc.w    72,28,64,12,0,1,1
 2445 00.00003EBE 00003E2E000000000000         dc.l    stopreqbo3,0,stopreqin2,0,0
 2446 00.00003ED2 0001                         dc.w    1
 2447 00.00003ED4 00000000                     dc.l    0
 2448 00.00003ED8                      
 2449 00.00003ED8 0000                 stopbit dc      0
 2450 00.00003EDA 0000                 stopit  dc      0
 2451 00.00003EDC 0000                 clrreq  dc      0
 2452 00.00003EDE                      
 2453 00.00003EDE 323AFFFA             stopcode        move    stopit(pc),d1
 2454 00.00003EE2 662A                         bne.s   .skip
 2455 00.00003EE4 323AFFF2                     move    stopbit(pc),d1
 2456 00.00003EE8 0300                         btst    d1,d0
 2457 00.00003EEA 6722                         beq.s   .skip
 2458 00.00003EEC 33FCFFFF00003EDA             move    #-1,stopit
 2459 00.00003EF4                              ;
 2460 00.00003EF4 48E78002                     movem.l d0/a6,-(a7)
 2461 00.00003EF8 203AF596                     move.l  panicmask(pc),d0
 2462 00.00003EFC 227900000158                 move.l  us,a1
 2463 00.00003F02 2C780004                     move.l  4.w,a6
 2464 00.00003F06 4EAEFEBC                     jsr     signal(a6)
 2465 00.00003F0A 4CDF4001                     movem.l (a7)+,d0/a6
 2466 00.00003F0E                              ;
 2467 00.00003F0E 4E75                 .skip   rts
 2468 00.00003F10                      
 2469 00.00003F10 303AFFCA             endstop move    clrreq(pc),d0
 2470 00.00003F14 67000022                     beq     .skip
 2471 00.00003F18 22790000E372                 move.l  comdata,a1
 2472 00.00003F1E 22690004                     move.l  4(a1),a1
 2473 00.00003F22 4E91                         jsr     (a1)    ;turn off the requester
 2474 00.00003F24 467900003EDC                 not     clrreq
 2475 00.00003F2A 207900000158                 move.l  us,a0
 2476 00.00003F30 42A8001E                     clr.l   30(a0)
 2477 00.00003F34 42A8002A                     clr.l   42(a0)
 2478 00.00003F38 4E75                 .skip   rts
 2479 00.00003F3A                      
 2480 00.00003F3A 0000                 intsused        dc      0
 2481 00.00003F3C                      
 2482 00.00003F3C                      setcvars        ;
 2483 00.00003F3C 33FCFFFF0000BCF0             move    #-1,blitzoff
 2484 00.00003F44 427900003F3A                 clr     intsused
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 97
blitz2.s


 2485 00.00003F4A 42790000E84C                 clr     anyerrs
 2486 00.00003F50 42790000BCF2                 clr     blitzmode
 2487 00.00003F56 42790000E858                 clr     nomemleft
 2488 00.00003F5C 42790000E91E                 clr     constmode
 2489 00.00003F62 4279000079AC                 clr     cmake
 2490 00.00003F68 42790000E32E                 clr     cfetchmode
 2491 00.00003F6E 42B9000050C8                 clr.l   intdata1
 2492 00.00003F74 42790000AD80                 clr     fuckpos
 2493 00.00003F7A 42790000D2DA                 clr     procnum
 2494 00.00003F80 42790000D2DC                 clr     procnum2
 2495 00.00003F86 42790000B3DA                 clr     dfetch
 2496 00.00003F8C 42B90000E93A                 clr.l   titleat
 2497 00.00003F92 423900004A20                 clr.b   usedpath
 2498 00.00003F98 427900004F36                 clr     inerr
 2499 00.00003F9E 4279000050D4                 clr     intlevel
 2500 00.00003FA4 42B90000449C                 clr.l   cont_pc
 2501 00.00003FAA 42B9000044A0                 clr.l   cont_pc2
 2502 00.00003FB0 42B9000044A4                 clr.l   lastcontlink
 2503 00.00003FB6                              ;
 2504 00.00003FB6 23F90000E8F20000E8F6         move.l  pcat,pc
 2505 00.00003FC0 23F90000E8F20000959E         move.l  pcat,bigpc
 2506 00.00003FCA 23F90000E8FA0000E8FE         move.l  libat,lib
 2507 00.00003FD4 23F90000E8EA0000E8EE         move.l  data1at,data1
 2508 00.00003FDE 23F90000E8E20000E8E6         move.l  data2at,data2
 2509 00.00003FE8                              ;
 2510 00.00003FE8 33FCFFFF0000EC0E             move    #-1,comflag
 2511 00.00003FF0 33FCFFFF00002B20             move    #-1,linemode
 2512 00.00003FF8 42790000EBF2                 clr     oldvcodelen
 2513 00.00003FFE 42390000E85A                 clr.b   lastbiglab
 2514 00.00004004                              ;
 2515 00.00004004 4E75                         rts
 2516 00.00004006                      
 2517 00.00004006 00000000             varsizeat       dc.l    0
 2518 00.0000400A 0000                 debugga dc      0       ;debugger enabled?
 2519 00.0000400C                      
 2520 00.0000400C 434F4D50494C494E4700 compiling       dc.b    'COMPILING',0
 2521 00.00004016 2053544F50212000             dc.b    ' STOP! ',0
 2522 00.0000401E                      
 2523 00.0000401E 455845435554494E4700 executing       dc.b    'EXECUTING',0
 2524 00.00004028 2150414E49432100             dc.b    '!PANIC!',0
 2525 00.00004030                      
 2526 00.00004030                      openstopreq     ;
 2527 00.00004030 467900003EDC                 not     clrreq
 2528 00.00004036 43FAFE48                     lea     reqmessage(pc),a1
 2529 00.0000403A                              ;
 2530 00.0000403A 12D8                 .loop   move.b  (a0)+,(a1)+
 2531 00.0000403C 66FC                         bne.s   .loop
 2532 00.0000403E 133C0020                     move.b  #32,-(a1)
 2533 00.00004042                              ;
 2534 00.00004042 43F900003EA4                 lea     stopreqla11,a1
 2535 00.00004048 12D8                 .loop2  move.b  (a0)+,(a1)+
 2536 00.0000404A 66FC                         bne.s   .loop2
 2537 00.0000404C                              ;
 2538 00.0000404C 22790000E372                 move.l  comdata,a1
 2539 00.00004052 2251                         move.l  (a1),a1
 2540 00.00004054 207C00003D4E                 move.l  #stopreq,a0
 2541 00.0000405A 4E91                         jsr     (a1)    ;open requester
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 98
blitz2.s


 2542 00.0000405C 427900003EDA                 clr     stopit
 2543 00.00004062                              ;
 2544 00.00004062 207900000158                 move.l  us,a0
 2545 00.00004068 217C00003EDE002A             move.l  #stopcode,42(a0)
 2546 00.00004070 22790000E372                 move.l  comdata,a1
 2547 00.00004076 2269005E                     move.l  94(a1),a1       ;window
 2548 00.0000407A 22690056                     move.l  86(a1),a1       ;user MsgPort
 2549 00.0000407E 7001                         moveq   #1,d0
 2550 00.00004080 1229000F                     move.b  15(a1),d1       ;Sig Bits.
 2551 00.00004084 13C100003ED9                 move.b  d1,stopbit+1
 2552 00.0000408A E3A8                         lsl.l   d1,d0
 2553 00.0000408C 2140001E                     move.l  d0,30(a0)       ;Signal Bits
 2554 00.00004090 4E75                         rts
 2555 00.00004092                      
 2556 00.00004092                      dopass  ;compile entire program based on 'pass'
 2557 00.00004092                              ;
 2558 00.00004092 41FAFF78                     lea     compiling(pc),a0
 2559 00.00004096 6100FF98                     bsr     openstopreq
 2560 00.0000409A                              ;
 2561 00.0000409A 6100EE64                     bsr     sleepon
 2562 00.0000409E                              ;
 2563 00.0000409E 6100FE9C                     bsr     setcvars
 2564 00.000040A2                              ;
 2565 00.000040A2 33FC800000002B38             move    #$8000,varoff
 2566 00.000040AA 23FC0000E78E0000E848         move.l  #quicktype,defaulttype
 2567 00.000040B4                              ;
 2568 00.000040B4 23CF0000EC10                 move.l  a7,passstack
 2569 00.000040BA 23FC00002B3C00002B24         move.l  #firstitem,thisitem
 2570 00.000040C4 33F900002B4000002B22         move    numlines,linesleft
 2571 00.000040CE 527900002B22                 addq    #1,linesleft
 2572 00.000040D4 33FCFFFF0000E9E8             move    #-1,linenumat
 2573 00.000040DC                              ;
 2574 00.000040DC 6100293E                     bsr     resetlibs
 2575 00.000040E0 6100F7FA                     bsr     freeemup
 2576 00.000040E4                              ;
 2577 00.000040E4 41F90000E940                 lea     titleadd+2,a0
 2578 00.000040EA 7003                         moveq   #3,d0
 2579 00.000040EC 4258                 .okloop clr     (a0)+
 2580 00.000040EE 51C8FFFC                     dbf     d0,.okloop
 2581 00.000040F2                              ;
 2582 00.000040F2                              ;put in 4 nops for dummy JSR to init routines! (was 3)
 2583 00.000040F2                              ;
 2584 00.000040F2 41F9000028FA                 lea     nops4,a0
 2585 00.000040F8 43F900002902                 lea     nopsf,a1
 2586 00.000040FE 610054BA                     bsr     pokecode2
 2587 00.00004102                              ;
 2588 00.00004102 123AFF06                     move.b  debugga(pc),d1
 2589 00.00004106 672A                         beq.s   .dskip
 2590 00.00004108                              ;
 2591 00.00004108 323CFFDC                     move    #runerrlib,d1
 2592 00.0000410C 61002934                     bsr     uselib
 2593 00.00004110                              ;
 2594 00.00004110 4A790000E84E                 tst     makeexec
 2595 00.00004116 6612                         bne.s   .exec
 2596 00.00004118                              ;
 2597 00.00004118                              ;not executable!
 2598 00.00004118                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 99
blitz2.s


 2599 00.00004118 323CFA3C                     move    #debuglib,d1
 2600 00.0000411C 61002924                     bsr     uselib
 2601 00.00004120 323C0001                     move    #dhandlerlib,d1
 2602 00.00004124 6100291C                     bsr     uselib
 2603 00.00004128 6008                         bra.s   .dskip
 2604 00.0000412A                              ;
 2605 00.0000412A                      .exec   ;is executable!
 2606 00.0000412A                              ;
 2607 00.0000412A 323CFA32                     move    #rundebuglib,d1
 2608 00.0000412E 61002912                     bsr     uselib
 2609 00.00004132                              ;
 2610 00.00004132 6100F80A             .dskip  bsr     nextline
 2611 00.00004136                              ;
 2612 00.00004136 61000274             passloop        bsr     doline
 2613 00.0000413A 6100F802             passnxt bsr     nextline
 2614 00.0000413E 6600FFF6                     bne     passloop
 2615 00.00004142                              ;
 2616 00.00004142 610008C4                     bsr     dorunerrson
 2617 00.00004146                              ;
 2618 00.00004146 610000D6                     bsr     pointchk
 2619 00.0000414A 42790000E9E8                 clr     linenumat
 2620 00.00004150 610000FC                     bsr     errchx2
 2621 00.00004154                              ;
 2622 00.00004154 123AFEB4                     move.b  debugga(pc),d1
 2623 00.00004158 6726                         beq.s   .nodb
 2624 00.0000415A                              ;
 2625 00.0000415A 61000354                     bsr     debugstuff
 2626 00.0000415E 323CC300                     move    #finalscheck,d1
 2627 00.00004162 4EB90000BAA8                 jsr     tokejsr
 2628 00.00004168                              ;
 2629 00.00004168 61000346                     bsr     debugstuff
 2630 00.0000416C 223A00A8                     move.l  eopcode(pc),d1
 2631 00.00004170 61005392                     bsr     pokel
 2632 00.00004174 223A032E                     move.l  lastcontlink(pc),d1
 2633 00.00004178 6706                         beq.s   .nocl
 2634 00.0000417A 2041                         move.l  d1,a0
 2635 00.0000417C 42680006                     clr     6(a0)
 2636 00.00004180                      .nocl   ;
 2637 00.00004180                      .nodb   ;
 2638 00.00004180                              ;end of whole program!
 2639 00.00004180                              ;
 2640 00.00004180 23F90000E8F60000EC32         move.l  pc,endop                ;where end goes...
 2641 00.0000418A                              ;
 2642 00.0000418A 4A790000BCF2                 tst     blitzmode
 2643 00.00004190 67000006                     beq     .nobl
 2644 00.00004194 61000D3A                     bsr     doamiga         ;back to amiga if in blitz!
 2645 00.00004198                              ;
 2646 00.00004198 4A7900003F3A         .nobl   tst     intsused
 2647 00.0000419E 670A                         beq.s   .noints
 2648 00.000041A0 323CC105                     move    #$c105,d1       ;interupts off!
 2649 00.000041A4 4EB90000BAA0                 jsr     tokejsr2
 2650 00.000041AA                              ;
 2651 00.000041AA 610032D8             .noints bsr     calcstatic
 2652 00.000041AE 33C40000EC3E                 move    d4,numstatic
 2653 00.000041B4 23C30000EC40                 move.l  d3,staticdata
 2654 00.000041BA 6100018E                     bsr     calcmaxs
 2655 00.000041BE                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 100
blitz2.s


 2656 00.000041BE 4AB900006EEE                 tst.l   tokeslist
 2657 00.000041C4 6732                         beq.s   .skipjsrs
 2658 00.000041C6                              ;
 2659 00.000041C6 323900002A3C                 move    gotocode,d1             ;jmp!
 2660 00.000041CC 6100533E                     bsr     pokewd
 2661 00.000041D0 23F90000E8F60000421A         move.l  pc,endjmpat
 2662 00.000041DA 61003740                     bsr     addoff
 2663 00.000041DE 61005324                     bsr     pokel
 2664 00.000041E2                              ;
 2665 00.000041E2 61002A92                     bsr     fixjsrs         ;has to be done before finits!
 2666 00.000041E6                              ;
 2667 00.000041E6                              ;misc finish-ups
 2668 00.000041E6                              ;
 2669 00.000041E6 4A790000E858                 tst     nomemleft
 2670 00.000041EC 660A                         bne.s   .skipjsrs
 2671 00.000041EE 287A002A                     move.l  endjmpat(pc),a4
 2672 00.000041F2 28B90000E8F6                 move.l  pc,(a4)
 2673 00.000041F8                              ;
 2674 00.000041F8 61007790             .skipjsrs       bsr     makefinits
 2675 00.000041FC 223C70004E75                 move.l  #$70004e75,d1
 2676 00.00004202 61005300                     bsr     pokel
 2677 00.00004206 61007536                     bsr     makeinits
 2678 00.0000420A 61002204                     bsr     asmfixer
 2679 00.0000420E                              ;
 2680 00.0000420E 6100FD00                     bsr     endstop
 2681 00.00004212 6000ECE0                     bra     pointeron
 2682 00.00004216                      
 2683 00.00004216 7003                 eopcode moveq   #3,d0
 2684 00.00004218 4E40                         trap    #0
 2685 00.0000421A                      
 2686 00.0000421A 00000000             endjmpat        dc.l    0
 2687 00.0000421E                      
 2688 00.0000421E 24790000E7B8         pointchk        move.l  firsttype,a2
 2689 00.00004224 203C000000FF                 move.l  #$ff,d0
 2690 00.0000422A B4FC0000             .loop   cmp     #0,a2
 2691 00.0000422E 6700001C                     beq     .done
 2692 00.00004232 B0AA0004                     cmp.l   4(a2),d0
 2693 00.00004236 6600000E                     bne     .next
 2694 00.0000423A 33EA00080000E9E8             move    8(a2),linenumat
 2695 00.00004242 600041FC                     bra     notypeerr
 2696 00.00004246 2452                 .next   move.l  (a2),a2
 2697 00.00004248 6000FFE0                     bra     .loop
 2698 00.0000424C 4E75                 .done   rts
 2699 00.0000424E                      
 2700 00.0000424E 45F90000EC36         errchx2 lea     firstlabel,a2
 2701 00.00004254                              ;Make sure all the labels have been resolved
 2702 00.00004254 2012                 .loop   move.l  (a2),d0
 2703 00.00004256 67000026                     beq     .done
 2704 00.0000425A 2440                         move.l  d0,a2
 2705 00.0000425C 202A0004                     move.l  4(a2),d0
 2706 00.00004260 08000000                     btst    #0,d0
 2707 00.00004264 6600FFEE                     bne     .loop
 2708 00.00004268 202A0008                     move.l  8(a2),d0
 2709 00.0000426C 6600FFE6                     bne     .loop 
 2710 00.00004270 33EA00100000E9E8             move    16(a2),linenumat
 2711 00.00004278 4EF900008652                 jmp     nolaberr
 2712 00.0000427E                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 101
blitz2.s


 2713 00.0000427E 20390000E99C         .done   move.l  concomsp,d0
 2714 00.00004284 B0BC0000E95C                 cmp.l   #concomstack,d0
 2715 00.0000428A 660000AE                     bne     chxerr4
 2716 00.0000428E 32390000E948                 move    connest,d1
 2717 00.00004294 660000A4                     bne     chxerr4
 2718 00.00004298                              ;
 2719 00.00004298 2F01                 errchx  move.l  d1,-(a7)
 2720 00.0000429A 22390000CD4A                 move.l  firstsel,d1
 2721 00.000042A0 66000038                     bne     .err1
 2722 00.000042A4 223900004D0A                 move.l  firstrep,d1
 2723 00.000042AA 6600003E                     bne     .err2
 2724 00.000042AE 3239000050D2                 move    intstring,d1
 2725 00.000042B4 66000044                     bne     .err3
 2726 00.000042B8 223900002B44                 move.l  firstif,d1
 2727 00.000042BE 6600004A                     bne     .err5
 2728 00.000042C2 32390000EC0C                 move    procmode,d1
 2729 00.000042C8 66000050                     bne     .err6
 2730 00.000042CC 22390000E9A8                 move.l  firstfor,d1
 2731 00.000042D2 66000056                     bne     .err7
 2732 00.000042D6 221F                         move.l  (a7)+,d1
 2733 00.000042D8 4E75                         rts
 2734 00.000042DA                      
 2735 00.000042DA 33F90000CEFA0000E9E8 .err1   move    sellineat,linenumat
 2736 00.000042E4 4EF900007D9A                 jmp     selerrz
 2737 00.000042EA 33F900004D0E0000E9E8 .err2   move    replineat,linenumat
 2738 00.000042F4 4EF900007DEE                 jmp     unterr3
 2739 00.000042FA 33F900004FE00000E9E8 .err3   move    intlineat,linenumat
 2740 00.00004304 4EF900008034                 jmp     interr2
 2741 00.0000430A 33F90000D0480000E9E8 .err5   move    iflineat,linenumat
 2742 00.00004314 4EF900008842                 jmp     noenderr
 2743 00.0000431A 33F90000D2DE0000E9E8 .err6   move    prolineat,linenumat
 2744 00.00004324 4EF9000088E4                 jmp     nopenderr
 2745 00.0000432A 33F90000DCF80000E9E8 .err7   move    forlineat,linenumat
 2746 00.00004334 4EF900008A14                 jmp     nonexterr
 2747 00.0000433A 33F900007B9E0000E9E8 chxerr4 move    ciflineat,linenumat
 2748 00.00004344 4EF900007D34                 jmp     nocenderr
 2749 00.0000434A                      
 2750 00.0000434A                      calcmaxs        ;How many max's used in prog?
 2751 00.0000434A                              ;
 2752 00.0000434A 23F90000E8EE0000E83C         move.l  data1,maxsat
 2753 00.00004354 7800                         moveq   #0,d4
 2754 00.00004356 24790000EC44                 move.l  firstlib,a2
 2755 00.0000435C B4FC0000             .loop   cmp     #0,a2
 2756 00.00004360 67000036                     beq     .done
 2757 00.00004364 4A6A000C                     tst     12(a2)
 2758 00.00004368 6A000028                     bpl     .next
 2759 00.0000436C 202A0012                     move.l  18(a2),d0
 2760 00.00004370 4A7208FE                     tst     -2(a2,d0.l)
 2761 00.00004374 6700001C                     beq     .next
 2762 00.00004378                              ;
 2763 00.00004378 5244                         addq    #1,d4
 2764 00.0000437A 323208FA                     move    -6(a2,d0.l),d1
 2765 00.0000437E 610030DA                     bsr     pokedata1
 2766 00.00004382 7201                         moveq   #1,d1
 2767 00.00004384 343208FE                     move    -2(a2,d0.l),d2
 2768 00.00004388 E569                         lsl     d2,d1
 2769 00.0000438A C2F208FC                     mulu    -4(a2,d0.l),d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 102
blitz2.s


 2770 00.0000438E 610030C2                     bsr     pokedata1l
 2771 00.00004392                              ;
 2772 00.00004392 2452                 .next   move.l  (a2),a2
 2773 00.00004394 6000FFC6                     bra     .loop
 2774 00.00004398 33C40000E842         .done   move    d4,maxsused
 2775 00.0000439E 6700000A                     beq     .done2
 2776 00.000043A2 323CFFFA                     move    #65530,d1       ;use memlib
 2777 00.000043A6 6000269A                     bra     uselib
 2778 00.000043AA 4E75                 .done2  rts
 2779 00.000043AC                      
 2780 00.000043AC                      doline  ;
 2781 00.000043AC 61000224                     bsr     dostatement
 2782 00.000043B0 61003888                     bsr     reget
 2783 00.000043B4 66003EDC                     bne     illeolerr
 2784 00.000043B8 B07C8022                     cmp     #$8000+34,d0
 2785 00.000043BC 6600000C                     bne     .notelse
 2786 00.000043C0 4EB90000C438                 jsr     doelse2
 2787 00.000043C6 6000FFE4                     bra     doline
 2788 00.000043CA 4A40                 .notelse        tst     d0
 2789 00.000043CC 6600FFDE                     bne     doline
 2790 00.000043D0                              ;
 2791 00.000043D0                              ;here we do any 'un-thens'
 2792 00.000043D0                              ;
 2793 00.000043D0 203900002B44         .unthen move.l  firstif,d0
 2794 00.000043D6 67000020                     beq     .done
 2795 00.000043DA 2040                         move.l  d0,a0
 2796 00.000043DC 3228000C                     move    12(a0),d1
 2797 00.000043E0 6A000016                     bpl     .done
 2798 00.000043E4                              ;
 2799 00.000043E4                              ;an If...Then... found!
 2800 00.000043E4                              ;
 2801 00.000043E4 0881000F                     bclr    #15,d1
 2802 00.000043E8 4EB90000D7B8                 jsr     doendif2
 2803 00.000043EE 4EB90000D81C                 jsr     freetheifz
 2804 00.000043F4 6000FFDA                     bra     .unthen
 2805 00.000043F8 4E75                 .done   rts
 2806 00.000043FA                      
 2807 00.000043FA                      createlab       ;loclabch fetched, make a big label!
 2808 00.000043FA                              ;
 2809 00.000043FA 41F90000E85A                 lea     lastbiglab,a0
 2810 00.00004400 4A10                         tst.b   (a0)
 2811 00.00004402 67003F9E                     beq     nolocerr
 2812 00.00004406 43F90000EC68                 lea     namebuff,a1
 2813 00.0000440C 7400                         moveq   #0,d2
 2814 00.0000440E 5242                 .loop   addq    #1,d2
 2815 00.00004410 12D8                         move.b  (a0)+,(a1)+
 2816 00.00004412 6600FFFA                     bne     .loop
 2817 00.00004416 137C0027FFFF                 move.b  #loclabch,-1(a1)
 2818 00.0000441C 3F02                         move    d2,-(a7)
 2819 00.0000441E 610047D4                     bsr     makename4
 2820 00.00004422 B45F                         cmp     (a7)+,d2
 2821 00.00004424 67003FBC                     beq     syntaxerr
 2822 00.00004428 4E75                         rts
 2823 00.0000442A                      
 2824 00.0000442A 23FC0000A4700000A6B0 prepstack       move.l  #forthstack,forthsp
 2825 00.00004434 23FC00009D1400009D10         move.l  #precstack,precsp
 2826 00.0000443E 4E75                         rts
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 103
blitz2.s


 2827 00.00004440                      
 2828 00.00004440                      chkrealstop     ;
 2829 00.00004440                              ;return ne if really a stop!
 2830 00.00004440                              ;
 2831 00.00004440 7800                         moveq   #0,d4
 2832 00.00004442 20790000E372         .loop   move.l  comdata,a0
 2833 00.00004448 20680020                     move.l  32(a0),a0
 2834 00.0000444C 4E90                         jsr     (a0)
 2835 00.0000444E 4A87                         tst.l   d7
 2836 00.00004450 6710                         beq.s   .skip
 2837 00.00004452 BE7CFFFF                     cmp     #-1,d7
 2838 00.00004456 66EA                         bne.s   .loop
 2839 00.00004458 BC7C0001                     cmp     #1,d6
 2840 00.0000445C 66E4                         bne.s   .loop
 2841 00.0000445E 78FF                         moveq   #-1,d4
 2842 00.00004460 60E0                         bra.s   .loop
 2843 00.00004462 33C400003EDA         .skip   move    d4,stopit
 2844 00.00004468 4E75                         rts
 2845 00.0000446A                              
 2846 00.0000446A                      
 2847 00.0000446A 303AFA6E             chkstop move    stopit(pc),d0
 2848 00.0000446E 6602                         bne.s   .chk
 2849 00.00004470 4E75                 .rts    rts
 2850 00.00004472 6100FFCC             .chk    bsr     chkrealstop
 2851 00.00004476 67F8                         beq.s   .rts
 2852 00.00004478                              ;
 2853 00.00004478 6100FA96             gostop  bsr     endstop
 2854 00.0000447C 6100EA76                     bsr     pointeron
 2855 00.00004480                              ;
 2856 00.00004480 2E7AE696                     move.l  errstack(pc),a7
 2857 00.00004484 207AE696                     move.l  errcont(pc),a0
 2858 00.00004488 33FCFFFF0000E84C             move    #-1,anyerrs
 2859 00.00004490 4ED0                         jmp     (a0)
 2860 00.00004492                      
 2861 00.00004492                      d_pc    ds.l    1
 2862 00.00004496                      d_bigpc ds.l    1
 2863 00.0000449A                      d_nomemleft     ds.w    1
 2864 00.0000449C                      cont_pc ds.l    1
 2865 00.000044A0                      cont_pc2        ds.l    1
 2866 00.000044A4                      lastcontlink    ds.l    1
 2867 00.000044A8                      
 2868 00.000044A8 00414E40             maketrap        or      #$4e40,d1
 2869 00.000044AC 6000505E                     bra     pokewd
 2870 00.000044B0                      
 2871 00.000044B0 4A390000400A         debugstuff      tst.b   debugga
 2872 00.000044B6 67000086                     beq     .rts
 2873 00.000044BA 4A790000393C                 tst     macmask
 2874 00.000044C0 667C                         bne.s   .rts    ;no debugging of Macros!
 2875 00.000044C2 4A790000E834                 tst     dirmode ;or while in direct mode...
 2876 00.000044C8 6674                         bne.s   .rts
 2877 00.000044CA                              ;
 2878 00.000044CA 23F90000E8F600004492         move.l  pc,d_pc
 2879 00.000044D4 23F90000959E00004496         move.l  bigpc,d_bigpc
 2880 00.000044DE 33F90000E8580000449A         move    nomemleft,d_nomemleft
 2881 00.000044E8                              ;
 2882 00.000044E8 48E7C000                     movem.l d0-d1,-(a7)
 2883 00.000044EC                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 104
blitz2.s


 2884 00.000044EC 7201                         moveq   #1,d1
 2885 00.000044EE 6100FFB8                     bsr     maketrap
 2886 00.000044F2                              ;
 2887 00.000044F2                              ;hook up cont address...
 2888 00.000044F2                              ;
 2889 00.000044F2 20390000E8F6                 move.l  pc,d0
 2890 00.000044F8 22390000449C                 move.l  cont_pc,d1
 2891 00.000044FE 23C00000449C                 move.l  d0,cont_pc
 2892 00.00004504 23C1000044A0                 move.l  d1,cont_pc2
 2893 00.0000450A 6716                         beq.s   .skip
 2894 00.0000450C                              ;
 2895 00.0000450C 4A790000E858                 tst     nomemleft
 2896 00.00004512 660E                         bne.s   .skip
 2897 00.00004514                              ;
 2898 00.00004514 2841                         move.l  d1,a4
 2899 00.00004516 908C                         sub.l   a4,d0
 2900 00.00004518 39400006                     move    d0,6(a4)
 2901 00.0000451C 23CC000044A4                 move.l  a4,lastcontlink
 2902 00.00004522                              ;
 2903 00.00004522 223AE600             .skip   move.l  thisitem(pc),d1
 2904 00.00004526 61004FDC                     bsr     pokel
 2905 00.0000452A 220D                         move.l  a5,d1
 2906 00.0000452C 92BAE5F6                     sub.l   thisitem(pc),d1
 2907 00.00004530 61004FDA                     bsr     pokewd
 2908 00.00004534                              ;
 2909 00.00004534 7200                         moveq   #0,d1
 2910 00.00004536 61004FD4                     bsr     pokewd          ;next cont goes here!
 2911 00.0000453A                              ;
 2912 00.0000453A 4CDF0003                     movem.l (a7)+,d0-d1
 2913 00.0000453E 4E75                 .rts    rts
 2914 00.00004540                      
 2915 00.00004540 4A390000400A         undodebug       tst.b   debugga
 2916 00.00004546 6730                         beq.s   .rts
 2917 00.00004548 4A790000393C                 tst     macmask
 2918 00.0000454E 6628                         bne.s   .rts
 2919 00.00004550                              ;
 2920 00.00004550 33F90000449A0000E858         move    d_nomemleft,nomemleft
 2921 00.0000455A 23F9000044960000959E         move.l  d_bigpc,bigpc
 2922 00.00004564 23F9000044920000E8F6         move.l  d_pc,pc
 2923 00.0000456E 23F9000044A00000449C         move.l  cont_pc2,cont_pc
 2924 00.00004578                              ;
 2925 00.00004578 4E75                 .rts    rts
 2926 00.0000457A                      
 2927 00.0000457A                      setsvars        ;set statement vars...
 2928 00.0000457A                              ;
 2929 00.0000457A 6100FEAE                     bsr     prepstack
 2930 00.0000457E 427900002B06                 clr     regat
 2931 00.00004584 42790000EC5E                 clr     nonew
 2932 00.0000458A 42790000EC48                 clr     sbasegot
 2933 00.00004590 33F90000EBEE0000EBF2         move    varcodelen,oldvcodelen
 2934 00.0000459A 42790000EBEE                 clr     varcodelen
 2935 00.000045A0 33FCFFFF0000EC22             move    #-1,lasta6
 2936 00.000045A8                              ;
 2937 00.000045A8 4E75                         rts
 2938 00.000045AA                      
 2939 00.000045AA                      smode   ;special mode...d1...
 2940 00.000045AA                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 105
blitz2.s


 2941 00.000045AA 4A7900002B20                 tst     linemode
 2942 00.000045B0 6B1E                         bmi.s   .skip
 2943 00.000045B2 6100FF8C                     bsr     undodebug
 2944 00.000045B6 323900002B20                 move    linemode,d1
 2945 00.000045BC 584F                         addq    #4,a7
 2946 00.000045BE E549                         lsl     #2,d1
 2947 00.000045C0 41F90000E75C                 lea     modetable,a0
 2948 00.000045C6 20701000                     move.l  0(a0,d1),a0
 2949 00.000045CA 6100366E                     bsr     reget
 2950 00.000045CE 4ED0                         jmp     (a0)
 2951 00.000045D0 4E75                 .skip   rts
 2952 00.000045D2                      
 2953 00.000045D2                      dostatement     ;process individual statement
 2954 00.000045D2                              ;
 2955 00.000045D2 6100FE96                     bsr     chkstop
 2956 00.000045D6 6100F462                     bsr     expandmax
 2957 00.000045DA 6100FED4                     bsr     debugstuff
 2958 00.000045DE                              ;
 2959 00.000045DE                              ;bra    handlechar
 2960 00.000045DE                              ;
 2961 00.000045DE                      handlechar      ;Handle the first character in statement
 2962 00.000045DE                              ;
 2963 00.000045DE 6100362E                     bsr     getchar3
 2964 00.000045E2 67000048                     beq     handleeol
 2965 00.000045E6 6100FF92                     bsr     setsvars
 2966 00.000045EA 6100FFBE                     bsr     smode
 2967 00.000045EE                              ;
 2968 00.000045EE B07C002E                     cmp     #'.',d0
 2969 00.000045F2 67000050                     beq     handlemouse
 2970 00.000045F6 B07C0023                     cmp     #'#',d0
 2971 00.000045FA 6700011C                     beq     handleconst
 2972 00.000045FE B07C0027                     cmp     #loclabch,d0
 2973 00.00004602 67000034                     beq     handlelocal
 2974 00.00004606 4A40                         tst     d0
 2975 00.00004608 6B000198                     bmi     handletoken
 2976 00.0000460C                              ;
 2977 00.0000460C                      handleascii     ;
 2978 00.0000460C 23CD0000E854                 move.l  a5,letstart
 2979 00.00004612 61005194                     bsr     getvname
 2980 00.00004616 61003622                     bsr     reget
 2981 00.0000461A 6700003C                     beq     handlelabel
 2982 00.0000461E B07C007B                     cmp     #'{',d0
 2983 00.00004622 67000138                     beq     handleproc
 2984 00.00004626 4EF90000DEA6                 jmp     dolet2
 2985 00.0000462C                              
 2986 00.0000462C B07C8022             handleeol       cmp     #$8000+34,d0
 2987 00.00004630 67000170                     beq     handletoken
 2988 00.00004634 6000FF0A                     bra     undodebug       ;!*!*!
 2989 00.00004638                      ;       rts
 2990 00.00004638                              
 2991 00.00004638 6100FF06             handlelocal     bsr     undodebug       !***!
 2992 00.0000463C                              ;
 2993 00.0000463C 6100FDBC                     bsr     createlab
 2994 00.00004640 6000002C                     bra     handlelab2
 2995 00.00004644                      
 2996 00.00004644 610035C8             handlemouse     bsr     getchar3
 2997 00.00004648 6700FFE2                     beq     handleeol       ;syntaxerr
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 106
blitz2.s


 2998 00.0000464C B07C0027                     cmp     #loclabch,d0
 2999 00.00004650 6700FFE6                     beq     handlelocal
 3000 00.00004654 61004592                     bsr     makename2
 3001 00.00004658                              
 3002 00.00004658                      handlelabel     ;an ordinary label
 3003 00.00004658                              ;
 3004 00.00004658 6100FEE6                     bsr     undodebug       !***!
 3005 00.0000465C                              ;
 3006 00.0000465C 41F90000EC68                 lea     namebuff,a0
 3007 00.00004662 43F90000E85A                 lea     lastbiglab,a1
 3008 00.00004668 12D8                 .coplab move.b  (a0)+,(a1)+
 3009 00.0000466A 6600FFFC                     bne     .coplab
 3010 00.0000466E                              ;
 3011 00.0000466E 61004642             handlelab2      bsr     findadd
 3012 00.00004672 67000024                     beq     .found
 3013 00.00004676                              ;
 3014 00.00004676 610045CC                     bsr     addhere
 3015 00.0000467A                              ;
 3016 00.0000467A 42AA0004             .done   clr.l   4(a2)           ;no refs
 3017 00.0000467E 25790000E8F60008             move.l  pc,8(a2)                ;pc of label.
 3018 00.00004686 25790000E8E6000C             move.l  data2,12(a2)    ;pc for data statements
 3019 00.0000468E 35790000D2DA0010             move    procnum,16(a2)
 3020 00.00004696 4E75                         rts
 3021 00.00004698                              ;
 3022 00.00004698 202A0004             .found  move.l  4(a2),d0
 3023 00.0000469C 08000000                     btst    #0,d0
 3024 00.000046A0 660036D2                     bne     illlaberr
 3025 00.000046A4 202A0008                     move.l  8(a2),d0
 3026 00.000046A8 66003F94                     bne     duplaberr
 3027 00.000046AC 35790000D2DA0010             move    procnum,16(a2)
 3028 00.000046B4                              ;
 3029 00.000046B4                              ;now, we have to fill in blanks in the Bloody past code....
 3030 00.000046B4                              ;
 3031 00.000046B4 266A0004                     move.l  4(a2),a3        ;start of refs list
 3032 00.000046B8 2C780004                     move.l  4.w,a6
 3033 00.000046BC B6FC0000             .floop  cmp     #0,a3
 3034 00.000046C0 6700FFB8                     beq     .done
 3035 00.000046C4 322B0008                     move    8(a3),d1
 3036 00.000046C8 B26A0010                     cmp     16(a2),d1
 3037 00.000046CC 6700000E                     beq     .isok
 3038 00.000046D0                              ;
 3039 00.000046D0                              ;Bad Reference
 3040 00.000046D0                              ;
 3041 00.000046D0 33EB000A0000E9E8             move    10(a3),linenumat
 3042 00.000046D8 60003676                     bra     referr
 3043 00.000046DC                              ;
 3044 00.000046DC 32390000E858         .isok   move    nomemleft,d1
 3045 00.000046E2 66000022                     bne     .isaskip
 3046 00.000046E6 226B0004                     move.l  4(a3),a1
 3047 00.000046EA 082B00000007                 btst    #0,7(a3)
 3048 00.000046F0 6700000E                     beq     .pcref
 3049 00.000046F4                              ;
 3050 00.000046F4                              ;OK it's a 'Restore' references
 3051 00.000046F4                              ;
 3052 00.000046F4 5349                         subq    #1,a1
 3053 00.000046F6 22B90000E8E6                 move.l  data2,(a1)
 3054 00.000046FC 60000008                     bra     .isaskip
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 107
blitz2.s


 3055 00.00004700                              ;
 3056 00.00004700 22B90000E8F6         .pcref  move.l  pc,(a1)
 3057 00.00004706                              ;
 3058 00.00004706 224B                 .isaskip        move.l  a3,a1
 3059 00.00004708 2653                         move.l  (a3),a3
 3060 00.0000470A 254B0004                     move.l  a3,4(a2)        ;new first.
 3061 00.0000470E 700C                         moveq   #12,d0
 3062 00.00004710 4EAEFF2E                     jsr     freemem(a6)
 3063 00.00004714 6000FFA6                     bra     .floop
 3064 00.00004718                      
 3065 00.00004718 6100FD10             handleconst     bsr     prepstack       ;forth stax
 3066 00.0000471C 610044CE                     bsr     makename
 3067 00.00004720 61004590                     bsr     findadd
 3068 00.00004724 67000012                     beq     .cfound
 3069 00.00004728 6100451A                     bsr     addhere
 3070 00.0000472C 257C000000010004             move.l  #1,4(a2)
 3071 00.00004734 6000000E                     bra     .cn             
 3072 00.00004738 0CAA000000010004     .cfound cmp.l   #1,4(a2)
 3073 00.00004740 66003B14                     bne     illconerr
 3074 00.00004744 B07C003D             .cn     cmp     #'=',d0
 3075 00.00004748 67000004                     beq     .asscon
 3076 00.0000474C 4E75                         rts
 3077 00.0000474E 2F0A                 .asscon move.l  a2,-(a7)
 3078 00.00004750 6100781C                     bsr     evalconst2
 3079 00.00004754 245F                         move.l  (a7)+,a2
 3080 00.00004756 25430008                     move.l  d3,8(a2)
 3081 00.0000475A 4E75                         rts
 3082 00.0000475C                      
 3083 00.0000475C                      handleproc      ;a procedure! - eg gameover{score.l,player}
 3084 00.0000475C                              ;
 3085 00.0000475C 61004566                     bsr     findproc
 3086 00.00004760 66004136                     bne     noprocerr
 3087 00.00004764 4A2A0005                     tst.b   5(a2)
 3088 00.00004768 6A004196                     bpl     illprocerr
 3089 00.0000476C 2F2A000E                     move.l  14(a2),-(a7)    ;pc of proc.
 3090 00.00004770 7000                         moveq   #0,d0
 3091 00.00004772 102A0004                     move.b  4(a2),d0
 3092 00.00004776 6700000E                     beq     .nopars
 3093 00.0000477A 45EA0016                     lea     22(a2),a2       ;pointer to var desc list
 3094 00.0000477E 61002070                     bsr     fetchpees2
 3095 00.00004782 60000006                     bra     .nopars3
 3096 00.00004786 61003486             .nopars bsr     getchar3
 3097 00.0000478A B07C007D             .nopars3        cmp     #'}',d0
 3098 00.0000478E 66003C52                     bne     syntaxerr
 3099 00.00004792                              ;
 3100 00.00004792 4EB90000BA86                 jsr     chkstak
 3101 00.00004798 221F                         move.l  (a7)+,d1
 3102 00.0000479A 6100682E                     bsr     makefjsr
 3103 00.0000479E 6000346E                     bra     getchar3
 3104 00.000047A2                      
 3105 00.000047A2                      handletoken     ;process a token in d0
 3106 00.000047A2                              ;
 3107 00.000047A2 B07C803C                     cmp     #$8000+fnum,d0
 3108 00.000047A6 6500001C                     bcs     .nono
 3109 00.000047AA B07C80B3                     cmp     #$8000+tnum,d0
 3110 00.000047AE 64000014                     bcc     .nono
 3111 00.000047B2                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 108
blitz2.s


 3112 00.000047B2 0839000700000707             btst    #7,optreq2ga3+13
 3113 00.000047BA 6604                         bne.s   .asmok
 3114 00.000047BC 6100FD82                     bsr     undodebug
 3115 00.000047C0 6000196A             .asmok  bra     asmit   ;assemble the bastard
 3116 00.000047C4                              ;
 3117 00.000047C4                      .nono   ;check if asm type things....
 3118 00.000047C4                              ;
 3119 00.000047C4                              ;if so, no line remembering etc!
 3120 00.000047C4                              ;
 3121 00.000047C4 0880000F                     bclr    #15,d0
 3122 00.000047C8 3200                         move    d0,d1
 3123 00.000047CA 02417F00                     and     #$7f00,d1
 3124 00.000047CE 66000086                     bne     handlelib
 3125 00.000047D2                              ;
 3126 00.000047D2 B07C00B3                     cmp     #tnum,d0
 3127 00.000047D6 6500001A                     bcs     .isokat
 3128 00.000047DA                              ;
 3129 00.000047DA 04400077                     sub     #tnum-fnum,d0
 3130 00.000047DE B07C004B                     cmp     #fnum+15,d0
 3131 00.000047E2 6700004C                     beq     .noerr
 3132 00.000047E6 B07C0046                     cmp     #fnum+10,d0
 3133 00.000047EA 67000044                     beq     .noerr
 3134 00.000047EE 60000044                     bra     .doerr
 3135 00.000047F2                              ;
 3136 00.000047F2 B07C0038             .isokat cmp     #56,d0  ;check for things which don't want
 3137 00.000047F6 67000038                     beq     .noerr  ;error checking...
 3138 00.000047FA B07C0039                     cmp     #57,d0
 3139 00.000047FE 67000030                     beq     .noerr
 3140 00.00004802 B07C000D                     cmp     #13,d0
 3141 00.00004806 67000028                     beq     .noerr
 3142 00.0000480A B07C0012                     cmp     #18,d0
 3143 00.0000480E 67000020                     beq     .noerr
 3144 00.00004812 B07C0013                     cmp     #19,d0
 3145 00.00004816 67000018                     beq     .noerr
 3146 00.0000481A B07C001A                     cmp     #26,d0
 3147 00.0000481E 67000010                     beq     .noerr
 3148 00.00004822 B07C002A                     cmp     #42,d0
 3149 00.00004826 6200000C                     bhi     .doerr
 3150 00.0000482A B07C0023                     cmp     #35,d0
 3151 00.0000482E 6504                         bcs.s   .doerr
 3152 00.00004830                              ;
 3153 00.00004830 6100FD0E             .noerr  bsr     undodebug
 3154 00.00004834                      .doerr  ;
 3155 00.00004834 5340                         subq    #1,d0
 3156 00.00004836 E548                         lsl     #2,d0
 3157 00.00004838 B07C0170                     cmp     #atokensend-atokens,d0
 3158 00.0000483C 65000008                     bcs     .ok
 3159 00.00004840                              ;
 3160 00.00004840                              ;Freaked out Token!
 3161 00.00004840 6100ED5A                     bsr     flash
 3162 00.00004844                              ;
 3163 00.00004844 4E75                         rts
 3164 00.00004846 41F900002B98         .ok     lea     atokens,a0
 3165 00.0000484C 20700000                     move.l  0(a0,d0),a0
 3166 00.00004850 2F08                         move.l  a0,-(a7)
 3167 00.00004852 600033BA                     bra     getchar3
 3168 00.00004856                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 109
blitz2.s


 3169 00.00004856                      handlelib       ;a token from a library!
 3170 00.00004856                              ;
 3171 00.00004856 3200                         move    d0,d1
 3172 00.00004858 610026FC                     bsr     findtoke        ;toke stuff in a3
 3173 00.0000485C 082B00020001                 btst    #2,1(a3)
 3174 00.00004862 6600096E                     bne     stamigalib
 3175 00.00004866 082B00000001                 btst    #0,1(a3)
 3176 00.0000486C 67003B74                     beq     syntaxerr       ;check it's a statement
 3177 00.00004870                              ;
 3178 00.00004870 61000178                     bsr     sizespec        ;does it need a size specifier?
 3179 00.00004874 61001E80                     bsr     countpees
 3180 00.00004878                              ;
 3181 00.00004878                      dolibtoke       ;number of parameters in d1....
 3182 00.00004878                              ;a2=lib base, a3=sub for this toke
 3183 00.00004878                              ;
 3184 00.00004878 3F390000E9BA                 move    numreps,-(a7)
 3185 00.0000487E 3F390000E9B2                 move    userp,-(a7)
 3186 00.00004884 3F390000E9B8                 move    stackuse,-(a7)
 3187 00.0000488A 2F0A                         move.l  a2,-(a7)                ;recurs.
 3188 00.0000488C 33F90000E9B00000E9B2         move    usertype,userp
 3189 00.00004896 43EB0006                     lea     6(a3),a1
 3190 00.0000489A                              ;
 3191 00.0000489A                              ;now to find a form with d1 parameters in it.....
 3192 00.0000489A 3411                 .loop   move    (a1),d2
 3193 00.0000489C 6B003B44                     bmi     syntaxerr
 3194 00.000048A0 024200FF                     and     #255,d2
 3195 00.000048A4 B242                         cmp     d2,d1
 3196 00.000048A6 67000038                     beq     .found
 3197 00.000048AA 65000020                     bcs     .next
 3198 00.000048AE 1611                         move.b  (a1),d3
 3199 00.000048B0 02430007                     and     #7,d3
 3200 00.000048B4 67000016                     beq     .next
 3201 00.000048B8 3802                         move    d2,d4
 3202 00.000048BA 9843                         sub     d3,d4
 3203 00.000048BC 7A00                         moveq   #0,d5
 3204 00.000048BE 3A01                         move    d1,d5
 3205 00.000048C0 9A44                         sub     d4,d5
 3206 00.000048C2 8AC3                         divu    d3,d5
 3207 00.000048C4 4845                         swap    d5
 3208 00.000048C6 4A45                         tst     d5
 3209 00.000048C8 67000016                     beq     .found
 3210 00.000048CC                              ;
 3211 00.000048CC 5449                 .next   addq    #2,a1
 3212 00.000048CE D2C2                         add     d2,a1
 3213 00.000048D0 61002A5A                     bsr     aligna1
 3214 00.000048D4 61002A3E                     bsr     skiplibreg
 3215 00.000048D8 43E9000C                     lea     12(a1),a1
 3216 00.000048DC 6000FFBC                     bra     .loop
 3217 00.000048E0                      .found  ;Got it!
 3218 00.000048E0 1411                         move.b  (a1),d2
 3219 00.000048E2 E14A                         lsl     #8,d2
 3220 00.000048E4 8242                         or      d2,d1
 3221 00.000048E6 2F09                         move.l  a1,-(a7)
 3222 00.000048E8 42790000E9B8                 clr     stackuse
 3223 00.000048EE 4A41                         tst     d1
 3224 00.000048F0 6700000E                     beq     .nopees
 3225 00.000048F4 45E90002                     lea     2(a1),a2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 110
blitz2.s


 3226 00.000048F8 61001E78                     bsr     fetchlibps
 3227 00.000048FC 60000006                     bra     .skip
 3228 00.00004900 6100330C             .nopees bsr     getchar3
 3229 00.00004904 225F                 .skip   move.l  (a7)+,a1
 3230 00.00004906 245F                         move.l  (a7)+,a2
 3231 00.00004908 32390000E9B8                 move    stackuse,d1
 3232 00.0000490E 6700002A                     beq     .skip2
 3233 00.00004912 33C1000029E4                 move    d1,preplibst+2
 3234 00.00004918 2239000029E2                 move.l  preplibst,d1
 3235 00.0000491E 61004BE4                     bsr     pokel
 3236 00.00004922 33F90000E9BA000029E0         move    numreps,movenumrep+2
 3237 00.0000492C 6700000C                     beq     .skip2
 3238 00.00004930 2239000029DE                 move.l  movenumrep,d1
 3239 00.00004936 61004BCC                     bsr     pokel
 3240 00.0000493A 61007182             .skip2  bsr     userjsr ;make the JSR
 3241 00.0000493E 32390000E9B8                 move    stackuse,d1
 3242 00.00004944 6700002E                     beq     .skip3
 3243 00.00004948 B27C0008                     cmp     #8,d1
 3244 00.0000494C 62000016                     bhi     .skip4
 3245 00.00004950 02410007                     and     #7,d1
 3246 00.00004954 E149                         lsl     #8,d1
 3247 00.00004956 E349                         lsl     #1,d1
 3248 00.00004958 0041504F                     or      #$504f,d1       ;addq #x,a7
 3249 00.0000495C 61004BAE                     bsr     pokewd
 3250 00.00004960 60000012                     bra     .skip3
 3251 00.00004964                              ;
 3252 00.00004964 33C1000029E8         .skip4  move    d1,fixlibst+2
 3253 00.0000496A 2239000029E6                 move.l  fixlibst,d1
 3254 00.00004970 61004B92                     bsr     pokel
 3255 00.00004974 33DF0000E9B8         .skip3  move    (a7)+,stackuse
 3256 00.0000497A 33DF0000E9B2                 move    (a7)+,userp
 3257 00.00004980 33DF0000E9BA                 move    (a7)+,numreps
 3258 00.00004986 600032B2                     bra     reget
 3259 00.0000498A                      
 3260 00.0000498A 48E70030             sizespec2       movem.l a2-a3,-(a7)
 3261 00.0000498E 23CD00002B0E                 move.l  a5,prevloc
 3262 00.00004994 61003098                     bsr     getchar
 3263 00.00004998 B07C002E                     cmp     #'.',d0
 3264 00.0000499C 67000016                     beq     .ok1
 3265 00.000049A0 24790000E848                 move.l  defaulttype,a2
 3266 00.000049A6 B07C0024                     cmp     #'$',d0
 3267 00.000049AA 6600001E                     bne     .none
 3268 00.000049AE 7207                         moveq   #7,d1
 3269 00.000049B0 6000002C                     bra     .skip
 3270 00.000049B4 61004236             .ok1    bsr     makename
 3271 00.000049B8 67003A28                     beq     syntaxerr
 3272 00.000049BC 45F90000E760                 lea     alltypes,a2
 3273 00.000049C2 610042FA                     bsr     findtype
 3274 00.000049C6 66003A78                     bne     notypeerr
 3275 00.000049CA 61003278             .none   bsr     bakup
 3276 00.000049CE 0CAA000001000004             cmp.l   #256,4(a2)
 3277 00.000049D6 64003A7C                     bcc     illtypeerr
 3278 00.000049DA 322A0006                     move    6(a2),d1
 3279 00.000049DE 33C10000E9B0         .skip   move    d1,usertype
 3280 00.000049E4 4CDF0C00                     movem.l (a7)+,a2-a3
 3281 00.000049E8 4E75                         rts
 3282 00.000049EA                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 111
blitz2.s


 3283 00.000049EA 082B00030001         sizespec        btst    #3,1(a3)
 3284 00.000049F0 67000014                     beq     .skip
 3285 00.000049F4 6100FF94                     bsr     sizespec2
 3286 00.000049F8 00417000                     or      #$7000,d1
 3287 00.000049FC 61004B0E                     bsr     pokewd
 3288 00.00004A00 527900002B06                 addq    #1,regat
 3289 00.00004A06 4E75                 .skip   rts
 3290 00.00004A08                      
 3291 00.00004A08                      ;-----------subs-------------------------------;
 3292 00.00004A08                      subs
 3293 00.00004A08                      
 3294 00.00004A08                      dorunerrson     ;turn on runtime error checking!
 3295 00.00004A08                              ;
 3296 00.00004A08 0839000700010FE5             btst    #7,optreqga10+13
 3297 00.00004A10 56F90000400A                 sne     debugga
 3298 00.00004A16 4E75                         rts
 3299 00.00004A18                      
 3300 00.00004A18                      dorunerrsoff
 3301 00.00004A18 51F90000400A                 sf      debugga
 3302 00.00004A1E 4E75                         rts
 3303 00.00004A20                      
 3304 00.00004A20                      usedpath        ds.b    128
 3305 00.00004AA0                      
 3306 00.00004AA0 67003940             dousepath       beq     syntaxerr
 3307 00.00004AA4 41FAFF7A                     lea     usedpath(pc),a0
 3308 00.00004AA8 4A40                 .loop   tst     d0
 3309 00.00004AAA 6B003936                     bmi     syntaxerr
 3310 00.00004AAE 10C0                         move.b  d0,(a0)+
 3311 00.00004AB0 6100315C                     bsr     getchar3
 3312 00.00004AB4 6600FFF2                     bne     .loop
 3313 00.00004AB8 10BC0002             .done   move.b  #2,(a0)
 3314 00.00004ABC 4E75                         rts
 3315 00.00004ABE                      
 3316 00.00004ABE 1012                 swapb   move.b  (a2),d0
 3317 00.00004AC0 1491                         move.b  (a1),(a2)
 3318 00.00004AC2 1280                         move.b  d0,(a1)
 3319 00.00004AC4                      swapbf
 3320 00.00004AC4                      
 3321 00.00004AC4 3012                 swapw   move    (a2),d0
 3322 00.00004AC6 3491                         move    (a1),(a2)
 3323 00.00004AC8 3280                         move    d0,(a1)
 3324 00.00004ACA                      swapwf
 3325 00.00004ACA                      
 3326 00.00004ACA 2012                 swapl   move.l  (a2),d0
 3327 00.00004ACC 2491                         move.l  (a1),(a2)
 3328 00.00004ACE 2280                         move.l  d0,(a1)
 3329 00.00004AD0                      swaplf
 3330 00.00004AD0                      
 3331 00.00004AD0 225F                 pulla1  move.l  (a7)+,a1
 3332 00.00004AD2                      
 3333 00.00004AD2 0000                 srctype dc      0
 3334 00.00004AD4                              ;
 3335 00.00004AD4                      doexchange      ;'swap' 2 variables.
 3336 00.00004AD4                              ;
 3337 00.00004AD4 61000060                     bsr     excget
 3338 00.00004AD8 B07C002C                     cmp     #',',d0
 3339 00.00004ADC 66003904                     bne     syntaxerr
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 112
blitz2.s


 3340 00.00004AE0 13C200004AD2                 move.b  d2,srctype
 3341 00.00004AE6 323ADFAC                     move    pusha2(pc),d1
 3342 00.00004AEA 61004A20                     bsr     pokewd
 3343 00.00004AEE 6100311E                     bsr     getchar3
 3344 00.00004AF2 61000042                     bsr     excget
 3345 00.00004AF6 B43AFFDA                     cmp.b   srctype(pc),d2
 3346 00.00004AFA 660031E0                     bne     excerr2
 3347 00.00004AFE 323AFFD0                     move    pulla1(pc),d1
 3348 00.00004B02 61004A08                     bsr     pokewd
 3349 00.00004B06                              ;
 3350 00.00004B06 B43C0002                     cmp.b   #2,d2
 3351 00.00004B0A 6500001E                     bcs     .byte
 3352 00.00004B0E 6700000E                     beq     .word
 3353 00.00004B12 41FAFFB6                     lea     swapl(pc),a0
 3354 00.00004B16 43FAFFB8                     lea     swaplf(pc),a1
 3355 00.00004B1A 60004A86                     bra     pokecode
 3356 00.00004B1E 41FAFFA4             .word   lea     swapw(pc),a0
 3357 00.00004B22 43FAFFA6                     lea     swapwf(pc),a1
 3358 00.00004B26 60004A7A                     bra     pokecode
 3359 00.00004B2A 41FAFF92             .byte   lea     swapb(pc),a0
 3360 00.00004B2E 43FAFF94                     lea     swapbf(pc),a1
 3361 00.00004B32 60004A6E                     bra     pokecode
 3362 00.00004B36                      
 3363 00.00004B36 61004C70             excget  bsr     getvname
 3364 00.00004B3A 61004300                     bsr     fetchvar
 3365 00.00004B3E 610045E2                     bsr     calcvar
 3366 00.00004B42 0802000E                     btst    #14,d2
 3367 00.00004B46 67000006                     beq     .skip
 3368 00.00004B4A 143C0004                     move.b  #4,d2
 3369 00.00004B4E 4A02                 .skip   tst.b   d2
 3370 00.00004B50 670031AE                     beq     excerr
 3371 00.00004B54 0802000F                     btst    #15,d2
 3372 00.00004B58 66000010                     bne     .done
 3373 00.00004B5C 323ADE6A                     move    leaamp(pc),d1
 3374 00.00004B60 6100495E                     bsr     pokewda5s
 3375 00.00004B64 3203                         move    d3,d1
 3376 00.00004B66 600049A4                     bra     pokewd
 3377 00.00004B6A 4E75                 .done   rts
 3378 00.00004B6C                      
 3379 00.00004B6C 20790000E372         doallocmem      move.l  comdata,a0
 3380 00.00004B72 20680058                     move.l  88(a0),a0
 3381 00.00004B76 4ED0                         jmp     (a0)
 3382 00.00004B78                      
 3383 00.00004B78 323CBF00             dowbstartup     move    #wbstart,d1
 3384 00.00004B7C 4EF90000BAA8                 jmp     tokejsr
 3385 00.00004B82                      
 3386 00.00004B82 B07C8006             dopop   cmp     #$8006,d0
 3387 00.00004B86 67000036                     beq     popreturn
 3388 00.00004B8A B07C8016                     cmp     #$8000+22,d0
 3389 00.00004B8E 67000078                     beq     popnext2
 3390 00.00004B92 B07C800E                     cmp     #$8000+14,d0
 3391 00.00004B96 670000EC                     beq     popselect2
 3392 00.00004B9A                              ;
 3393 00.00004B9A B07C800B                     cmp     #$8000+11,d0
 3394 00.00004B9E 6700306E                     beq     getchar3
 3395 00.00004BA2 B07C800C                     cmp     #$8000+12,d0
 3396 00.00004BA6 67003066                     beq     getchar3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 113
blitz2.s


 3397 00.00004BAA B07C8014                     cmp     #$8000+20,d0
 3398 00.00004BAE 6700305E                     beq     getchar3
 3399 00.00004BB2 B07C80BB                     cmp     #$8000+tnum+8,d0
 3400 00.00004BB6 67003056                     beq     getchar3
 3401 00.00004BBA 60003826                     bra     syntaxerr
 3402 00.00004BBE                      
 3403 00.00004BBE 4A390000400A         popreturn       tst.b   debugga
 3404 00.00004BC4 67000034                     beq     .norerr
 3405 00.00004BC8 41FA001E                     lea     .rfix(pc),a0
 3406 00.00004BCC 43FA0024                     lea     .rfixf(pc),a1
 3407 00.00004BD0 610049D0                     bsr     pokecode
 3408 00.00004BD4 323CC305                     move    #chkret,d1
 3409 00.00004BD8 61006ECE                     bsr     tokejsr
 3410 00.00004BDC 323A001A                     move    .rfix2(pc),d1
 3411 00.00004BE0 6100492A                     bsr     pokewd
 3412 00.00004BE4 60003028                     bra     getchar3
 3413 00.00004BE8                              ;
 3414 00.00004BE8 0C6F67530004         .rfix   cmp     #"gS",4(a7)
 3415 00.00004BEE 67000008                     beq     .rfix2
 3416 00.00004BF2 4EB900000000         .rfixf  jsr     0
 3417 00.00004BF8 5C4F                 .rfix2  addq    #6,a7
 3418 00.00004BFA                              ;
 3419 00.00004BFA 323A000A             .norerr move    .sfix(pc),d1
 3420 00.00004BFE 6100490C                     bsr     pokewd
 3421 00.00004C02 6000300A                     bra     getchar3
 3422 00.00004C06 584F                 .sfix   addq    #4,a7
 3423 00.00004C08                              
 3424 00.00004C08 20390000E9A8         popnext2        move.l  firstfor,d0
 3425 00.00004C0E 67003DD0                     beq     noforerr
 3426 00.00004C12 2440                         move.l  d0,a2
 3427 00.00004C14 61002FF8                     bsr     getchar3
 3428 00.00004C18 61000044                     bsr     popnext
 3429 00.00004C1C                              ;
 3430 00.00004C1C 4A390000400A         popnext3        tst.b   debugga
 3431 00.00004C22 6700001C                     beq     .ner
 3432 00.00004C26 22390000293C                 move.l  nextfixw2,d1
 3433 00.00004C2C 0C6A0003000C                 cmp     #3,12(a2)
 3434 00.00004C32 650048D0                     bcs     pokel
 3435 00.00004C36 223900002944                 move.l  nextfixl2,d1
 3436 00.00004C3C 600048C6                     bra     pokel
 3437 00.00004C40                              ;
 3438 00.00004C40 0C6A0003000C         .ner    cmp     #3,12(a2)
 3439 00.00004C46 6500000C                     bcs     .skip2
 3440 00.00004C4A 223900002940                 move.l  nextfixl,d1
 3441 00.00004C50 600048B2                     bra     pokel
 3442 00.00004C54                              ;
 3443 00.00004C54 32390000293A         .skip2  move    nextfixw,d1
 3444 00.00004C5A 600048B0                     bra     pokewd
 3445 00.00004C5E                      
 3446 00.00004C5E 302A000C             popnext move    12(a2),d0
 3447 00.00004C62 4A390000400A                 tst.b   debugga
 3448 00.00004C68 67000018                     beq     .norunerr
 3449 00.00004C6C 323CC306                     move    #snxtchk,d1
 3450 00.00004C70 B07C0003                     cmp     #3,d0
 3451 00.00004C74 65000004                     bcs     .oktc
 3452 00.00004C78 5241                         addq    #1,d1
 3453 00.00004C7A 2F0A                 .oktc   move.l  a2,-(a7)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 114
blitz2.s


 3454 00.00004C7C 61006E2A                     bsr     tokejsr
 3455 00.00004C80 245F                         move.l  (a7)+,a2
 3456 00.00004C82                              ;
 3457 00.00004C82 4E75                 .norunerr       rts
 3458 00.00004C84                      
 3459 00.00004C84                              
 3460 00.00004C84 20390000CD4A         popselect2      move.l  firstsel,d0
 3461 00.00004C8A 67003242                     beq     eselerr
 3462 00.00004C8E 2440                         move.l  d0,a2
 3463 00.00004C90 61002F7C                     bsr     getchar3
 3464 00.00004C94                              ;
 3465 00.00004C94 342A000C             popselect       move    12(a2),d2
 3466 00.00004C98 4A390000400A                 tst.b   debugga
 3467 00.00004C9E 67000014                     beq     .norerr
 3468 00.00004CA2                              ;
 3469 00.00004CA2 323CC313                     move    #casechkw,d1
 3470 00.00004CA6 B47C0003                     cmp     #3,d2
 3471 00.00004CAA 65000004                     bcs     .chkit
 3472 00.00004CAE 5241                         addq    #1,d1
 3473 00.00004CB0 61006DF6             .chkit  bsr     tokejsr ;make sure next thing on stack
 3474 00.00004CB4                                              ;is a select
 3475 00.00004CB4 7202                 .norerr moveq   #2,d1
 3476 00.00004CB6 B47C0003                     cmp     #3,d2
 3477 00.00004CBA 65000034                     bcs     .doit
 3478 00.00004CBE 7204                         moveq   #4,d1
 3479 00.00004CC0 B47C0007                     cmp     #7,d2
 3480 00.00004CC4 6500002A                     bcs     .doit
 3481 00.00004CC8                              ;
 3482 00.00004CC8 41F90000CDD4                 lea     endselstr,a0
 3483 00.00004CCE 43F90000CDDC                 lea     endselstrf,a1
 3484 00.00004CD4 4A390000400A                 tst.b   debugga
 3485 00.00004CDA 67000008                     beq     .norerr3
 3486 00.00004CDE 43F90000CDDE                 lea     endselstrf2,a1
 3487 00.00004CE4 610048BC             .norerr3        bsr     pokecode
 3488 00.00004CE8 323CC003                     move    #$c003,d1       ;global freemem
 3489 00.00004CEC 60006DBA                     bra     tokejsr
 3490 00.00004CF0                              ;
 3491 00.00004CF0 4A390000400A         .doit   tst.b   debugga
 3492 00.00004CF6 67000004                     beq     .norerr2
 3493 00.00004CFA                              ;
 3494 00.00004CFA 5441                         addq    #2,d1   ;for the "sE"
 3495 00.00004CFC                              ;
 3496 00.00004CFC E149                 .norerr2        lsl     #8,d1
 3497 00.00004CFE E349                         lsl     #1,d1
 3498 00.00004D00 82790000CD66                 or      endsel,d1
 3499 00.00004D06 60004804                     bra     pokewd
 3500 00.00004D0A                      
 3501 00.00004D0A 00000000             firstrep        dc.l    0
 3502 00.00004D0E 0000                 replineat       dc      0
 3503 00.00004D10                      
 3504 00.00004D10                      dorepeat        ;Repeat...
 3505 00.00004D10                              ;.
 3506 00.00004D10                              ;.
 3507 00.00004D10                              ;.
 3508 00.00004D10                              ;Until a=10
 3509 00.00004D10 33F90000E9E800004D0E         move    linenumat,replineat
 3510 00.00004D1A 7008                         moveq   #8,d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 115
blitz2.s


 3511 00.00004D1C 7201                         moveq   #1,d1
 3512 00.00004D1E 2C780004                     move.l  4.w,a6
 3513 00.00004D22 4EB900004B6C                 jsr     doallocmem
 3514 00.00004D28 2040                         move.l  d0,a0
 3515 00.00004D2A 20BAFFDE                     move.l  firstrep(pc),(a0)
 3516 00.00004D2E 23C800004D0A                 move.l  a0,firstrep
 3517 00.00004D34 21790000E8F60004             move.l  pc,4(a0)
 3518 00.00004D3C 4E75                         rts     
 3519 00.00004D3E                      
 3520 00.00004D3E                      infochk ds.b    6
 3521 00.00004D44                              ;
 3522 00.00004D44                      endininfo       ;does a0 end in .info?
 3523 00.00004D44                              ;
 3524 00.00004D44 43FAFFF8                     lea     infochk(pc),a1
 3525 00.00004D48 4251                         clr     (a1)
 3526 00.00004D4A 42A90002                     clr.l   2(a1)
 3527 00.00004D4E 7004                 .loop2  moveq   #4,d0
 3528 00.00004D50 12E90001             .loop   move.b  1(a1),(a1)+
 3529 00.00004D54 51C8FFFA                     dbf     d0,.loop
 3530 00.00004D58 43FAFFE4                     lea     infochk(pc),a1
 3531 00.00004D5C 1010                         move.b  (a0),d0
 3532 00.00004D5E 00000020                     or.b    #32,d0
 3533 00.00004D62 13400005                     move.b  d0,5(a1)
 3534 00.00004D66 4A18                         tst.b   (a0)+
 3535 00.00004D68 6600FFE4                     bne     .loop2
 3536 00.00004D6C 0C592E69                     cmp     #'.i',(a1)+
 3537 00.00004D70 66000008                     bne     .no
 3538 00.00004D74 0C916E666F20                 cmp.l   #'nfo ',(a1)
 3539 00.00004D7A 4E75                 .no     rts
 3540 00.00004D7C                      
 3541 00.00004D7C                      gettokeps       ;toke jsr
 3542 00.00004D7C                              ;
 3543 00.00004D7C 6A00001A                     bpl     .evaltoke
 3544 00.00004D80 3200                         move    d0,d1
 3545 00.00004D82 02417F80                     and     #userand,d1
 3546 00.00004D86 6700319E                     beq     tokeerr
 3547 00.00004D8A 0880000F                     bclr    #15,d0
 3548 00.00004D8E 3800                         move    d0,d4   ;got toke number
 3549 00.00004D90 61002E7C                     bsr     getchar3
 3550 00.00004D94 60000018                     bra     .gotnum
 3551 00.00004D98 610071D0             .evaltoke       bsr     evalconst
 3552 00.00004D9C B6BC0000FFFF                 cmp.l   #65535,d3
 3553 00.00004DA2 62003182                     bhi     tokeerr
 3554 00.00004DA6 4A46                         tst     d6
 3555 00.00004DA8 6600317C                     bne     tokeerr
 3556 00.00004DAC 3803                         move    d3,d4
 3557 00.00004DAE 7A00                 .gotnum moveq   #0,d5
 3558 00.00004DB0 B07C002C                     cmp     #',',d0
 3559 00.00004DB4 6600001C                     bne     .gotform
 3560 00.00004DB8 3F04                         move    d4,-(a7)
 3561 00.00004DBA 610071B2                     bsr     evalconst2
 3562 00.00004DBE B6BC0000FFFF                 cmp.l   #65535,d3
 3563 00.00004DC4 62003160                     bhi     tokeerr
 3564 00.00004DC8 4A46                         tst     d6
 3565 00.00004DCA 6600315A                     bne     tokeerr
 3566 00.00004DCE 3A03                         move    d3,d5
 3567 00.00004DD0 381F                         move    (a7)+,d4
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 116
blitz2.s


 3568 00.00004DD2                      .gotform        ;
 3569 00.00004DD2 4E75                         rts     ;d4=toke, d5=form
 3570 00.00004DD4                      
 3571 00.00004DD4 4A40                 dolibjsr        tst     d0
 3572 00.00004DD6 6100FFA4                     bsr     gettokeps
 3573 00.00004DDA 323C4EB9                     move    #$4eb9,d1
 3574 00.00004DDE 6100472C                     bsr     pokewd
 3575 00.00004DE2 61002B38                     bsr     addoff
 3576 00.00004DE6 3205                         move    d5,d1
 3577 00.00004DE8 00418000                     or      #$8000,d1       ;Toke of Amiga type.
 3578 00.00004DEC 4841                         swap    d1
 3579 00.00004DEE 3204                         move    d4,d1
 3580 00.00004DF0 60004712                     bra     pokel
 3581 00.00004DF4                      
 3582 00.00004DF4 4A40                 doblibjsr       tst     d0
 3583 00.00004DF6 6100FF84                     bsr     gettokeps
 3584 00.00004DFA 323C4EB9                     move    #$4eb9,d1
 3585 00.00004DFE 6100470C                     bsr     pokewd
 3586 00.00004E02 61002B18                     bsr     addoff
 3587 00.00004E06 3205                         move    d5,d1
 3588 00.00004E08 0041C000                     or      #$c000,d1       ;Toke of Blitz type.
 3589 00.00004E0C 4841                         swap    d1
 3590 00.00004E0E 3204                         move    d4,d1
 3591 00.00004E10 600046F2                     bra     pokel
 3592 00.00004E14                      
 3593 00.00004E14 61007154             dosysjsr        bsr     evalconst
 3594 00.00004E18 B6BC00010000                 cmp.l   #$10000,d3
 3595 00.00004E1E 64003106                     bcc     tokeerr
 3596 00.00004E22 3203                         move    d3,d1
 3597 00.00004E24 60006C82                     bra     tokejsr
 3598 00.00004E28                      
 3599 00.00004E28 6100FF52             dotokejsr       bsr     gettokeps
 3600 00.00004E2C 323C4EB9                     move    #$4eb9,d1
 3601 00.00004E30 610046DA                     bsr     pokewd
 3602 00.00004E34 26390000E8F6                 move.l  pc,d3
 3603 00.00004E3A 083900070000BCF2             btst    #7,blitzmode
 3604 00.00004E42 67000006                     beq     .inamiga
 3605 00.00004E46 08C5000E                     bset    #14,d5
 3606 00.00004E4A 6100203A             .inamiga        bsr     maketjsr
 3607 00.00004E4E 61002ACC                     bsr     addoff
 3608 00.00004E52 600046B0                     bra     pokel
 3609 00.00004E56                      
 3610 00.00004E56 67000010             dovwait beq     .zero
 3611 00.00004E5A 7402                         moveq   #2,d2   ;get a word
 3612 00.00004E5C 61004B2A                     bsr     bakeval
 3613 00.00004E60 323A0016                     move    fvwait(pc),d1
 3614 00.00004E64 60000006                     bra     .vcont
 3615 00.00004E68 323C7000             .zero   move    #$7000,d1       ;moveq #0,d0
 3616 00.00004E6C 6100469E             .vcont  bsr     pokewd
 3617 00.00004E70 323CC104                     move    #intvwait,d1
 3618 00.00004E74 60006C32                     bra     tokejsr
 3619 00.00004E78                      
 3620 00.00004E78 5340                 fvwait  subq    #1,d0
 3621 00.00004E7A                      
 3622 00.00004E7A 3B7CFFFF0000         cgoblitz        move    #-1,0(a5)
 3623 00.00004E80                      
 3624 00.00004E80 426D0000             cgoamiga        clr     0(a5)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 117
blitz2.s


 3625 00.00004E84                      
 3626 00.00004E84 123AF184             debugmode       move.b  debugga(pc),d1
 3627 00.00004E88 6708                         beq.s   .skip
 3628 00.00004E8A 323CD500                     move    #$d500,d1
 3629 00.00004E8E 60006C18                     bra     tokejsr
 3630 00.00004E92 4E75                 .skip   rts
 3631 00.00004E94                      
 3632 00.00004E94                      doblitz ;go into Blitz mode!
 3633 00.00004E94                              ;
 3634 00.00004E94 08F900000000BCF2             bset    #0,blitzmode
 3635 00.00004E9C 08F900070000BCF2             bset    #7,blitzmode
 3636 00.00004EA4                      ;       bne     .skip           ;paul's bug!
 3637 00.00004EA4 323CC200                     move    #goblitz,d1
 3638 00.00004EA8 61006BFE                     bsr     tokejsr
 3639 00.00004EAC 4A390000400A         .skip   tst.b   debugga
 3640 00.00004EB2 67000018                     beq     .done
 3641 00.00004EB6 323AFFC2                     move    cgoblitz(pc),d1
 3642 00.00004EBA 61004650                     bsr     pokewd
 3643 00.00004EBE 72FF                         moveq   #-1,d1
 3644 00.00004EC0 6100464A                     bsr     pokewd
 3645 00.00004EC4 61006DF6                     bsr     getbbase
 3646 00.00004EC8 61004642                     bsr     pokewd
 3647 00.00004ECC 6000FFB6             .done   bra     debugmode
 3648 00.00004ED0                      
 3649 00.00004ED0                      doamiga ;go into Amiga mode
 3650 00.00004ED0                              ;
 3651 00.00004ED0 323CC201                     move    #goamiga,d1
 3652 00.00004ED4 60000006                     bra     toamode
 3653 00.00004ED8                              ;
 3654 00.00004ED8                      doqamiga        ;go into quick amiga mode
 3655 00.00004ED8                              ;
 3656 00.00004ED8 323CC202                     move    #goqamiga,d1
 3657 00.00004EDC                              ;
 3658 00.00004EDC 08F900000000BCF2     toamode bset    #0,blitzmode
 3659 00.00004EE4 08B900070000BCF2             bclr    #7,blitzmode
 3660 00.00004EEC                      ;       beq     .skip           ;paul's bug
 3661 00.00004EEC 61006BBA                     bsr     tokejsr
 3662 00.00004EF0 4A390000400A         .skip   tst.b   debugga
 3663 00.00004EF6 67000012                     beq     .done
 3664 00.00004EFA 323AFF84                     move    cgoamiga(pc),d1
 3665 00.00004EFE 6100460C                     bsr     pokewd
 3666 00.00004F02 61006DB8                     bsr     getbbase
 3667 00.00004F06 61004604                     bsr     pokewd
 3668 00.00004F0A 6000FF78             .done   bra     debugmode       
 3669 00.00004F0E                      
 3670 00.00004F0E 48E73F38             intstart0       movem.l d2-d7/a2-a4,-(a7)
 3671 00.00004F12                      
 3672 00.00004F12 4CDF1CFC             intfin  movem.l (a7)+,d2-d7/a2-a4
 3673 00.00004F16                      
 3674 00.00004F16                      doclrint        ;
 3675 00.00004F16 61007052                     bsr     evalconst
 3676 00.00004F1A B6BC0000000E                 cmp.l   #14,d3
 3677 00.00004F20 6400308E                     bcc     interr4
 3678 00.00004F24 323C7000                     move    #$7000,d1
 3679 00.00004F28 8243                         or      d3,d1
 3680 00.00004F2A 610045E0                     bsr     pokewd
 3681 00.00004F2E 323CC101                     move    #clrint,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 118
blitz2.s


 3682 00.00004F32 60006B74                     bra     tokejsr ;clear the interupt
 3683 00.00004F36                      
 3684 00.00004F36 0000                 inerr   dc      0       ;flag - in error trap mode
 3685 00.00004F38 00000000             errjmp  dc.l    0       ;where err jump is
 3686 00.00004F3C 00000000             errcode dc.l    0
 3687 00.00004F40                      
 3688 00.00004F40 323CD202             doclrerr        move    #clrerr,d1
 3689 00.00004F44 60006B62                     bra     tokejsr
 3690 00.00004F48                      
 3691 00.00004F48 323AFFEC             doendseterr     move    inerr(pc),d1
 3692 00.00004F4C 67002F1A                     beq     errerr3
 3693 00.00004F50 427900004F36                 clr     inerr
 3694 00.00004F56 32390000E858                 move    nomemleft,d1
 3695 00.00004F5C 6600000C                     bne     .skip
 3696 00.00004F60 207AFFD6                     move.l  errjmp(pc),a0
 3697 00.00004F64 20B90000E8F6                 move.l  pc,(a0)
 3698 00.00004F6A 60002CA2             .skip   bra     getchar3
 3699 00.00004F6E                      
 3700 00.00004F6E 323CD205             doerrfail       move    #errfail,d1
 3701 00.00004F72 60006B34                     bra     tokejsr
 3702 00.00004F76                      
 3703 00.00004F76 32390000EC0C         doseterr        move    procmode,d1
 3704 00.00004F7C 66002EAE                     bne     errerr1
 3705 00.00004F80 323AFFB4                     move    inerr(pc),d1
 3706 00.00004F84 66002ECC                     bne     errerr2
 3707 00.00004F88 467900004F36                 not     inerr
 3708 00.00004F8E 323C203C                     move    #$203c,d1       ;move.l #x,d0
 3709 00.00004F92 61004578                     bsr     pokewd
 3710 00.00004F96 23F90000E8F600004F3C         move.l  pc,errcode
 3711 00.00004FA0 6100297A                     bsr     addoff
 3712 00.00004FA4 6100455E                     bsr     pokel
 3713 00.00004FA8 323CD201                     move    #seterr,d1
 3714 00.00004FAC 61006AFA                     bsr     tokejsr
 3715 00.00004FB0 323C4EF9                     move    #$4ef9,d1       ;JMP
 3716 00.00004FB4 61004556                     bsr     pokewd
 3717 00.00004FB8 23F90000E8F600004F38         move.l  pc,errjmp
 3718 00.00004FC2 61002958                     bsr     addoff
 3719 00.00004FC6 6100453C                     bsr     pokel
 3720 00.00004FCA 32390000E858                 move    nomemleft,d1
 3721 00.00004FD0 6600000C                     bne     .skip
 3722 00.00004FD4 207AFF66                     move.l  errcode(pc),a0
 3723 00.00004FD8 20B90000E8F6                 move.l  pc,(a0)
 3724 00.00004FDE 4E75                 .skip   rts
 3725 00.00004FE0                      
 3726 00.00004FE0 0000                 intlineat       dc      0
 3727 00.00004FE2                      
 3728 00.00004FE2                      dosetint        ;
 3729 00.00004FE2 72FF                         moveq   #-1,d1  ;type - need new string space
 3730 00.00004FE4 6100F2B2             setint2 bsr     errchx
 3731 00.00004FE8 33C1000050D2                 move    d1,intstring
 3732 00.00004FEE 33F90000E9E800004FE0         move    linenumat,intlineat
 3733 00.00004FF8 61006F70                     bsr     evalconst       ;get constant - int level
 3734 00.00004FFC B6BC0000000E                 cmp.l   #14,d3
 3735 00.00005002 64002FAC                     bcc     interr4
 3736 00.00005006                              ;
 3737 00.00005006 50F900003F3A                 st      intsused
 3738 00.0000500C 33C3000050D4                 move    d3,intlevel
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 119
blitz2.s


 3739 00.00005012 323C7000                     move    #$7000,d1
 3740 00.00005016 8243                         or      d3,d1
 3741 00.00005018 610044F2                     bsr     pokewd  ;moveq #x,d0
 3742 00.0000501C 323C223C                     move    #$223c,d1       ;move.l #x,d1
 3743 00.00005020 610044EA                     bsr     pokewd
 3744 00.00005024 610028F6                     bsr     addoff
 3745 00.00005028 2F390000E8F6                 move.l  pc,-(a7)
 3746 00.0000502E 610044D4                     bsr     pokel
 3747 00.00005032                              ;
 3748 00.00005032 323CC100                     move    #setint,d1
 3749 00.00005036 61006A70                     bsr     tokejsr
 3750 00.0000503A 323C4EF9                     move    #$4ef9,d1       ;jmp
 3751 00.0000503E 610044CC                     bsr     pokewd
 3752 00.00005042 610028D8                     bsr     addoff
 3753 00.00005046 23F90000E8F6000050CC         move.l  pc,intjmpat
 3754 00.00005050 610044B2                     bsr     pokel
 3755 00.00005054 205F                         move.l  (a7)+,a0
 3756 00.00005056 32390000E858                 move    nomemleft,d1
 3757 00.0000505C 66000008                     bne     .dontpoke
 3758 00.00005060 20B90000E8F6                 move.l  pc,(a0)
 3759 00.00005066 223AFEA6             .dontpoke       move.l  intstart0(pc),d1
 3760 00.0000506A 61004498                     bsr     pokel
 3761 00.0000506E                              ;
 3762 00.0000506E 4A390000400A                 tst.b   debugga
 3763 00.00005074 6700002C                     beq     .norerr
 3764 00.00005078                              ;
 3765 00.00005078                              ;debugga stuff..
 3766 00.00005078                              ;
 3767 00.00005078 7202                         moveq   #2,d1
 3768 00.0000507A 6100F42C                     bsr     maketrap
 3769 00.0000507E 6100289C                     bsr     addoff
 3770 00.00005082 23F90000E8F6000050D6         move.l  pc,intcleanat
 3771 00.0000508C 61004476                     bsr     pokel
 3772 00.00005090 3239000050D4                 move    intlevel,d1
 3773 00.00005096 61004474                     bsr     pokewd
 3774 00.0000509A                              ;
 3775 00.0000509A 323CC30B                     move    #gosup,d1               ;disable stack checks
 3776 00.0000509E 61006A08                     bsr     tokejsr
 3777 00.000050A2                      .norerr ;
 3778 00.000050A2 323CFED3                     move    #65235,d1
 3779 00.000050A6 6100199A                     bsr     uselib
 3780 00.000050AA                      ;       move    intlevel(pc),d1 ;moveq #level,d1 !?!?!?!?
 3781 00.000050AA                      ;       or      #$7200,d1
 3782 00.000050AA                      ;       bsr     pokewd
 3783 00.000050AA 323CC102                     move    #newint,d1
 3784 00.000050AE 610069F8                     bsr     tokejsr
 3785 00.000050B2                              ;
 3786 00.000050B2 33FCFFFF0000EC22     .nostring       move    #-1,lasta6
 3787 00.000050BA 33F90000E9E8000050D0         move    linenumat,intline
 3788 00.000050C4 4E75                         rts
 3789 00.000050C6                      
 3790 00.000050C6 0000                 intallox        dc      0       ;mask for allocates for
 3791 00.000050C8                                              ;interrupts
 3792 00.000050C8 00000000             intdata1        dc.l    0       ;where in data1 a5 is being
 3793 00.000050CC                                              ;kept
 3794 00.000050CC 00000000             intjmpat        dc.l    0
 3795 00.000050D0 0000                 intline dc      0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 120
blitz2.s


 3796 00.000050D2 0000                 intstring       dc      0       ;flag 0 = no setint
 3797 00.000050D4                                              ;>0=setint, no st space
 3798 00.000050D4                                              ;<0=set, st space
 3799 00.000050D4 0000                 intlevel        dc      0
 3800 00.000050D6 00000000             intcleanat      dc.l    0
 3801 00.000050DA                      
 3802 00.000050DA 00000000             ret15add        dc.l    0
 3803 00.000050DE 0000                 ret15cc dc      0
 3804 00.000050E0                      
 3805 00.000050E0                      directtrap      ;trap #15
 3806 00.000050E0                              ;
 3807 00.000050E0                              ;.l : input - code to compile
 3808 00.000050E0                              ;.l : firstlocal
 3809 00.000050E0                              ;.l : firstglobal
 3810 00.000050E0                              ;.l : returned - 0 if no compile error, else pointer to err text
 3811 00.000050E0                              ;.w : blitz mode status
 3812 00.000050E0                              ;
 3813 00.000050E0 06AF000000120002             add.l   #18,2(a7)
 3814 00.000050E8 23EF0002000050DA             move.l  2(a7),ret15add
 3815 00.000050F0 33D7000050DE                 move    (a7),ret15cc
 3816 00.000050F6 2F7C000051000002             move.l  #directdo,2(a7)
 3817 00.000050FE 4E73                         rte
 3818 00.00005100                              ;
 3819 00.00005100 2F3AFFD8             directdo        move.l  ret15add(pc),-(a7)
 3820 00.00005104 3F3AFFD8                     move    ret15cc(pc),-(a7)
 3821 00.00005108                              ;
 3822 00.00005108 48E7FFFE                     movem.l d0-d7/a0-a6,-(a7)       ;15*4
 3823 00.0000510C                              ;
 3824 00.0000510C 23FC000051C600002B1C         move.l  #dircont,errcont
 3825 00.00005116 23CF00002B18                 move.l  a7,errstack
 3826 00.0000511C 33FCFFFF0000E834             move    #-1,dirmode
 3827 00.00005124                              ;
 3828 00.00005124 227AFFB4                     move.l  ret15add(pc),a1
 3829 00.00005128 33E10000BCF2                 move    -(a1),blitzmode
 3830 00.0000512E 42A1                         clr.l   -(a1)
 3831 00.00005130 23E100002B34                 move.l  -(a1),firstglob
 3832 00.00005136 23E100002B30                 move.l  -(a1),firstlocal
 3833 00.0000513C 42790000EC0C                 clr     procmode
 3834 00.00005142 203900002B34                 move.l  firstglob,d0
 3835 00.00005148 80B900002B30                 or.l    firstlocal,d0
 3836 00.0000514E 6706                         beq.s   .skip
 3837 00.00005150 46790000EC0C                 not     procmode
 3838 00.00005156 2061                 .skip   move.l  -(a1),a0                ;address of string
 3839 00.00005158                              ;
 3840 00.00005158 2F08                         move.l  a0,-(a7)
 3841 00.0000515A 22790000E372                 move.l  comdata,a1
 3842 00.00005160 22690038                     move.l  56(a1),a1
 3843 00.00005164 4E91                         jsr     (a1)            ;tokenise line.....
 3844 00.00005166 2A5F                         move.l  (a7)+,a5
 3845 00.00005168                              ;
 3846 00.00005168 23F90000E35C0000E8F6         move.l  dirpcat,pc
 3847 00.00005172 42790000E858                 clr     nomemleft
 3848 00.00005178 33FCFFFF0000EC22             move    #-1,lasta6
 3849 00.00005180 6100F22A                     bsr     doline  ;.....compile it
 3850 00.00005184                              ;
 3851 00.00005184 42790000EC0C                 clr     procmode
 3852 00.0000518A 6100F10C                     bsr     errchx
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 121
blitz2.s


 3853 00.0000518E                              ;
 3854 00.0000518E 323C4EF9                     move    #$4ef9,d1
 3855 00.00005192 61004378                     bsr     pokewd  ;JMP
 3856 00.00005196 223AFF42                     move.l  ret15add(pc),d1
 3857 00.0000519A 61004368                     bsr     pokel   ;jmp to done
 3858 00.0000519E                              ;
 3859 00.0000519E 30390000E858                 move    nomemleft,d0
 3860 00.000051A4 66002FC2                     bne     nodirmem
 3861 00.000051A8                              ;
 3862 00.000051A8 2F790000E35C003E             move.l  dirpcat,4*15+2(a7)      ;install code address
 3863 00.000051B0                              ;
 3864 00.000051B0 42790000E834         direxit clr     dirmode
 3865 00.000051B6 3F7AFF26003C                 move    ret15cc(pc),4*15(a7)
 3866 00.000051BC 4CDF7FFF                     movem.l (a7)+,d0-d7/a0-a6
 3867 00.000051C0                              ;
 3868 00.000051C0 6100E1BA                     bsr     flushc
 3869 00.000051C4 4E77                         rtr
 3870 00.000051C6                              ;
 3871 00.000051C6                      dircont ;direct mode error! - d0=error text
 3872 00.000051C6                              ;
 3873 00.000051C6 207AFF12                     move.l  ret15add(pc),a0
 3874 00.000051CA 5548                         subq    #2,a0
 3875 00.000051CC 2100                         move.l  d0,-(a0)
 3876 00.000051CE                              ;
 3877 00.000051CE 6000FFE0                     bra     direxit
 3878 00.000051D2                      
 3879 00.000051D2                      stamigalib      ;an amigalib called through a statement!
 3880 00.000051D2                              ;
 3881 00.000051D2 322B0006                     move    6(a3),d1
 3882 00.000051D6 6100186A                     bsr     uselib  ;get lib for base address
 3883 00.000051DA 3F29000A                     move    10(a1),-(a7)    ;libbase reg
 3884 00.000051DE 504B                         addq    #8,a3
 3885 00.000051E0 3F1B                         move    (a3)+,-(a7)             ;get offset for lib
 3886 00.000051E2 2F0B                         move.l  a3,-(a7)
 3887 00.000051E4                              ;
 3888 00.000051E4                              ;collect longs for lib
 3889 00.000051E4                              ;
 3890 00.000051E4 7600                         moveq   #0,d3
 3891 00.000051E6 121B                 .loop   move.b  (a3)+,d1
 3892 00.000051E8 6B000020                     bmi     .done
 3893 00.000051EC 7403                         moveq   #3,d2
 3894 00.000051EE 5243                         addq    #1,d3
 3895 00.000051F0 48E71010                     movem.l d3/a3,-(a7)
 3896 00.000051F4 61004776                     bsr     peval
 3897 00.000051F8 4CDF0808                     movem.l (a7)+,d3/a3
 3898 00.000051FC B07C002C                     cmp     #',',d0
 3899 00.00005200 6700FFE4                     beq     .loop
 3900 00.00005204 4A13                         tst.b   (a3)
 3901 00.00005206 6A0031DA                     bpl     syntaxerr
 3902 00.0000520A                              ;
 3903 00.0000520A                      .done   ;move   (a7)+,d1
 3904 00.0000520A                              ;bsr    tstbras
 3905 00.0000520A 265F                         move.l  (a7)+,a3
 3906 00.0000520C 5343                         subq    #1,d3
 3907 00.0000520E 6A00000A                     bpl     .toend
 3908 00.00005212 610029FA                     bsr     getchar3        ;no pars - get :
 3909 00.00005216 60000036                     bra     .nopars
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 122
blitz2.s


 3910 00.0000521A                              ;
 3911 00.0000521A 4A1B                 .toend  tst.b   (a3)+   ;go to end of params
 3912 00.0000521C 6A00FFFC                     bpl     .toend
 3913 00.00005220 534B                         subq    #1,a3
 3914 00.00005222 7200                 .loop2  moveq   #0,d1
 3915 00.00005224 1223                         move.b  -(a3),d1
 3916 00.00005226 08010004                     btst    #4,d1
 3917 00.0000522A 6600000E                     bne     .addreg
 3918 00.0000522E E149                         lsl     #8,d1
 3919 00.00005230 E349                         lsl     #1,d1
 3920 00.00005232 0041201F                     or      #$201f,d1
 3921 00.00005236 6000000E                     bra     .gotit
 3922 00.0000523A 02410007             .addreg and     #7,d1
 3923 00.0000523E E149                         lsl     #8,d1
 3924 00.00005240 E349                         lsl     #1,d1
 3925 00.00005242 0041205F                     or      #$205f,d1
 3926 00.00005246 610042C4             .gotit  bsr     pokewd
 3927 00.0000524A 51CBFFD6                     dbf     d3,.loop2
 3928 00.0000524E                              ;
 3929 00.0000524E 33DF00002A5C         .nopars move    (a7)+,libjsr+2
 3930 00.00005254 33DF00002A58                 move    (a7)+,libbase+2
 3931 00.0000525A 223900002A56                 move.l  libbase,d1
 3932 00.00005260 610042A2                     bsr     pokel
 3933 00.00005264 223900002A5A                 move.l  libjsr,d1
 3934 00.0000526A 60004298                     bra     pokel
 3935 00.0000526E                      
 3936 00.0000526E                      alloxinc        ;increment allocs by 150%
 3937 00.0000526E                              ;
 3938 00.0000526E 243900010D14                 move.l  maxpc,d2
 3939 00.00005274 E28A                         lsr.l   #1,d2
 3940 00.00005276 D4B900010D14                 add.l   maxpc,d2
 3941 00.0000527C                              ;
 3942 00.0000527C 263900010D70                 move.l  maxlib,d3
 3943 00.00005282 E28B                         lsr.l   #1,d3
 3944 00.00005284 D6B900010D70                 add.l   maxlib,d3
 3945 00.0000528A                              ;
 3946 00.0000528A 283900010DCC                 move.l  maxdata1,d4
 3947 00.00005290 E28C                         lsr.l   #1,d4
 3948 00.00005292 D8B900010DCC                 add.l   maxdata1,d4
 3949 00.00005298                              ;
 3950 00.00005298 2A3900010E28                 move.l  maxdata2,d5
 3951 00.0000529E E28D                         lsr.l   #1,d5
 3952 00.000052A0 DAB900010E28                 add.l   maxdata2,d5
 3953 00.000052A6                              ;
 3954 00.000052A6 60000040                     bra     newallox
 3955 00.000052AA                      
 3956 00.000052AA                      alloxadj        ;ne if enough mem for allox
 3957 00.000052AA                              ;
 3958 00.000052AA 24390000959E                 move.l  bigpc,d2
 3959 00.000052B0 94B90000E8F2                 sub.l   pcat,d2         ;size of object buffer
 3960 00.000052B6 4A790000E84E                 tst     makeexec
 3961 00.000052BC 6606                         bne.s   .skip
 3962 00.000052BE 068200000400                 add.l   #1024,d2
 3963 00.000052C4 26390000E8FE         .skip   move.l  lib,d3
 3964 00.000052CA 96B90000E8FA                 sub.l   libat,d3
 3965 00.000052D0 28390000E8EE                 move.l  data1,d4
 3966 00.000052D6 98B90000E8EA                 sub.l   data1at,d4
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 123
blitz2.s


 3967 00.000052DC 2A390000E8E6                 move.l  data2,d5
 3968 00.000052E2 9AB90000E8E2                 sub.l   data2at,d5
 3969 00.000052E8 61000044             newallox        bsr     makeallox
 3970 00.000052EC 66000006                     bne     .done
 3971 00.000052F0 60000024                     bra     makeiallox
 3972 00.000052F4 4E75                 .done   rts
 3973 00.000052F6                      
 3974 00.000052F6 2C780004             freeallox       move.l  4.w,a6
 3975 00.000052FA 20390000EC4E                 move.l  objlen,d0
 3976 00.00005300 67000012                     beq     .skip
 3977 00.00005304 42B90000EC4E                 clr.l   objlen
 3978 00.0000530A 22790000E8F2                 move.l  pcat,a1
 3979 00.00005310 4EEEFF2E                     jmp     freemem(a6)
 3980 00.00005314 4E75                 .skip   rts
 3981 00.00005316                      
 3982 00.00005316                      makeiallox      ;initial allox
 3983 00.00005316 243900010D14                 move.l  maxpc,d2
 3984 00.0000531C 263900010D70                 move.l  maxlib,d3
 3985 00.00005322 283900010DCC                 move.l  maxdata1,d4
 3986 00.00005328 2A3900010E28                 move.l  maxdata2,d5
 3987 00.0000532E                              ;
 3988 00.0000532E                      makeallox       ;d2=pc size,d3=lib size,d4=data1,d5=data2
 3989 00.0000532E                              ;
 3990 00.0000532E 33FCFFFF0000E84C             move    #-1,anyerrs
 3991 00.00005336 6100FFBE                     bsr     freeallox
 3992 00.0000533A                              ;
 3993 00.0000533A                              ;word align blocks
 3994 00.0000533A                              ;
 3995 00.0000533A 5282                         addq.l  #1,d2
 3996 00.0000533C 08820000                     bclr    #0,d2
 3997 00.00005340 5283                         addq.l  #1,d3
 3998 00.00005342 08830000                     bclr    #0,d3
 3999 00.00005346 5284                         addq.l  #1,d4
 4000 00.00005348 08840000                     bclr    #0,d4
 4001 00.0000534C 5285                         addq.l  #1,d5
 4002 00.0000534E 08850000                     bclr    #0,d5
 4003 00.00005352                              ;
 4004 00.00005352 2002                         move.l  d2,d0
 4005 00.00005354 D083                         add.l   d3,d0
 4006 00.00005356 D084                         add.l   d4,d0
 4007 00.00005358 D085                         add.l   d5,d0
 4008 00.0000535A 2C00                         move.l  d0,d6
 4009 00.0000535C 223C00010001                 move.l  #$10001,d1
 4010 00.00005362 4EB900004B6C                 jsr     doallocmem
 4011 00.00005368 4A80                         tst.l   d0
 4012 00.0000536A 67000046                     beq     .done
 4013 00.0000536E 23C60000EC4E                 move.l  d6,objlen
 4014 00.00005374 23C200010D14                 move.l  d2,maxpc
 4015 00.0000537A 23C300010D70                 move.l  d3,maxlib
 4016 00.00005380 23C400010DCC                 move.l  d4,maxdata1
 4017 00.00005386 23C500010E28                 move.l  d5,maxdata2
 4018 00.0000538C 23C00000E8F2                 move.l  d0,pcat
 4019 00.00005392 D082                         add.l   d2,d0
 4020 00.00005394 23C00000E8FA                 move.l  d0,libat
 4021 00.0000539A D083                         add.l   d3,d0
 4022 00.0000539C 23C00000E8EA                 move.l  d0,data1at
 4023 00.000053A2 D084                         add.l   d4,d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 124
blitz2.s


 4024 00.000053A4 23C00000E8E2                 move.l  d0,data2at
 4025 00.000053AA D085                         add.l   d5,d0
 4026 00.000053AC 23C00000E902                 move.l  d0,allat
 4027 00.000053B2 4E75                 .done   rts
 4028 00.000053B4                      
 4029   =FFFFFFFF                              ifeq    final
 4030 00.000053B4                              ;
 4031 00.000053B4                      prtname dc.b    'PAR:',0
 4032 00.000053B4                              even
 4033 00.000053B4                      
 4034 00.000053B4                      menu3   ;rts
 4035 00.000053B4                              ;
 4036 00.000053B4                              ;print tokens to PRT:
 4037 00.000053B4                              ;
 4038 00.000053B4                              move.l  #prtname,d1
 4039 00.000053B4                              move.l  #1006,d2
 4040 00.000053B4                              calldos open
 4041 00.000053B4                              move.l  d0,d7
 4042 00.000053B4                              beq     .fuct
 4043 00.000053B4                              ;
 4044 00.000053B4                              lea     tokens,a2
 4045 00.000053B4                              ;
 4046 00.000053B4                      .loop   lea     namebuff,a0
 4047 00.000053B4                              move.l  a0,d2
 4048 00.000053B4                              lea     6(a2),a1
 4049 00.000053B4                      .loop2  move.b  (a1)+,(a0)+
 4050 00.000053B4                              bne     .loop2
 4051 00.000053B4                              move.b  #10,-1(a0)
 4052 00.000053B4                      .loop3  move.b  (a1)+,(a0)+
 4053 00.000053B4                              bne     .loop3
 4054 00.000053B4                              move.b  #10,-1(a0)
 4055 00.000053B4                              move.b  #10,(a0)+
 4056 00.000053B4                              move.l  a0,d3
 4057 00.000053B4                              sub.l   d2,d3
 4058 00.000053B4                              move.l  d7,d1
 4059 00.000053B4                              jsr     write(a6)
 4060 00.000053B4                              move.l  (a2),a2
 4061 00.000053B4                              cmp     #0,a2
 4062 00.000053B4                              bne     .loop
 4063 00.000053B4                              ;
 4064 00.000053B4                              move.l  d7,d1
 4065 00.000053B4                              jmp     close(a6)
 4066 00.000053B4                              ;
 4067 00.000053B4                      .fuct   rts
 4068 00.000053B4                              ;
 4069 00.000053B4                              endc
 4070 00.000053B4                      
 4071 00.000053B4 000000010000000A0000 divisors        dc.l    1,10,100,1000,10000,100000
 4072 00.000053CC 000F42400098968005F5         dc.l    1000000,10000000,100000000,1000000000
 4073 00.000053DC                      
 4074 00.000053DC                      makelong        ;put long in d2 into (a0)+
 4075 00.000053DC                              ;
 4076 00.000053DC 7200                         moveq   #0,d1   ;no zero printed
 4077 00.000053DE 7624                         moveq   #36,d3
 4078 00.000053E0 7830                 .loop   moveq   #48,d4
 4079 00.000053E2 B4BB30D0             .loop2  cmp.l   divisors(pc,d3),d2
 4080 00.000053E6 6500000C                     bcs     .skip
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 125
blitz2.s


 4081 00.000053EA 94BB30C8                     sub.l   divisors(pc,d3),d2
 4082 00.000053EE 5244                         addq    #1,d4
 4083 00.000053F0 6000FFF0                     bra     .loop2
 4084 00.000053F4 B83C0030             .skip   cmp.b   #48,d4
 4085 00.000053F8 66000008                     bne     .doit
 4086 00.000053FC 4A41                         tst     d1
 4087 00.000053FE 67000006                     beq     .skip2
 4088 00.00005402 10C4                 .doit   move.b  d4,(a0)+
 4089 00.00005404 7201                         moveq   #1,d1
 4090 00.00005406 5943                 .skip2  subq    #4,d3
 4091 00.00005408 6A00FFD6                     bpl     .loop
 4092 00.0000540C 4A41                         tst     d1
 4093 00.0000540E 66000006                     bne     .skip3
 4094 00.00005412 10FC0030                     move.b  #'0',(a0)+
 4095 00.00005416 4210                 .skip3  clr.b   (a0)
 4096 00.00005418 4E75                         rts
 4097 00.0000541A                              ;
 4098 00.0000541A 4E616D65206F66205265 restext dc.b    'Name of Resident File to Create',0
 4099 00.0000543A                              even
 4100 00.0000543A 00                   respath dc.b    0
 4101 00.0000543B                              ds.b    191
 4102 00.000054FA 00                   resname dc.b    0
 4103 00.000054FB                              ds.b    191
 4104 00.000055BA                      
 4105 00.000055BA                      menu5   ;make resident!
 4106 00.000055BA                              ;
 4107 00.000055BA 20390000EC2E                 move.l  firstmacro,d0
 4108 00.000055C0 6600002E                     bne     .skip
 4109 00.000055C4 20390000E7B8                 move.l  firsttype,d0
 4110 00.000055CA 66000024                     bne     .skip
 4111 00.000055CE 24790000EC36                 move.l  firstlabel,a2
 4112 00.000055D4 B4FC0000             .loop   cmp     #0,a2
 4113 00.000055D8 67000014                     beq     .err
 4114 00.000055DC 0CAA000000010004             cmp.l   #1,4(a2)
 4115 00.000055E4 6700000A                     beq     .skip
 4116 00.000055E8 2452                         move.l  (a2),a2
 4117 00.000055EA 6000FFE8                     bra     .loop
 4118 00.000055EE                      .err    ;
 4119 00.000055EE 4E75                         rts
 4120 00.000055F0                              ;
 4121 00.000055F0 26790000E372         .skip   move.l  comdata,a3
 4122 00.000055F6 266B0018                     move.l  24(a3),a3
 4123 00.000055FA 45F90000541A                 lea     restext,a2
 4124 00.00005600 41F90000543A                 lea     respath,a0
 4125 00.00005606 43F9000054FA                 lea     resname,a1
 4126 00.0000560C 4E93                         jsr     (a3)
 4127 00.0000560E 6700FFDE                     beq     .err
 4128 00.00005612                      .tryit  ;
 4129 00.00005612                              ;O.K.... Now to create it
 4130 00.00005612 2200                         move.l  d0,d1
 4131 00.00005614 243C000003EE                 move.l  #1006,d2
 4132 00.0000561A                              calldos open
 4132 00.0000561A+2C7AAB38                     move.l  dos(pc),a6
 4132 00.0000561E+4EAEFFE2                     jsr     open(a6)
 4132 00.00005622                              endm
 4133 00.00005622 2E00                         move.l  d0,d7   ;handle
 4134 00.00005624 6700FFC8                     beq     .err
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 126
blitz2.s


 4135 00.00005628 6100D8D6                     bsr     sleepon
 4136 00.0000562C                              ;
 4137 00.0000562C 61002334                     bsr     killoffs
 4138 00.00005630                              ;
 4139 00.00005630 2207                         move.l  d7,d1
 4140 00.00005632 243C0000082E                 move.l  #tsthead,d2     ;header
 4141 00.00005638 7620                         moveq   #32,d3
 4142 00.0000563A                              calldos write
 4142 00.0000563A+2C7AAB18                     move.l  dos(pc),a6
 4142 00.0000563E+4EAEFFD0                     jsr     write(a6)
 4142 00.00005642                              endm
 4143 00.00005642                              ;
 4144 00.00005642 7C00                         moveq   #0,d6   ;offset from start of file!
 4145 00.00005644 610001F6                     bsr     restypes
 4146 00.00005648 61000172                     bsr     resmacs
 4147 00.0000564C 61000242                     bsr     resconsts
 4148 00.00005650                              ;
 4149 00.00005650 2606                         move.l  d6,d3
 4150 00.00005652 5683                         addq.l  #3,d3
 4151 00.00005654 0283FFFFFFFC                 and.l   #$fffffffc,d3   ;long word align
 4152 00.0000565A 2F03                         move.l  d3,-(a7)
 4153 00.0000565C 9686                         sub.l   d6,d3
 4154 00.0000565E 6700000E                     beq     .noalign
 4155 00.00005662 243C0000570C                 move.l  #hello,d2
 4156 00.00005668 2207                         move.l  d7,d1
 4157 00.0000566A 4EAEFFD0                     jsr     write(a6)
 4158 00.0000566E 23F90000EC5200000852 .noalign        move.l  numoffs,tstsize3
 4159 00.00005678 67000040                     beq     .skip2a
 4160 00.0000567C 2207                         move.l  d7,d1
 4161 00.0000567E 243C0000084E                 move.l  #tstend,d2
 4162 00.00005684 760C                         moveq   #12,d3
 4163 00.00005686 4EAEFFD0                     jsr     write(a6)
 4164 00.0000568A                              ;
 4165 00.0000568A                              ;and offsets.....
 4166 00.0000568A                              ;
 4167 00.0000568A 24790000EC56                 move.l  firstoff,a2
 4168 00.00005690 B4FC0000             .oloop  cmp     #0,a2
 4169 00.00005694 67000016                     beq     .skip2
 4170 00.00005698 43EA0004                     lea     4(a2),a1
 4171 00.0000569C 2207                         move.l  d7,d1
 4172 00.0000569E 2409                         move.l  a1,d2
 4173 00.000056A0 7604                         moveq   #4,d3
 4174 00.000056A2 4EAEFFD0                     jsr     write(a6)
 4175 00.000056A6 2452                         move.l  (a2),a2
 4176 00.000056A8 6000FFE6                     bra     .oloop
 4177 00.000056AC                      .skip2  ;
 4178 00.000056AC 2207                         move.l  d7,d1
 4179 00.000056AE 243C0000EC14                 move.l  #zero,d2
 4180 00.000056B4 7604                         moveq   #4,d3
 4181 00.000056B6 4EAEFFD0                     jsr     write(a6)
 4182 00.000056BA                      .skip2a ;
 4183 00.000056BA 2207                         move.l  d7,d1
 4184 00.000056BC 243C0000085A                 move.l  #tstdone,d2
 4185 00.000056C2 7604                         moveq   #4,d3
 4186 00.000056C4 4EAEFFD0                     jsr     write(a6)
 4187 00.000056C8 201F                         move.l  (a7)+,d0
 4188 00.000056CA E488                         lsr.l   #2,d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 127
blitz2.s


 4189 00.000056CC 23C00000EC60                 move.l  d0,temp1
 4190 00.000056D2                              ;
 4191 00.000056D2 2207                         move.l  d7,d1
 4192 00.000056D4 7414                         moveq   #20,d2
 4193 00.000056D6 76FF                         moveq   #-1,d3
 4194 00.000056D8 4EAEFFBE                     jsr     seek(a6)
 4195 00.000056DC 2207                         move.l  d7,d1
 4196 00.000056DE 243C0000EC60                 move.l  #temp1,d2
 4197 00.000056E4 7604                         moveq   #4,d3
 4198 00.000056E6 4EAEFFD0                     jsr     write(a6)
 4199 00.000056EA 2207                         move.l  d7,d1
 4200 00.000056EC 741C                         moveq   #28,d2
 4201 00.000056EE 76FF                         moveq   #-1,d3
 4202 00.000056F0 4EAEFFBE                     jsr     seek(a6)
 4203 00.000056F4 2207                         move.l  d7,d1
 4204 00.000056F6 243C0000EC60                 move.l  #temp1,d2
 4205 00.000056FC 7604                         moveq   #4,d3
 4206 00.000056FE 4EAEFFD0                     jsr     write(a6)
 4207 00.00005702                              ;
 4208 00.00005702 2207                         move.l  d7,d1
 4209 00.00005704 4EAEFFDC                     jsr     close(a6)
 4210 00.00005708 6000D7EA                     bra     pointeron
 4211 00.0000570C                      
 4212 00.0000570C 5A415000             hello   dc.b    'ZAP',0
 4213 00.00005710                      
 4214 00.00005710                      writelist       ;a2=first, d5=.b len offset
 4215 00.00005710                              ;
 4216 00.00005710 B4FC0000             .loop   cmp     #0,a2
 4217 00.00005714 6700000C                     beq     .done
 4218 00.00005718 6100000A                     bsr     writeitem
 4219 00.0000571C 2452                         move.l  (a2),a2
 4220 00.0000571E 6000FFF0                     bra     .loop
 4221 00.00005722 4E75                 .done   rts
 4222 00.00005724                      
 4223 00.00005724 7600                 writeitem       moveq   #0,d3
 4224 00.00005726 16325000                     move.b  0(a2,d5),d3
 4225 00.0000572A 5243                         addq    #1,d3
 4226 00.0000572C 08830000                     bclr    #0,d3   ;word align
 4227 00.00005730 2F12                         move.l  (a2),-(a7)
 4228 00.00005732 6700000C                     beq     .skip
 4229 00.00005736 61000016                     bsr     resoff
 4230 00.0000573A DC83                         add.l   d3,d6
 4231 00.0000573C 2486                         move.l  d6,(a2)
 4232 00.0000573E 9C83                         sub.l   d3,d6
 4233 00.00005740                              ;
 4234 00.00005740 DC83                 .skip   add.l   d3,d6
 4235 00.00005742 240A                         move.l  a2,d2
 4236 00.00005744 2207                         move.l  d7,d1
 4237 00.00005746 4EAEFFD0                     jsr     write(a6)
 4238 00.0000574A 249F                         move.l  (a7)+,(a2)
 4239 00.0000574C 4E75                         rts
 4240 00.0000574E                      
 4241 00.0000574E 2406                 resoff  move.l  d6,d2
 4242 00.00005750 600021E0                     bra     addoff2
 4243 00.00005754                      
 4244 00.00005754                      writeoffs       ;write the offsets
 4245 00.00005754                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 128
blitz2.s


 4246 00.00005754 B4FC0000             .loop   cmp     #0,a2
 4247 00.00005758 67000038                     beq     .done
 4248 00.0000575C 22790000E760                 move.l  alltypes,a1
 4249 00.00005762 7200                         moveq   #0,d1
 4250 00.00005764 B2FC0000             .loop2  cmp     #0,a1
 4251 00.00005768 67000012                     beq     .found
 4252 00.0000576C B3EA000A                     cmp.l   10(a2),a1
 4253 00.00005770 6700000A                     beq     .found
 4254 00.00005774 5241                         addq    #1,d1
 4255 00.00005776 2251                         move.l  (a1),a1
 4256 00.00005778 6000FFEA                     bra     .loop2
 4257 00.0000577C 3F2A000A             .found  move    10(a2),-(a7)
 4258 00.00005780 3541000A                     move    d1,10(a2)
 4259 00.00005784 6100FF9E                     bsr     writeitem
 4260 00.00005788 355F000A                     move    (a7)+,10(a2)
 4261 00.0000578C 2452                         move.l  (a2),a2
 4262 00.0000578E 6000FFC4                     bra     .loop
 4263 00.00005792 4E75                 .done   rts
 4264 00.00005794                      
 4265 00.00005794 7000                 countem moveq   #0,d0
 4266 00.00005796 B4FC0000             .loop   cmp     #0,a2
 4267 00.0000579A 6700000A                     beq     .done
 4268 00.0000579E 5240                         addq    #1,d0
 4269 00.000057A0 2452                         move.l  (a2),a2
 4270 00.000057A2 6000FFF2                     bra     .loop
 4271 00.000057A6 33C00000EC60         .done   move    d0,temp1
 4272 00.000057AC 2207                         move.l  d7,d1
 4273 00.000057AE 243C0000EC60                 move.l  #temp1,d2
 4274 00.000057B4 7602                         moveq   #2,d3
 4275 00.000057B6 5486                         addq.l  #2,d6
 4276 00.000057B8 4EEEFFD0                     jmp     write(a6)       
 4277 00.000057BC                      
 4278 00.000057BC                      resmacs ;put out! macros
 4279 00.000057BC                              ;
 4280 00.000057BC 26790000EC2E                 move.l  firstmacro,a3
 4281 00.000057C2 244B                         move.l  a3,a2
 4282 00.000057C4 6100FFCE                     bsr     countem
 4283 00.000057C8 B6FC0000             .loop   cmp     #0,a3
 4284 00.000057CC 6700006C                     beq     .done
 4285 00.000057D0 2A06                         move.l  d6,d5
 4286 00.000057D2 2F13                         move.l  (a3),-(a7)
 4287 00.000057D4 2F2B0004                     move.l  4(a3),-(a7)
 4288 00.000057D8 7600                         moveq   #0,d3
 4289 00.000057DA 162B000C                     move.b  12(a3),d3
 4290 00.000057DE 5243                         addq    #1,d3
 4291 00.000057E0 08830000                     bclr    #0,d3
 4292 00.000057E4 DC83                         add.l   d3,d6   ;add len of struct
 4293 00.000057E6 4A6B0008                     tst     8(a3)
 4294 00.000057EA 6700000E                     beq     .notext
 4295 00.000057EE 27460004                     move.l  d6,4(a3)
 4296 00.000057F2 2405                         move.l  d5,d2
 4297 00.000057F4 5882                         addq.l  #4,d2
 4298 00.000057F6 6100213A                     bsr     addoff2
 4299 00.000057FA 7800                 .notext moveq   #0,d4
 4300 00.000057FC 382B0008                     move    8(a3),d4
 4301 00.00005800 5244                         addq    #1,d4
 4302 00.00005802 08840000                     bclr    #0,d4
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 129
blitz2.s


 4303 00.00005806 DC84                         add.l   d4,d6
 4304 00.00005808 4A93                         tst.l   (a3)
 4305 00.0000580A 6700000A                     beq     .nomore
 4306 00.0000580E 2686                         move.l  d6,(a3)
 4307 00.00005810 2405                         move.l  d5,d2
 4308 00.00005812 6100211E                     bsr     addoff2
 4309 00.00005816 240B                 .nomore move.l  a3,d2
 4310 00.00005818 2207                         move.l  d7,d1
 4311 00.0000581A 4EAEFFD0                     jsr     write(a6)
 4312 00.0000581E 4A84                         tst.l   d4
 4313 00.00005820 6700000C                     beq     .skip
 4314 00.00005824 2417                         move.l  (a7),d2
 4315 00.00005826 2604                         move.l  d4,d3
 4316 00.00005828 2207                         move.l  d7,d1
 4317 00.0000582A 4EAEFFD0                     jsr     write(a6)
 4318 00.0000582E 275F0004             .skip   move.l  (a7)+,4(a3)
 4319 00.00005832 269F                         move.l  (a7)+,(a3)
 4320 00.00005834 2653                         move.l  (a3),a3
 4321 00.00005836 6000FF90                     bra     .loop
 4322 00.0000583A 4E75                 .done   rts
 4323 00.0000583C                      
 4324 00.0000583C 26790000E7B8         restypes        move.l  firsttype,a3
 4325 00.00005842 244B                         move.l  a3,a2
 4326 00.00005844 6100FF4E                     bsr     countem
 4327 00.00005848 B6FC0000             .loop   cmp     #0,a3
 4328 00.0000584C 67000040                     beq     .done
 4329 00.00005850 2F06                         move.l  d6,-(a7)
 4330 00.00005852 246B0004                     move.l  4(a3),a2
 4331 00.00005856 7A0E                         moveq   #14,d5
 4332 00.00005858 6100FEFA                     bsr     writeoffs
 4333 00.0000585C                              ;
 4334 00.0000585C 201F                         move.l  (a7)+,d0
 4335 00.0000585E 2F2B0004                     move.l  4(a3),-(a7)
 4336 00.00005862 27400004                     move.l  d0,4(a3)
 4337 00.00005866 2406                         move.l  d6,d2
 4338 00.00005868 5882                         addq.l  #4,d2
 4339 00.0000586A 610020C6                     bsr     addoff2
 4340 00.0000586E 7600                         moveq   #0,d3
 4341 00.00005870 162B000A                     move.b  10(a3),d3
 4342 00.00005874 5243                         addq    #1,d3
 4343 00.00005876 08830000                     bclr    #0,d3
 4344 00.0000587A DC83                         add.l   d3,d6
 4345 00.0000587C 240B                         move.l  a3,d2
 4346 00.0000587E 2207                         move.l  d7,d1
 4347 00.00005880 4EAEFFD0                     jsr     write(a6)
 4348 00.00005884 275F0004                     move.l  (a7)+,4(a3)
 4349 00.00005888 2653                         move.l  (a3),a3
 4350 00.0000588A 6000FFBC                     bra     .loop
 4351 00.0000588E 4E75                 .done   rts
 4352 00.00005890                      
 4353 00.00005890 24790000EC36         resconsts       move.l  firstlabel,a2
 4354 00.00005896 7000                         moveq   #0,d0
 4355 00.00005898 B4FC0000             .loop   cmp     #0,a2
 4356 00.0000589C 67000016                     beq     .done
 4357 00.000058A0 0CAA000000010004             cmp.l   #1,4(a2)
 4358 00.000058A8 66000004                     bne     .next
 4359 00.000058AC 5240                         addq    #1,d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 130
blitz2.s


 4360 00.000058AE 2452                 .next   move.l  (a2),a2
 4361 00.000058B0 6000FFE6                     bra     .loop
 4362 00.000058B4 33C00000EC60         .done   move    d0,temp1
 4363 00.000058BA 2207                         move.l  d7,d1
 4364 00.000058BC 243C0000EC60                 move.l  #temp1,d2
 4365 00.000058C2 7602                         moveq   #2,d3
 4366 00.000058C4 5486                         addq.l  #2,d6
 4367 00.000058C6 4EAEFFD0                     jsr     write(a6)
 4368 00.000058CA 24790000EC36                 move.l  firstlabel,a2
 4369 00.000058D0 B4FC0000             .loop2  cmp     #0,a2
 4370 00.000058D4 6700003C                     beq     .done2
 4371 00.000058D8 0CAA000000010004             cmp.l   #1,4(a2)
 4372 00.000058E0 6600002A                     bne     .next2
 4373 00.000058E4 7600                         moveq   #0,d3
 4374 00.000058E6 162A0012                     move.b  18(a2),d3       ;length
 4375 00.000058EA 5243                         addq    #1,d3
 4376 00.000058EC 08830000                     bclr    #0,d3
 4377 00.000058F0 2406                         move.l  d6,d2
 4378 00.000058F2 DC83                         add.l   d3,d6
 4379 00.000058F4 2F12                         move.l  (a2),-(a7)
 4380 00.000058F6 4A92                         tst.l   (a2)
 4381 00.000058F8 67000008                     beq     .nonext
 4382 00.000058FC 2486                         move.l  d6,(a2)
 4383 00.000058FE 61002032                     bsr     addoff2
 4384 00.00005902 240A                 .nonext move.l  a2,d2
 4385 00.00005904 2207                         move.l  d7,d1
 4386 00.00005906 4EAEFFD0                     jsr     write(a6)
 4387 00.0000590A 249F                         move.l  (a7)+,(a2)
 4388 00.0000590C                              ;
 4389 00.0000590C 2452                 .next2  move.l  (a2),a2
 4390 00.0000590E 6000FFC0                     bra     .loop2
 4391 00.00005912 4E75                 .done2  rts
 4392 00.00005914                      
 4393 00.00005914                      loadres ;load in resident structs.....
 4394 00.00005914                              ;
 4395 00.00005914 23CF00002B18                 move.l  a7,errstack
 4396 00.0000591A 23FC0000596800002B1C         move.l  #.next,errcont
 4397 00.00005924 33FCFFFF00008AFE             move    #-1,ezerr
 4398 00.0000592C                              ;
 4399 00.0000592C 6100DFAE                     bsr     freeemup
 4400 00.00005930 610000A8                     bsr     freeres
 4401 00.00005934                              ;
 4402 00.00005934 4BF900011364                 lea     resbuff,a5
 4403 00.0000593A 7C07                         moveq   #7,d6
 4404 00.0000593C 4A15                 .loop   tst.b   (a5)
 4405 00.0000593E 67000028                     beq     .next
 4406 00.00005942 220D                         move.l  a5,d1
 4407 00.00005944 4EAEFF6A                     jsr     loadseg(a6)
 4408 00.00005948 2B400040                     move.l  d0,64(a5)
 4409 00.0000594C 66000006                     bne     .yeah
 4410 00.00005950                              ;
 4411 00.00005950 6100275C                     bsr     reserr
 4412 00.00005954                              ;
 4413 00.00005954                      .yeah   ;res loaded O.K.
 4414 00.00005954                              ;
 4415 00.00005954 2640                         move.l  d0,a3
 4416 00.00005956 D7CB                         add.l   a3,a3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 131
blitz2.s


 4417 00.00005958 D7CB                         add.l   a3,a3
 4418 00.0000595A 584B                         addq    #4,a3   ;start of res
 4419 00.0000595C                              ;
 4420 00.0000595C 61000140                     bsr     fixtypes
 4421 00.00005960 61000100                     bsr     fixmacs
 4422 00.00005964 610000CC                     bsr     fixconsts
 4423 00.00005968                              ;
 4424 00.00005968 4BED0044             .next   lea     68(a5),a5
 4425 00.0000596C 51CEFFCE                     dbf     d6,.loop
 4426 00.00005970                              ;
 4427 00.00005970                              ;check resident clashes!
 4428 00.00005970                              ;
 4429 00.00005970 23FC000059DA00002B1C         move.l  #freeres,errcont
 4430 00.0000597A 26790000E7B8                 move.l  firsttype,a3
 4431 00.00005980 7E0B                         moveq   #11,d7
 4432 00.00005982 6100001C                     bsr     checkclash
 4433 00.00005986 26790000EC2E                 move.l  firstmacro,a3
 4434 00.0000598C 7E0D                         moveq   #13,d7
 4435 00.0000598E 61000010                     bsr     checkclash
 4436 00.00005992 26790000E94A                 move.l  firstconst,a3
 4437 00.00005998 7E19                         moveq   #25,d7
 4438 00.0000599A 61000004                     bsr     checkclash
 4439 00.0000599E 4E75                         rts
 4440 00.000059A0                      
 4441 00.000059A0 284B                 checkclash      move.l  a3,a4
 4442 00.000059A2 B8FC0000             .loop   cmp     #0,a4
 4443 00.000059A6 67000030                     beq     .done
 4444 00.000059AA 41F90000EC68                 lea     namebuff,a0
 4445 00.000059B0 43F47000                     lea     0(a4,d7),a1
 4446 00.000059B4 74FF                         moveq   #-1,d2
 4447 00.000059B6 5242                 .loop2  addq    #1,d2
 4448 00.000059B8 10D9                         move.b  (a1)+,(a0)+
 4449 00.000059BA 6600FFFA                     bne     .loop2
 4450 00.000059BE 244B                         move.l  a3,a2
 4451 00.000059C0 6100331C             .more   bsr     findlab
 4452 00.000059C4 6600000C                     bne     .next   ;not found
 4453 00.000059C8 B9CA                         cmp.l   a2,a4
 4454 00.000059CA 660026CA                     bne     clasherr
 4455 00.000059CE 6000FFF0                     bra     .more
 4456 00.000059D2 2854                 .next   move.l  (a4),a4
 4457 00.000059D4 6000FFCC                     bra     .loop
 4458 00.000059D8 4E75                 .done   rts
 4459 00.000059DA                      
 4460 00.000059DA                      freeres ;
 4461 00.000059DA 2C7900000154                 move.l  dos,a6
 4462 00.000059E0 41F90000E7B8                 lea     firsttype,a0
 4463 00.000059E6 23C80000E34E                 move.l  a0,lastrestype
 4464 00.000059EC 4290                         clr.l   (a0)
 4465 00.000059EE 41F90000EC2E                 lea     firstmacro,a0
 4466 00.000059F4 23C80000E34A                 move.l  a0,lastresmac
 4467 00.000059FA 4290                         clr.l   (a0)
 4468 00.000059FC 41F90000EC36                 lea     firstlabel,a0
 4469 00.00005A02 23C80000E346                 move.l  a0,lastrescon
 4470 00.00005A08 4290                         clr.l   (a0)
 4471 00.00005A0A 42790000E352                 clr     rescnt
 4472 00.00005A10                              ;
 4473 00.00005A10 45F900011364         freeres2        lea     resbuff,a2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 132
blitz2.s


 4474 00.00005A16 7407                         moveq   #7,d2
 4475 00.00005A18 222A0040             .loop   move.l  64(a2),d1
 4476 00.00005A1C 6700000A                     beq     .next
 4477 00.00005A20 42AA0040                     clr.l   64(a2)
 4478 00.00005A24 4EAEFF64                     jsr     unloadseg(a6)
 4479 00.00005A28 45EA0044             .next   lea     68(a2),a2
 4480 00.00005A2C 51CAFFEA                     dbf     d2,.loop
 4481 00.00005A30 4E75                         rts
 4482 00.00005A32                      
 4483 00.00005A32 321B                 fixconsts       move    (a3)+,d1
 4484 00.00005A34 6700002A                     beq     .done
 4485 00.00005A38 24790000E346                 move.l  lastrescon,a2
 4486 00.00005A3E 248B                         move.l  a3,(a2)
 4487 00.00005A40 5341                         subq    #1,d1
 4488 00.00005A42 244B                 .loop   move.l  a3,a2
 4489 00.00005A44 2653                         move.l  (a3),a3
 4490 00.00005A46 51C9FFFA                     dbf     d1,.loop
 4491 00.00005A4A 23CA0000E346                 move.l  a2,lastrescon
 4492 00.00005A50 264A                         move.l  a2,a3
 4493 00.00005A52 7000                         moveq   #0,d0
 4494 00.00005A54 102B0012                     move.b  18(a3),d0
 4495 00.00005A58 5240                         addq    #1,d0
 4496 00.00005A5A 08800000                     bclr    #0,d0
 4497 00.00005A5E D6C0                         add     d0,a3
 4498 00.00005A60 4E75                 .done   rts
 4499 00.00005A62                      
 4500 00.00005A62 321B                 fixmacs move    (a3)+,d1
 4501 00.00005A64 67000036                     beq     .done
 4502 00.00005A68 24790000E34A                 move.l  lastresmac,a2
 4503 00.00005A6E 248B                         move.l  a3,(a2)
 4504 00.00005A70 5341                         subq    #1,d1
 4505 00.00005A72 244B                 .loop   move.l  a3,a2
 4506 00.00005A74 2653                         move.l  (a3),a3
 4507 00.00005A76 51C9FFFA                     dbf     d1,.loop
 4508 00.00005A7A 23CA0000E34A                 move.l  a2,lastresmac
 4509 00.00005A80 264A                         move.l  a2,a3
 4510 00.00005A82 7000                         moveq   #0,d0
 4511 00.00005A84 102B000C                     move.b  12(a3),d0
 4512 00.00005A88 5240                         addq    #1,d0
 4513 00.00005A8A 08800000                     bclr    #0,d0
 4514 00.00005A8E 322B0008                     move    8(a3),d1
 4515 00.00005A92 5241                         addq    #1,d1
 4516 00.00005A94 08810000                     bclr    #0,d1
 4517 00.00005A98 D6C0                         add     d0,a3
 4518 00.00005A9A D6C1                         add     d1,a3
 4519 00.00005A9C 4E75                 .done   rts
 4520 00.00005A9E                      
 4521 00.00005A9E                      fixtypes        ;fix up all load types
 4522 00.00005A9E 321B                         move    (a3)+,d1        ;number of types to do
 4523 00.00005AA0 67000096                     beq     .done
 4524 00.00005AA4 3F01                         move    d1,-(a7)
 4525 00.00005AA6 5341                         subq    #1,d1
 4526 00.00005AA8 24790000E34E                 move.l  lastrestype,a2
 4527 00.00005AAE 2F0A                         move.l  a2,-(a7)
 4528 00.00005AB0 2013                 .loop   move.l  (a3),d0 ;skip through offsets
 4529 00.00005AB2 67000008                     beq     .loopme
 4530 00.00005AB6 2640                         move.l  d0,a3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 133
blitz2.s


 4531 00.00005AB8 6000FFF6                     bra     .loop
 4532 00.00005ABC 102B000E             .loopme move.b  14(a3),d0
 4533 00.00005AC0 5240                         addq    #1,d0
 4534 00.00005AC2 08800000                     bclr    #0,d0
 4535 00.00005AC6 D6C0                         add     d0,a3   ;a3=type
 4536 00.00005AC8 248B                         move.l  a3,(a2) ;link
 4537 00.00005ACA 244B                         move.l  a3,a2
 4538 00.00005ACC 7000                         moveq   #0,d0
 4539 00.00005ACE 102B000A                     move.b  10(a3),d0
 4540 00.00005AD2 5240                         addq    #1,d0
 4541 00.00005AD4 08800000                     bclr    #0,d0
 4542 00.00005AD8 D6C0                         add     d0,a3   ;next offset
 4543 00.00005ADA 51C9FFD4                     dbf     d1,.loop
 4544 00.00005ADE                              ;
 4545 00.00005ADE                              ;Now, Fix up pointers to Stuff!
 4546 00.00005ADE                              ;
 4547 00.00005ADE 205F                         move.l  (a7)+,a0
 4548 00.00005AE0 2050                         move.l  (a0),a0
 4549 00.00005AE2 B0FC0000             .floop  cmp     #0,a0
 4550 00.00005AE6 67000042                     beq     .fdone
 4551 00.00005AEA 22680004                     move.l  4(a0),a1        ;first offset!
 4552 00.00005AEE                              ;
 4553 00.00005AEE B2FC0000             .floop2 cmp     #0,a1
 4554 00.00005AF2 67000030                     beq     .fofd
 4555 00.00005AF6                              ;
 4556 00.00005AF6 3029000A                     move    10(a1),d0       ;number of type
 4557 00.00005AFA 28790000E760                 move.l  alltypes,a4
 4558 00.00005B00 B07C0007                     cmp     #7,d0
 4559 00.00005B04 65000008                     bcs     .fsys
 4560 00.00005B08 90790000E352                 sub     rescnt,d0
 4561 00.00005B0E 5340                 .fsys   subq    #1,d0
 4562 00.00005B10 6B000008                     bmi     .fdone2
 4563 00.00005B14 2854                 .floop3 move.l  (a4),a4
 4564 00.00005B16 51C8FFFC                     dbf     d0,.floop3
 4565 00.00005B1A 234C000A             .fdone2 move.l  a4,10(a1)
 4566 00.00005B1E 2251                         move.l  (a1),a1
 4567 00.00005B20 6000FFCC                     bra     .floop2
 4568 00.00005B24 2050                 .fofd   move.l  (a0),a0
 4569 00.00005B26 6000FFBA                     bra     .floop
 4570 00.00005B2A                              ;
 4571 00.00005B2A 301F                 .fdone  move    (a7)+,d0
 4572 00.00005B2C D1790000E352                 add     d0,rescnt
 4573 00.00005B32 23CA0000E34E                 move.l  a2,lastrestype
 4574 00.00005B38                              ;
 4575 00.00005B38 4E75                 .done   rts
 4576 00.00005B3A                      
 4577 00.00005B3A 3F39000006AE         runerropts      move    optreq2ga1+12,-(a7)
 4578 00.00005B40 3F39000006DA                 move    optreq2ga2+12,-(a7)
 4579 00.00005B46 3F3900000706                 move    optreq2ga3+12,-(a7)
 4580 00.00005B4C 3F3900000732                 move    optreq2ga4+12,-(a7)
 4581 00.00005B52 3F390000075E                 move    optreq2ga5+12,-(a7)
 4582 00.00005B58 3F390000078A                 move    optreq2ga6+12,-(a7)
 4583 00.00005B5E 3F39000007B6                 move    optreq2ga7+12,-(a7)
 4584 00.00005B64                              ;
 4585 00.00005B64 41F90000022A                 lea     optreq2,a0
 4586 00.00005B6A 22790000E372                 move.l  comdata,a1
 4587 00.00005B70 2251                         move.l  (a1),a1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 134
blitz2.s


 4588 00.00005B72 4E91                         jsr     (a1)
 4589 00.00005B74                              ;
 4590 00.00005B74 20790000E372         .loop2  move.l  comdata,a0
 4591 00.00005B7A 20680008                     move.l  8(a0),a0
 4592 00.00005B7E 4E90                         jsr     (a0)    ;getinput
 4593 00.00005B80 BE7CFFFF                     cmp     #-1,d7
 4594 00.00005B84 6600FFEE                     bne     .loop2
 4595 00.00005B88 BC7C0008                     cmp     #8,d6
 4596 00.00005B8C 6500FFE6                     bcs     .loop2
 4597 00.00005B90 66000008                     bne     .cancel2
 4598 00.00005B94 4FEF000E                     lea     14(a7),a7
 4599 00.00005B98 4E75                         rts
 4600 00.00005B9A 33DF000007B6         .cancel2        move    (a7)+,optreq2ga7+12
 4601 00.00005BA0 33DF0000078A                 move    (a7)+,optreq2ga6+12
 4602 00.00005BA6 33DF0000075E                 move    (a7)+,optreq2ga5+12
 4603 00.00005BAC 33DF00000732                 move    (a7)+,optreq2ga4+12
 4604 00.00005BB2 33DF00000706                 move    (a7)+,optreq2ga3+12
 4605 00.00005BB8 33DF000006DA                 move    (a7)+,optreq2ga2+12
 4606 00.00005BBE 33DF000006AE                 move    (a7)+,optreq2ga1+12
 4607 00.00005BC4 4E75                         rts
 4608 00.00005BC6                      
 4609 00.00005BC6                      makeasmtab      ;make a table of pointers to ASM data
 4610 00.00005BC6                              ;
 4611 00.00005BC6 41F90000087A                 lea     tokens,a0
 4612 00.00005BCC 303C003A                     move    #lnum-2,d0
 4613 00.00005BD0 2050                 .loop   move.l  (a0),a0
 4614 00.00005BD2 51C8FFFC                     dbf     d0,.loop
 4615 00.00005BD6 303C0076                     move    #tnum-fnum-1,d0
 4616 00.00005BDA 227C0000253A                 move.l  #asmpnts,a1
 4617 00.00005BE0 45E80006             .loop2  lea     6(a0),a2
 4618 00.00005BE4 4A1A                 .loop3  tst.b   (a2)+
 4619 00.00005BE6 6600FFFC                     bne     .loop3
 4620 00.00005BEA 4A1A                 .loop4  tst.b   (a2)+
 4621 00.00005BEC 6600FFFC                     bne     .loop4
 4622 00.00005BF0 524A                         addq    #1,a2
 4623 00.00005BF2 C38A                         exg     d1,a2
 4624 00.00005BF4 08810000                     bclr    #0,d1
 4625 00.00005BF8 C38A                         exg     d1,a2
 4626 00.00005BFA 22CA                         move.l  a2,(a1)+
 4627 00.00005BFC 2050                         move.l  (a0),a0
 4628 00.00005BFE 51C8FFE0                     dbf     d0,.loop2
 4629 00.00005C02 4E75                         rts     
 4630 00.00005C04                      
 4631 00.00005C04                      getimm  ;get an immediate value
 4632 00.00005C04 6100045C                     bsr     asmconst
 4633 00.00005C08 7A0B                         moveq   #11,d5
 4634 00.00005C0A 4E75                         rts
 4635 00.00005C0C                      
 4636 00.00005C0C 0000                 unmove  dc      0
 4637 00.00005C0E                      
 4638 00.00005C0E                      regmovems       ;d4=reg#
 4639 00.00005C0E 323C48E7                     move    #$48e7,d1
 4640 00.00005C12 610038F8                     bsr     pokewd  ;movem.l -(a7)
 4641 00.00005C16 343C000F                     move    #15,d2
 4642 00.00005C1A 9444                         sub     d4,d2
 4643 00.00005C1C 72FF                         moveq   #-1,d1
 4644 00.00005C1E 0581                         bclr    d2,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 135
blitz2.s


 4645 00.00005C20 610038EA                     bsr     pokewd
 4646 00.00005C24 72FF                         moveq   #-1,d1
 4647 00.00005C26 0981                         bclr    d4,d1
 4648 00.00005C28 33C100005C0C                 move    d1,unmove
 4649 00.00005C2E 4E75                         rts
 4650 00.00005C30                              
 4651 00.00005C30 323C4CDF             dounmove        move    #$4cdf,d1
 4652 00.00005C34 610038D6                     bsr     pokewd
 4653 00.00005C38 323AFFD2                     move    unmove(pc),d1
 4654 00.00005C3C 600038CE                     bra     pokewd
 4655 00.00005C40                      
 4656 00.00005C40                              ;if bit 15 of d2 then code has been generated for
 4657 00.00005C40                              ;address of thing in a2. else d3=offset from a5
 4658 00.00005C40                              ;for simple variable.
 4659 00.00005C40                              ;
 4660 00.00005C40                              ;d2 & ff=type. 0=struct address
 4661 00.00005C40                              ;
 4662 00.00005C40                              ;bit 14 of d2=1 if result is a pointer
 4663 00.00005C40                              ;
 4664 00.00005C40                      
 4665 00.00005C40 610000E0             doputreg        bsr     getreg2
 4666 00.00005C44 B07C002C                     cmp     #',',d0
 4667 00.00005C48 66002798                     bne     syntaxerr
 4668 00.00005C4C 223C48E7FFFE                 move.l  #$48e7fffe,d1   ;movem to stack
 4669 00.00005C52 610038B0                     bsr     pokel
 4670 00.00005C56 3204                         move    d4,d1
 4671 00.00005C58 00412F00                     or      #$2f00,d1
 4672 00.00005C5C 610038AE                     bsr     pokewd
 4673 00.00005C60                              ;
 4674 00.00005C60 61001FAC                     bsr     getchar3
 4675 00.00005C64 61003B42                     bsr     getvname
 4676 00.00005C68 610031D2                     bsr     fetchvar
 4677 00.00005C6C 610034B4                     bsr     calcvar
 4678 00.00005C70 0802000E                     btst    #14,d2
 4679 00.00005C74 6700000A                     beq     .notp
 4680 00.00005C78 143C0003             .issa   move.b  #3,d2
 4681 00.00005C7C 60000010                     bra     .pd
 4682 00.00005C80 4A02                 .notp   tst.b   d2
 4683 00.00005C82 6700FFF4                     beq     .issa
 4684 00.00005C86 B43C0007                     cmp.b   #7,d2
 4685 00.00005C8A 6700FFEC                     beq     .issa
 4686 00.00005C8E 0802000F             .pd     btst    #15,d2
 4687 00.00005C92 66000010                     bne     .nsimp
 4688 00.00005C96                              ;
 4689 00.00005C96 323C45ED                     move    #$45ed,d1       ;lea x(a5),a2
 4690 00.00005C9A 61003870                     bsr     pokewd
 4691 00.00005C9E 3203                         move    d3,d1
 4692 00.00005CA0 6100386A                     bsr     pokewd
 4693 00.00005CA4                              ;
 4694 00.00005CA4 323C201F             .nsimp  move    #$201f,d1       ;move.l (a7)+,d0
 4695 00.00005CA8 61003862                     bsr     pokewd
 4696 00.00005CAC 323C1480                     move    #$1480,d1
 4697 00.00005CB0 B43C0001                     cmp.b   #1,d2
 4698 00.00005CB4 67000012                     beq     .pg
 4699 00.00005CB8 0A413000                     eor     #$3000,d1
 4700 00.00005CBC B43C0002                     cmp.b   #2,d2
 4701 00.00005CC0 66000006                     bne     .pg
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 136
blitz2.s


 4702 00.00005CC4 00411000                     or      #$1000,d1
 4703 00.00005CC8 61003842             .pg     bsr     pokewd
 4704 00.00005CCC 223C4CDF7FFF                 move.l  #$4cdf7fff,d1
 4705 00.00005CD2 60003830                     bra     pokel
 4706 00.00005CD6                      
 4707 00.00005CD6 6100004A             dosetreg        bsr     getreg2
 4708 00.00005CDA B07C002C                     cmp     #',',d0
 4709 00.00005CDE 66002702                     bne     syntaxerr
 4710 00.00005CE2 6100FF2A                     bsr     regmovems
 4711 00.00005CE6 3F04                         move    d4,-(a7)
 4712 00.00005CE8 7403                         moveq   #3,d2   ;get a long
 4713 00.00005CEA 61003CA0                     bsr     eval
 4714 00.00005CEE 321F                         move    (a7)+,d1
 4715 00.00005CF0 67000028                     beq     .done
 4716 00.00005CF4 B27C0008                     cmp     #8,d1
 4717 00.00005CF8 64000012                     bcc     .addreg
 4718 00.00005CFC E149                         lsl     #8,d1
 4719 00.00005CFE E349                         lsl     #1,d1
 4720 00.00005D00 00412000                     or      #$2000,d1
 4721 00.00005D04 61003806                     bsr     pokewd
 4722 00.00005D08 60000010                     bra     .done
 4723 00.00005D0C 5141                 .addreg subq    #8,d1
 4724 00.00005D0E E149                         lsl     #8,d1
 4725 00.00005D10 E349                         lsl     #1,d1
 4726 00.00005D12 00412040                     or      #$2040,d1
 4727 00.00005D16 610037F4                     bsr     pokewd
 4728 00.00005D1A 6000FF14             .done   bra     dounmove
 4729 00.00005D1E                      
 4730 00.00005D1E 61001EEE             getreg  bsr     getchar3
 4731 00.00005D22 00400020             getreg2 or      #32,d0
 4732 00.00005D26 B07C0064                     cmp     #'d',d0
 4733 00.00005D2A 67000022                     beq     getan3
 4734 00.00005D2E B07C0061                     cmp     #'a',d0
 4735 00.00005D32 660026AE                     bne     syntaxerr
 4736 00.00005D36 61000016                     bsr     getan3
 4737 00.00005D3A 5044                         addq    #8,d4
 4738 00.00005D3C 4E75                         rts
 4739 00.00005D3E                      
 4740 00.00005D3E 61001ECE             getan   bsr     getchar3
 4741 00.00005D42 00400020                     or      #32,d0
 4742 00.00005D46 B07C0061             getan2  cmp     #'a',d0
 4743 00.00005D4A 66002696                     bne     syntaxerr
 4744 00.00005D4E 61001EBE             getan3  bsr     getchar3
 4745 00.00005D52 04400030                     sub     #48,d0
 4746 00.00005D56 6B00268A                     bmi     syntaxerr
 4747 00.00005D5A B07C0007                     cmp     #7,d0
 4748 00.00005D5E 62002682                     bhi     syntaxerr
 4749 00.00005D62 3800                         move    d0,d4
 4750 00.00005D64 60001EA8                     bra     getchar3
 4751 00.00005D68                      
 4752 00.00005D68 5044                 getmovem2       addq    #8,d4
 4753 00.00005D6A 7A00                 getmovem        moveq   #0,d5   ;bits for reg
 4754 00.00005D6C 04440030                     sub     #48,d4
 4755 00.00005D70                              ;
 4756 00.00005D70 B07C002D             .loop   cmp     #'-',d0
 4757 00.00005D74 67000028                     beq     .range
 4758 00.00005D78 B07C002F                     cmp     #'/',d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 137
blitz2.s


 4759 00.00005D7C 6700000E                     beq     .one
 4760 00.00005D80 60002660                     bra     syntaxerr
 4761 00.00005D84 09C5                 .done2  bset    d4,d5
 4762 00.00005D86 3805                 .done   move    d5,d4
 4763 00.00005D88 7A0F                         moveq   #15,d5
 4764 00.00005D8A 4E75                         rts
 4765 00.00005D8C 09C5                 .one    bset    d4,d5
 4766 00.00005D8E 6100FF8E                     bsr     getreg
 4767 00.00005D92 6100022C                     bsr     tstend2
 4768 00.00005D96 6600FFD8                     bne     .loop
 4769 00.00005D9A 6000FFE8                     bra     .done2
 4770 00.00005D9E 3204                 .range  move    d4,d1   ;from
 4771 00.00005DA0 6100FF7C                     bsr     getreg
 4772 00.00005DA4 B244                         cmp     d4,d1
 4773 00.00005DA6 63000004                     bls     .loop2
 4774 00.00005DAA C941                         exg     d4,d1
 4775 00.00005DAC 03C5                 .loop2  bset    d1,d5
 4776 00.00005DAE 5241                         addq    #1,d1
 4777 00.00005DB0 B244                         cmp     d4,d1
 4778 00.00005DB2 6300FFF8                     bls     .loop2
 4779 00.00005DB6 61000208                     bsr     tstend2
 4780 00.00005DBA 6600FFB4                     bne     .loop
 4781 00.00005DBE 6000FFC6                     bra     .done
 4782 00.00005DC2                      
 4783 00.00005DC2                      getea   ;evaluate the ea of an asm bit
 4784 00.00005DC2                              ;
 4785 00.00005DC2 284D                         move.l  a5,a4
 4786 00.00005DC4 61001E48                     bsr     getchar3
 4787 00.00005DC8 B07C0023                     cmp     #'#',d0
 4788 00.00005DCC 6700FE36                     beq     getimm
 4789 00.00005DD0 B07C0028                     cmp     #'(',d0
 4790 00.00005DD4 67000028                     beq     .ind
 4791 00.00005DD8 B07C002D                     cmp     #'-',d0
 4792 00.00005DDC 66000042                     bne     .more
 4793 00.00005DE0 61001E2C                     bsr     getchar3
 4794 00.00005DE4 B07C0028                     cmp     #'(',d0
 4795 00.00005DE8 66000164                     bne     .notccr
 4796 00.00005DEC 6100FF50                     bsr     getan
 4797 00.00005DF0 B07C0029                     cmp     #')',d0
 4798 00.00005DF4 660025EC                     bne     syntaxerr
 4799 00.00005DF8 7A04                         moveq   #4,d5
 4800 00.00005DFA 60001E12                     bra     getchar3
 4801 00.00005DFE                              ;
 4802 00.00005DFE 6100FF3E             .ind    bsr     getan
 4803 00.00005E02 B07C0029                     cmp     #')',d0
 4804 00.00005E06 660025DA                     bne     syntaxerr
 4805 00.00005E0A 61001E02                     bsr     getchar3
 4806 00.00005E0E B07C002B                     cmp     #'+',d0
 4807 00.00005E12 67000006                     beq     .postinc
 4808 00.00005E16 7A02                         moveq   #2,d5
 4809 00.00005E18 4E75                         rts
 4810 00.00005E1A 7A03                 .postinc        moveq   #3,d5
 4811 00.00005E1C 60001DF0                     bra     getchar3
 4812 00.00005E20                      
 4813 00.00005E20 00400020             .more   or      #32,d0
 4814 00.00005E24 3200                         move    d0,d1   ;first
 4815 00.00005E26 61001DE6                     bsr     getchar3        ;get second
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 138
blitz2.s


 4816 00.00005E2A B27C0064                     cmp     #'d',d1
 4817 00.00005E2E 6600003C                     bne     .notdn
 4818 00.00005E32 B07C0030                     cmp     #'0',d0
 4819 00.00005E36 65000076                     bcs     .notan
 4820 00.00005E3A B07C0037                     cmp     #'7',d0
 4821 00.00005E3E 6200006E                     bhi     .notan
 4822 00.00005E42 3800                         move    d0,d4
 4823 00.00005E44 61001DC8                     bsr     getchar3
 4824 00.00005E48 61000176                     bsr     tstend2
 4825 00.00005E4C 67000016                     beq     .dn
 4826 00.00005E50 B07C002D                     cmp     #'-',d0
 4827 00.00005E54 6700FF14                     beq     getmovem
 4828 00.00005E58 B07C002F                     cmp     #'/',d0
 4829 00.00005E5C 6700FF0C                     beq     getmovem
 4830 00.00005E60 60000056                     bra     .notan2
 4831 00.00005E64                              ;
 4832 00.00005E64 7A00                 .dn     moveq   #0,d5
 4833 00.00005E66 04440030                     sub     #48,d4
 4834 00.00005E6A 4E75                         rts
 4835 00.00005E6C                              ;
 4836 00.00005E6C B27C0061             .notdn  cmp     #'a',d1
 4837 00.00005E70 6600003C                     bne     .notan
 4838 00.00005E74                              ;
 4839 00.00005E74 B07C0030                     cmp     #'0',d0
 4840 00.00005E78 65000034                     bcs     .notan
 4841 00.00005E7C B07C0037                     cmp     #'7',d0
 4842 00.00005E80 6200002C                     bhi     .notan
 4843 00.00005E84 3800                         move    d0,d4
 4844 00.00005E86 61001D86                     bsr     getchar3
 4845 00.00005E8A 61000134                     bsr     tstend2
 4846 00.00005E8E 67000016                     beq     .an
 4847 00.00005E92 B07C002D                     cmp     #'-',d0
 4848 00.00005E96 6700FED0                     beq     getmovem2
 4849 00.00005E9A B07C002F                     cmp     #'/',d0
 4850 00.00005E9E 6700FEC8                     beq     getmovem2
 4851 00.00005EA2 60000014                     bra     .notan2
 4852 00.00005EA6                      .an     ;
 4853 00.00005EA6                              ;An
 4854 00.00005EA6                              ;
 4855 00.00005EA6 7A01                         moveq   #1,d5
 4856 00.00005EA8 04440030                     sub     #48,d4
 4857 00.00005EAC 4E75                         rts
 4858 00.00005EAE                              ;
 4859 00.00005EAE 00400020             .notan  or      #32,d0
 4860 00.00005EB2 3800                         move    d0,d4
 4861 00.00005EB4 61001D58                     bsr     getchar3        ;get third
 4862 00.00005EB8                      .notan2 ;d1,d4,d0=chars
 4863 00.00005EB8 61000106                     bsr     tstend2
 4864 00.00005EBC 66000034                     bne     .notsx
 4865 00.00005EC0 B27C0073                     cmp     #'s',d1
 4866 00.00005EC4 6600002C                     bne     .notsx
 4867 00.00005EC8 B87C0070                     cmp     #'p',d4
 4868 00.00005ECC 66000010                     bne     .notsp2
 4869 00.00005ED0 610000EE                     bsr     tstend2
 4870 00.00005ED4 66000078                     bne     .notccr
 4871 00.00005ED8                              ;
 4872 00.00005ED8                              ;Sp
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 139
blitz2.s


 4873 00.00005ED8                              ;
 4874 00.00005ED8 7807                         moveq   #7,d4
 4875 00.00005EDA 7A01                         moveq   #1,d5
 4876 00.00005EDC 4E75                         rts
 4877 00.00005EDE B87C0072             .notsp2 cmp     #'r',d4
 4878 00.00005EE2 6600006A                     bne     .notccr
 4879 00.00005EE6 610000D8                     bsr     tstend2
 4880 00.00005EEA 66000062                     bne     .notccr
 4881 00.00005EEE                              ;
 4882 00.00005EEE                              ;Sr
 4883 00.00005EEE                              ;
 4884 00.00005EEE 7A0D                         moveq   #13,d5
 4885 00.00005EF0 4E75                         rts
 4886 00.00005EF2 00400020             .notsx  or      #32,d0
 4887 00.00005EF6 B27C0063                     cmp     #'c',d1
 4888 00.00005EFA 66000026                     bne     .notccr0
 4889 00.00005EFE B87C0063                     cmp     #'c',d4
 4890 00.00005F02 6600004A                     bne     .notccr
 4891 00.00005F06 B07C0072                     cmp     #'r',d0
 4892 00.00005F0A 66000042                     bne     .notccr
 4893 00.00005F0E 61001CFE                     bsr     getchar3
 4894 00.00005F12 6700000A                     beq     .ccr
 4895 00.00005F16 B07C002C                     cmp     #',',d0
 4896 00.00005F1A 66000032                     bne     .notccr
 4897 00.00005F1E                      .ccr    ;
 4898 00.00005F1E                              ;ccr
 4899 00.00005F1E                              ;
 4900 00.00005F1E 7A0C                         moveq   #12,d5
 4901 00.00005F20 4E75                         rts
 4902 00.00005F22                              ;
 4903 00.00005F22 B27C0075             .notccr0        cmp     #'u',d1
 4904 00.00005F26 66000026                     bne     .notccr
 4905 00.00005F2A B87C0073                     cmp     #'s',d4
 4906 00.00005F2E 6600001E                     bne     .notccr
 4907 00.00005F32 B07C0070                     cmp     #'p',d0
 4908 00.00005F36 66000016                     bne     .notccr
 4909 00.00005F3A 61001CD2                     bsr     getchar3
 4910 00.00005F3E 6700000A                     beq     .usp
 4911 00.00005F42 B07C002C                     cmp     #',',d0
 4912 00.00005F46 66000006                     bne     .notccr
 4913 00.00005F4A 7A0E                 .usp    moveq   #14,d5
 4914 00.00005F4C 4E75                         rts
 4915 00.00005F4E                      .notccr ;
 4916 00.00005F4E                              ;not anything - must be a label or abs address of some kind
 4917 00.00005F4E                              ;
 4918 00.00005F4E 2A4C                         move.l  a4,a5
 4919 00.00005F50 61000110                     bsr     asmconst
 4920 00.00005F54                              ;
 4921 00.00005F54 6100006A                     bsr     tstend2
 4922 00.00005F58 6700005E                     beq     .absl
 4923 00.00005F5C B07C002E                     cmp     #'.',d0
 4924 00.00005F60 6700003E                     beq     .absx
 4925 00.00005F64 B07C0028                     cmp     #'(',d0
 4926 00.00005F68 66002478                     bne     syntaxerr
 4927 00.00005F6C 61001CA0                     bsr     getchar3
 4928 00.00005F70 00400020                     or      #32,d0
 4929 00.00005F74 B07C0070                     cmp     #'p',d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 140
blitz2.s


 4930 00.00005F78 6600001E                     bne     .notpcrel
 4931 00.00005F7C 61001C90                     bsr     getchar3
 4932 00.00005F80 00400020                     or      #32,d0
 4933 00.00005F84 B07C0063                     cmp     #'c',d0
 4934 00.00005F88 66002458                     bne     syntaxerr
 4935 00.00005F8C 61001C80                     bsr     getchar3
 4936 00.00005F90 61000042                     bsr     getrest
 4937 00.00005F94 5845                         addq    #4,d5
 4938 00.00005F96 4E75                         rts
 4939 00.00005F98                      
 4940 00.00005F98 6100FDAC             .notpcrel       bsr     getan2
 4941 00.00005F9C 60000036                     bra     getrest
 4942 00.00005FA0                      
 4943 00.00005FA0 61001C6C             .absx   bsr     getchar3
 4944 00.00005FA4 00400020                     or      #32,d0
 4945 00.00005FA8 B07C0077                     cmp     #'w',d0
 4946 00.00005FAC 6700000E                     beq     .absw
 4947 00.00005FB0 B07C006C                     cmp     #'l',d0
 4948 00.00005FB4 6600242C                     bne     syntaxerr
 4949 00.00005FB8 7A08                 .absl   moveq   #8,d5
 4950 00.00005FBA 4E75                         rts
 4951 00.00005FBC 7A07                 .absw   moveq   #7,d5
 4952 00.00005FBE 4E75                         rts
 4953 00.00005FC0                      
 4954 00.00005FC0 4A40                 tstend2 tst     d0
 4955 00.00005FC2 6700000E                     beq     .ok
 4956 00.00005FC6 B07C003A                     cmp     #':',d0
 4957 00.00005FCA 67000006                     beq     .ok
 4958 00.00005FCE B07C002C                     cmp     #',',d0
 4959 00.00005FD2 4E75                 .ok     rts
 4960 00.00005FD4                      
 4961 00.00005FD4 B07C002C             getrest cmp     #',',d0
 4962 00.00005FD8 6600007A                     bne     .dis
 4963 00.00005FDC 61001C30                     bsr     getchar3
 4964 00.00005FE0 00400020                     or      #32,d0
 4965 00.00005FE4 7200                         moveq   #0,d1
 4966 00.00005FE6 B07C0064                     cmp     #'d',d0
 4967 00.00005FEA 6700000E                     beq     .ianxi
 4968 00.00005FEE B07C0061                     cmp     #'a',d0
 4969 00.00005FF2 660023EE                     bne     syntaxerr
 4970 00.00005FF6 08C1000F                     bset    #15,d1
 4971 00.00005FFA 61001C12             .ianxi  bsr     getchar3
 4972 00.00005FFE 04400030                     sub     #48,d0
 4973 00.00006002 6B0023DE                     bmi     syntaxerr
 4974 00.00006006 B07C0007                     cmp     #7,d0
 4975 00.0000600A 620023D6                     bhi     syntaxerr
 4976 00.0000600E E148                         lsl     #8,d0
 4977 00.00006010 E948                         lsl     #4,d0
 4978 00.00006012 8240                         or      d0,d1
 4979 00.00006014 61001BF8                     bsr     getchar3
 4980 00.00006018 B07C002E                     cmp     #'.',d0
 4981 00.0000601C 66000022                     bne     .ok2
 4982 00.00006020 61001BEC                     bsr     getchar3
 4983 00.00006024 00400020                     or      #32,d0
 4984 00.00006028 B07C0077                     cmp     #'w',d0
 4985 00.0000602C 6700000E                     beq     .ok
 4986 00.00006030 B07C006C                     cmp     #'l',d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 141
blitz2.s


 4987 00.00006034 660023AC                     bne     syntaxerr
 4988 00.00006038 08C1000B                     bset    #11,d1
 4989 00.0000603C 61001BD0             .ok     bsr     getchar3
 4990 00.00006040 B07C0029             .ok2    cmp     #')',d0
 4991 00.00006044 6600239C                     bne     syntaxerr
 4992 00.00006048 33C10000E922                 move    d1,extraword
 4993 00.0000604E 7A06                         moveq   #6,d5
 4994 00.00006050 60001BBC                     bra     getchar3
 4995 00.00006054 B07C0029             .dis    cmp     #')',d0
 4996 00.00006058 66002388                     bne     syntaxerr
 4997 00.0000605C 7A05                         moveq   #5,d5
 4998 00.0000605E 60001BAE                     bra     getchar3
 4999 00.00006062                              
 5000 00.00006062                      asmconst        ;store the text of the eval into asmfirst...
 5001 00.00006062                              ;
 5002 00.00006062                              ;text till '(','.'
 5003 00.00006062                              ;
 5004 00.00006062 20790000E928                 move.l  asmbuff,a0
 5005 00.00006068 32390000EC18                 move    numincs,d1
 5006 00.0000606E 82790000393C                 or      macmask,d1
 5007 00.00006074 30C1                         move    d1,(a0)+        ;flag!
 5008 00.00006076 66000038                     bne     copyconst
 5009 00.0000607A 2F0D                         move.l  a5,-(a7)
 5010 00.0000607C 61000032                     bsr     copyconst
 5011 00.00006080 20790000E928                 move.l  asmbuff,a0
 5012 00.00006086 B27C0004                     cmp     #4,d1
 5013 00.0000608A 6300001C                     bls     .leave
 5014 00.0000608E 4A79000060AE                 tst     lc
 5015 00.00006094 66000012                     bne     .leave
 5016 00.00006098                              ;
 5017 00.00006098 5448                         addq    #2,a0
 5018 00.0000609A 20DF                         move.l  (a7)+,(a0)+
 5019 00.0000609C 4210                         clr.b   (a0)
 5020 00.0000609E 33FC00040000E92E             move    #4,asmlen2      ;pointer + 0
 5021 00.000060A6 4E75                         rts
 5022 00.000060A8 4650                 .leave  not     (a0)
 5023 00.000060AA 584F                         addq    #4,a7
 5024 00.000060AC 4E75                         rts
 5025 00.000060AE                              
 5026 00.000060AE 0000                 lc      dc      0
 5027 00.000060B0                      
 5028 00.000060B0                      copyconst       ;
 5029 00.000060B0 4279000060AE                 clr     lc
 5030 00.000060B6 7200                         moveq   #0,d1
 5031 00.000060B8 5241                 .loop   addq    #1,d1
 5032 00.000060BA 61001B52                     bsr     getchar3
 5033 00.000060BE 67000062                     beq     .done
 5034 00.000060C2                              ;
 5035 00.000060C2 4A40                         tst     d0
 5036 00.000060C4 6A000012                     bpl     .notmi
 5037 00.000060C8 3F00                         move    d0,-(a7)
 5038 00.000060CA E048                         lsr     #8,d0
 5039 00.000060CC 10C0                         move.b  d0,(a0)+
 5040 00.000060CE 301F                         move    (a7)+,d0
 5041 00.000060D0 10C0                         move.b  d0,(a0)+
 5042 00.000060D2 5241                         addq    #1,d1
 5043 00.000060D4 6000FFE2                     bra     .loop
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 142
blitz2.s


 5044 00.000060D8                              ;
 5045 00.000060D8 4A790000EC24         .notmi  tst     quoteflag
 5046 00.000060DE 6600003C                     bne     .putbyte
 5047 00.000060E2 B07C0028                     cmp     #'(',d0
 5048 00.000060E6 6700003A                     beq     .done
 5049 00.000060EA                      ;       cmp     #'.',d0
 5050 00.000060EA                      ;       beq     .done
 5051 00.000060EA B07C002C                     cmp     #',',d0
 5052 00.000060EE 67000032                     beq     .done
 5053 00.000060F2 B03C0027                     cmp.b   #loclabch,d0
 5054 00.000060F6 66000024                     bne     .putbyte
 5055 00.000060FA 33C0000060AE                 move    d0,lc
 5056 00.00006100 2F09                         move.l  a1,-(a7)
 5057 00.00006102 43F90000E85A                 lea     lastbiglab,a1
 5058 00.00006108 4A11                         tst.b   (a1)
 5059 00.0000610A 67002296                     beq     nolocerr
 5060 00.0000610E 5241                 .cloop  addq    #1,d1
 5061 00.00006110 10D9                         move.b  (a1)+,(a0)+
 5062 00.00006112 6600FFFA                     bne     .cloop
 5063 00.00006116 5341                         subq    #1,d1
 5064 00.00006118 5348                         subq    #1,a0
 5065 00.0000611A 225F                         move.l  (a7)+,a1
 5066 00.0000611C 10C0                 .putbyte        move.b  d0,(a0)+
 5067 00.0000611E 6000FF98                     bra     .loop
 5068 00.00006122 4210                 .done   clr.b   (a0)
 5069 00.00006124 33C10000E92E                 move    d1,asmlen2
 5070 00.0000612A 4E75                         rts
 5071 00.0000612C                      
 5072 00.0000612C 61006752             asmit   bsr     alignpc
 5073 00.00006130 0440803C                     sub     #$8000+fnum,d0
 5074 00.00006134 E548                         lsl     #2,d0
 5075 00.00006136 207C0000253A                 move.l  #asmpnts,a0
 5076 00.0000613C 20700000                     move.l  0(a0,d0),a0
 5077 00.00006140 33C00000EC60                 move    d0,temp1
 5078 00.00006146 2F08                         move.l  a0,-(a7)
 5079 00.00006148                              ;
 5080 00.00006148 7201                         moveq   #1,d1   ;word len (byte=0, long=2)
 5081 00.0000614A 61001AC2                     bsr     getchar3
 5082 00.0000614E B07C002E                     cmp     #'.',d0
 5083 00.00006152 66000030                     bne     .dsize
 5084 00.00006156 61001AB6                     bsr     getchar3
 5085 00.0000615A 00400020                     or      #32,d0
 5086 00.0000615E B07C0077                     cmp     #'w',d0
 5087 00.00006162 67000026                     beq     .wsize
 5088 00.00006166 B07C0062                     cmp     #'b',d0
 5089 00.0000616A 6700000E                     beq     .bsize
 5090 00.0000616E B07C006C                     cmp     #'l',d0
 5091 00.00006172 6600226E                     bne     syntaxerr
 5092 00.00006176 6000001E                     bra     .lsize
 5093 00.0000617A 7200                 .bsize  moveq   #0,d1
 5094 00.0000617C 30280008                     move    8(a0),d0
 5095 00.00006180 6000001C                     bra     .tstsize
 5096 00.00006184 7204                 .dsize  moveq   #4,d1
 5097 00.00006186 60000026                     bra     .putsize
 5098 00.0000618A 7204                 .wsize  moveq   #4,d1
 5099 00.0000618C 30280008                     move    8(a0),d0
 5100 00.00006190 E848                         lsr     #4,d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 143
blitz2.s


 5101 00.00006192 6000000A                     bra     .tstsize
 5102 00.00006196 7208                 .lsize  moveq   #8,d1
 5103 00.00006198 30280008                     move    8(a0),d0
 5104 00.0000619C E048                         lsr     #8,d0
 5105 00.0000619E 0240000F             .tstsize        and     #15,d0
 5106 00.000061A2 B07C000F                     cmp     #15,d0
 5107 00.000061A6 670021AC                     beq     illsizeerr
 5108 00.000061AA 61001A62                     bsr     getchar3
 5109 00.000061AE 33C10000E926         .putsize        move    d1,asmsize
 5110 00.000061B4 76FF                         moveq   #-1,d3
 5111 00.000061B6 61001A82                     bsr     reget
 5112 00.000061BA 67000044                     beq     .done0
 5113 00.000061BE 23FC0000EC680000E928         move.l  #namebuff,asmbuff
 5114 00.000061C8 61001A7A                     bsr     bakup
 5115 00.000061CC 6100FBF4                     bsr     getea
 5116 00.000061D0 2404                         move.l  d4,d2   ;to src
 5117 00.000061D2 2605                         move.l  d5,d3
 5118 00.000061D4 33F90000E92E0000E92C         move    asmlen2,asmlen
 5119 00.000061DE 7AFF                         moveq   #-1,d5
 5120 00.000061E0 33F90000E9220000E924         move    extraword,extraword2
 5121 00.000061EA B07C002C                     cmp     #',',d0
 5122 00.000061EE 66000010                     bne     .done0
 5123 00.000061F2 23FC0000ECE80000E928         move.l  #namebuff2,asmbuff
 5124 00.000061FC 6100FBC4                     bsr     getea   ;dest
 5125 00.00006200                      .done0  ;
 5126 00.00006200                              ;all stuff fetched!
 5127 00.00006200                              ;now to assemble it.....
 5128 00.00006200                              ;
 5129 00.00006200 205F                         move.l  (a7)+,a0
 5130 00.00006202                              ;
 5131 00.00006202                              ;O.K. - Let's assemble it!
 5132 00.00006202                              ;
 5133 00.00006202 22790000E8F6                 move.l  pc,a1           ;pc
 5134 00.00006208                              ;
 5135 00.00006208 2849                         move.l  a1,a4
 5136 00.0000620A 5449                         addq    #2,a1
 5137 00.0000620C 3210                         move    (a0),d1 ;opcode
 5138 00.0000620E 4A43                         tst     d3
 5139 00.00006210 6B00018C                     bmi     .none   ;no src/dest ea!
 5140 00.00006214                              ;
 5141 00.00006214                              ;make into movea, addi etc. if possible
 5142 00.00006214                              ;
 5143 00.00006214 3028000E                     move    14(a0),d0
 5144 00.00006218 6A00004A                     bpl     .noia
 5145 00.0000621C 08000000                     btst    #0,d0
 5146 00.00006220 6700001E                     beq     .noa
 5147 00.00006224 BA7C0001                     cmp     #1,d5
 5148 00.00006228 66000016                     bne     .noa
 5149 00.0000622C B67C000E                     cmp     #14,d3
 5150 00.00006230 67000032                     beq     .noia
 5151 00.00006234 30390000EC60                 move    temp1,d0
 5152 00.0000623A 5840                         addq    #4,d0
 5153 00.0000623C 60000018                     bra     .moveon
 5154 00.00006240 08000001             .noa    btst    #1,d0
 5155 00.00006244 6700001E                     beq     .noia
 5156 00.00006248 B67C000B                     cmp     #11,d3
 5157 00.0000624C 66000016                     bne     .noia
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 144
blitz2.s


 5158 00.00006250 30390000EC60                 move    temp1,d0
 5159 00.00006256 5840                 .moveon addq    #4,d0
 5160 00.00006258 207C0000253A                 move.l  #asmpnts,a0
 5161 00.0000625E 20700000                     move.l  0(a0,d0),a0
 5162 00.00006262 3210                         move    (a0),d1
 5163 00.00006264                              ;
 5164 00.00006264 23FC0000EC680000E916 .noia   move.l  #namebuff,buff1
 5165 00.0000626E 23FC0000ECE80000E91A         move.l  #namebuff2,buff2
 5166 00.00006278 2028000A                     move.l  10(a0),d0
 5167 00.0000627C 6700005E                     beq     .nojsr
 5168 00.00006280 2640                         move.l  d0,a3
 5169 00.00006282 3C390000E926                 move    asmsize,d6
 5170 00.00006288 4E93                         jsr     (a3)
 5171 00.0000628A 6A00000E                     bpl     .noerr
 5172 00.0000628E B07CFFFE                     cmp     #-2,d0
 5173 00.00006292 670020C0                     beq     illsizeerr
 5174 00.00006296 600020E4                     bra     illeaerr
 5175 00.0000629A 67000040             .noerr  beq     .nojsr
 5176 00.0000629E                              ;
 5177 00.0000629E C544                         exg     d2,d4
 5178 00.000062A0 C745                         exg     d3,d5
 5179 00.000062A2                              ;
 5180 00.000062A2 2C390000E922                 move.l  extraword,d6
 5181 00.000062A8 4846                         swap    d6
 5182 00.000062AA 23C60000E922                 move.l  d6,extraword
 5183 00.000062B0                              ;
 5184 00.000062B0 23FC0000ECE80000E916         move.l  #namebuff2,buff1
 5185 00.000062BA 23FC0000EC680000E91A         move.l  #namebuff,buff2
 5186 00.000062C4                              ;
 5187 00.000062C4 3C390000E92C                 move    asmlen,d6
 5188 00.000062CA 3E390000E92E                 move    asmlen2,d7
 5189 00.000062D0 33C60000E92E                 move    d6,asmlen2
 5190 00.000062D6 33C70000E92C                 move    d7,asmlen
 5191 00.000062DC                      .nojsr  ;
 5192 00.000062DC 23F90000E9160000E928         move.l  buff1,asmbuff
 5193 00.000062E6 3028000E                     move    14(a0),d0
 5194 00.000062EA 6700005C                     beq     .nothing
 5195 00.000062EE 6B000058                     bmi     .nothing
 5196 00.000062F2 B07C0001                     cmp     #1,d0
 5197 00.000062F6 66000016                     bne     .n1to8
 5198 00.000062FA B67C000B                     cmp     #11,d3
 5199 00.000062FE 66000048                     bne     .nothing
 5200 00.00006302                              ;
 5201 00.00006302 610002EC             .skipsrc        bsr     insasm
 5202 00.00006306 3404                         move    d4,d2
 5203 00.00006308 3605                         move    d5,d3
 5204 00.0000630A 60000058                     bra     .skipsrc2
 5205 00.0000630E                              ;
 5206 00.0000630E B07C0002             .n1to8  cmp     #2,d0
 5207 00.00006312 66000010                     bne     .notbcc
 5208 00.00006316 B67C0008                     cmp     #8,d3
 5209 00.0000631A 66002060                     bne     illeaerr
 5210 00.0000631E 7609                         moveq   #9,d3
 5211 00.00006320 60000026                     bra     .nothing
 5212 00.00006324                      .notbcc ;
 5213 00.00006324 B07C0003                     cmp     #3,d0
 5214 00.00006328 6700FFD8                     beq     .skipsrc
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 145
blitz2.s


 5215 00.0000632C                              ;
 5216 00.0000632C B07C0004             .notmq  cmp     #4,d0
 5217 00.00006330 6700FFD0                     beq     .skipsrc
 5218 00.00006334                              ;
 5219 00.00006334 B07C0005             .nottrap        cmp     #5,d0
 5220 00.00006338 6600000E                     bne     .notdbf
 5221 00.0000633C BA7C0008                     cmp     #8,d5
 5222 00.00006340 6600203A                     bne     illeaerr
 5223 00.00006344 8242                         or      d2,d1
 5224 00.00006346 7A09                         moveq   #9,d5
 5225 00.00006348                              ;
 5226 00.00006348                      .notdbf
 5227 00.00006348 3C280002             .nothing        move    2(a0),d6
 5228 00.0000634C 1E280006                     move.b  6(a0),d7
 5229 00.00006350 48E70C00                     movem.l d4-d5,-(a7)
 5230 00.00006354 38390000E924                 move    extraword2,d4
 5231 00.0000635A 61000220                     bsr     doea    ;do src
 5232 00.0000635E                              ;
 5233 00.0000635E 4CDF000C                     movem.l (a7)+,d2-d3
 5234 00.00006362 4A43                 .skipsrc3       tst     d3
 5235 00.00006364 6B00002C             .skipsrc2       bmi     .one
 5236 00.00006368 38390000E922                 move    extraword,d4
 5237 00.0000636E 3C280004                     move    4(a0),d6
 5238 00.00006372 1E280007                     move.b  7(a0),d7
 5239 00.00006376 23F90000E91A0000E928         move.l  buff2,asmbuff
 5240 00.00006380 33F90000E92E0000E92C         move    asmlen2,asmlen
 5241 00.0000638A 610001F0                     bsr     doea
 5242 00.0000638E 6000001A                     bra     .putit
 5243 00.00006392                              ;
 5244 00.00006392 30280004             .one    move    4(a0),d0
 5245 00.00006396 66001FE4                     bne     illeaerr
 5246 00.0000639A 6000000E                     bra     .putit
 5247 00.0000639E                              ;
 5248 00.0000639E 30280002             .none   move    2(a0),d0
 5249 00.000063A2 80680004                     or      4(a0),d0
 5250 00.000063A6 66001FD4                     bne     illeaerr
 5251 00.000063AA                              ;
 5252 00.000063AA                      .putit  ;put in the opcode
 5253 00.000063AA                              ;
 5254 00.000063AA 30280008                     move    8(a0),d0
 5255 00.000063AE 0240F000                     and     #$f000,d0
 5256 00.000063B2 B07CF000                     cmp     #$f000,d0
 5257 00.000063B6 6700001A                     beq     .nosizep
 5258 00.000063BA E048                         lsr     #8,d0
 5259 00.000063BC E848                         lsr     #4,d0   ;shift for size
 5260 00.000063BE                              ;
 5261 00.000063BE 34280008                     move    8(a0),d2
 5262 00.000063C2 36390000E926                 move    asmsize,d3
 5263 00.000063C8 E66A                         lsr     d3,d2
 5264 00.000063CA 0242000F                     and     #15,d2
 5265 00.000063CE E16A                         lsl     d0,d2
 5266 00.000063D0 8242                         or      d2,d1   ;size into opcode
 5267 00.000063D2                              ;
 5268 00.000063D2                      .nosizep
 5269 00.000063D2 B9F90000E8FA                 cmp.l   libat,a4
 5270 00.000063D8 6500000E                     bcs     .oky
 5271 00.000063DC 33FCFFFF0000E858             move    #-1,nomemleft
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 146
blitz2.s


 5272 00.000063E4 60000004                     bra     .done
 5273 00.000063E8 3881                 .oky    move    d1,(a4)
 5274 00.000063EA                              ;
 5275 00.000063EA 23C90000E8F6         .done   move.l  a1,pc
 5276 00.000063F0 4E75                         rts
 5277 00.000063F2                      
 5278 00.000063F2                      asmoff  ;add an offset
 5279 00.000063F2 2F390000E8F6                 move.l  pc,-(a7)
 5280 00.000063F8 23C90000E8F6                 move.l  a1,pc
 5281 00.000063FE 6100151C                     bsr     addoff
 5282 00.00006402 22790000E8F6                 move.l  pc,a1
 5283 00.00006408 23DF0000E8F6                 move.l  (a7)+,pc
 5284 00.0000640E 4E75                         rts
 5285 00.00006410                      
 5286 00.00006410                      asmfixer        ;end of pass asm filler-inner
 5287 00.00006410                              ;
 5288 00.00006410 32390000E858                 move    nomemleft,d1
 5289 00.00006416 66000162                     bne     .done
 5290 00.0000641A 08390007000110C1             btst    #7,optreqga15+13
 5291 00.00006422 6700000A                     beq     .go
 5292 00.00006426 323AD352                     move    smallpass(pc),d1
 5293 00.0000642A 6700014E                     beq     .done
 5294 00.0000642E                              ;
 5295 00.0000642E 24790000E930         .go     move.l  firstasm,a2
 5296 00.00006434 33FCFFFF0000E91E             move    #-1,constmode
 5297 00.0000643C 427900002B06                 clr     regat
 5298 00.00006442 6100DFE6                     bsr     prepstack
 5299 00.00006446 2F0A                 .loop   move.l  a2,-(a7)
 5300 00.00006448 6100E020                     bsr     chkstop
 5301 00.0000644C 245F                         move.l  (a7)+,a2
 5302 00.0000644E B4FC0000             .loopdo cmp     #0,a2
 5303 00.00006452 67000120                     beq     .done2
 5304 00.00006456 23CA0000E928                 move.l  a2,asmbuff
 5305 00.0000645C 4BEA0010                     lea     16(a2),a5
 5306 00.00006460 4A2A000F                     tst.b   15(a2)
 5307 00.00006464 66000004                     bne     .skipo
 5308 00.00006468 2A55                         move.l  (a5),a5 ;pointer to real text
 5309 00.0000646A                              ;
 5310 00.0000646A 42790000E920         .skipo  clr     asmtype
 5311 00.00006470 61005AFC                     bsr     evalconst3
 5312 00.00006474 24790000E928                 move.l  asmbuff,a2
 5313 00.0000647A 67000016                     beq     .oko
 5314 00.0000647E B07C0028                     cmp     #'(',d0
 5315 00.00006482 6700000E                     beq     .oko
 5316 00.00006486 B07C002C                     cmp     #',',d0
 5317 00.0000648A 67000006                     beq     .oko
 5318 00.0000648E 60001F52                     bra     syntaxerr
 5319 00.00006492 226A0004             .oko    move.l  4(a2),a1
 5320 00.00006496 322A0008                     move    8(a2),d1
 5321 00.0000649A                              ;
 5322 00.0000649A B27C0005                     cmp     #5,d1
 5323 00.0000649E 6600000C                     bne     .notdan
 5324 00.000064A2 61000136             .word   bsr     chkword
 5325 00.000064A6 3283                 .word2  move    d3,(a1)
 5326 00.000064A8 600000C4                     bra     .next
 5327 00.000064AC B27C0006             .notdan cmp     #6,d1
 5328 00.000064B0 6600000E                     bne     .notdanxi
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 147
blitz2.s


 5329 00.000064B4 6100010E             .isbyte bsr     chkbyte
 5330 00.000064B8 13430001             .isbyte2        move.b  d3,1(a1)
 5331 00.000064BC 600000B0                     bra     .next
 5332 00.000064C0 B27C0011             .notdanxi       cmp     #17,d1
 5333 00.000064C4 6700FFF2                     beq     .isbyte2
 5334 00.000064C8 B27C0007                     cmp     #7,d1
 5335 00.000064CC 6700FFD4                     beq     .word
 5336 00.000064D0 B27C0008                     cmp     #8,d1
 5337 00.000064D4 66000016                     bne     .notabsl
 5338 00.000064D8 32390000E920         .isabsl move    asmtype,d1
 5339 00.000064DE 67000006                     beq     .notpcrel
 5340 00.000064E2 6100FF0E                     bsr     asmoff
 5341 00.000064E6 2283                 .notpcrel       move.l  d3,(a1)
 5342 00.000064E8 60000084                     bra     .next
 5343 00.000064EC B27C0009             .notabsl        cmp     #9,d1
 5344 00.000064F0 6600000E                     bne     .notdpc
 5345 00.000064F4 9689                         sub.l   a1,d3
 5346 00.000064F6 610000E2                     bsr     chkword
 5347 00.000064FA 3283                         move    d3,(a1)
 5348 00.000064FC 60000070                     bra     .next
 5349 00.00006500 B27C000A             .notdpc cmp     #10,d1
 5350 00.00006504 66000008                     bne     .imm
 5351 00.00006508 9689                         sub.l   a1,d3
 5352 00.0000650A 6000FFA8                     bra     .isbyte
 5353 00.0000650E                              ;
 5354 00.0000650E 302A000A             .imm    move    10(a2),d0
 5355 00.00006512 6700001A                     beq     .noflag
 5356 00.00006516 B07C0001                     cmp     #1,d0
 5357 00.0000651A 6700002E                     beq     .tocount
 5358 00.0000651E B07C0003                     cmp     #3,d0
 5359 00.00006522 67000044                     beq     .tomoveq
 5360 00.00006526 B07C0004                     cmp     #4,d0
 5361 00.0000652A 6700000E                     beq     .totrap
 5362 00.0000652E B27C000B             .noflag cmp     #11,d1
 5363 00.00006532 6700FFA4                     beq     .isabsl
 5364 00.00006536 6000FF6E                     bra     .word2
 5365 00.0000653A                              ;
 5366 00.0000653A B6BC0000000F         .totrap cmp.l   #15,d3
 5367 00.00006540 62001DAE                     bhi     illtraperr
 5368 00.00006544 8721                         or.b    d3,-(a1)
 5369 00.00006546 60000026                     bra     .next
 5370 00.0000654A B6BC00000008         .tocount        cmp.l   #8,d3
 5371 00.00006550 62001DB6                     bhi     illimmerr
 5372 00.00006554 4A83                         tst.l   d3
 5373 00.00006556 67001DB0                     beq     illimmerr
 5374 00.0000655A 02430007                     and     #7,d3
 5375 00.0000655E E14B                         lsl     #8,d3
 5376 00.00006560 E34B                         lsl     #1,d3
 5377 00.00006562 8761                         or      d3,-(a1)
 5378 00.00006564 60000008                     bra     .next
 5379 00.00006568 6100005A             .tomoveq        bsr     chkbyte
 5380 00.0000656C 1303                         move.b  d3,-(a1)
 5381 00.0000656E 2452                 .next   move.l  (a2),a2
 5382 00.00006570 6000FED4                     bra     .loop
 5383 00.00006574 42790000E91E         .done2  clr     constmode
 5384 00.0000657A 4E75                 .done   rts
 5385 00.0000657C                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 148
blitz2.s


 5386 00.0000657C                      doea    ;d2=reg, d3=ea, d4=extraword, d5=asm type
 5387 00.0000657C                              ;d6=allowable mask, d7=shift data
 5388 00.0000657C                              ;
 5389 00.0000657C                              ;or in bits for opcode in d1
 5390 00.0000657C                              ;
 5391 00.0000657C 0706                         btst    d3,d6
 5392 00.0000657E 67001DFC                     beq     illeaerr
 5393 00.00006582                              ;
 5394 00.00006582 610000E0                     bsr     makemode
 5395 00.00006586                              ;
 5396 00.00006586 B67C0007                     cmp     #7,d3
 5397 00.0000658A 65000012                     bcs     .skip
 5398 00.0000658E 3403                         move    d3,d2
 5399 00.00006590 5F42                         subq    #7,d2   
 5400 00.00006592                              ;
 5401 00.00006592                              ;
 5402 00.00006592 B47C0005                     cmp     #5,d2
 5403 00.00006596 65000004                     bcs     .skip0
 5404 00.0000659A 7404                         moveq   #4,d2
 5405 00.0000659C                      .skip0  ;
 5406 00.0000659C                              ;
 5407 00.0000659C 7607                         moveq   #7,d3
 5408 00.0000659E 1007                 .skip   move.b  d7,d0
 5409 00.000065A0 0240000F                     and     #15,d0
 5410 00.000065A4 B07C000F                     cmp     #15,d0
 5411 00.000065A8 67000006                     beq     .skip2
 5412 00.000065AC E16B                         lsl     d0,d3
 5413 00.000065AE 8243                         or      d3,d1
 5414 00.000065B0 E84F                 .skip2  lsr     #4,d7
 5415 00.000065B2 0247000F                     and     #15,d7
 5416 00.000065B6 BE7C000F                     cmp     #15,d7
 5417 00.000065BA 67000006                     beq     .skip3
 5418 00.000065BE EF6A                         lsl     d7,d2
 5419 00.000065C0 8242                         or      d2,d1
 5420 00.000065C2                      .skip3  ;
 5421 00.000065C2 4E75                         rts
 5422 00.000065C4                      
 5423 00.000065C4 B6BC0000007F         chkbyte cmp.l   #127,d3
 5424 00.000065CA 6E001D6E                     bgt     illdiserr
 5425 00.000065CE B6BCFFFFFF80                 cmp.l   #-128,d3
 5426 00.000065D4 6D001D64                     blt     illdiserr
 5427 00.000065D8 4E75                         rts
 5428 00.000065DA                      
 5429 00.000065DA B6BC00007FFF         chkword cmp.l   #32767,d3
 5430 00.000065E0 6E001D58                     bgt     illdiserr
 5431 00.000065E4 B6BCFFFF8000                 cmp.l   #-32768,d3
 5432 00.000065EA 6D001D4E                     blt     illdiserr
 5433 00.000065EE 4E75                         rts
 5434 00.000065F0                              
 5435 00.000065F0                      insasm  ;ass asmbuff, asmlen, pc, ea to list
 5436 00.000065F0                              ;
 5437 00.000065F0 48E7E080                     movem.l d0-d2/a0,-(a7)
 5438 00.000065F4 3F28000E                     move    14(a0),-(a7)
 5439 00.000065F8 6A000004                     bpl     .ok
 5440 00.000065FC 4257                         clr     (a7)
 5441 00.000065FE 2F09                 .ok     move.l  a1,-(a7)
 5442 00.00006600                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 149
blitz2.s


 5443 00.00006600 7010                         moveq   #16,d0
 5444 00.00006602 D0790000E92C                 add     asmlen,d0
 5445 00.00006608 3400                         move    d0,d2
 5446 00.0000660A 7201                         moveq   #1,d1
 5447 00.0000660C 2C780004                     move.l  4.w,a6
 5448 00.00006610 4EB900004B6C                 jsr     doallocmem
 5449 00.00006616 2040                         move.l  d0,a0
 5450 00.00006618 31790000E9E8000C             move    linenumat,12(a0)
 5451 00.00006620 20B90000E930                 move.l  firstasm,(a0)
 5452 00.00006626 23C80000E930                 move.l  a0,firstasm
 5453 00.0000662C 21570004                     move.l  (a7),4(a0)
 5454 00.00006630 31430008                     move    d3,8(a0)
 5455 00.00006634 316F0004000A                 move    4(a7),10(a0)
 5456 00.0000663A                              ;
 5457 00.0000663A 41E8000E                     lea     14(a0),a0
 5458 00.0000663E 10C2                         move.b  d2,(a0)+        ;length
 5459 00.00006640 22790000E928                 move.l  asmbuff,a1
 5460 00.00006646 5249                         addq    #1,a1
 5461 00.00006648 10D9                         move.b  (a1)+,(a0)+     ;type - 0 = indirect,else direct
 5462 00.0000664A 66000008                     bne     .loop
 5463 00.0000664E 20D9                         move.l  (a1)+,(a0)+
 5464 00.00006650 60000008                     bra     .loopdone
 5465 00.00006654                              ;
 5466 00.00006654 10D9                 .loop   move.b  (a1)+,(a0)+
 5467 00.00006656 6600FFFC                     bne     .loop
 5468 00.0000665A                              ;
 5469 00.0000665A 225F                 .loopdone       move.l  (a7)+,a1
 5470 00.0000665C 544F                         addq    #2,a7
 5471 00.0000665E 4CDF0107                     movem.l (a7)+,d0-d2/a0
 5472 00.00006662 4E75                         rts
 5473 00.00006664                      
 5474 00.00006664 B67C0005             makemode        cmp     #5,d3
 5475 00.00006668 6500008A                     bcs     .done
 5476 00.0000666C B67C000B                     cmp     #11,d3
 5477 00.00006670 62000066                     bhi     .done2
 5478 00.00006674 67000040                     beq     .imm
 5479 00.00006678 6100FF76                     bsr     insasm
 5480 00.0000667C B67C0005                     cmp     #5,d3
 5481 00.00006680 67000052                     beq     .word
 5482 00.00006684 B67C0006                     cmp     #6,d3
 5483 00.00006688 6700001A                     beq     .dxi
 5484 00.0000668C B67C0007                     cmp     #7,d3
 5485 00.00006690 67000042                     beq     .word
 5486 00.00006694 B67C0008                     cmp     #8,d3
 5487 00.00006698 67000038                     beq     .long
 5488 00.0000669C B67C0009                     cmp     #9,d3
 5489 00.000066A0 67000032                     beq     .word
 5490 00.000066A4                              ;d(pc,xi)
 5491 00.000066A4 B3F90000E8FA         .dxi    cmp.l   libat,a1
 5492 00.000066AA 65000006                     bcs     .ok7
 5493 00.000066AE 5449                         addq    #2,a1
 5494 00.000066B0 4E75                         rts
 5495 00.000066B2 32C4                 .ok7    move    d4,(a1)+
 5496 00.000066B4 4E75                         rts
 5497 00.000066B6 0C7900080000E926     .imm    cmp     #8,asmsize
 5498 00.000066BE 6400000E                     bcc     .immlong
 5499 00.000066C2 7610                         moveq   #16,d3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 150
blitz2.s


 5500 00.000066C4 6100FF2A                     bsr     insasm
 5501 00.000066C8 760B                         moveq   #11,d3
 5502 00.000066CA 60000008                     bra     .word
 5503 00.000066CE 6100FF20             .immlong        bsr     insasm
 5504 00.000066D2 5449                 .long   addq    #2,a1
 5505 00.000066D4 5449                 .word   addq    #2,a1
 5506 00.000066D6 4E75                         rts
 5507 00.000066D8                              ;
 5508 00.000066D8 B67C000F             .done2  cmp     #15,d3
 5509 00.000066DC 66000016                     bne     .done
 5510 00.000066E0 B3F90000E8FA                 cmp.l   libat,a1
 5511 00.000066E6 65000008                     bcs     .ok3
 5512 00.000066EA 5449                         addq    #2,a1
 5513 00.000066EC 584F                         addq    #4,a7
 5514 00.000066EE 4E75                         rts
 5515 00.000066F0 32C2                 .ok3    move    d2,(a1)+
 5516 00.000066F2 584F                         addq    #4,a7
 5517 00.000066F4 4E75                 .done   rts
 5518 00.000066F6                      
 5519 00.000066F6                      countpees       ;count up how many parameters are following
 5520 00.000066F6                              ;nest a-la {,(,},)
 5521 00.000066F6                              ;
 5522 00.000066F6                              ;return how many parameters in d1
 5523 00.000066F6                              ;
 5524 00.000066F6 6100155E                     bsr     storeloc
 5525 00.000066FA 7200                         moveq   #0,d1
 5526 00.000066FC 61001510                     bsr     getchar3        ;eol?
 5527 00.00006700 6700006C                     beq     .done
 5528 00.00006704 7600                         moveq   #0,d3
 5529 00.00006706 6000001E                     bra     .skiphelp
 5530 00.0000670A                              ;
 5531 00.0000670A 61001502             .loop   bsr     getchar3
 5532 00.0000670E 6600000C                     bne     .skip
 5533 00.00006712 4A43                         tst     d3
 5534 00.00006714 66001CCC                     bne     syntaxerr
 5535 00.00006718 60000052                     bra     .done2
 5536 00.0000671C                      .skip   ;
 5537 00.0000671C 38390000EC24                 move    quoteflag,d4
 5538 00.00006722 6600FFE6                     bne     .loop
 5539 00.00006726                              ;
 5540 00.00006726 B07C0029             .skiphelp       cmp     #')',d0
 5541 00.0000672A 6600000E                     bne     .skip2
 5542 00.0000672E 4A43                         tst     d3
 5543 00.00006730 6700003A                     beq     .done2
 5544 00.00006734 5343                 .skip3  subq    #1,d3
 5545 00.00006736 6000FFD2                     bra     .loop
 5546 00.0000673A B07C007D             .skip2  cmp     #'}',d0
 5547 00.0000673E 6700FFF4                     beq     .skip3
 5548 00.00006742 B07C0028                     cmp     #'(',d0
 5549 00.00006746 66000008                     bne     .skip4a
 5550 00.0000674A 5243                 .skip4  addq    #1,d3
 5551 00.0000674C 6000FFBC                     bra     .loop
 5552 00.00006750 B07C007B             .skip4a cmp     #'{',d0
 5553 00.00006754 6700FFF4                     beq     .skip4
 5554 00.00006758 B07C002C                     cmp     #',',d0
 5555 00.0000675C 6600FFAC                     bne     .loop
 5556 00.00006760 4A43                         tst     d3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 151
blitz2.s


 5557 00.00006762 6600FFA6                     bne     .loop
 5558 00.00006766 5241                         addq    #1,d1
 5559 00.00006768 6000FFA0                     bra     .loop
 5560 00.0000676C 5241                 .done2  addq    #1,d1
 5561 00.0000676E 600014F4             .done   bra     resloc
 5562 00.00006772                      
 5563 00.00006772                      fetchlibps      ;fetch library parameters....
 5564 00.00006772                              ;
 5565 00.00006772                              ;d1=number. lo byte = # parameters
 5566 00.00006772                              ;hi byte and 7= number of repeatables
 5567 00.00006772                              ;(eg:- Line 0,0,319,0,319,199,0,199,0,0 ,3)
 5568 00.00006772                              ;hi byte and $78 lsr 3 = pos of first repeat
 5569 00.00006772                              ;
 5570 00.00006772                              ;a2=start of types table.....
 5571 00.00006772                              ;
 5572 00.00006772 42790000E9BA                 clr     numreps
 5573 00.00006778 3001                         move    d1,d0
 5574 00.0000677A 0240FF00                     and     #$ff00,d0
 5575 00.0000677E 6700005C                     beq     .noreps
 5576 00.00006782 E048                         lsr     #8,d0
 5577 00.00006784 E848                         lsr     #4,d0   ;d0= start of reps
 5578 00.00006786 67000010                     beq     .skip
 5579 00.0000678A 9200                         sub.b   d0,d1   ;new number to fetch
 5580 00.0000678C 61000062                     bsr     fetchpees2      ;fetch first parms
 5581 00.00006790 B07C002C                     cmp     #',',d0
 5582 00.00006794 66001C4C                     bne     syntaxerr
 5583 00.00006798                              ;
 5584 00.00006798                      .skip   ;O.K., now to fetch repeats.....
 5585 00.00006798                              ;
 5586 00.00006798 3401                         move    d1,d2
 5587 00.0000679A E04A                         lsr     #8,d2
 5588 00.0000679C 02420007                     and     #7,d2   ;# repeatable....
 5589 00.000067A0                              ;
 5590 00.000067A0 B202                 .rloop  cmp.b   d2,d1
 5591 00.000067A2 6500001C                     bcs     .repsdone       ;all reps done....
 5592 00.000067A6 9202                         sub.b   d2,d1
 5593 00.000067A8 48E72020                     movem.l d2/a2,-(a7)
 5594 00.000067AC 3002                         move    d2,d0
 5595 00.000067AE 6100003A                     bsr     fetchpees4
 5596 00.000067B2 4CDF0404                     movem.l (a7)+,d2/a2
 5597 00.000067B6 52790000E9BA                 addq    #1,numreps
 5598 00.000067BC 6000FFE2                     bra     .rloop
 5599 00.000067C0                              ;
 5600 00.000067C0 36390000E9BA         .repsdone       move    numreps,d3
 5601 00.000067C6 67001C1A                     beq     syntaxerr
 5602 00.000067CA D4C2                         add     d2,a2
 5603 00.000067CC 024100FF                     and     #255,d1
 5604 00.000067D0 67000010                     beq     .done
 5605 00.000067D4                      ;       ;
 5606 00.000067D4                      ;       ;handle 'else' for repeating parameters...
 5607 00.000067D4                      ;       ;
 5608 00.000067D4                      ;       cmp     #$8000+34,d0
 5609 00.000067D4                      ;       beq     .done
 5610 00.000067D4                      ;       ;
 5611 00.000067D4 B07C002C                     cmp     #',',d0
 5612 00.000067D8 66001C08                     bne     syntaxerr
 5613 00.000067DC 3001                 .noreps move    d1,d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 152
blitz2.s


 5614 00.000067DE 66000010                     bne     fetchpees2
 5615 00.000067E2 4E75                 .done   rts
 5616 00.000067E4                      
 5617 00.000067E4 3F3C0000             ptype   move    #0,-(a7)
 5618 00.000067E8 0000                 pmode   dc      0
 5619 00.000067EA                      
 5620 00.000067EA 7401                 fetchpees4      moveq   #1,d2   ;always push
 5621 00.000067EC 60000004                     bra     fetchpees3      
 5622 00.000067F0                              ;
 5623 00.000067F0 7400                 fetchpees2      moveq   #0,d2   ;dont push unless told.
 5624 00.000067F2 0240000F             fetchpees3      and     #15,d0
 5625 00.000067F6                              ;
 5626 00.000067F6                      fetchpees       ;fetch a list of parameters.
 5627 00.000067F6                              ;
 5628 00.000067F6                              ;d0=number to fetch, a2=pointer to type buffer
 5629 00.000067F6                              ;d1=push mode
 5630 00.000067F6                              ;
 5631 00.000067F6 3F01                         move    d1,-(a7)
 5632 00.000067F8 3F3AFFEE                     move    pmode(pc),-(a7) ;in case of recursion
 5633 00.000067FC 33C2000067E8                 move    d2,pmode
 5634 00.00006802 3F00                         move    d0,-(a7)
 5635 00.00006804                              ;
 5636 00.00006804 141A                 .loop   move.b  (a2)+,d2
 5637 00.00006806 66000008                     bne     .skip0
 5638 00.0000680A 34390000E9B2                 move    userp,d2        ;user selected type
 5639 00.00006810 2F0A                 .skip0  move.l  a2,-(a7)
 5640 00.00006812 61000022                     bsr     handlep
 5641 00.00006816 245F                         move.l  (a7)+,a2
 5642 00.00006818 5357                         subq    #1,(a7)
 5643 00.0000681A 6700000E                     beq     .done
 5644 00.0000681E B07C002C                     cmp     #',',d0
 5645 00.00006822 660018BE                     bne     notparerr
 5646 00.00006826 6000FFDC                     bra     .loop
 5647 00.0000682A                              ;
 5648 00.0000682A 544F                 .done   addq    #2,a7
 5649 00.0000682C 33DF000067E8                 move    (a7)+,pmode
 5650 00.00006832 321F                         move    (a7)+,d1
 5651 00.00006834 4E75                         rts
 5652 00.00006836                      
 5653 00.00006836                      handlep ;d2=what to get. various flags are as follows:
 5654 00.00006836                              ;
 5655 00.00006836                              ;BIT 7 : The Address of a var - d2.b = type of var
 5656 00.00006836                              ;BIT 6 : We want to push any results that
 5657 00.00006836                              ;       would normally go into D(regat).
 5658 00.00006836                              ;       this should apply to all others too.
 5659 00.00006836                              ;
 5660 00.00006836                              ;BIT 5 : We want array info.
 5661 00.00006836                              ;
 5662 00.00006836                              
 5663 00.00006836 3202                         move    d2,d1
 5664 00.00006838 02410040                     and     #64,d1  ;push bit
 5665 00.0000683C 13C1000067E8                 move.b  d1,pmode
 5666 00.00006842 4A02                         tst.b   d2
 5667 00.00006844 6B00004E                     bmi     handlevara
 5668 00.00006848 08020005                     btst    #5,d2
 5669 00.0000684C 6600009E                     bne     handlearr
 5670 00.00006850                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 153
blitz2.s


 5671 00.00006850                              ;normal p get
 5672 00.00006850                              ;
 5673 00.00006850 610001BE                     bsr     getap
 5674 00.00006854                              ;
 5675 00.00006854                      putap   ;push D(regat), type in d2.
 5676 00.00006854                              ;
 5677 00.00006854 323AFF92                     move    pmode(pc),d1
 5678 00.00006858 6700002C                     beq     putapincreg
 5679 00.0000685C                      pushap  ;push D(regat), type in d2.
 5680 00.0000685C 58790000E9B8                 addq    #4,stackuse
 5681 00.00006862 3239000029EA                 move    pushdn,d1
 5682 00.00006868 827900002B06                 or      regat,d1        ;push long
 5683 00.0000686E B47C0003                     cmp     #3,d2
 5684 00.00006872 6400000C                     bcc     .skip
 5685 00.00006876 55790000E9B8                 subq    #2,stackuse
 5686 00.0000687C 00411000                     or      #$1000,d1       ;push word only
 5687 00.00006880 61002C8A             .skip   bsr     pokewd
 5688 00.00006884 4E75                         rts
 5689 00.00006886 527900002B06         putapincreg     addq    #1,regat
 5690 00.0000688C                              ;cmp    #7,regat
 5691 00.0000688C                              ;bcs    .regok
 5692 00.0000688C                              ;move   #6,regat        
 5693 00.0000688C 4E75                 .regok  rts
 5694 00.0000688E                      
 5695 00.0000688E 7403                 putalp  moveq   #3,d2
 5696 00.00006890 6000FFC2                     bra     putap
 5697 00.00006894                      
 5698 00.00006894                      handlevara      ;Here, we want the address of a var type d2
 5699 00.00006894                              ;
 5700 00.00006894 02420007                     and     #7,d2
 5701 00.00006898 3F02                         move    d2,-(a7)
 5702 00.0000689A                              ;
 5703 00.0000689A 6100407A                     bsr     ampersand2
 5704 00.0000689E                              ;
 5705 00.0000689E B43C0007                     cmp.b   #7,d2   ;ignore pnt to $
 5706 00.000068A2 6700001C                     beq     .nop2
 5707 00.000068A6                              ;
 5708 00.000068A6 0802000E                     btst    #14,d2
 5709 00.000068AA 6700000A                     beq     .nop
 5710 00.000068AE 143C0003                     move.b  #3,d2   ;pointer to long
 5711 00.000068B2 6000000C                     bra     .nop2
 5712 00.000068B6 4A02                 .nop    tst.b   d2
 5713 00.000068B8 66000006                     bne     .nop2
 5714 00.000068BC 143C0003                     move.b  #3,d2
 5715 00.000068C0 361F                 .nop2   move    (a7)+,d3
 5716 00.000068C2 4A03                         tst.b   d3
 5717 00.000068C4 6700000C                     beq     .unp
 5718 00.000068C8 B602                         cmp.b   d2,d3
 5719 00.000068CA 6700FFC2                     beq     putalp
 5720 00.000068CE 60001C6E                     bra     mismatcherr
 5721 00.000068D2                              ;
 5722 00.000068D2 54790000E9B8         .unp    addq    #2,stackuse
 5723 00.000068D8 323AFF0A                     move    ptype(pc),d1
 5724 00.000068DC 61002C2E                     bsr     pokewd
 5725 00.000068E0 7200                         moveq   #0,d1
 5726 00.000068E2 1202                         move.b  d2,d1
 5727 00.000068E4 61002C26                     bsr     pokewd
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 154
blitz2.s


 5728 00.000068E8 6000FFA4                     bra     putalp
 5729 00.000068EC                      
 5730 00.000068EC                      handlearr       ;
 5731 00.000068EC 3F02                         move    d2,-(a7)
 5732 00.000068EE 6100005E                     bsr     baseadd
 5733 00.000068F2 082F00040001                 btst    #4,1(a7)
 5734 00.000068F8 67000006                     beq     .nohigh
 5735 00.000068FC 6100009C                     bsr     highadd
 5736 00.00006900 082F00030001         .nohigh btst    #3,1(a7)
 5737 00.00006906 67000006                     beq     .notype
 5738 00.0000690A 61000008                     bsr     sendtype
 5739 00.0000690E 341F                 .notype move    (a7)+,d2
 5740 00.00006910 600012FC                     bra     getchar3
 5741 00.00006914                      
 5742 00.00006914                      sendtype        ;OK, type of array is gonna be put on stack
 5743 00.00006914                              ;
 5744 00.00006914 323900002B06                 move    regat,d1
 5745 00.0000691A E149                         lsl     #8,d1
 5746 00.0000691C E349                         lsl     #1,d1
 5747 00.0000691E 00417000                     or      #$7000,d1
 5748 00.00006922 082B00000007                 btst    #0,7(a3)
 5749 00.00006928 6600001C                     bne     .isap   ;A Pointer
 5750 00.0000692C 0CAA000001000004             cmp.l   #256,4(a2)
 5751 00.00006934 640013E6                     bcc     arrerr1 ;illegal type to send
 5752 00.00006938 122A0007                     move.b  7(a2),d1
 5753 00.0000693C 61002BCE             .puit   bsr     pokewd  ;moveq #type,d regat
 5754 00.00006940 7402                         moveq   #2,d2   ;just a word.
 5755 00.00006942 6000FF18                     bra     pushap
 5756 00.00006946 123C0003             .isap   move.b  #3,d1
 5757 00.0000694A 6000FFF0                     bra     .puit
 5758 00.0000694E                      
 5759 00.0000694E                      baseadd ;send base on stack or in reg
 5760 00.0000694E                              ;
 5761 00.0000694E 610012BE                     bsr     getchar3
 5762 00.00006952 61002E54                     bsr     getvname
 5763 00.00006956 083900010000EC5B             btst    #1,flagmask+1
 5764 00.0000695E 67001A82                     beq     syntaxerr
 5765 00.00006962 610024D8                     bsr     fetchvar
 5766 00.00006966                              ;
 5767 00.00006966 610012A6                     bsr     getchar3
 5768 00.0000696A B07C0029                     cmp     #')',d0 ;we just want a() or whatever
 5769 00.0000696E 66001A72                     bne     syntaxerr
 5770 00.00006972 32390000EC5C                 move    added,d1
 5771 00.00006978 6600150C                     bne     noarrayerr
 5772 00.0000697C 323900002B06                 move    regat,d1
 5773 00.00006982 E149                         lsl     #8,d1
 5774 00.00006984 E349                         lsl     #1,d1
 5775 00.00006986 827A0080                     or      fbase(pc),d1
 5776 00.0000698A 61002B80                     bsr     pokewd
 5777 00.0000698E 322B0004                     move    4(a3),d1
 5778 00.00006992 61002B78                     bsr     pokewd
 5779 00.00006996 6000FEF6                     bra     putalp  ;OK, we've got da base reg.
 5780 00.0000699A                      
 5781 00.0000699A                      highadd ;send high end of array on stack
 5782 00.0000699A                              ;
 5783 00.0000699A 323900002B06                 move    regat,d1
 5784 00.000069A0 E149                         lsl     #8,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 155
blitz2.s


 5785 00.000069A2 E349                         lsl     #1,d1
 5786 00.000069A4 827A0062                     or      fbase(pc),d1
 5787 00.000069A8 61002B62                     bsr     pokewd
 5788 00.000069AC                              ;
 5789 00.000069AC 322B0008                     move    8(a3),d1
 5790 00.000069B0 E549                         lsl     #2,d1
 5791 00.000069B2 34390000EC02                 move    varmode,d2
 5792 00.000069B8 67000004                     beq     .isglob
 5793 00.000069BC 4441                         neg     d1
 5794 00.000069BE D26B0004             .isglob add     4(a3),d1
 5795 00.000069C2 61002B48                     bsr     pokewd
 5796 00.000069C6 323AC13E                     move    regat(pc),d1
 5797 00.000069CA E149                         lsl     #8,d1
 5798 00.000069CC E349                         lsl     #1,d1
 5799 00.000069CE                              ;
 5800 00.000069CE 343AFE18                     move    pmode(pc),d2
 5801 00.000069D2 66000020                     bne     .dopadd ;we just pushed last parameter!
 5802 00.000069D6 0C79000700002B06             cmp     #7,regat
 5803 00.000069DE 64000014                     bcc     .dopadd ;last was d6, it must have been
 5804 00.000069E2                                              ;pushed too.
 5805 00.000069E2 827A002A                     or      pushlast(pc),d1
 5806 00.000069E6 343900002B06                 move    regat,d2
 5807 00.000069EC 5342                         subq    #1,d2
 5808 00.000069EE 8242                         or      d2,d1
 5809 00.000069F0 60000006                     bra     .pp
 5810 00.000069F4                              ;
 5811 00.000069F4                      .dopadd ;last one was pushed. we have to add to stack!
 5812 00.000069F4                              ;
 5813 00.000069F4 827A0016                     or      pushadd(pc),d1
 5814 00.000069F8 61002B12             .pp     bsr     pokewd
 5815 00.000069FC 13FC0001000067E8             move.b  #1,pmode
 5816 00.00006A04 6000FE88                     bra     putalp
 5817 00.00006A08                      
 5818 00.00006A08 202D0000             fbase   move.l  0(a5),d0
 5819 00.00006A0C D097                 pushadd add.l   (a7),d0
 5820 00.00006A0E D080                 pushlast        add.l   d0,d0
 5821 00.00006A10                      
 5822 00.00006A10 02420007             getap   and     #7,d2   ;0-7 (unknown to string)
 5823 00.00006A14 67002F6A                     beq     evalu2
 5824 00.00006A18 60002F72                     bra     eval
 5825 00.00006A1C                      
 5826 00.00006A1C 22790000EC44         resetlibs       move.l  firstlib,a1
 5827 00.00006A22 B2FC0000             .loop   cmp     #0,a1
 5828 00.00006A26 67000014                     beq     .done
 5829 00.00006A2A 337CFFFF000A                 move    #-1,10(a1)
 5830 00.00006A30 08A90007000C                 bclr    #7,12(a1)
 5831 00.00006A36 2251                         move.l  (a1),a1
 5832 00.00006A38 6000FFE8                     bra     .loop
 5833 00.00006A3C 4E75                 .done   rts
 5834 00.00006A3E                      
 5835 00.00006A3E 323CFFFE             usevars move    #allocvars,d1
 5836 00.00006A42                              ;
 5837 00.00006A42                      uselib  ;lib number in d1 - turn it on baby!
 5838 00.00006A42                              ;
 5839 00.00006A42 610004F4                     bsr     findlib
 5840 00.00006A46                              ;
 5841 00.00006A46 4A790000E32E         uselib3 tst     cfetchmode
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 156
blitz2.s


 5842 00.00006A4C 67000012                     beq     .noconst
 5843 00.00006A50 08290006000C                 btst    #6,12(a1)
 5844 00.00006A56 66000006                     bne     .constok
 5845 00.00006A5A                              ;
 5846 00.00006A5A 60002068                     bra     badconerr       ;Can't use this Library!
 5847 00.00006A5E                              ;
 5848 00.00006A5E 4E75                 .constok        rts
 5849 00.00006A60                              ;
 5850 00.00006A60 08E90007000C         .noconst        bset    #7,12(a1)
 5851 00.00006A66 6600020C                     bne     .skip   ;already done....
 5852 00.00006A6A                              ;
 5853 00.00006A6A 0C69FFFF000A                 cmp     #-1,10(a1)
 5854 00.00006A70 66000202                     bne     .skip   ;something already here
 5855 00.00006A74                              ;
 5856 00.00006A74                              ;o.k. - move in the lib!
 5857 00.00006A74                              ;
 5858 00.00006A74 4A790000E834                 tst     dirmode
 5859 00.00006A7A 670A                         beq.s   .oktouse
 5860 00.00006A7C                              ;
 5861 00.00006A7C 08A90007000C                 bclr    #7,12(a1)
 5862 00.00006A82 6000169A                     bra     dirliberr
 5863 00.00006A86                              ;
 5864 00.00006A86 48E740A0             .oktouse        movem.l a0/a2/d1,-(a7)
 5865 00.00006A8A                              ;
 5866 00.00006A8A                              ;is it a maximum type lib....
 5867 00.00006A8A                              ;if so, create a varoff for it's structs.....
 5868 00.00006A8A                              ;
 5869 00.00006A8A 2049                         move.l  a1,a0
 5870 00.00006A8C D1E90012                     add.l   18(a1),a0
 5871 00.00006A90 4A68FFFE                     tst     -2(a0)
 5872 00.00006A94 6700003C                     beq     .notmax
 5873 00.00006A98 48E700C0                     movem.l a0-a1,-(a7)
 5874 00.00006A9C 323CFB4F                     move    #64335,d1
 5875 00.00006AA0 6100FFA0                     bsr     uselib
 5876 00.00006AA4 4CDF0300                     movem.l (a7)+,a0-a1
 5877 00.00006AA8 527900002B38                 addq    #1,varoff
 5878 00.00006AAE 08B9000000002B39             bclr    #0,varoff+1
 5879 00.00006AB6 317900002B38FFFA             move    varoff,-6(a0)
 5880 00.00006ABE 587900002B38                 addq    #4,varoff
 5881 00.00006AC4 4AA8FFF2                     tst.l   -14(a0)
 5882 00.00006AC8 67000008                     beq     .notmax
 5883 00.00006ACC 587900002B38                 addq    #4,varoff
 5884 00.00006AD2                              ;
 5885 00.00006AD2 23790000E8FE0028     .notmax move.l  lib,40(a1)      ;pc of lib
 5886 00.00006ADA 2049                         move.l  a1,a0
 5887 00.00006ADC D1E90012                     add.l   18(a1),a0       ;start of lib
 5888 00.00006AE0                              ;
 5889 00.00006AE0 2209                         move.l  a1,d1
 5890 00.00006AE2 D2A90006                     add.l   6(a1),d1        ;end of lib
 5891 00.00006AE6 4AA9002C                     tst.l   44(a1)
 5892 00.00006AEA 67000012                     beq     .nor
 5893 00.00006AEE 4A390000400A                 tst.b   debugga
 5894 00.00006AF4 66000008                     bne     .nor    ;errs turned on
 5895 00.00006AF8 2209                         move.l  a1,d1
 5896 00.00006AFA D2A9002C                     add.l   44(a1),d1       ;copy only non-errchks
 5897 00.00006AFE                      .nor    ;
 5898 00.00006AFE 24790000E8FE                 move.l  lib,a2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 157
blitz2.s


 5899 00.00006B04 B5F90000E8EA         .loop   cmp.l   data1at,a2
 5900 00.00006B0A 65000018                     bcs     .okp
 5901 00.00006B0E 33FCFFFF0000E858             move    #-1,nomemleft
 5902 00.00006B16 5448                 .bad    addq    #2,a0
 5903 00.00006B18 544A                         addq    #2,a2
 5904 00.00006B1A B1C1                         cmp.l   d1,a0
 5905 00.00006B1C 6500FFF8                     bcs     .bad
 5906 00.00006B20 6000000A                     bra     .toreloc
 5907 00.00006B24 34D8                 .okp    move    (a0)+,(a2)+
 5908 00.00006B26 B1C1                         cmp.l   d1,a0
 5909 00.00006B28 6500FFDA                     bcs     .loop
 5910 00.00006B2C 23CA0000E8FE         .toreloc        move.l  a2,lib
 5911 00.00006B32 22290020                     move.l  32(a1),d1
 5912 00.00006B36 67000080                     beq     .noreloc
 5913 00.00006B3A                              ;
 5914 00.00006B3A 48E7B000                     movem.l d0/d2-d3,-(a7)
 5915 00.00006B3E 20690024                     move.l  36(a1),a0       ;start of reloc table
 5916 00.00006B42 7600                         moveq   #0,d3   ;no tokejsrs (yet!)
 5917 00.00006B44                      .reloop ;
 5918 00.00006B44                              ;relocate library code!
 5919 00.00006B44                              ;
 5920 00.00006B44 2418                         move.l  (a0)+,d2
 5921 00.00006B46 4AA9002C                     tst.l   44(a1)
 5922 00.00006B4A 67000014                     beq     .skipr
 5923 00.00006B4E 4A390000400A                 tst.b   debugga
 5924 00.00006B54 6600000A                     bne     .skipr
 5925 00.00006B58 B4A9002C                     cmp.l   44(a1),d2
 5926 00.00006B5C 64000042                     bcc     .next
 5927 00.00006B60 4A712800             .skipr  tst     0(a1,d2.l)
 5928 00.00006B64 6A00000C                     bpl     .notajsr
 5929 00.00006B68 4A83                         tst.l   d3
 5930 00.00006B6A 66000006                     bne     .notajsr        ;already done...
 5931 00.00006B6E 2008                         move.l  a0,d0
 5932 00.00006B70 2601                         move.l  d1,d3   ;number left to do!
 5933 00.00006B72 94A90012             .notajsr        sub.l   18(a1),d2
 5934 00.00006B76 6B000028                     bmi     .next
 5935 00.00006B7A D4A90028                     add.l   40(a1),d2
 5936 00.00006B7E 2F02                         move.l  d2,-(a7)
 5937 00.00006B80 94B90000E8F2                 sub.l   pcat,d2
 5938 00.00006B86 61000DAA                     bsr     addoff2
 5939 00.00006B8A 245F                         move.l  (a7)+,a2
 5940 00.00006B8C 4A790000E858                 tst     nomemleft
 5941 00.00006B92 6600000C                     bne     .next
 5942 00.00006B96 24290028                     move.l  40(a1),d2
 5943 00.00006B9A 94A90012                     sub.l   18(a1),d2
 5944 00.00006B9E D592                         add.l   d2,(a2)
 5945 00.00006BA0                              ;
 5946 00.00006BA0 5381                 .next   subq.l  #1,d1
 5947 00.00006BA2 6600FFA0                     bne     .reloop
 5948 00.00006BA6 2403                         move.l  d3,d2
 5949 00.00006BA8 6700000A                     beq     .nohand
 5950 00.00006BAC 2440                         move.l  d0,a2
 5951 00.00006BAE 594A                         subq    #4,a2
 5952 00.00006BB0                              ;
 5953 00.00006BB0 61000282                     bsr     handlejsrs
 5954 00.00006BB4                              ;
 5955 00.00006BB4 4CDF000D             .nohand movem.l (a7)+,d0/d2-d3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 158
blitz2.s


 5956 00.00006BB8                      .noreloc
 5957 00.00006BB8 4CDF0502                     movem.l (a7)+,a0/a2/d1
 5958 00.00006BBC                              ;
 5959 00.00006BBC 48E76000                     movem.l d1/d2,-(a7)
 5960 00.00006BC0 4A69001A                     tst     26(a1)
 5961 00.00006BC4 6600000A                     bne     .skip2a
 5962 00.00006BC8 4269000A                     clr     10(a1)
 5963 00.00006BCC 60000090                     bra     .skip2
 5964 00.00006BD0                      .skip2a ;
 5965 00.00006BD0 527900002B38                 addq    #1,varoff
 5966 00.00006BD6 08B9000000002B39             bclr    #0,varoff+1
 5967 00.00006BDE 337900002B38000A             move    varoff,10(a1)
 5968 00.00006BE6                              ;
 5969 00.00006BE6 B27CFED3                     cmp     #65235,d1
 5970 00.00006BEA 6600002A                     bne     .nots1
 5971 00.00006BEE                              ;
 5972 00.00006BEE 33E9000A00002A04             move    10(a1),movestdn+2
 5973 00.00006BF6 33E9000A00002AA2             move    10(a1),pusha3+2
 5974 00.00006BFE 33E9000A00002AA6             move    10(a1),pusha32+2
 5975 00.00006C06 33E9000A00002AAA             move    10(a1),pulla3+2
 5976 00.00006C0E 33E9000A00002AAE             move    10(a1),geta3+2
 5977 00.00006C16                              ;
 5978 00.00006C16 B27CFC17             .nots1  cmp     #64535,d1
 5979 00.00006C1A 66000022                     bne     .notd
 5980 00.00006C1E                              ;
 5981 00.00006C1E 33E9000A00002904             move    10(a1),dataget+2
 5982 00.00006C26 33E9000A00002908             move    10(a1),dataput+2
 5983 00.00006C2E 33E9000A0000C520             move    10(a1),rescode+6
 5984 00.00006C36 33E9000A0000C524             move    10(a1),rescode2+2
 5985 00.00006C3E                              ;
 5986 00.00006C3E 547900002B38         .notd   addq    #2,varoff
 5987 00.00006C44 4A69001A                     tst     26(a1)
 5988 00.00006C48 6B000008                     bmi     .jword
 5989 00.00006C4C 547900002B38                 addq    #2,varoff
 5990 00.00006C52                      .jword  ;
 5991 00.00006C52 48E74040                     movem.l d1/a1,-(a7)
 5992 00.00006C56 6100FDE6                     bsr     usevars
 5993 00.00006C5A 4CDF0202                     movem.l (a7)+,d1/a1
 5994 00.00006C5E                              ;
 5995 00.00006C5E 3401                 .skip2  move    d1,d2
 5996 00.00006C60 22290016                     move.l  22(a1),d1
 5997 00.00006C64 6100028C                     bsr     uselib2
 5998 00.00006C68 2229001C                     move.l  28(a1),d1
 5999 00.00006C6C 61000284                     bsr     uselib2
 6000 00.00006C70 4CDF0006                     movem.l (a7)+,d1/d2
 6001 00.00006C74 4E75                 .skip   rts
 6002 00.00006C76                      
 6003 00.00006C76                      fixjsrs ;OK, we have to create code and fill in offsets
 6004 00.00006C76                              ;for all tokejsrs done through the program
 6005 00.00006C76                              ;
 6006 00.00006C76 7400                         moveq   #0,d2   ;do list till this...
 6007 00.00006C78 247900006EEE         .loop   move.l  tokeslist,a2
 6008 00.00006C7E B5C2                         cmp.l   d2,a2
 6009 00.00006C80 6700005E                     beq     .done
 6010 00.00006C84 2F0A                         move.l  a2,-(a7)        ;next till...
 6011 00.00006C86                      .loop2  ;do this list...
 6012 00.00006C86 7600                         moveq   #0,d3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 159
blitz2.s


 6013 00.00006C88 266A0008             .loop3  move.l  8(a2),a3
 6014 00.00006C8C B7C3                         cmp.l   d3,a3
 6015 00.00006C8E 67000042                     beq     .done4
 6016 00.00006C92                              ;
 6017 00.00006C92 2F0B                         move.l  a3,-(a7)
 6018 00.00006C94 48E73030                     movem.l d2-d3/a2-a3,-(a7)
 6019 00.00006C98 322A0004                     move    4(a2),d1
 6020 00.00006C9C 342A0006                     move    6(a2),d2
 6021 00.00006CA0                              ;
 6022 00.00006CA0 61000040                     bsr     tokecode
 6023 00.00006CA4                              ;
 6024 00.00006CA4 4CDF0C0C                     movem.l (a7)+,d2-d3/a2-a3
 6025 00.00006CA8 30390000E858         .loop4  move    nomemleft,d0
 6026 00.00006CAE 6700000E                     beq     .ok
 6027 00.00006CB2 2653                 .loop5  move.l  (a3),a3
 6028 00.00006CB4 B7C3                         cmp.l   d3,a3
 6029 00.00006CB6 6600FFFA                     bne     .loop5
 6030 00.00006CBA 60000010                     bra     .skipz
 6031 00.00006CBE 206B0004             .ok     move.l  4(a3),a0
 6032 00.00006CC2 2087                         move.l  d7,(a0)
 6033 00.00006CC4 2653                         move.l  (a3),a3
 6034 00.00006CC6 B7C3                         cmp.l   d3,a3
 6035 00.00006CC8 6600FFF4                     bne     .ok
 6036 00.00006CCC 261F                 .skipz  move.l  (a7)+,d3
 6037 00.00006CCE 6000FFB8                     bra     .loop3
 6038 00.00006CD2                              ;
 6039 00.00006CD2 2452                 .done4  move.l  (a2),a2
 6040 00.00006CD4 B5C2                         cmp.l   d2,a2
 6041 00.00006CD6 6600FFAE                     bne     .loop2
 6042 00.00006CDA 241F                         move.l  (a7)+,d2
 6043 00.00006CDC 6000FF9A                     bra     .loop
 6044 00.00006CE0                              ;
 6045 00.00006CE0 4E75                 .done   rts
 6046 00.00006CE2                      
 6047 00.00006CE2                      tokecode        ;d1=token number, d2=form number!
 6048 00.00006CE2                              ;
 6049 00.00006CE2                              ;return d7, address to jsr!
 6050 00.00006CE2                              ;
 6051 00.00006CE2 3F02                         move    d2,-(a7)
 6052 00.00006CE4 61000270                     bsr     findtoke
 6053 00.00006CE8 341F                         move    (a7)+,d2
 6054 00.00006CEA                              ;
 6055 00.00006CEA 08B900070000BCF2             bclr    #7,blitzmode
 6056 00.00006CF2 0882000E                     bclr    #14,d2
 6057 00.00006CF6 6700000A                     beq     .isamiga
 6058 00.00006CFA 08F900070000BCF2             bset    #7,blitzmode
 6059 00.00006D02                      .isamiga        ;
 6060 00.00006D02 4A53                         tst     (a3)
 6061 00.00006D04 670000A6                     beq     .simple
 6062 00.00006D08 082B00020001                 btst    #2,1(a3)
 6063 00.00006D0E 66001216                     bne     tokeerr
 6064 00.00006D12 082B00030001                 btst    #3,1(a3)
 6065 00.00006D18 6600120C                     bne     tokeerr
 6066 00.00006D1C                              ;
 6067 00.00006D1C                              ;OK, it's a complex sorta token...
 6068 00.00006D1C                              ;
 6069 00.00006D1C 47EB0006                     lea     6(a3),a3        ;skip node
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 160
blitz2.s


 6070 00.00006D20 301B                 .loop   move    (a3)+,d0
 6071 00.00006D22 6B001202                     bmi     tokeerr
 6072 00.00006D26 024000FF                     and     #255,d0
 6073 00.00006D2A D6C0                         add     d0,a3
 6074 00.00006D2C 524B                         addq    #1,a3
 6075 00.00006D2E C18B                         exg     a3,d0
 6076 00.00006D30 08800000                     bclr    #0,d0
 6077 00.00006D34 C18B                         exg     a3,d0
 6078 00.00006D36 5342                         subq    #1,d2
 6079 00.00006D38 6A00005E                     bpl     .loop2
 6080 00.00006D3C                              ;
 6081 00.00006D3C 4A53                         tst     (a3)
 6082 00.00006D3E 66000036                     bne     .go4it  ;no libs to fetch....
 6083 00.00006D42 202B0002                     move.l  2(a3),d0
 6084 00.00006D46 80AB000A                     or.l    10(a3),d0
 6085 00.00006D4A 6600002A                     bne     .go4it  ;no error chx...
 6086 00.00006D4E 082B00000009                 btst    #0,9(a3)
 6087 00.00006D54 66000020                     bne     .go4it  ;ditto...
 6088 00.00006D58 2E2B0006                     move.l  6(a3),d7        ;sub offset
 6089 00.00006D5C 30327800                     move    0(a2,d7.l),d0
 6090 00.00006D60 0240F000                     and     #$f000,d0
 6091 00.00006D64 B07CA000                     cmp     #$a000,d0
 6092 00.00006D68 6700000C                     beq     .go4it
 6093 00.00006D6C                              ;
 6094 00.00006D6C 9EAA0012             .penis  sub.l   18(a2),d7
 6095 00.00006D70 DEAA0028                     add.l   40(a2),d7
 6096 00.00006D74 4E75                         rts
 6097 00.00006D76                              ;
 6098 00.00006D76 41F90000BAE2         .go4it  lea     cutejsr,a0
 6099 00.00006D7C                      .putcode        ;a0=route in
 6100 00.00006D7C 2F390000E8F6                 move.l  pc,-(a7)
 6101 00.00006D82 33FCFFFF0000EC22             move    #-1,lasta6
 6102 00.00006D8A                              ;
 6103 00.00006D8A 4E90                         jsr     (a0)
 6104 00.00006D8C 323C4E75                     move    #$4e75,d1
 6105 00.00006D90 6100277A                     bsr     pokewd
 6106 00.00006D94                              ;
 6107 00.00006D94 2E1F                         move.l  (a7)+,d7
 6108 00.00006D96 4E75                         rts
 6109 00.00006D98                              ;
 6110 00.00006D98 4A5B                 .loop2  tst     (a3)+
 6111 00.00006D9A 67000008                     beq     .skip
 6112 00.00006D9E 544B                         addq    #2,a3
 6113 00.00006DA0 6000FFF6                     bra     .loop2
 6114 00.00006DA4 47EB000C             .skip   lea     12(a3),a3
 6115 00.00006DA8 6000FF76                     bra     .loop
 6116 00.00006DAC                              ;
 6117 00.00006DAC 4A42                 .simple tst     d2
 6118 00.00006DAE 66001176                     bne     tokeerr
 6119 00.00006DB2                              ;
 6120 00.00006DB2 4A6B0006                     tst     6(a3)
 6121 00.00006DB6 6600002C                     bne     .be4it
 6122 00.00006DBA 202B0008                     move.l  8(a3),d0
 6123 00.00006DBE 80AB0010                     or.l    16(a3),d0
 6124 00.00006DC2 66000020                     bne     .be4it
 6125 00.00006DC6 082B0000000F                 btst    #0,15(a3)
 6126 00.00006DCC 66000016                     bne     .be4it
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 161
blitz2.s


 6127 00.00006DD0 2E2B000C                     move.l  12(a3),d7
 6128 00.00006DD4 30327800                     move    0(a2,d7.l),d0
 6129 00.00006DD8 0240F000                     and     #$f000,d0
 6130 00.00006DDC B07CA000                     cmp     #$a000,d0
 6131 00.00006DE0 6600FF8A                     bne     .penis
 6132 00.00006DE4                              ;
 6133 00.00006DE4 220B                 .be4it  move.l  a3,d1
 6134 00.00006DE6 928A                         sub.l   a2,d1
 6135 00.00006DE8 41F90000BAF8                 lea     makelibsub,a0
 6136 00.00006DEE 6000FF8C                     bra     .putcode
 6137 00.00006DF2                      
 6138 00.00006DF2 2C780004             freetlist       move.l  4.w,a6
 6139 00.00006DF6 247900006EEE                 move.l  tokeslist,a2
 6140 00.00006DFC 42B900006EEE                 clr.l   tokeslist
 6141 00.00006E02 B4FC0000             .floop  cmp     #0,a2
 6142 00.00006E06 6700002A                     beq     .done2
 6143 00.00006E0A 266A0008                     move.l  8(a2),a3
 6144 00.00006E0E B6FC0000             .floop2 cmp     #0,a3
 6145 00.00006E12 67000010                     beq     .done3
 6146 00.00006E16 224B                         move.l  a3,a1
 6147 00.00006E18 2653                         move.l  (a3),a3
 6148 00.00006E1A 7008                         moveq   #8,d0
 6149 00.00006E1C 4EAEFF2E                     jsr     freemem(a6)
 6150 00.00006E20 6000FFEC                     bra     .floop2
 6151 00.00006E24 224A                 .done3  move.l  a2,a1
 6152 00.00006E26 2452                         move.l  (a2),a2
 6153 00.00006E28 700C                         moveq   #12,d0
 6154 00.00006E2A 4EAEFF2E                     jsr     freemem(a6)
 6155 00.00006E2E 6000FFD2                     bra     .floop
 6156 00.00006E32 4E75                 .done2  rts
 6157 00.00006E34                      
 6158 00.00006E34                      handlejsrs      ;a2=first, d2=how many to do.
 6159 00.00006E34                              ;
 6160 00.00006E34 48E71C7E                     movem.l a1-a6/d3-d5,-(a7)
 6161 00.00006E38 2849                         move.l  a1,a4
 6162 00.00006E3A                              ;
 6163 00.00006E3A 261A                 .loop   move.l  (a2)+,d3
 6164 00.00006E3C 3A343800                     move    0(a4,d3.l),d5
 6165 00.00006E40 6A000038                     bpl     .next
 6166 00.00006E44                              ;
 6167 00.00006E44 4AAC002C                     tst.l   44(a4)
 6168 00.00006E48 67000014                     beq     .skipr
 6169 00.00006E4C 4A390000400A                 tst.b   debugga
 6170 00.00006E52 6600000A                     bne     .skipr
 6171 00.00006E56 B6AC002C                     cmp.l   44(a4),d3
 6172 00.00006E5A 6400001E                     bcc     .next
 6173 00.00006E5E                      .skipr  ;
 6174 00.00006E5E 0885000F                     bclr    #15,d5  ;to offset number
 6175 00.00006E62 38343802                     move    2(a4,d3.l),d4
 6176 00.00006E66 96AC0012                     sub.l   18(a4),d3
 6177 00.00006E6A D6AC0028                     add.l   40(a4),d3
 6178 00.00006E6E                              ;
 6179 00.00006E6E 48E72028                     movem.l d2/a2/a4,-(a7)
 6180 00.00006E72 61000012                     bsr     maketjsr
 6181 00.00006E76 4CDF1404                     movem.l (a7)+,d2/a2/a4
 6182 00.00006E7A                              ;
 6183 00.00006E7A 5382                 .next   subq.l  #1,d2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 162
blitz2.s


 6184 00.00006E7C 6600FFBC                     bne     .loop
 6185 00.00006E80                              ;
 6186 00.00006E80 4CDF7E38                     movem.l (a7)+,a1-a6/d3-d5
 6187 00.00006E84 4E75                         rts
 6188 00.00006E86                      
 6189 00.00006E86                      maketjsr        ;d3=address to poke jsr into,
 6190 00.00006E86                              ;d4=token number, d5=offset number
 6191 00.00006E86                              ;bit 14 of d5=1 if BLITZ type.
 6192 00.00006E86                              ;
 6193 00.00006E86 47F900006EEE                 lea     tokeslist,a3
 6194 00.00006E8C 2C780004                     move.l  4.w,a6
 6195 00.00006E90 2013                 .loop2  move.l  (a3),d0
 6196 00.00006E92 67000018                     beq     .notfound
 6197 00.00006E96 2640                         move.l  d0,a3
 6198 00.00006E98 B86B0004                     cmp     4(a3),d4
 6199 00.00006E9C 6600FFF2                     bne     .loop2
 6200 00.00006EA0 BA6B0006                     cmp     6(a3),d5
 6201 00.00006EA4 6600FFEA                     bne     .loop2
 6202 00.00006EA8 60000026                     bra     .found
 6203 00.00006EAC                              ;
 6204 00.00006EAC                      .notfound       ;None done yet...make one up!
 6205 00.00006EAC                              ;
 6206 00.00006EAC 700C                         moveq   #12,d0
 6207 00.00006EAE 7201                         moveq   #1,d1
 6208 00.00006EB0 4EB900004B6C                 jsr     doallocmem
 6209 00.00006EB6 2640                         move.l  d0,a3
 6210 00.00006EB8 26B900006EEE                 move.l  tokeslist,(a3)
 6211 00.00006EBE 23CB00006EEE                 move.l  a3,tokeslist
 6212 00.00006EC4 37440004                     move    d4,4(a3)
 6213 00.00006EC8 37450006                     move    d5,6(a3)
 6214 00.00006ECC 42AB0008                     clr.l   8(a3)
 6215 00.00006ED0                              ;
 6216 00.00006ED0 7008                 .found  moveq   #8,d0
 6217 00.00006ED2 7201                         moveq   #1,d1
 6218 00.00006ED4 4EB900004B6C                 jsr     doallocmem
 6219 00.00006EDA 2040                         move.l  d0,a0
 6220 00.00006EDC 21430004                     move.l  d3,4(a0)
 6221 00.00006EE0 20AB0008                     move.l  8(a3),(a0)
 6222 00.00006EE4 27480008                     move.l  a0,8(a3)
 6223 00.00006EE8                              ;
 6224 00.00006EE8 3204                         move    d4,d1
 6225 00.00006EEA 6000006A                     bra     findtoke        ;use this library - NOW!
 6226 00.00006EEE                      
 6227 00.00006EEE 00000000             tokeslist       dc.l    0
 6228 00.00006EF2                      
 6229 00.00006EF2                      ;       00.l : Next
 6230 00.00006EF2                      ;       04.w : token number
 6231 00.00006EF2                      ;       06.w : form number      ;bit 14=1 if Blitz
 6232 00.00006EF2                      ;       08.l : list of offsets
 6233 00.00006EF2                                      ;
 6234 00.00006EF2                                      ;00.l : Next
 6235 00.00006EF2                                      ;04.l : Offset
 6236 00.00006EF2                      
 6237 00.00006EF2 67000024             uselib2 beq     .skip
 6238 00.00006EF6 2F09                         move.l  a1,-(a7)
 6239 00.00006EF8 D3C1                         add.l   d1,a1
 6240 00.00006EFA 5C49                         addq    #6,a1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 163
blitz2.s


 6241 00.00006EFC 3219                 .loop   move    (a1)+,d1
 6242 00.00006EFE 67000016                     beq     .done
 6243 00.00006F02 B242                         cmp     d2,d1
 6244 00.00006F04 6700000A                     beq     .skip2
 6245 00.00006F08 2F09                         move.l  a1,-(a7)
 6246 00.00006F0A 6100FB36                     bsr     uselib
 6247 00.00006F0E 225F                         move.l  (a7)+,a1
 6248 00.00006F10 5449                 .skip2  addq    #2,a1
 6249 00.00006F12 6000FFE8                     bra     .loop
 6250 00.00006F16 225F                 .done   move.l  (a7)+,a1
 6251 00.00006F18 4E75                 .skip   rts
 6252 00.00006F1A                      
 6253 00.00006F1A                      findlibnoerr    ;
 6254 00.00006F1A 22790000EC44                 move.l  firstlib,a1
 6255 00.00006F20 B2FC0000             .loop   cmp     #0,a1
 6256 00.00006F24 6710                         beq.s   .rts
 6257 00.00006F26 B2690004                     cmp     4(a1),d1
 6258 00.00006F2A 67000008                     beq     .found
 6259 00.00006F2E 2251                         move.l  (a1),a1
 6260 00.00006F30 6000FFEE                     bra     .loop
 6261 00.00006F34 72FF                 .found  moveq   #-1,d1
 6262 00.00006F36 4E75                 .rts    rts
 6263 00.00006F38                      
 6264 00.00006F38                      findlib ;find lib number d1 - return in a1
 6265 00.00006F38                              ;
 6266 00.00006F38 22790000EC44                 move.l  firstlib,a1
 6267 00.00006F3E B2FC0000             .loop   cmp     #0,a1
 6268 00.00006F42                              ;
 6269 00.00006F42 670016AC                     beq     noliberr
 6270 00.00006F46                              ;
 6271 00.00006F46 B2690004                     cmp     4(a1),d1
 6272 00.00006F4A 67000008                     beq     .found
 6273 00.00006F4E 2251                         move.l  (a1),a1
 6274 00.00006F50 6000FFEC                     bra     .loop
 6275 00.00006F54 4E75                 .found  rts
 6276 00.00006F56                      
 6277 00.00006F56                      findtoke        ;d1=token.
 6278 00.00006F56                              ;
 6279 00.00006F56                              ;return a2.l=lib, a3.l=sub
 6280 00.00006F56                              ;
 6281 00.00006F56                              ;
 6282 00.00006F56 24790000EC44                 move.l  firstlib,a2
 6283 00.00006F5C B4FC0000             .loop   cmp     #0,a2
 6284 00.00006F60 670016B6                     beq     notokerr
 6285 00.00006F64 B26A000E                     cmp     14(a2),d1
 6286 00.00006F68 6500004E                     bcs     .next
 6287 00.00006F6C B26A0010                     cmp     16(a2),d1
 6288 00.00006F70 64000046                     bcc     .next
 6289 00.00006F74                              ;
 6290 00.00006F74                              ;lib found!
 6291 00.00006F74                              ;
 6292 00.00006F74 47EA0030                     lea     48(a2),a3
 6293 00.00006F78 4A6A0004                     tst     4(a2)
 6294 00.00006F7C 6A000028                     bpl     .userlib
 6295 00.00006F80 B26A000E             .loop2  cmp     14(a2),d1
 6296 00.00006F84 6700000C                     beq     .found
 6297 00.00006F88 5341                         subq    #1,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 164
blitz2.s


 6298 00.00006F8A 266B0002                     move.l  2(a3),a3
 6299 00.00006F8E 6000FFF0                     bra     .loop2
 6300 00.00006F92 48E74040             .found  movem.l d1/a1,-(a7)
 6301 00.00006F96 224A                         move.l  a2,a1
 6302 00.00006F98 32290004                     move    4(a1),d1        ;set lib#
 6303 00.00006F9C 6100FAA8                     bsr     uselib3
 6304 00.00006FA0 4CDF0202                     movem.l (a7)+,d1/a1
 6305 00.00006FA4 4E75                         rts
 6306 00.00006FA6                              ;
 6307 00.00006FA6                      .userlib        ;move   (a3),d0
 6308 00.00006FA6                              ;and    #15,d0
 6309 00.00006FA6                              ;beq    .notoke
 6310 00.00006FA6 B26A000E                     cmp     14(a2),d1
 6311 00.00006FAA 6700FFE6                     beq     .found
 6312 00.00006FAE 5341                         subq    #1,d1
 6313 00.00006FB0 266B0002             .notoke move.l  2(a3),a3
 6314 00.00006FB4 6000FFF0                     bra     .userlib
 6315 00.00006FB8 2452                 .next   move.l  (a2),a2
 6316 00.00006FBA 6000FFA0                     bra     .loop
 6317 00.00006FBE                      
 6318 00.00006FBE 00000000             deflibsat       dc.l    0
 6319 00.00006FC2 00000000             acidlibsat      dc.l    0
 6320 00.00006FC6 00000000             blitzlibsat     dc.l    0       ;start of blitzlibs list!
 6321 00.00006FCA                      
 6322 00.00006FCA                      loadlibgroup    ;load a group of libraries!
 6323 00.00006FCA                              ;
 6324 00.00006FCA                              ;d0=len, d1=name
 6325 00.00006FCA                              ;return d0=address
 6326 00.00006FCA                              ;
 6327 00.00006FCA 4A80                         tst.l   d0
 6328 00.00006FCC 67000078                     beq     .rts
 6329 00.00006FD0 2C00                         move.l  d0,d6   ;d6=len
 6330 00.00006FD2 2C7900000154                 move.l  dos,a6
 6331 00.00006FD8 243C000003ED                 move.l  #1005,d2
 6332 00.00006FDE 4EAEFFE2                     jsr     open(a6)
 6333 00.00006FE2 2E00                         move.l  d0,d7
 6334 00.00006FE4 67000060                     beq     .rts
 6335 00.00006FE8 2006                         move.l  d6,d0
 6336 00.00006FEA 7201                         moveq   #1,d1
 6337 00.00006FEC 2C780004                     move.l  4.w,a6
 6338 00.00006FF0 4EB900004B6C                 jsr     doallocmem
 6339 00.00006FF6 2A00                         move.l  d0,d5   ;start address
 6340 00.00006FF8 2207                         move.l  d7,d1
 6341 00.00006FFA 2405                         move.l  d5,d2
 6342 00.00006FFC 2606                         move.l  d6,d3
 6343 00.00006FFE 2C7900000154                 move.l  dos,a6
 6344 00.00007004 4EAEFFD6                     jsr     read(a6)
 6345 00.00007008 2207                         move.l  d7,d1
 6346 00.0000700A 4EAEFFDC                     jsr     close(a6)
 6347 00.0000700E                              ;
 6348 00.0000700E 2045                         move.l  d5,a0
 6349 00.00007010 2018                 .linkloop       move.l  (a0)+,d0
 6350 00.00007012 6730                         beq.s   .linkdone
 6351 00.00007014 43E80020                     lea     32(a0),a1
 6352 00.00007018 2689                         move.l  a1,(a3) ;link in.
 6353 00.0000701A 2649                         move.l  a1,a3
 6354 00.0000701C D1C0                         add.l   d0,a0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 165
blitz2.s


 6355 00.0000701E                              ;
 6356 00.0000701E                              ;fix stuff - done by loadalib
 6357 00.0000701E                              ;
 6358 00.0000701E 2029FFFC                     move.l  -4(a1),d0       ;number of longwords.
 6359 00.00007022 D080                         add.l   d0,d0   ;to bytes...
 6360 00.00007024 D080                         add.l   d0,d0
 6361 00.00007026 23400006                     move.l  d0,6(a1)        ;fix 1
 6362 00.0000702A 42A90020                     clr.l   32(a1)  ;no relocs
 6363 00.0000702E 45F1080C                     lea     12(a1,d0.l),a2  ;reloc info.
 6364 00.00007032 B5C8                         cmp.l   a0,a2   ;is it over?
 6365 00.00007034 64DA                         bcc.s   .linkloop
 6366 00.00007036                              ;
 6367 00.00007036 236AFFF80020                 move.l  -8(a2),32(a1)   ;number of relocs.
 6368 00.0000703C 234A0024                     move.l  a2,36(a1)               ;pointer to relocs.
 6369 00.00007040 6000FFCE                     bra     .linkloop
 6370 00.00007044                              ;
 6371 00.00007044 2005                 .linkdone       move.l  d5,d0
 6372 00.00007046 4E75                 .rts    rts
 6373 00.00007048                      
 6374 00.00007048                      loadlibs        ;use libslist to load in used libs dir contents
 6375 00.00007048                              ;
 6376 00.00007048 47F90000EC44                 lea     firstlib,a3
 6377 00.0000704E                              ;
 6378 00.0000704E 2039000035FA                 move.l  acidlibs,d0
 6379 00.00007054 223C000035EA                 move.l  #acidname,d1
 6380 00.0000705A 6100FF6E                     bsr     loadlibgroup
 6381 00.0000705E 23C000006FC2                 move.l  d0,acidlibsat
 6382 00.00007064                              ;
 6383 00.00007064 2039000035E6                 move.l  deflibs,d0
 6384 00.0000706A 223C000035D6                 move.l  #defname,d1
 6385 00.00007070 6100FF58                     bsr     loadlibgroup
 6386 00.00007074 23C000006FBE                 move.l  d0,deflibsat
 6387 00.0000707A                              ;
 6388 00.0000707A                              ;all libs read in, now to link 'em up.
 6389 00.0000707A                              ;
 6390 00.0000707A 4293                         clr.l   (a3)
 6391 00.0000707C 23CB00006FC6                 move.l  a3,blitzlibsat
 6392 00.00007082                      loadblitzlibs   ;
 6393 00.00007082                              ;load in blitz libs only!
 6394 00.00007082                              ;
 6395 00.00007082 41F90000221C                 lea     undobuffer,a0
 6396 00.00007088 43F90000229C                 lea     libsdir,a1
 6397 00.0000708E 10D9                 .loop0  move.b  (a1)+,(a0)+
 6398 00.00007090 66FC                         bne.s   .loop0
 6399 00.00007092 5548                         subq    #2,a0
 6400 00.00007094 0C18003A                     cmp.b   #':',(a0)+
 6401 00.00007098 670C                         beq.s   .yup
 6402 00.0000709A B1FC0000221C                 cmp.l   #undobuffer,a0
 6403 00.000070A0 6704                         beq.s   .yup
 6404 00.000070A2 10FC002F                     move.b  #'/',(a0)+
 6405 00.000070A6 2F08                 .yup    move.l  a0,-(a7)        ;store first pos for chars
 6406 00.000070A8                                              ;("BLITZLIBS:")
 6407 00.000070A8                      
 6408 00.000070A8 45F90000E9B4                 lea     libslist,a2     ;lib names!
 6409 00.000070AE 267900006FC6                 move.l  blitzlibsat,a3
 6410 00.000070B4 2C7900000154                 move.l  dos,a6
 6411 00.000070BA                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 166
blitz2.s


 6412 00.000070BA 2012                 .loop   move.l  (a2),d0
 6413 00.000070BC 6608                         bne.s   .more
 6414 00.000070BE 4293                         clr.l   (a3)
 6415 00.000070C0 584F                         addq    #4,a7
 6416 00.000070C2 60000138                     bra     fixlibs
 6417 00.000070C6                              ;
 6418 00.000070C6 2440                 .more   move.l  d0,a2
 6419 00.000070C8 4A6A0004                     tst     4(a2)
 6420 00.000070CC 67EC                         beq.s   .loop
 6421 00.000070CE                              ;
 6422 00.000070CE 43EA0006                     lea     6(a2),a1        ;add dir name to libsdir
 6423 00.000070D2 2057                         move.l  (a7),a0
 6424 00.000070D4 10D9                 .loop2  move.b  (a1)+,(a0)+
 6425 00.000070D6 6600FFFC                     bne     .loop2
 6426 00.000070DA 2F08                         move.l  a0,-(a7)        ;pointer for lib name
 6427 00.000070DC                              ;
 6428 00.000070DC 223C0000221C                 move.l  #undobuffer,d1
 6429 00.000070E2 74FE                         moveq   #-2,d2
 6430 00.000070E4 4EAEFFAC                     jsr     lock(a6)
 6431 00.000070E8 2200                         move.l  d0,d1
 6432 00.000070EA 6700006A                     beq     .exdone2
 6433 00.000070EE 2057                         move.l  (a7),a0
 6434 00.000070F0 117C002FFFFF                 move.b  #'/',-1(a0)
 6435 00.000070F6                              ;
 6436 00.000070F6 2F01                         move.l  d1,-(a7)        ;lock
 6437 00.000070F8 243C0000EC68                 move.l  #namebuff,d2
 6438 00.000070FE 4EAEFF9A                     jsr     examine(a6)
 6439 00.00007102 4A80                         tst.l   d0
 6440 00.00007104 6700004A                     beq     .exdone
 6441 00.00007108                              ;
 6442 00.00007108                              ;O.K. for exnext loop....
 6443 00.00007108                              ;
 6444 00.00007108 2217                 .exloop move.l  (a7),d1
 6445 00.0000710A 243C0000EC68                 move.l  #namebuff,d2
 6446 00.00007110 4EAEFF94                     jsr     exnext(a6)
 6447 00.00007114 4A80                         tst.l   d0
 6448 00.00007116 67000038                     beq     .exdone
 6449 00.0000711A 20390000EC6C                 move.l  namebuff+4,d0   ;+4
 6450 00.00007120 6A00FFE6                     bpl     .exloop
 6451 00.00007124                              ;
 6452 00.00007124                              ;*** NEW ***
 6453 00.00007124 41F90000EC70                 lea     namebuff+8,a0
 6454 00.0000712A 6100DC18                     bsr     endininfo
 6455 00.0000712E 6700FFD8                     beq     .exloop
 6456 00.00007132                              ;
 6457 00.00007132 41F90000EC70                 lea     namebuff+8,a0
 6458 00.00007138 226F0004                     move.l  4(a7),a1
 6459 00.0000713C 12D8                 .mnamel move.b  (a0)+,(a1)+
 6460 00.0000713E 6600FFFC                     bne     .mnamel
 6461 00.00007142 223C0000221C                 move.l  #undobuffer,d1
 6462 00.00007148 61000012                     bsr     loadalib
 6463 00.0000714C 6000FFBA                     bra     .exloop
 6464 00.00007150                              ;
 6465 00.00007150 221F                 .exdone move.l  (a7)+,d1
 6466 00.00007152 4EAEFFA6                     jsr     unlock(a6)
 6467 00.00007156 584F                 .exdone2        addq    #4,a7   ;forget namepos
 6468 00.00007158 6000FF60                     bra     .loop
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 167
blitz2.s


 6469 00.0000715C                      
 6470 00.0000715C                      loadalib        ;filename pointed to by d1      ;dos base in a6
 6471 00.0000715C                              ;lib in a3
 6472 00.0000715C                              ;
 6473 00.0000715C 243C000003ED                 move.l  #1005,d2
 6474 00.00007162 4EAEFFE2                     jsr     open(a6)
 6475 00.00007166 2E00                         move.l  d0,d7
 6476 00.00007168 67000090                     beq     .openerr
 6477 00.0000716C 2207                         move.l  d7,d1
 6478 00.0000716E 243C0000ED70                 move.l  #optstuff,d2
 6479 00.00007174 7620                         moveq   #32,d3
 6480 00.00007176 4EAEFFD6                     jsr     read(a6)
 6481 00.0000717A 2C390000ED8C                 move.l  optstuff+28,d6  ;long words to read
 6482 00.00007180 E58E                         lsl.l   #2,d6
 6483 00.00007182 2006                         move.l  d6,d0
 6484 00.00007184 7201                         moveq   #1,d1
 6485 00.00007186 2C780004                     move.l  4.w,a6
 6486 00.0000718A 4EB900004B6C                 jsr     doallocmem
 6487 00.00007190 2A40                         move.l  d0,a5
 6488 00.00007192 2C7900000154                 move.l  dos,a6
 6489 00.00007198                              ;
 6490 00.00007198 2207                         move.l  d7,d1
 6491 00.0000719A 240D                         move.l  a5,d2
 6492 00.0000719C 2606                         move.l  d6,d3
 6493 00.0000719E 4EAEFFD6                     jsr     read(a6)                ;read in struct
 6494 00.000071A2                              ;
 6495 00.000071A2 268D                         move.l  a5,(a3)
 6496 00.000071A4 264D                         move.l  a5,a3
 6497 00.000071A6 2B460006                     move.l  d6,6(a5)
 6498 00.000071AA 42AD0020                     clr.l   32(a5)
 6499 00.000071AE 2207                         move.l  d7,d1
 6500 00.000071B0 243C0000ED70                 move.l  #optstuff,d2
 6501 00.000071B6 760C                         moveq   #12,d3
 6502 00.000071B8 4EAEFFD6                     jsr     read(a6)
 6503 00.000071BC                              ;
 6504 00.000071BC B0BC0000000C                 cmp.l   #12,d0
 6505 00.000071C2 65000030                     bcs     .closeup
 6506 00.000071C6 20390000ED74                 move.l  optstuff+4,d0
 6507 00.000071CC 2B400020                     move.l  d0,32(a5)
 6508 00.000071D0 E588                         lsl.l   #2,d0
 6509 00.000071D2 2A00                         move.l  d0,d5           ;length of reloc info
 6510 00.000071D4 7201                         moveq   #1,d1
 6511 00.000071D6 2C780004                     move.l  4.w,a6
 6512 00.000071DA 4EB900004B6C                 jsr     doallocmem
 6513 00.000071E0 2C7900000154                 move.l  dos,a6
 6514 00.000071E6                              ;
 6515 00.000071E6 2B400024                     move.l  d0,36(a5)               ;pointer to reloc mem
 6516 00.000071EA 2207                         move.l  d7,d1
 6517 00.000071EC 2400                         move.l  d0,d2
 6518 00.000071EE 2605                         move.l  d5,d3
 6519 00.000071F0 4EAEFFD6                     jsr     read(a6)
 6520 00.000071F4                              ;
 6521 00.000071F4 2207                 .closeup        move.l  d7,d1
 6522 00.000071F6 4EEEFFDC                     jmp     close(a6)
 6523 00.000071FA 4E75                 .openerr        rts
 6524 00.000071FC                      
 6525 00.000071FC                      fixlibs ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 168
blitz2.s


 6526 00.000071FC                              ;fill in blanks in lib list
 6527 00.000071FC                              ;
 6528 00.000071FC                              ;tokens, links etc
 6529 00.000071FC                              ;
 6530 00.000071FC 42790000E840                 clr     nummaxs
 6531 00.00007202 26790000EC3A                 move.l  lasttoken,a3
 6532 00.00007208 24790000EC44                 move.l  firstlib,a2
 6533 00.0000720E                              ;
 6534 00.0000720E B4FC0000             .loop   cmp     #0,a2
 6535 00.00007212 670000C4                     beq     .done
 6536 00.00007216 3E2A0004                     move    4(a2),d7
 6537 00.0000721A 6B00000A                     bmi     .syslib
 6538 00.0000721E EF4F                         lsl     #7,d7
 6539 00.00007220 5247                         addq    #1,d7
 6540 00.00007222 3547000E                     move    d7,14(a2)
 6541 00.00007226 43EA0030             .syslib lea     48(a2),a1
 6542 00.0000722A 49F90000EC60                 lea     temp1,a4
 6543 00.00007230                              ;
 6544 00.00007230 3011                 .loop2  move    (a1),d0
 6545 00.00007232 6B00007A                     bmi     .next
 6546 00.00007236 2889                         move.l  a1,(a4)
 6547 00.00007238 2849                         move.l  a1,a4   ;last link for subs
 6548 00.0000723A 544C                         addq    #2,a4
 6549 00.0000723C 5C49                         addq    #6,a1
 6550 00.0000723E B07C0008                     cmp     #8,d0
 6551 00.00007242 6700004C                     beq     .addtoke
 6552 00.00007246 0240000F                     and     #15,d0
 6553 00.0000724A 66000010                     bne     .something
 6554 00.0000724E                              ;
 6555 00.0000724E                              ;skip sys sub
 6556 00.0000724E                              ;
 6557 00.0000724E 610000C4                     bsr     skiplibreg
 6558 00.00007252 43E9000C                     lea     12(a1),a1
 6559 00.00007256 5247                         addq    #1,d7   ;in case it's a user lib
 6560 00.00007258 6000FFD6                     bra     .loop2  
 6561 00.0000725C 08000002             .something      btst    #2,d0
 6562 00.00007260 67000012                     beq     .notalib
 6563 00.00007264 5849                         addq    #4,a1
 6564 00.00007266 4A19                 .alibloop       tst.b   (a1)+
 6565 00.00007268 6A00FFFC                     bpl     .alibloop
 6566 00.0000726C 610000BE                     bsr     aligna1
 6567 00.00007270 6000001E                     bra     .addtoke
 6568 00.00007274                      .notalib        ;process standard function or statement
 6569 00.00007274 3019                 .stloop move    (a1)+,d0
 6570 00.00007276 6B000018                     bmi     .addtoke
 6571 00.0000727A 024000FF                     and     #255,d0
 6572 00.0000727E D2C0                         add     d0,a1
 6573 00.00007280 610000AA                     bsr     aligna1
 6574 00.00007284 6100008E                     bsr     skiplibreg
 6575 00.00007288 43E9000C                     lea     12(a1),a1
 6576 00.0000728C 6000FFE6                     bra     .stloop
 6577 00.00007290 2689                 .addtoke        move.l  a1,(a3)
 6578 00.00007292 2649                         move.l  a1,a3
 6579 00.00007294 5849                         addq    #4,a1
 6580 00.00007296                              ;
 6581 00.00007296 32C7                         move    d7,(a1)+
 6582 00.00007298                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 169
blitz2.s


 6583 00.00007298 4A19                 .tokeloop       tst.b   (a1)+
 6584 00.0000729A 6600FFFC                     bne     .tokeloop
 6585 00.0000729E 4A19                 .tokeloop2      tst.b   (a1)+
 6586 00.000072A0 6600FFFC                     bne     .tokeloop2
 6587 00.000072A4 61000086                     bsr     aligna1
 6588 00.000072A8 5247                         addq    #1,d7
 6589 00.000072AA 6000FF84                     bra     .loop2
 6590 00.000072AE                              ;
 6591 00.000072AE 4A6A0004             .next   tst     4(a2)
 6592 00.000072B2 6B000006                     bmi     .notulib
 6593 00.000072B6 35470010                     move    d7,16(a2)
 6594 00.000072BA 5449                 .notulib        addq    #2,a1
 6595 00.000072BC 4A99                         tst.l   (a1)+
 6596 00.000072BE 6700000C                     beq     .nomax
 6597 00.000072C2 52790000E840                 addq    #1,nummaxs
 6598 00.000072C8 43E90016                     lea     22(a1),a1
 6599 00.000072CC 93CA                 .nomax  sub.l   a2,a1
 6600 00.000072CE 25490012                     move.l  a1,18(a2)
 6601 00.000072D2 2452                         move.l  (a2),a2
 6602 00.000072D4 6000FF38                     bra     .loop
 6603 00.000072D8                              ;
 6604 00.000072D8 4293                 .done   clr.l   (a3)
 6605 00.000072DA 23CF00002B18                 move.l  a7,errstack
 6606 00.000072E0 23FC0000730E00002B1C         move.l  #.cont,errcont
 6607 00.000072EA 33FCFFFF00008AFE             move    #-1,ezerr
 6608 00.000072F2 323CFFFA                     move    #65530,d1
 6609 00.000072F6 6100FC40                     bsr     findlib ;get address of mem lib
 6610 00.000072FA 23C90000EBF8                 move.l  a1,memlib
 6611 00.00007300 323CFDA7                     move    #64935,d1
 6612 00.00007304 6100FC32                     bsr     findlib
 6613 00.00007308 23C900007310                 move.l  a1,ffplib
 6614 00.0000730E 4E75                 .cont   rts
 6615 00.00007310                      
 6616 00.00007310 00000000             ffplib  dc.l    0
 6617 00.00007314                      
 6618 00.00007314 4A59                 skiplibreg      tst     (a1)+
 6619 00.00007316 67000008                     beq     .done
 6620 00.0000731A 5449                         addq    #2,a1
 6621 00.0000731C 6000FFF6                     bra     skiplibreg
 6622 00.00007320 4E75                 .done   rts
 6623 00.00007322                              
 6624 00.00007322 C348                 aligna0 exg.l   a0,a1
 6625 00.00007324 61000006                     bsr     aligna1
 6626 00.00007328 C348                         exg.l   a0,a1
 6627 00.0000732A 4E75                         rts
 6628 00.0000732C                              ;
 6629 00.0000732C C189                 aligna1 exg.l   a1,d0
 6630 00.0000732E 5280                         addq.l  #1,d0
 6631 00.00007330 08800000                     bclr    #0,d0
 6632 00.00007334 C189                         exg.l   a1,d0
 6633 00.00007336 4E75                         rts
 6634 00.00007338                      
 6635 00.00007338 2C780004             freeblitzlibs   move.l  4.w,a6
 6636 00.0000733C 247900006FC6                 move.l  blitzlibsat,a2
 6637 00.00007342 2012                         move.l  (a2),d0
 6638 00.00007344 4292                         clr.l   (a2)
 6639 00.00007346 2440                         move.l  d0,a2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 170
blitz2.s


 6640 00.00007348 B4FC0000             .loop   cmp     #0,a2
 6641 00.0000734C 6700C404                     beq     frlibslist
 6642 00.00007350 202A0020                     move.l  32(a2),d0
 6643 00.00007354 670A                         beq.s   .skip
 6644 00.00007356 E588                         lsl.l   #2,d0
 6645 00.00007358 226A0024                     move.l  36(a2),a1
 6646 00.0000735C 4EAEFF2E                     jsr     freemem(a6)
 6647 00.00007360 224A                 .skip   move.l  a2,a1
 6648 00.00007362 20290006                     move.l  6(a1),d0
 6649 00.00007366 2452                         move.l  (a2),a2
 6650 00.00007368 4EAEFF2E                     jsr     freemem(a6)
 6651 00.0000736C 6000FFDA                     bra     .loop
 6652 00.00007370                      
 6653 00.00007370                      freelibs        ;free up all memory used by libs
 6654 00.00007370                              ;
 6655 00.00007370 6100FFC6                     bsr     freeblitzlibs
 6656 00.00007374                              ;
 6657 00.00007374 2C780004                     move.l  4.w,a6
 6658 00.00007378 42B90000EC44                 clr.l   firstlib
 6659 00.0000737E 20790000EC3A                 move.l  lasttoken,a0
 6660 00.00007384 4290                         clr.l   (a0)
 6661 00.00007386                              ;
 6662 00.00007386 2039000035E6                 move.l  deflibs,d0
 6663 00.0000738C 6714                         beq.s   .defskip
 6664 00.0000738E 223900006FBE                 move.l  deflibsat,d1
 6665 00.00007394 670C                         beq.s   .defskip
 6666 00.00007396 42B900006FBE                 clr.l   deflibsat
 6667 00.0000739C 2241                         move.l  d1,a1
 6668 00.0000739E 4EAEFF2E                     jsr     freemem(a6)
 6669 00.000073A2                      .defskip        ;
 6670 00.000073A2 2039000035FA                 move.l  acidlibs,d0
 6671 00.000073A8 6714                         beq.s   .acidskip
 6672 00.000073AA 223900006FC2                 move.l  acidlibsat,d1
 6673 00.000073B0 670C                         beq.s   .acidskip
 6674 00.000073B2 42B900006FC2                 clr.l   acidlibsat
 6675 00.000073B8 2241                         move.l  d1,a1
 6676 00.000073BA 4EAEFF2E                     jsr     freemem(a6)
 6677 00.000073BE                      .acidskip       ;
 6678 00.000073BE 4E75                         rts
 6679 00.000073C0                              
 6680 00.000073C0                      freemacs        ;
 6681 00.000073C0 20790000E34A                 move.l  lastresmac,a0
 6682 00.000073C6 2450                         move.l  (a0),a2
 6683 00.000073C8 4290                         clr.l   (a0)
 6684 00.000073CA 2C780004                     move.l  4.w,a6
 6685 00.000073CE B4FC0000             .loop   cmp     #0,a2
 6686 00.000073D2 67000026                     beq     .done
 6687 00.000073D6 7000                         moveq   #0,d0
 6688 00.000073D8 302A0008                     move    8(a2),d0
 6689 00.000073DC 6700000A                     beq     .skip
 6690 00.000073E0 226A0004                     move.l  4(a2),a1
 6691 00.000073E4 4EAEFF2E                     jsr     freemem(a6)
 6692 00.000073E8                              ;
 6693 00.000073E8 224A                 .skip   move.l  a2,a1
 6694 00.000073EA 2452                         move.l  (a2),a2
 6695 00.000073EC 7000                         moveq   #0,d0
 6696 00.000073EE 1029000C                     move.b  12(a1),d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 171
blitz2.s


 6697 00.000073F2 4EAEFF2E                     jsr     freemem(a6)
 6698 00.000073F6 6000FFD6                     bra     .loop
 6699 00.000073FA 4E75                 .done   rts
 6700 00.000073FC                      
 6701 00.000073FC 24790000E930         freeasms        move.l  firstasm,a2
 6702 00.00007402 42B90000E930                 clr.l   firstasm
 6703 00.00007408 2C780004                     move.l  4.w,a6
 6704 00.0000740C B4FC0000             .loop   cmp     #0,a2
 6705 00.00007410 67000014                     beq     .done
 6706 00.00007414 7000                         moveq   #0,d0
 6707 00.00007416 102A000E                     move.b  14(a2),d0
 6708 00.0000741A 224A                         move.l  a2,a1
 6709 00.0000741C 2452                         move.l  (a2),a2
 6710 00.0000741E 4EAEFF2E                     jsr     freemem(a6)
 6711 00.00007422 6000FFE8                     bra     .loop
 6712 00.00007426 4E75                 .done   rts
 6713 00.00007428                      
 6714 00.00007428                      pokedata1b      ;byte into data1
 6715 00.00007428 28790000E8EE                 move.l  data1,a4
 6716 00.0000742E B9F90000E8E2                 cmp.l   data2at,a4
 6717 00.00007434 6400000C                     bcc     .over
 6718 00.00007438 18C1                         move.b  d1,(a4)+
 6719 00.0000743A 23CC0000E8EE                 move.l  a4,data1
 6720 00.00007440 4E75                         rts
 6721 00.00007442 33FCFFFF0000E858     .over   move    #-1,nomemleft
 6722 00.0000744A 52B90000E8EE                 addq.l  #1,data1
 6723 00.00007450 4E75                         rts
 6724 00.00007452                      
 6725 00.00007452 4841                 pokedata1l      swap    d1
 6726 00.00007454 61000004                     bsr     pokedata1
 6727 00.00007458 4841                         swap    d1
 6728 00.0000745A                              ;
 6729 00.0000745A                      pokedata1       ;poke word in d1 into data block
 6730 00.0000745A 28790000E8EE                 move.l  data1,a4
 6731 00.00007460 B9F90000E8E2                 cmp.l   data2at,a4
 6732 00.00007466 6400000C                     bcc     .over
 6733 00.0000746A 38C1                         move    d1,(a4)+
 6734 00.0000746C 23CC0000E8EE                 move.l  a4,data1
 6735 00.00007472 4E75                         rts
 6736 00.00007474 33FCFFFF0000E858     .over   move    #-1,nomemleft
 6737 00.0000747C 54B90000E8EE                 addq.l  #2,data1
 6738 00.00007482 4E75                         rts
 6739 00.00007484                      
 6740 00.00007484                      calcstatic      ;calculate static structures stuff - put num of structs d4.w
 6741 00.00007484                              ;address of data1 table in d3.l
 6742 00.00007484                              ;
 6743 00.00007484                              ;data1: .w=structsize,.w=offset
 6744 00.00007484                              ;
 6745 00.00007484 247900002B28                 move.l  firstvar,a2
 6746 00.0000748A 26390000E8EE         calcstatic2     move.l  data1,d3
 6747 00.00007490 7800                         moveq   #0,d4
 6748 00.00007492 B4FC0000             .loop   cmp     #0,a2
 6749 00.00007496 67000032                     beq     .done
 6750 00.0000749A 4A6A0006                     tst     6(a2)
 6751 00.0000749E 66000024                     bne     .next
 6752 00.000074A2 266A000A                     move.l  10(a2),a3
 6753 00.000074A6 0CAB000001000004             cmp.l   #256,4(a3)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 172
blitz2.s


 6754 00.000074AE 65000014                     bcs     .next
 6755 00.000074B2 322A0004                     move    4(a2),d1
 6756 00.000074B6 6100FFA2                     bsr     pokedata1
 6757 00.000074BA 322B0008                     move    8(a3),d1
 6758 00.000074BE 6100FF9A                     bsr     pokedata1
 6759 00.000074C2 5244                         addq    #1,d4
 6760 00.000074C4 2452                 .next   move.l  (a2),a2
 6761 00.000074C6 6000FFCA                     bra     .loop
 6762 00.000074CA 4A44                 .done   tst     d4
 6763 00.000074CC 67000012                     beq     .skip
 6764 00.000074D0 323CFF37                     move    #65335,d1
 6765 00.000074D4 6100F56C                     bsr     uselib  ;use statics lib
 6766 00.000074D8 323CFFFA                     move    #65530,d1       ;use memlib
 6767 00.000074DC 6000F564                     bra     uselib
 6768 00.000074E0 4E75                 .skip   rts
 6769 00.000074E2                      
 6770 00.000074E2                      datastart       ;set up a2 (d3.l) and d4 (d4.w)
 6771 00.000074E2                              ;
 6772 00.000074E2 323900002AB6                 move    numtoa2,d1
 6773 00.000074E8 61002022                     bsr     pokewd
 6774 00.000074EC 6100042E                     bsr     addoff
 6775 00.000074F0 2203                         move.l  d3,d1
 6776 00.000074F2 61002010                     bsr     pokel
 6777 00.000074F6 5344                         subq    #1,d4
 6778 00.000074F8 33C400002ABE                 move    d4,endarray+2
 6779 00.000074FE 223900002ABC                 move.l  endarray,d1
 6780 00.00007504 60001FFE                     bra     pokel
 6781 00.00007508                      
 6782 00.00007508                      nextopt macro
 6783 00.00007508                              addq    #8,\1
 6784 00.00007508                              cmp.l   optend,\1
 6785 00.00007508                              bne     .nextopt\@
 6786 00.00007508                              move.l  optbuff,\1
 6787 00.00007508                      .nextopt\@      ;
 6788 00.00007508                              endm
 6789 00.00007508                      
 6790 00.00007508 2F03                 mywrite move.l  d3,-(a7)
 6791 00.0000750A 4EAEFFD0                     jsr     write(a6)
 6792 00.0000750E B09F                         cmp.l   (a7)+,d0
 6793 00.00007510 66000004                     bne     .skip
 6794 00.00007514 4E75                         rts
 6795 00.00007516 2207                 .skip   move.l  d7,d1
 6796 00.00007518 4EAEFFDC                     jsr     close(a6)
 6797 00.0000751C 4EF900007C9E         execerr jmp     makeexecerr
 6798 00.00007522 4E75                         rts
 6799 00.00007524                      
 6800 00.00007524                      savefile        ;
 6801 00.00007524                              ;make all abs refs pcat relative
 6802 00.00007524                              ;
 6803   =00000000                              ifeq    cripple
 6804 00.00007524                              ;
 6805 00.00007524 23CF00002B18                 move.l  a7,errstack
 6806 00.0000752A 23FC0000779000002B1C         move.l  #.rts,errcont
 6807 00.00007534                              ;
 6808 00.00007534 6100B9CA                     bsr     sleepon
 6809 00.00007538                              ;
 6810 00.00007538 33FCFFFF0000E84C             move    #-1,anyerrs
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 173
blitz2.s


 6811 00.00007540 32390000E858                 move    nomemleft,d1
 6812 00.00007546 66000034                     bne     .fixdone
 6813 00.0000754A 24790000EC56                 move.l  firstoff,a2
 6814 00.00007550 22790000E8F2                 move.l  pcat,a1
 6815 00.00007556 2409                         move.l  a1,d2
 6816 00.00007558 D4B90000E850                 add.l   noinits,d2
 6817 00.0000755E B4FC0000             .loop0  cmp     #0,a2
 6818 00.00007562 67000018                     beq     .fixdone
 6819 00.00007566 202A0004                     move.l  4(a2),d0
 6820 00.0000756A 4A710800                     tst     0(a1,d0.l)
 6821 00.0000756E 6B000006                     bmi     .noway
 6822 00.00007572 95B10800                     sub.l   d2,0(a1,d0.l)
 6823 00.00007576 2452                 .noway  move.l  (a2),a2
 6824 00.00007578 6000FFE4                     bra     .loop0
 6825 00.0000757C 22390000330A         .fixdone        move.l  execname,d1
 6826 00.00007582 243C000003EE                 move.l  #1006,d2
 6827 00.00007588 2C7900000154                 move.l  dos,a6
 6828 00.0000758E 4EAEFFE2                     jsr     open(a6)
 6829 00.00007592 2E00                         move.l  d0,d7
 6830 00.00007594 6700FF86                     beq     execerr
 6831 00.00007598                              ;
 6832 00.00007598 20390000EC4E                 move.l  objlen,d0
 6833 00.0000759E 90B90000E850                 sub.l   noinits,d0
 6834 00.000075A4 5640                         addq    #3,d0
 6835 00.000075A6 E488                         lsr.l   #2,d0
 6836 00.000075A8 23C000000842                 move.l  d0,tstsize1
 6837 00.000075AE 23C00000084A                 move.l  d0,tstsize2
 6838 00.000075B4 2207                         move.l  d7,d1
 6839 00.000075B6 243C0000082E                 move.l  #tsthead,d2
 6840 00.000075BC 7620                         moveq   #32,d3
 6841 00.000075BE 6100FF48                     bsr     mywrite
 6842 00.000075C2                              ;
 6843 00.000075C2 2207                         move.l  d7,d1
 6844 00.000075C4 24390000E8F2                 move.l  pcat,d2
 6845 00.000075CA D4B90000E850                 add.l   noinits,d2
 6846 00.000075D0 26390000EC4E                 move.l  objlen,d3
 6847 00.000075D6 96B90000E850                 sub.l   noinits,d3
 6848 00.000075DC 5683                         addq.l  #3,d3
 6849 00.000075DE 0283FFFFFFFC                 and.l   #$fffffffc,d3
 6850 00.000075E4 6100FF22                     bsr     mywrite
 6851 00.000075E8                              ;
 6852 00.000075E8 23F90000EC5200000852         move.l  numoffs,tstsize3
 6853 00.000075F2 67000052                     beq     .skip
 6854 00.000075F6 2207                         move.l  d7,d1
 6855 00.000075F8 243C0000084E                 move.l  #tstend,d2
 6856 00.000075FE 760C                         moveq   #12,d3
 6857 00.00007600 6100FF06                     bsr     mywrite
 6858 00.00007604                              ;
 6859 00.00007604 24790000EC56                 move.l  firstoff,a2
 6860 00.0000760A 28390000E850                 move.l  noinits,d4
 6861 00.00007610 B4FC0000             .loop   cmp     #0,a2
 6862 00.00007614 6700001C                     beq     .skip2
 6863 00.00007618 43EA0004                     lea     4(a2),a1
 6864 00.0000761C 9991                         sub.l   d4,(a1)
 6865 00.0000761E 2207                         move.l  d7,d1
 6866 00.00007620 2409                         move.l  a1,d2
 6867 00.00007622 7604                         moveq   #4,d3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 174
blitz2.s


 6868 00.00007624 6100FEE2                     bsr     mywrite
 6869 00.00007628                              ;
 6870 00.00007628 D9AA0004                     add.l   d4,4(a2)
 6871 00.0000762C 2452                         move.l  (a2),a2
 6872 00.0000762E 6000FFE0                     bra     .loop
 6873 00.00007632 42B900000852         .skip2  clr.l   tstsize3
 6874 00.00007638 2207                         move.l  d7,d1
 6875 00.0000763A 243C00000852                 move.l  #tstsize3,d2
 6876 00.00007640 7604                         moveq   #4,d3
 6877 00.00007642 6100FEC4                     bsr     mywrite
 6878 00.00007646                              ;
 6879 00.00007646 08390007000110ED     .skip   btst    #7,optreqga16+13
 6880 00.0000764E 670000B6                     beq     .nodebug
 6881 00.00007652                              ;
 6882 00.00007652 243C00007918                 move.l  #sysdebug,d2
 6883 00.00007658 7604                         moveq   #4,d3
 6884 00.0000765A 2207                         move.l  d7,d1
 6885 00.0000765C 6100FEAA                     bsr     mywrite
 6886 00.00007660                              ;
 6887 00.00007660 247A75D4                     move.l  firstlabel(pc),a2
 6888 00.00007664 B4FC0000             .deloop cmp     #0,a2
 6889 00.00007668 6700008E                     beq     .dedone
 6890 00.0000766C 082A00000007                 btst    #0,7(a2)
 6891 00.00007672 6700000E                     beq     .dodeb
 6892 00.00007676 0CAA000000010004             cmp.l   #1,4(a2)
 6893 00.0000767E 66000072                     bne     .denext
 6894 00.00007682                              ;
 6895 00.00007682 7800                 .dodeb  moveq   #0,d4
 6896 00.00007684 182A0012                     move.b  18(a2),d4
 6897 00.00007688 04440013                     sub     #19,d4
 6898 00.0000768C 5644                         addq    #3,d4
 6899 00.0000768E 0244FFFC                     and     #$fffc,d4       ;long align
 6900 00.00007692 2A04                         move.l  d4,d5
 6901 00.00007694 E44D                         lsr     #2,d5
 6902 00.00007696 23C50000EC60                 move.l  d5,temp1
 6903 00.0000769C E54D                         lsl     #2,d5   ;#bytes
 6904 00.0000769E 243C0000EC60                 move.l  #temp1,d2
 6905 00.000076A4 7604                         moveq   #4,d3
 6906 00.000076A6 2207                         move.l  d7,d1
 6907 00.000076A8 6100FE5E                     bsr     mywrite
 6908 00.000076AC                              ;
 6909 00.000076AC 43EA0013                     lea     19(a2),a1
 6910 00.000076B0 2409                         move.l  a1,d2
 6911 00.000076B2 2604                         move.l  d4,d3
 6912 00.000076B4 2207                         move.l  d7,d1
 6913 00.000076B6 6100FE50                     bsr     mywrite
 6914 00.000076BA                              ;
 6915 00.000076BA 9A84                         sub.l   d4,d5
 6916 00.000076BC 67000010                     beq     .dooff
 6917 00.000076C0 243C0000EC14                 move.l  #zero,d2
 6918 00.000076C6 2605                         move.l  d5,d3
 6919 00.000076C8 2207                         move.l  d7,d1
 6920 00.000076CA 6100FE3C                     bsr     mywrite
 6921 00.000076CE                              ;
 6922 00.000076CE 242A0008             .dooff  move.l  8(a2),d2
 6923 00.000076D2 94B90000E8F2                 sub.l   pcat,d2
 6924 00.000076D8 94B90000E850                 sub.l   noinits,d2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 175
blitz2.s


 6925 00.000076DE 23C20000EC60                 move.l  d2,temp1
 6926 00.000076E4 243C0000EC60                 move.l  #temp1,d2
 6927 00.000076EA 7604                         moveq   #4,d3
 6928 00.000076EC 2207                         move.l  d7,d1
 6929 00.000076EE 6100FE18                     bsr     mywrite
 6930 00.000076F2                              ;
 6931 00.000076F2 2452                 .denext move.l  (a2),a2
 6932 00.000076F4 6000FF6E                     bra     .deloop
 6933 00.000076F8 243C0000EC14         .dedone move.l  #zero,d2
 6934 00.000076FE 7604                         moveq   #4,d3
 6935 00.00007700 2207                         move.l  d7,d1
 6936 00.00007702 6100FE04                     bsr     mywrite
 6937 00.00007706                              ;
 6938 00.00007706 2207                 .nodebug        move.l  d7,d1
 6939 00.00007708 243C0000085A                 move.l  #tstdone,d2
 6940 00.0000770E 7604                         moveq   #4,d3
 6941 00.00007710 6100FDF6                     bsr     mywrite
 6942 00.00007714                              ;
 6943 00.00007714 2207                         move.l  d7,d1
 6944 00.00007716 4EAEFFDC                     jsr     close(a6)
 6945 00.0000771A                              ;
 6946 00.0000771A 0839000700010FB9             btst    #7,optreqga9+13
 6947 00.00007722 67000068                     beq     .done
 6948 00.00007726                              ;
 6949 00.00007726                              ;OK, create an icon for the object code!
 6950 00.00007726                              ;
 6951 00.00007726 20790000330A                 move.l  execname,a0
 6952 00.0000772C 4A18                 .iloop  tst.b   (a0)+
 6953 00.0000772E 6600FFFC                     bne     .iloop
 6954 00.00007732 5348                         subq    #1,a0
 6955 00.00007734 2F08                         move.l  a0,-(a7)        ;to later null out!
 6956 00.00007736 43FA01D9                     lea     infoname(pc),a1
 6957 00.0000773A 10D9                 .iloop2 move.b  (a1)+,(a0)+
 6958 00.0000773C 6600FFFC                     bne     .iloop2
 6959 00.00007740                              ;
 6960 00.00007740 22390000330A                 move.l  execname,d1
 6961 00.00007746 74FE                         moveq   #-2,d2
 6962 00.00007748 4EAEFFAC                     jsr     lock(a6)
 6963 00.0000774C 2200                         move.l  d0,d1
 6964 00.0000774E 6700000A                     beq     .dildo  ;not exist
 6965 00.00007752 4EAEFFA6                     jsr     unlock(a6)
 6966 00.00007756 60000030                     bra     .ifail
 6967 00.0000775A                              ;
 6968 00.0000775A 22390000330A         .dildo  move.l  execname,d1
 6969 00.00007760 243C000003EE                 move.l  #1006,d2
 6970 00.00007766 4EAEFFE2                     jsr     open(a6)
 6971 00.0000776A 2E00                         move.l  d0,d7
 6972 00.0000776C 6700001A                     beq     .ifail
 6973 00.00007770 243C00007792                 move.l  #objicon,d2
 6974 00.00007776 263C0000017F                 move.l  #objiconf-objicon,d3
 6975 00.0000777C 2207                         move.l  d7,d1
 6976 00.0000777E 4EAEFFD0                     jsr     write(a6)
 6977 00.00007782 2207                         move.l  d7,d1
 6978 00.00007784 4EAEFFDC                     jsr     close(a6)
 6979 00.00007788                              ;
 6980 00.00007788 205F                 .ifail  move.l  (a7)+,a0
 6981 00.0000778A 4210                         clr.b   (a0)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 176
blitz2.s


 6982 00.0000778C                              ;
 6983 00.0000778C                      .done   ;
 6984 00.0000778C 6100B766                     bsr     pointeron
 6985 00.00007790                              ;
 6986 00.00007790                              endc
 6987 00.00007790 4E75                 .rts    rts
 6988 00.00007792                      
 6989 00.00007911                      objicon incbin  obj.info
 6990 00.00007911                      objiconf        ;
 6991 00.00007911                      
 6992 00.00007911 2E696E666F00         infoname        dc.b    '.info',0
 6993 00.00007918                              even
 6994 00.00007918                      
 6995 00.00007918 000003F0             sysdebug        dc.l    $3f0
 6996 00.0000791C                      
 6997 00.0000791C                      addoff  ;add pc to list of offsets
 6998 00.0000791C                              ;
 6999 00.0000791C 2F02                         move.l  d2,-(a7)
 7000 00.0000791E 24390000E8F6                 move.l  pc,d2
 7001 00.00007924 94B90000E8F2                 sub.l   pcat,d2
 7002 00.0000792A 61000006                     bsr     addoff2
 7003 00.0000792E 241F                         move.l  (a7)+,d2
 7004 00.00007930 4E75                         rts
 7005 00.00007932                      
 7006 00.00007932                      addoff2 ;add d2 to linked list of all offsets
 7007 00.00007932                              ;
 7008 00.00007932 48E7C0C2                     movem.l a0-a1/a6/d0-d1,-(a7)
 7009 00.00007936 7008                         moveq   #8,d0
 7010 00.00007938 7201                         moveq   #1,d1
 7011 00.0000793A 2C780004                     move.l  4.w,a6
 7012 00.0000793E 4EB900004B6C                 jsr     doallocmem
 7013 00.00007944                              ;
 7014 00.00007944 52B90000EC52                 addq.l  #1,numoffs
 7015 00.0000794A 2040                         move.l  d0,a0
 7016 00.0000794C 20B90000EC56                 move.l  firstoff,(a0)
 7017 00.00007952 23C80000EC56                 move.l  a0,firstoff
 7018 00.00007958 21420004                     move.l  d2,4(a0)
 7019 00.0000795C 4CDF4303                     movem.l (a7)+,a0-a1/a6/d0-d1
 7020 00.00007960 4E75                         rts
 7021 00.00007962                      
 7022 00.00007962                      killoffs        ;kill all offsets
 7023 00.00007962                              ;
 7024 00.00007962 2C780004                     move.l  4.w,a6
 7025 00.00007966 24790000EC56                 move.l  firstoff,a2
 7026 00.0000796C 42B90000EC56                 clr.l   firstoff
 7027 00.00007972 B4FC0000             .loop   cmp     #0,a2
 7028 00.00007976 67000010                     beq     .skip
 7029 00.0000797A 224A                         move.l  a2,a1
 7030 00.0000797C 7008                         moveq   #8,d0
 7031 00.0000797E 2452                         move.l  (a2),a2
 7032 00.00007980 4EAEFF2E                     jsr     freemem(a6)
 7033 00.00007984 6000FFEC                     bra     .loop
 7034 00.00007988 42B90000EC52         .skip   clr.l   numoffs
 7035 00.0000798E 4E75                         rts
 7036 00.00007990                      
 7037 00.00007990                      cmakebuff       ds      12
 7038 00.000079A8 00000000             cmakea5 dc.l    0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 177
blitz2.s


 7039 00.000079AC 0000                 cmake   dc      0
 7040 00.000079AE                      cmakebak        ds.b    128
 7041 00.00007A2E                      
 7042 00.00007A2E 23CD00002B0E         getchar move.l  a5,prevloc
 7043 00.00007A34 33F90000EC240000E9A0         move    quoteflag,oldqflag
 7044 00.00007A3E 61000160                     bsr     getcharb
 7045 00.00007A42                              ;
 7046 00.00007A42 33C000002B12                 move    d0,lastchar
 7047 00.00007A48 670000C2                     beq     .done
 7048 00.00007A4C 6A000022                     bpl     .done2
 7049 00.00007A50                              ;
 7050 00.00007A50 B07C801C                     cmp     #$801c,d0
 7051 00.00007A54 670000D8                     beq     .cnif
 7052 00.00007A58 B07C801D                     cmp     #$801d,d0
 7053 00.00007A5C 670000B0                     beq     .csif
 7054 00.00007A60 B07C801E                     cmp     #$801e,d0
 7055 00.00007A64 670000F2                     beq     .celse
 7056 00.00007A68 B07C801F                     cmp     #$801f,d0
 7057 00.00007A6C 670000FE                     beq     .cend
 7058 00.00007A70                              ;
 7059 00.00007A70 4A790000EC0E         .done2  tst     comflag
 7060 00.00007A76 6700FFB6                     beq     getchar
 7061 00.00007A7A                              ;
 7062 00.00007A7A B07C007E                     cmp     #'~',d0
 7063 00.00007A7E 67000024                     beq     .cmake
 7064 00.00007A82 B07C0002                     cmp     #2,d0
 7065 00.00007A86 6600000C                     bne     .notunpath
 7066 00.00007A8A 2A79000097A4                 move.l  usedfrom,a5
 7067 00.00007A90 6000FF9C                     bra     getchar
 7068 00.00007A94 B07C0001             .notunpath      cmp     #1,d0
 7069 00.00007A98 66000072                     bne     .done
 7070 00.00007A9C                              ;
 7071 00.00007A9C                              ;End of Cmake chars got
 7072 00.00007A9C                              ;
 7073 00.00007A9C 2A7AFF0A                     move.l  cmakea5(pc),a5
 7074 00.00007AA0 6000FF8C                     bra     getchar
 7075 00.00007AA4                              ;
 7076 00.00007AA4 4A79000079AC         .cmake  tst     cmake
 7077 00.00007AAA 66000060                     bne     .done
 7078 00.00007AAE 4679000079AC                 not     cmake
 7079 00.00007AB4                              ;
 7080 00.00007AB4 48E7FFFE                     movem.l d0-d7/a0-a6,-(a7)
 7081 00.00007AB8                              ;
 7082 00.00007AB8 41FAFEF4                     lea     cmakebak(pc),a0
 7083 00.00007ABC 43F90000EC68                 lea     namebuff,a1
 7084 00.00007AC2 701F                         moveq   #128/4-1,d0
 7085 00.00007AC4 20D9                 .cmloop move.l  (a1)+,(a0)+
 7086 00.00007AC6 51C8FFFC                     dbf     d0,.cmloop
 7087 00.00007ACA                              ;
 7088 00.00007ACA 610044A2                     bsr     evalconst2      ;get constant into d3
 7089 00.00007ACE B07C007E                     cmp     #'~',d0
 7090 00.00007AD2 6600090E                     bne     syntaxerr
 7091 00.00007AD6 23CD000079A8                 move.l  a5,cmakea5
 7092 00.00007ADC                              ;
 7093 00.00007ADC 41FAFEB2                     lea     cmakebuff(pc),a0
 7094 00.00007AE0 2403                         move.l  d3,d2
 7095 00.00007AE2 6100D8F8                     bsr     makelong
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 178
blitz2.s


 7096 00.00007AE6 5210                         addq.b  #1,(a0)
 7097 00.00007AE8 4679000079AC                 not     cmake
 7098 00.00007AEE                              ;
 7099 00.00007AEE 41FAFEBE                     lea     cmakebak(pc),a0
 7100 00.00007AF2 43F90000EC68                 lea     namebuff,a1
 7101 00.00007AF8 701F                         moveq   #128/4-1,d0
 7102 00.00007AFA 22D8                 .cmloop2        move.l  (a0)+,(a1)+
 7103 00.00007AFC 51C8FFFC                     dbf     d0,.cmloop2
 7104 00.00007B00                              ;
 7105 00.00007B00 4CDF7FFF                     movem.l (a7)+,d0-d7/a0-a6
 7106 00.00007B04                              ;
 7107 00.00007B04 4BFAFE8A                     lea     cmakebuff(pc),a5
 7108 00.00007B08 6000FF24                     bra     getchar
 7109 00.00007B0C                              ;
 7110 00.00007B0C 4E75                 .done   rts
 7111 00.00007B0E                              ;
 7112 00.00007B0E 33F90000E9E800007B9E .csif   move    linenumat,ciflineat
 7113 00.00007B18 4A790000EC0E                 tst     comflag
 7114 00.00007B1E 6700002E                     beq     .incnest
 7115 00.00007B22 610000EA                     bsr     getchar3
 7116 00.00007B26 6100496A                     bsr     docsif
 7117 00.00007B2A 6000FF02                     bra     getchar
 7118 00.00007B2E                              ;
 7119 00.00007B2E 33F90000E9E800007B9E .cnif   move    linenumat,ciflineat
 7120 00.00007B38 4A790000EC0E                 tst     comflag
 7121 00.00007B3E 6700000E                     beq     .incnest
 7122 00.00007B42 610000CA                     bsr     getchar3
 7123 00.00007B46 61004936                     bsr     docnif
 7124 00.00007B4A 6000FEE2                     bra     getchar
 7125 00.00007B4E                              ;
 7126 00.00007B4E 52790000E948         .incnest        addq    #1,connest
 7127 00.00007B54 6000FED8                     bra     getchar
 7128 00.00007B58                              ;       
 7129 00.00007B58 30390000E948         .celse  move    connest,d0
 7130 00.00007B5E 6600FECE                     bne     getchar
 7131 00.00007B62 46790000EC0E                 not     comflag
 7132 00.00007B68 6000FEC4                     bra     getchar
 7133 00.00007B6C                              ;
 7134 00.00007B6C 53790000E948         .cend   subq    #1,connest
 7135 00.00007B72 6A00FEBA                     bpl     getchar
 7136 00.00007B76 52790000E948                 addq    #1,connest
 7137 00.00007B7C 20790000E99C                 move.l  concomsp,a0
 7138 00.00007B82 B1FC0000E95C                 cmp.l   #concomstack,a0
 7139 00.00007B88 67000F04                     beq     nociferr
 7140 00.00007B8C 5548                         subq    #2,a0
 7141 00.00007B8E 23C80000E99C                 move.l  a0,concomsp
 7142 00.00007B94 33D00000EC0E                 move    (a0),comflag
 7143 00.00007B9A 6000FE92                     bra     getchar
 7144 00.00007B9E                      
 7145 00.00007B9E 0000                 ciflineat       dc      0
 7146 00.00007BA0                      
 7147 00.00007BA0                      getcharb        ;
 7148 00.00007BA0                              ;get next character into d0... a5=charpointer   
 7149 00.00007BA0                              ;set hi bit if token, and lo 15 bits to token number (0-32767)
 7150 00.00007BA0                              ;
 7151 00.00007BA0 7000                         moveq   #0,d0
 7152 00.00007BA2 101D                 .loop0  move.b  (a5)+,d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 179
blitz2.s


 7153 00.00007BA4 6726                         beq.s   .done
 7154 00.00007BA6 6A06                         bpl.s   .stuff
 7155 00.00007BA8 E148                         lsl     #8,d0
 7156 00.00007BAA 101D                         move.b  (a5)+,d0
 7157 00.00007BAC 4E75                         rts
 7158 00.00007BAE B07C0022             .stuff  cmp     #34,d0
 7159 00.00007BB2 671A                         beq.s   swapquote
 7160 00.00007BB4 B07C003B                     cmp     #';',d0
 7161 00.00007BB8 6612                         bne.s   .done
 7162 00.00007BBA 4A790000EC24                 tst     quoteflag
 7163 00.00007BC0 660A                         bne.s   .done
 7164 00.00007BC2 101D                 .loop   move.b  (a5)+,d0
 7165 00.00007BC4 66FC                         bne.s   .loop
 7166 00.00007BC6 33C000002B12                 move    d0,lastchar
 7167 00.00007BCC 4E75                 .done   rts
 7168 00.00007BCE                      
 7169 00.00007BCE 46790000EC24         swapquote       not     quoteflag
 7170 00.00007BD4 4E75                         rts
 7171 00.00007BD6                      
 7172 00.00007BD6                      getchar2        ;as above and skip spaces
 7173 00.00007BD6                              ;
 7174 00.00007BD6 6100FE56                     bsr     getchar
 7175 00.00007BDA 4A790000EC24                 tst     quoteflag
 7176 00.00007BE0 6600000A                     bne     .skip
 7177 00.00007BE4 B07C0020                     cmp     #32,d0
 7178 00.00007BE8 6700FFEC                     beq     getchar2
 7179 00.00007BEC 4E75                 .skip   rts
 7180 00.00007BEE                      
 7181 00.00007BEE                      gs      ds.b    26
 7182 00.00007C08 E4F6FCC4D6DC                 dc.b    228,246,252,196,214,220
 7183 00.00007C0E                      
 7184 00.00007C0E                      getchar3        ;as above. return z=1 if 0 or ':'
 7185 00.00007C0E                              ;
 7186 00.00007C0E 6100FFC6                     bsr     getchar2
 7187 00.00007C12 4A40                         tst     d0
 7188 00.00007C14 6722                 gchar2  beq.s   .zero
 7189 00.00007C16 4A790000EC24                 tst     quoteflag
 7190 00.00007C1C 670C                         beq.s   .noquote
 7191 00.00007C1E B03C0020                     cmp.b   #32,d0
 7192 00.00007C22 6412                         bcc.s   .skip
 7193 00.00007C24 103B00C8                     move.b  gs(pc,d0),d0
 7194 00.00007C28 4E75                         rts
 7195 00.00007C2A B07C8022             .noquote        cmp     #$8000+34,d0    ;else
 7196 00.00007C2E 6708                         beq.s   .zero
 7197 00.00007C30 B07C003A                     cmp     #':',d0
 7198 00.00007C34 6702                         beq.s   .zero
 7199 00.00007C36 4A40                 .skip   tst     d0
 7200 00.00007C38 4E75                 .zero   rts
 7201 00.00007C3A                      
 7202 00.00007C3A 303900002B12         reget   move    lastchar,d0
 7203 00.00007C40 6000FFD2                     bra     gchar2
 7204 00.00007C44                      
 7205 00.00007C44 33F90000E9A00000EC24 bakup   move    oldqflag,quoteflag
 7206 00.00007C4E 2A7900002B0E                 move.l  prevloc,a5
 7207 00.00007C54 4E75                         rts
 7208 00.00007C56                      
 7209 00.00007C56                      storeloc        ;remember character pointer
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 180
blitz2.s


 7210 00.00007C56                              ;
 7211 00.00007C56 33C00000E9C0                 move    d0,locchar
 7212 00.00007C5C 23CD0000E9BC                 move.l  a5,locloc
 7213 00.00007C62 4E75                         rts
 7214 00.00007C64                      
 7215 00.00007C64                      resloc  ;recall char pointer....
 7216 00.00007C64 2A790000E9BC                 move.l  locloc,a5
 7217 00.00007C6A 30390000E9C0                 move    locchar,d0
 7218 00.00007C70 33C000002B12                 move    d0,lastchar
 7219 00.00007C76 4E75                         rts
 7220 00.00007C78                      
 7221 00.00007C78                      errs
 7222 00.00007C78 61000E86             badstoperr      bsr     err
 7223 00.00007C7C 4465627567676572206D         dc.b    'Debugger must be enabled for STOP',0
 7224 00.00007C9E                              even
 7225 00.00007C9E 61000E60             makeexecerr     bsr     err
 7226 00.00007CA2 4572726F722063726561         dc.b    'Error creating Executable',0
 7227 00.00007CBC                              even
 7228 00.00007CBC 61000E42             fornexterr      bsr     err
 7229 00.00007CC0 4475706C696361746520         dc.b    'Duplicate For...Next Error',0
 7230 00.00007CDC                              even
 7231 00.00007CDC 61000E22             excerr2 bsr     err
 7232 00.00007CE0 43616E27742045786368         dc.b    'Can',39,'t Exchange different types',0
 7233 00.00007D00                              even
 7234 00.00007D00 61000DFE             excerr  bsr     err
 7235 00.00007D04 43616E27742045786368         dc.b    'Can',39,'t Exchange NewTypes',0
 7236 00.00007D1C                              even
 7237 00.00007D1C 61000DE2             arrerr1 bsr     err
 7238 00.00007D20 496C6C6567616C204172         dc.b    'Illegal Array type',0
 7239 00.00007D34                              even
 7240 00.00007D34 61000DCA             nocenderr       bsr     err
 7241 00.00007D38 434E49462F4353494620         dc.b    'CNIF/CSIF without CEND',0
 7242 00.00007D50                              even
 7243 00.00007D50 61000DAE             referr  bsr     err
 7244 00.00007D54 4C6162656C2072656665         dc.b    'Label reference out of context',0
 7245 00.00007D74                              even
 7246 00.00007D74 61000D8A             illlaberr       bsr     err
 7247 00.00007D78 4C6162656C2068617320         dc.b    'Label has been used as a Constant',0
 7248 00.00007D9A                              even
 7249 00.00007D9A 61000D64             selerrz bsr     err
 7250 00.00007D9E 53656C65637420776974         dc.b    'Select without End Select',0
 7251 00.00007DB8                              even
 7252 00.00007DB8 61000D46             unterr1 bsr     err
 7253 00.00007DBC 556E74696C2077697468         dc.b    'Until without Repeat',0
 7254 00.00007DD2                              even
 7255 00.00007DD2 61000D2C             unterr2 bsr     err
 7256 00.00007DD6 52657065617420426C6F         dc.b    'Repeat Block too large',0
 7257 00.00007DEE                              even
 7258 00.00007DEE 61000D10             unterr3 bsr     err
 7259 00.00007DF2 52657065617420776974         dc.b    'Repeat without Until',0
 7260 00.00007E08                              even
 7261 00.00007E08 61000CF6             vbokerr1        bsr     err
 7262 00.00007E0C 41626F727456424F4B20         dc.b    'AbortVBOK MUST be in a SETINT 5',0
 7263 00.00007E2C                              even
 7264 00.00007E2C 61000CD2             errerr1 bsr     err
 7265 00.00007E30 536574457272206E6F74         dc.b    'SetErr not allowed in Procedures',0
 7266 00.00007E52                              even
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 181
blitz2.s


 7267 00.00007E52 61000CAC             errerr2 bsr     err
 7268 00.00007E56 43616E2774206E657374         dc.b    'Can',39,'t nest SetErr',0
 7269 00.00007E68                              even
 7270 00.00007E68 61000C96             errerr3 bsr     err
 7271 00.00007E6C 456E6420536574457272         dc.b    'End SetErr without SetErr',0
 7272 00.00007E86                              even
 7273 00.00007E86 61000C78             noarrayerr      bsr     err
 7274 00.00007E8A 4172726179206E6F7420         dc.b    'Array not found',0
 7275 00.00007E9A                              even
 7276 00.00007E9A 61000C64             nolisterr       bsr     err
 7277 00.00007E9E 4172726179206973206E         dc.b    'Array is not a List',0
 7278 00.00007EB2                              even
 7279 00.00007EB2 61000C4C             defaerr bsr     err
 7280 00.00007EB6 44656661756C74207769         dc.b    'Default without Select',0
 7281 00.00007ECE                              even
 7282 00.00007ECE 61000C30             eselerr bsr     err
 7283 00.00007ED2 456E642053656C656374         dc.b    'End Select without Select',0
 7284 00.00007EEC                              even
 7285 00.00007EEC 61000C12             cbraerr bsr     err
 7286 00.00007EF0 50726576696F75732043         dc.b    'Previous Case Block too Large',0
 7287 00.00007F0E                              even
 7288 00.00007F0E 61000BF0             caseerr bsr     err
 7289 00.00007F12 4361736520576974686F         dc.b    'Case Without Select',0
 7290 00.00007F26                              even
 7291 00.00007F26 61000BD8             tokeerr bsr     err
 7292 00.00007F2A 496C6C6567616C20546F         dc.b    'Illegal TokeJsr token number',0
 7293 00.00007F48                              even
 7294 00.00007F48 61000BB6             opterr  bsr     err
 7295 00.00007F4C 4F7074696D697A657220         dc.b    'Optimizer Error! - $'
 7296 00.00007F60 666666662C24         opchars dc.b    'ffff,$'
 7297 00.00007F66 666666662E00         opchars2        dc.b    'ffff.',0
 7298 00.00007F6C                              even
 7299 00.00007F6C 61000B92             blitzerr        bsr     err
 7300 00.00007F70 4F6E6C7920417661696C         dc.b    'Only Available in Blitz mode',0
 7301 00.00007F8E                              even
 7302 00.00007F8E 61000B70             amigaerr        bsr     err
 7303 00.00007F92 4F6E6C7920417661696C         dc.b    'Only Available in Amiga mode',0
 7304 00.00007FB0                              even
 7305 00.00007FB0 61000B4E             interr4 bsr     err
 7306 00.00007FB4 496C6C6567616C20496E         dc.b    'Illegal Interrupt Number',0
 7307 00.00007FCE                              even
 7308 00.00007FCE 61000B30             interr5 bsr     err
 7309 00.00007FD2 496C6C6567616C6C7920         dc.b    'Illegally nested Interrupts',0
 7310 00.00007FEE                              even
 7311 00.00007FEE 61000B10             interr3 bsr     err
 7312 00.00007FF2 43616E27742075736520         dc.b    'Can',39,'t use Set/ClrInt in Local Mode',0
 7313 00.00008016                              even
 7314 00.00008016 61000AE8             interr  bsr     err
 7315 00.0000801A 456E6420536574496E74         dc.b    'End SetInt without SetInt',0
 7316 00.00008034                              even
 7317 00.00008034 33F9000050D00000E9E8 interr2 move    intline,linenumat
 7318 00.0000803E 61000AC0                     bsr     err
 7319 00.00008042 536574496E7420776974         dc.b    'SetInt without End SetInt',0
 7320 00.0000805C                              even
 7321 00.0000805C 61000AA2             conmemerr       bsr     err
 7322 00.00008060 45787072657373696F6E         dc.b    'Expression too Complex',0
 7323 00.00008078                              even
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 182
blitz2.s


 7324 00.00008078 61000A86             pserr   bsr     err
 7325 00.0000807C 507265636564656E6365         dc.b    'Precedence Stack Overflow',0
 7326 00.00008096                              even
 7327 00.00008096 61000A68             clasherr        bsr     err
 7328 00.0000809A 436C61736820696E2052         dc.b    'Clash in Residents',0
 7329 00.000080AE                              even
 7330 00.000080AE 61000A50             reserr  bsr     err
 7331 00.000080B2 43616E2774204C6F6164         dc.b    'Can',39,'t Load Resident',0
 7332 00.000080C6                              even
 7333 00.000080C6 61000A38             dupofferr       bsr     err
 7334 00.000080CA 4475706C696361746520         dc.b    'Duplicate Offset Error',0
 7335 00.000080E2                              even
 7336 00.000080E2 61000A1C             notparerr       bsr     err
 7337 00.000080E6 4E6F7420456E6F756768         dc.b    'Not Enough Parameters',0
 7338 00.000080FC                              even
 7339 00.000080FC 61000A02             badconterr      bsr     err
 7340 00.00008100 436F6E74206E6F742043         dc.b    'Cont not Currently Available',0
 7341 00.0000811E                              even
 7342 00.0000811E 610009E0             dirliberr       bsr     err
 7343 00.00008122 4C696272617279206E6F         dc.b    'Library not Available in Direct Mode',0
 7344 00.00008148                              even
 7345 00.00008148 610009B6             baddirerr       bsr     err
 7346 00.0000814C 496C6C6567616C206469         dc.b    'Illegal direct mode command',0
 7347 00.00008168                              even
 7348 00.00008168 61000996             nodirmem        bsr     err
 7349 00.0000816C 4E6F7420656E6F756768         dc.b    'Not enough room in direct mode buffer',0
 7350 00.00008192                              even
 7351 00.00008192 6100096C             illdirerr       bsr     err
 7352 00.00008196 43616E27742043726561         dc.b    'Can',39,'t Create in Direct Mode',0
 7353 00.000081B2                              even
 7354 00.000081B2 6100094C             nosuperr        bsr     err
 7355 00.000081B6 4E6F7420537570706F72         dc.b    'Not Supported',0
 7356 00.000081C4                              even
 7357 00.000081C4 6100093A             freeerr bsr     err
 7358 00.000081C8 496C6C6567616C20546F         dc.b    'Illegal Token',0
 7359 00.000081D6                              even
 7360 00.000081D6 24790000E928         asmerr2 move.l  asmbuff,a2
 7361 00.000081DC                      asmerr  ;
 7362 00.000081DC 33EA000C0000E9E8             move    12(a2),linenumat
 7363 00.000081E4 4E75                         rts
 7364 00.000081E6                      
 7365 00.000081E6 61000918             mbovererr       bsr     err
 7366 00.000081EA 4D6163726F2042756666         dc.b    'Macro Buffer Overflow',0
 7367 00.00008200                              even
 7368 00.00008200 610008FE             illvgerr        bsr     err
 7369 00.00008204 496C6C6567616C205647         dc.b    'Illegal VGoto/VGosub Parameter',0
 7370 00.00008224                              even
 7371 00.00008224 610008DA             notqerr bsr     err
 7372 00.00008228 4E6F205465726D696E61         dc.b    'No Terminating Quote',0
 7373 00.0000823E                              even
 7374 00.0000823E 610008C0             illcgeterr      bsr     err
 7375 00.00008242 43616E27742055736520         dc.b    'Can',39,'t Use Constant',0
 7376 00.00008256                              even
 7377 00.00008256 610008A8             illconerr       bsr     err
 7378 00.0000825A 43616E27742041737369         dc.b    'Can',39,'t Assign Constant',0
 7379 00.00008270                              even
 7380 00.00008270 6100088E             redimerr        bsr     err
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 183
blitz2.s


 7381 00.00008274 496C6C6567616C206E75         dc.b    'Illegal number of Dimensions',0
 7382 00.00008292                              even
 7383 00.00008292 6100086C             illeolerr       bsr     err
 7384 00.00008296 47617262616765206174         dc.b    'Garbage at End of Line',0
 7385 00.000082AE                              even
 7386 00.000082AE 61000850             illelseerr      bsr     err
 7387 00.000082B2 496C6C6567616C20456C         dc.b    'Illegal Else in While Block',0
 7388 00.000082CE                              even
 7389 00.000082CE 61000830             illgotoerr      bsr     err
 7390 00.000082D2 43616E277420476F746F         dc.b    'Can',39,'t Goto/Gosub a Procedure',0
 7391 00.000082F0                              even
 7392 00.000082F0                              ;
 7393 00.000082F0                              ;assembler errors
 7394 00.000082F0                              ;
 7395 00.000082F0 6100080E             illtraperr      bsr     err
 7396 00.000082F4 496C6C6567616C205472         dc.b    'Illegal Trap Vector',0
 7397 00.00008308                              even
 7398 00.00008308 610007F6             illimmerr       bsr     err
 7399 00.0000830C 496C6C6567616C20496D         dc.b    'Illegal Immediate Value',0
 7400 00.00008324                              even
 7401 00.00008324 610007DA             illabserr       bsr     err
 7402 00.00008328 496C6C6765616C204162         dc.b    'Illgeal Absolute',0
 7403 00.0000833A                              even
 7404 00.0000833A 610007C4             illdiserr       bsr     err
 7405 00.0000833E 496C6C6567616C204469         dc.b    'Illegal Displacement',0
 7406 00.00008354                              even
 7407 00.00008354 610007AA             illsizeerr      bsr     err
 7408 00.00008358 496C6C6567616C204173         dc.b    'Illegal Assembler Instruction Size',0
 7409 00.0000837C                              even
 7410 00.0000837C 61000782             illeaerr        bsr     err
 7411 00.00008380 496C6C6567616C204173         dc.b    'Illegal Assembler Addressing Mode',0
 7412 00.000083A2                              even
 7413 00.000083A2                              ;
 7414 00.000083A2                              ;end of asm errs
 7415 00.000083A2                              ;
 7416 00.000083A2 6100075C             nolocerr        bsr     err
 7417 00.000083A6 496C6C6567616C204C6F         dc.b    'Illegal Local Name',0
 7418 00.000083BA                              even
 7419 00.000083BA 61000744             fpconerr        bsr     err
 7420 00.000083BE 4672616374696F6E7320         dc.b    'Fractions Not allowed in Constants',0
 7421 00.000083E2                              even
 7422 00.000083E2 6100071C             syntaxerr       bsr     err
 7423 00.000083E6 53796E74617820457272         dc.b    'Syntax Error',0
 7424 00.000083F4                              even
 7425 00.000083F4 6100070A             typeerr bsr     err
 7426 00.000083F8 4475706C696361746564         dc.b    'Duplicated Type',0
 7427 00.00008408                              even
 7428 00.00008408 610006F6             laberr  bsr     err
 7429 00.0000840C 496C6C6567616C204C61         dc.b    'Illegal Label Name',0
 7430 00.00008420                              even
 7431 00.00008420 610006DE             modeerr bsr     err
 7432 00.00008424 456E64204E6577547970         dc.b    'End NewType without NewType',0
 7433 00.00008440                              even
 7434 00.00008440 610006BE             notypeerr       bsr     err
 7435 00.00008444 54797065204E6F742046         dc.b    'Type Not Found',0
 7436 00.00008454                              even
 7437 00.00008454 610006AA             illtypeerr      bsr     err
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 184
blitz2.s


 7438 00.00008458 496C6C6567616C205479         dc.b    'Illegal Type',0
 7439 00.00008466                              even
 7440 00.00008466 61000698             offerr  bsr     err
 7441 00.0000846A 4475706C696361746520         dc.b    'Duplicate Offset',0
 7442 00.0000847C                              even
 7443 00.0000847C 61000682             overerr bsr     err
 7444 00.00008480 4E756D65726963204F76         dc.b    'Numeric Over Flow',0
 7445 00.00008492                              even
 7446 00.00008492 6100066C             toolongerr      bsr     err
 7447 00.00008496 5479706520746F6F2042         dc.b    'Type too Big',0
 7448 00.000084A4                              even
 7449 00.000084A4 6100065A             rongtypeerr     bsr     err
 7450 00.000084A8 4D69736D617463686564         dc.b    'Mismatched Types',0
 7451 00.000084BA                              even
 7452 00.000084BA 61000644             noarrerr        bsr     err
 7453 00.000084BE 4172726179206E6F7420         dc.b    'Array not yet Dim',39,'d',0
 7454 00.000084D2                              even
 7455 00.000084D2 6100062C             noofferr        bsr     err
 7456 00.000084D6 4F6666736574206E6F74         dc.b    'Offset not Found',0
 7457 00.000084E8                              even
 7458 00.000084E8 61000616             pointerr        bsr     err
 7459 00.000084EC 456C656D656E74206973         dc.b    'Element isn',39,'t a pointer',0
 7460 00.00008504                              even
 7461 00.00008504 610005FA             noleterr        bsr     err
 7462 00.00008508 43616E27742041737369         dc.b    'Can',39,'t Assign Expression',0
 7463 00.00008520                              even
 7464 00.00008520 610005DE             illoperr        bsr     err
 7465 00.00008524 496C6C6567616C204F70         dc.b    'Illegal Operator for Type',0
 7466 00.0000853E                              even
 7467 00.0000853E 610005C0             mismatcherr     bsr     err
 7468 00.00008542 54797065204D69736D61         dc.b    'Type Mismatch',0
 7469 00.00008550                              even
 7470 00.00008550 610005AE             arraldimerr     bsr     err
 7471 00.00008554 417272617920616C7265         dc.b    'Array already Dim',39,'d',0
 7472 00.00008568                              even
 7473 00.00008568 61000596             nonewerr        bsr     err
 7474 00.0000856C 43616E27742043726561         dc.b    'Can',39,'t Create Variable inside Dim',0
 7475 00.0000858E                              even
 7476 00.0000858E 61000570             arrnotdimd      bsr     err
 7477 00.00008592 4172726179206E6F7420         dc.b    'Array not Dim',39,'d',0
 7478 00.000085A2                              even
 7479 00.000085A2 6100055C             noconsterr      bsr     err
 7480 00.000085A6 436F6E7374616E74206E         dc.b    'Constant not defined',0
 7481 00.000085BC                              even
 7482 00.000085BC 61000542             alconsterr      bsr     err
 7483 00.000085C0 436F6E7374616E742061         dc.b    'Constant already defined',0
 7484 00.000085DA                              even
 7485 00.000085DA 61000524             ilconsterr      bsr     err
 7486 00.000085DE 496C6C6567616C20436F         dc.b    'Illegal Constant',0
 7487 00.000085F0                              even
 7488 00.000085F0 41FA001F             noliberr        lea     liberrnum(pc),a0
 7489 00.000085F4 6100B41E                     bsr     hexascii
 7490 00.000085F8 61000506                     bsr     err
 7491 00.000085FC 4C696272617279206E6F         dc.b    'Library not Found : $'
 7492 00.00008611 666666662E00         liberrnum       dc.b    'ffff.',0
 7493 00.00008618                              even
 7494 00.00008618 41FA001D             notokerr        lea     tokerrnum(pc),a0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 185
blitz2.s


 7495 00.0000861C 6100B3F6                     bsr     hexascii
 7496 00.00008620 610004DE                     bsr     err
 7497 00.00008624 546F6B656E204E6F7420         dc.b    'Token Not Found : $'
 7498 00.00008637 666666662E00         tokerrnum       dc.b    'ffff.',0
 7499 00.0000863E 610004C0             duplaberr       bsr     err
 7500 00.00008642 4475706C696361746520         dc.b    'Duplicate Label',0
 7501 00.00008652                              even
 7502 00.00008652 610004AC             nolaberr        bsr     err
 7503 00.00008656 4C6162656C206E6F7420         dc.b    'Label not Found',0
 7504 00.00008666                              even
 7505 00.00008666 61000498             typeiferr       bsr     err
 7506 00.0000866A 43616E277420436F6D70         dc.b    'Can',39,'t Compare Types',0
 7507 00.0000867E                              even
 7508 00.0000867E 61000480             noiferr bsr     err
 7509 00.00008682 456E6420436F6E646974         dc.b    'End Condition without Condition',0
 7510 00.000086A2                              even
 7511 00.000086A2 6100045C             bigiferr        bsr     err
 7512 00.000086A6 496620426C6F636B2074         dc.b    'If Block too Large',0
 7513 00.000086BA                              even
 7514 00.000086BA 61000444             badenderr       bsr     err
 7515 00.000086BE 496C6C6567616C79206E         dc.b    'Illegaly nested Condition',0
 7516 00.000086D8                              even
 7517 00.000086D8 61000426             dupmacerr       bsr     err
 7518 00.000086DC 4D6163726F20616C7265         dc.b    'Macro already Defined',0
 7519 00.000086F2                              even
 7520 00.000086F2 6100040C             macnesterr      bsr     err
 7521 00.000086F6 43616E27742063726561         dc.b    'Can',39,'t create Macro inside Macro',0
 7522 00.00008716                              even
 7523 00.00008716 33F90000CB800000E9E8 macenderr       move    macline,linenumat
 7524 00.00008720 610003DE                     bsr     err
 7525 00.00008724 4D6163726F2077697468         dc.b    'Macro without End Macro',0
 7526 00.0000873C                              even
 7527 00.0000873C 610003C2             macbigerr       bsr     err
 7528 00.00008740 4D6163726F20746F6F20         dc.b    'Macro too Big',0
 7529 00.0000874E                              even
 7530 00.0000874E 610003B0             tmmacerr        bsr     err
 7531 00.00008752 4D6163726F73204E6573         dc.b    'Macros Nested too Deep',0
 7532 00.0000876A                              even
 7533 00.0000876A 61000394             nomacerr        bsr     err
 7534 00.0000876E 4D6163726F206E6F7420         dc.b    'Macro not Found',0
 7535 00.0000877E                              even
 7536 00.0000877E 61000380             comerr  bsr     err
 7537 00.00008782 546F6F206D616E792063         dc.b    'Too many comma',39,'s in Let',0
 7538 00.0000879A                              even
 7539 00.0000879A 61000364             nocomerr        bsr     err
 7540 00.0000879E 43616E27742075736520         dc.b    'Can',39,'t use comma in Let',0
 7541 00.000087B6                              even
 7542 00.000087B6 61000348             conintype       bsr     err
 7543 00.000087BA 43616E27742075736520         dc.b    'Can',39,'t use a Constant in New Type',0
 7544 00.000087DC                              even
 7545 00.000087DC 61000322             alincerr        bsr     err
 7546 00.000087E0 416C726561647920496E         dc.b    'Already Included',0
 7547 00.000087F2                              even
 7548 00.000087F2 6100030C             noincerr        bsr     err
 7549 00.000087F6 43616E2774206F70656E         dc.b    'Can',39,'t open Include',0
 7550 00.0000880A                              even
 7551 00.0000880A 610002F4             readerr bsr     err
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 186
blitz2.s


 7552 00.0000880E 4572726F722052656164         dc.b    'Error Reading File',0
 7553 00.00008822                              even
 7554 00.00008822 610002DC             toifmacerr      bsr     err
 7555 00.00008826 4966204D6163726F2773         dc.b    'If Macro',39,'s Nested too Deep',0
 7556 00.00008842                              even
 7557 00.00008842 610002BC             noenderr        bsr     err
 7558 00.00008846 496620576974686F7574         dc.b    'If Without End If',0
 7559 00.00008858                              even
 7560 00.00008858 610002A6             dupprocerr      bsr     err
 7561 00.0000885C 4475706C696361746520         dc.b    'Duplicate Procedure name',0
 7562 00.00008876                              even
 7563 00.00008876 61000288             duplocerr       bsr     err
 7564 00.0000887A 4475706C696361746520         dc.b    'Duplicate parameter variable',0
 7565 00.00008898                              even
 7566 00.00008898 61000266             noprocerr       bsr     err
 7567 00.0000889C 50726F63656475726520         dc.b    'Procedure not found',0
 7568 00.000088B0                              even
 7569 00.000088B0 6100024E             toovarerr       bsr     err
 7570 00.000088B4 546F6F206D616E792070         dc.b    'Too many parameters',0
 7571 00.000088C8                              even
 7572 00.000088C8 61000236             illvarerr       bsr     err
 7573 00.000088CC 496C6C6567616C205061         dc.b    'Illegal Parameter Type',0
 7574 00.000088E4                              even
 7575 00.000088E4 6100021A             nopenderr       bsr     err
 7576 00.000088E8 556E7465726D696E6174         dc.b    'Unterminated Procedure',0
 7577 00.00008900                              even
 7578 00.00008900 610001FE             illprocerr      bsr     err
 7579 00.00008904 496C6C6567616C205072         dc.b    'Illegal Procedure Call',0
 7580 00.0000891C                              even
 7581 00.0000891C 610001E2             functypeerr     bsr     err
 7582 00.00008920 496C6C6567616C204675         dc.b    'Illegal Function Type',0
 7583 00.00008936                              even
 7584 00.00008936 610001C8             illprocperr     bsr     err
 7585 00.0000893A 496C6C6567616C205061         dc.b    'Illegal Parameter Type',0
 7586 00.00008952                              even
 7587 00.00008952 610001AC             extlaberr       bsr     err
 7588 00.00008956 43616E27742041636365         dc.b    'Can',39,'t Access Label',0
 7589 00.0000896A                              even
 7590 00.0000896A 61000194             sreterr bsr     err
 7591 00.0000896E 496C6C6567616C205072         dc.b    'Illegal Procedure return',0
 7592 00.00008988                              even
 7593 00.00008988 61000176             sharederr       bsr     err
 7594 00.0000898C 536861726564206F7574         dc.b    'Shared outside of Procedure',0
 7595 00.000089A8                              even
 7596 00.000089A8 61000156             dupsherr        bsr     err
 7597 00.000089AC 5661726961626C652061         dc.b    'Variable already Shared',0
 7598 00.000089C4                              even
 7599 00.000089C4 6100013A             badforerr       bsr     err
 7600 00.000089C8 42616420547970652066         dc.b    'Bad Type for For...Next',0
 7601 00.000089E0                              even
 7602 00.000089E0 6100011E             noforerr        bsr     err
 7603 00.000089E4 4E65787420776974686F         dc.b    'Next without For',0
 7604 00.000089F6                              even
 7605 00.000089F6 61000108             bigforerr       bsr     err
 7606 00.000089FA 466F722E2E2E4E657874         dc.b    'For...Next Block to Long',0
 7607 00.00008A14                              even
 7608 00.00008A14 610000EA             nonexterr       bsr     err
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 187
blitz2.s


 7609 00.00008A18 466F7220576974686F75         dc.b    'For Without Next',0
 7610 00.00008A2A                              even
 7611 00.00008A2A 610000D4             zprocerr        bsr     err
 7612 00.00008A2E 43616E2774204E657374         dc.b    'Can',39,'t Nest Procedures',0
 7613 00.00008A44                              even
 7614 00.00008A44 610000BA             nodimerr        bsr     err
 7615 00.00008A48 43616E27742044696D20         dc.b    'Can',39,'t Dim Globals in Procedures',0
 7616 00.00008A68                              even
 7617 00.00008A68 61000096             noconerr        bsr     err
 7618 00.00008A6C 43616E277420436F6E76         dc.b    'Can',39,'t Convert Types',0
 7619 00.00008A80                              even
 7620 00.00008A80 6100007E             baddaterr       bsr     err
 7621 00.00008A84 426164204461746100           dc.b    'Bad Data',0
 7622 00.00008A8E                              even
 7623 00.00008A8E 61000070             nociferr        bsr     err
 7624 00.00008A92 43454E4420776974686F         dc.b    'CEND without CNIF/CSIF...',0
 7625 00.00008AAC                              even
 7626 00.00008AAC 61000052             cnferr  bsr     err
 7627 00.00008AB0 436F6E7374616E74204E         dc.b    'Constant Not Found',0
 7628 00.00008AC4                              even
 7629 00.00008AC4 6100003A             badconerr       bsr     err
 7630 00.00008AC8 496C6C6567616C20436F         dc.b    'Illegal Constant Expression',0
 7631 00.00008AE4                              even
 7632 00.00008AE4 6100001A             badpenderr      bsr     err
 7633 00.00008AE8 496C6C6567616C20456E         dc.b    'Illegal End Procedure',0
 7634 00.00008AFE                              even
 7635 00.00008AFE                      
 7636 00.00008AFE 0000                 ezerr   dc      0       ;for simple errors
 7637 00.00008B00                                              ;(ie not during compile)
 7638 00.00008B00                      
 7639 00.00008B00                      comperror       ;compile time error...
 7640 00.00008B00                              ;
 7641 00.00008B00 4A790000E834         err     tst     dirmode
 7642 00.00008B06 667A                         bne.s   .quiet
 7643 00.00008B08                              ;
 7644 00.00008B08 6100A3EA                     bsr     pointeron
 7645 00.00008B0C                              ;
 7646 00.00008B0C 303AFFF0                     move    ezerr(pc),d0
 7647 00.00008B10 6600004C                     bne     .skip
 7648 00.00008B14 30390000E32E                 move    cfetchmode,d0
 7649 00.00008B1A 6700000C                     beq     .skip2
 7650 00.00008B1E 23F90000C0340000E8FA         move.l  oldlibat,libat  ;fix up lib thing.
 7651 00.00008B28 30390000E91E         .skip2  move    constmode,d0
 7652 00.00008B2E 6704                         beq.s   .skip3
 7653 00.00008B30 6100F6A4                     bsr     asmerr2
 7654 00.00008B34                      .skip3  ;
 7655 00.00008B34 223900002B30                 move.l  firstlocal,d1
 7656 00.00008B3A 82B900002B34                 or.l    firstglob,d1
 7657 00.00008B40 6704                         beq.s   .notproc        ;?!?!?!
 7658 00.00008B42                              ;
 7659 00.00008B42 61005018                     bsr     droplocals
 7660 00.00008B46                              ;
 7661 00.00008B46 33FCFFFF0000E84C     .notproc        move    #-1,anyerrs
 7662 00.00008B4E 33F90000E9E80000E9EA         move    linenumat,menuret
 7663 00.00008B58                              ;
 7664 00.00008B58 4EB900003F10                 jsr     endstop
 7665 00.00008B5E                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 188
blitz2.s


 7666 00.00008B5E 205F                 .skip   move.l  (a7)+,a0
 7667 00.00008B60 22790000E372                 move.l  comdata,a1
 7668 00.00008B66 2269000C                     move.l  12(a1),a1
 7669 00.00008B6A 48E70102                     movem.l d7/a6,-(a7)
 7670 00.00008B6E 4E91                         jsr     (a1)
 7671 00.00008B70 4CDF4080                     movem.l (a7)+,d7/a6
 7672 00.00008B74 2E7900002B18                 move.l  errstack,a7
 7673 00.00008B7A 207900002B1C                 move.l  errcont,a0
 7674 00.00008B80 4ED0                         jmp     (a0)
 7675 00.00008B82                              ;
 7676 00.00008B82 2017                 .quiet  move.l  (a7),d0
 7677 00.00008B84 2E7900002B18                 move.l  errstack,a7
 7678 00.00008B8A 207900002B1C                 move.l  errcont,a0
 7679 00.00008B90 4ED0                         jmp     (a0)
 7680 00.00008B92                      
 7681 00.00008B92                      tstalpha        ;tst if d0 is alphabetic
 7682 00.00008B92                              ;return z=1 if yes
 7683 00.00008B92 B07C007A                     cmp     #'z',d0
 7684 00.00008B96 6200001C                     bhi     .no
 7685 00.00008B9A B07C0041                     cmp     #'A',d0
 7686 00.00008B9E 65000014                     bcs     .no
 7687 00.00008BA2 B07C0061                     cmp     #'a',d0
 7688 00.00008BA6 6400000A                     bcc     .yes
 7689 00.00008BAA B07C005A                     cmp     #'Z',d0
 7690 00.00008BAE 62000004                     bhi     .no
 7691 00.00008BB2 B040                 .yes    cmp     d0,d0
 7692 00.00008BB4 4E75                 .no     rts
 7693 00.00008BB6                      
 7694 00.00008BB6                      tstnum  ;tst if d0 is numeric, eq=1 if yes
 7695 00.00008BB6                              ;cmp    #'-',d0
 7696 00.00008BB6                              ;beq    .skip
 7697 00.00008BB6 B07C0030             tstnum2 cmp     #'0',d0
 7698 00.00008BBA 6500000C                     bcs     .skip
 7699 00.00008BBE B07C0039                     cmp     #'9',d0
 7700 00.00008BC2 62000004                     bhi     .skip
 7701 00.00008BC6 B040                         cmp     d0,d0
 7702 00.00008BC8 4E75                 .skip   rts
 7703 00.00008BCA                      
 7704 00.00008BCA                      tstlab  ;tst if d0 is a lable character
 7705 00.00008BCA                              ;eq=1 if yes
 7706 00.00008BCA 6100FFC6                     bsr     tstalpha
 7707 00.00008BCE 67000016                     beq     .skip
 7708 00.00008BD2 6100FFE2                     bsr     tstnum2
 7709 00.00008BD6 6700000E                     beq     .skip
 7710 00.00008BDA B07C005F                     cmp     #'_',d0
 7711 00.00008BDE 67000006                     beq     .skip
 7712 00.00008BE2 B07C0027                     cmp     #loclabch,d0
 7713 00.00008BE6 4E75                 .skip   rts
 7714 00.00008BE8                      
 7715 00.00008BE8 6100F05A             makename2       bsr     bakup
 7716 00.00008BEC                      makename        ;
 7717 00.00008BEC                              ;pick up label name from a5...
 7718 00.00008BEC                              ;
 7719 00.00008BEC                              ;put into name buff, return len in d2 (eq if zero)
 7720 00.00008BEC                              ;
 7721 00.00008BEC 43F90000EC68                 lea     namebuff,a1
 7722 00.00008BF2 7400                 makename3       moveq   #0,d2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 189
blitz2.s


 7723 00.00008BF4 6100F018             makename4       bsr     getchar3
 7724 00.00008BF8 B07C005F                     cmp     #'_',d0
 7725 00.00008BFC 6700000A                     beq     .oloop
 7726 00.00008C00 6100FF90                     bsr     tstalpha
 7727 00.00008C04 6600001E                     bne     .done
 7728 00.00008C08                      .oloop  ;not    quoteflag       ;force 'space' gets
 7729 00.00008C08 12C0                 .loop   move.b  d0,(a1)+
 7730 00.00008C0A 5242                         addq    #1,d2
 7731 00.00008C0C                              ;
 7732 00.00008C0C 6100EE20                     bsr     getchar
 7733 00.00008C10 6100FFB8                     bsr     tstlab
 7734 00.00008C14 6700FFF2                     beq     .loop
 7735 00.00008C18                              ;
 7736 00.00008C18                              ;not    quoteflag       ;back to norm...
 7737 00.00008C18                              ;not    oldqflag
 7738 00.00008C18                              ;
 7739 00.00008C18 B07C0020                     cmp     #32,d0
 7740 00.00008C1C 66000006                     bne     .done
 7741 00.00008C20 6100EFEC                     bsr     getchar3
 7742 00.00008C24 4211                 .done   clr.b   (a1)
 7743 00.00008C26 4A42                         tst     d2
 7744 00.00008C28 4E75                         rts
 7745 00.00008C2A                      
 7746 00.00008C2A                      findlast        ;look for last entry in list from a2
 7747 00.00008C2A                              ;
 7748 00.00008C2A 2012                         move.l  (a2),d0
 7749 00.00008C2C 67000008             .loop   beq     .here
 7750 00.00008C30 2440                         move.l  d0,a2
 7751 00.00008C32 6000FFF8                     bra     .loop
 7752 00.00008C36 6000F002             .here   bra     reget
 7753 00.00008C3A                      
 7754 00.00008C3A                      addhere2        ;insert at beginning
 7755 00.00008C3A                              ;
 7756 00.00008C3A 2F12                         move.l  (a2),-(a7)
 7757 00.00008C3C 61000006                     bsr     addhere
 7758 00.00008C40 249F                         move.l  (a7)+,(a2)
 7759 00.00008C42 4E75                         rts
 7760 00.00008C44                      
 7761 00.00008C44 4A790000E834         addhere tst     dirmode
 7762 00.00008C4A 6600F546                     bne     illdirerr
 7763 00.00008C4E                              ;
 7764 00.00008C4E                              ;add namebuff after a2,d7
 7765 00.00008C4E                              ;
 7766 00.00008C4E                              ;d2=len of name, name in namebuff
 7767 00.00008C4E                              ;set a2 to address of struct
 7768 00.00008C4E                              ;
 7769 00.00008C4E 7000                         moveq   #0,d0
 7770 00.00008C50 3007                         move    d7,d0
 7771 00.00008C52 D042                         add     d2,d0
 7772 00.00008C54 5240                         addq    #1,d0
 7773 00.00008C56 3400                         move    d0,d2
 7774 00.00008C58 7201                         moveq   #1,d1
 7775 00.00008C5A 2C780004                     move.l  4.w,a6
 7776 00.00008C5E 4EB900004B6C                 jsr     doallocmem
 7777 00.00008C64                              ;
 7778 00.00008C64 2040                         move.l  d0,a0
 7779 00.00008C66 2488                         move.l  a0,(a2)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 190
blitz2.s


 7780 00.00008C68 2448                         move.l  a0,a2
 7781 00.00008C6A 4290                         clr.l   (a0)    ;clear next
 7782 00.00008C6C 41F070FF                     lea     -1(a0,d7),a0
 7783 00.00008C70 10C2                         move.b  d2,(a0)+        ;put in struct length
 7784 00.00008C72 43F90000EC68                 lea     namebuff,a1
 7785 00.00008C78 10D9                 .loop2  move.b  (a1)+,(a0)+
 7786 00.00008C7A 6600FFFC                     bne     .loop2  
 7787 00.00008C7E 6000EFBA                     bra     reget
 7788 00.00008C82                      
 7789 00.00008C82 7E13                 findinc moveq   #19,d7
 7790 00.00008C84 45F90000EC1E                 lea     firstinc,a2
 7791 00.00008C8A 60000052                     bra     findlab
 7792 00.00008C8E                      
 7793 00.00008C8E 7E05                 findxinc        moveq   #5,d7
 7794 00.00008C90 45F90000EC1A                 lea     firstxinc,a2
 7795 00.00008C96 60000046                     bra     findlab
 7796 00.00008C9A                      
 7797 00.00008C9A 7E09                 findconst       moveq   #9,d7
 7798 00.00008C9C 45F90000E94A                 lea     firstconst,a2
 7799 00.00008CA2 6000003A                     bra     findlab
 7800 00.00008CA6                      
 7801 00.00008CA6 7E0D                 findmac moveq   #13,d7
 7802 00.00008CA8 45F90000EC2E                 lea     firstmacro,a2
 7803 00.00008CAE 6000002E                     bra     findlab
 7804 00.00008CB2                      
 7805 00.00008CB2 45F90000EC36         findadd lea     firstlabel,a2
 7806 00.00008CB8 7E13                         moveq   #19,d7
 7807 00.00008CBA 60000022                     bra     findlab
 7808 00.00008CBE                      
 7809 00.00008CBE 7E0B                 findtype        moveq   #11,d7
 7810 00.00008CC0 6000001C                     bra     findlab
 7811 00.00008CC4                      
 7812 00.00008CC4 45F90000EC08         findproc        lea     firstproc,a2
 7813 00.00008CCA 7E21                         moveq   #33,d7
 7814 00.00008CCC 60000010                     bra     findlab
 7815 00.00008CD0                      
 7816 00.00008CD0 45F90000E9A8         findfor lea     firstfor,a2
 7817 00.00008CD6 7E11                         moveq   #17,d7
 7818 00.00008CD8 60000004                     bra     findlab
 7819 00.00008CDC                      
 7820 00.00008CDC 7E0F                 findvar moveq   #15,d7
 7821 00.00008CDE                              ;
 7822 00.00008CDE                      findlab ;see if namebuff is in list at a2, char offset in d7
 7823 00.00008CDE                              ;
 7824 00.00008CDE                              ;z=1 if yes, a2=item loc
 7825 00.00008CDE                              ;
 7826 00.00008CDE                              ;if no, a2=last for link
 7827 00.00008CDE                              ;
 7828 00.00008CDE 2012                 .loop   move.l  (a2),d0
 7829 00.00008CE0 672C                         beq.s   .no
 7830 00.00008CE2 2440                         move.l  d0,a2
 7831 00.00008CE4 7000                         moveq   #0,d0
 7832 00.00008CE6 103270FF                     move.b  -1(a2,d7),d0
 7833 00.00008CEA 9047                         sub     d7,d0
 7834 00.00008CEC 5340                         subq    #1,d0
 7835 00.00008CEE B440                         cmp     d0,d2
 7836 00.00008CF0 66EC                         bne.s   .loop
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 191
blitz2.s


 7837 00.00008CF2 43F27000                     lea     0(a2,d7),a1
 7838 00.00008CF6 41F90000EC68                 lea     namebuff,a0
 7839 00.00008CFC 5340                         subq    #1,d0
 7840 00.00008CFE B109                 .loop2  cmpm.b  (a1)+,(a0)+
 7841 00.00008D00 66DC                         bne.s   .loop
 7842 00.00008D02 51C8FFFA                     dbf     d0,.loop2
 7843 00.00008D06 6100EF32                     bsr     reget
 7844 00.00008D0A B040                         cmp     d0,d0
 7845 00.00008D0C 4E75                         rts
 7846 00.00008D0E 6100EF2A             .no     bsr     reget
 7847 00.00008D12 72FF                         moveq   #-1,d1
 7848 00.00008D14 4E75                         rts
 7849 00.00008D16                      
 7850 00.00008D16 287900002B2C         freeprocvs      move.l  alllocals,a4
 7851 00.00008D1C 42B900002B2C                 clr.l   alllocals
 7852 00.00008D22 B8FC0000             .loop   cmp     #0,a4
 7853 00.00008D26 6720                         beq.s   .done
 7854 00.00008D28 266C0004                     move.l  4(a4),a3
 7855 00.00008D2C 6100001C                     bsr     freevars
 7856 00.00008D30 266C0008                     move.l  8(a4),a3
 7857 00.00008D34 61000014                     bsr     freevars
 7858 00.00008D38 224C                         move.l  a4,a1
 7859 00.00008D3A 2854                         move.l  (a4),a4
 7860 00.00008D3C 700C                         moveq   #12,d0
 7861 00.00008D3E 2C780004                     move.l  4.w,a6
 7862 00.00008D42 4EAEFF2E                     jsr     freemem(a6)
 7863 00.00008D46 60DA                         bra.s   .loop
 7864 00.00008D48 4E75                 .done   rts
 7865 00.00008D4A                      
 7866 00.00008D4A                      freevars        ;free up var structs from a3 on
 7867 00.00008D4A B6FC0000             freevars2       cmp     #0,a3
 7868 00.00008D4E 67000018                     beq     .done
 7869 00.00008D52 224B                         move.l  a3,a1
 7870 00.00008D54 2653                         move.l  (a3),a3
 7871 00.00008D56 7000                         moveq   #0,d0
 7872 00.00008D58 1029000E                     move.b  14(a1),d0
 7873 00.00008D5C 2C780004                     move.l  4.w,a6
 7874 00.00008D60 4EAEFF2E                     jsr     freemem(a6)
 7875 00.00008D64 6000FFE4                     bra     freevars2
 7876 00.00008D68 4E75                 .done   rts
 7877 00.00008D6A                      
 7878 00.00008D6A                      freelabels      ;free up label structs from firstlabel on...
 7879 00.00008D6A                              ;
 7880 00.00008D6A 20790000E346                 move.l  lastrescon,a0
 7881 00.00008D70 2450                         move.l  (a0),a2
 7882 00.00008D72 4290                         clr.l   (a0)
 7883 00.00008D74 2C780004                     move.l  4.w,a6
 7884 00.00008D78 B4FC0000             .loop   cmp     #0,a2
 7885 00.00008D7C 67000038                     beq     .done
 7886 00.00008D80 202A0004                     move.l  4(a2),d0
 7887 00.00008D84 08000000                     btst    #0,d0
 7888 00.00008D88 6600001A                     bne     .skip
 7889 00.00008D8C 2640                         move.l  d0,a3
 7890 00.00008D8E B6FC0000             .loop2  cmp     #0,a3
 7891 00.00008D92 67000010                     beq     .skip
 7892 00.00008D96 224B                         move.l  a3,a1
 7893 00.00008D98 2653                         move.l  (a3),a3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 192
blitz2.s


 7894 00.00008D9A 700C                         moveq   #12,d0
 7895 00.00008D9C 4EAEFF2E                     jsr     freemem(a6)
 7896 00.00008DA0 6000FFEC                     bra     .loop2
 7897 00.00008DA4 7000                 .skip   moveq   #0,d0
 7898 00.00008DA6 102A0012                     move.b  18(a2),d0
 7899 00.00008DAA 224A                         move.l  a2,a1
 7900 00.00008DAC 2452                         move.l  (a2),a2
 7901 00.00008DAE 4EAEFF2E                     jsr     freemem(a6)
 7902 00.00008DB2 6000FFC4                     bra     .loop
 7903 00.00008DB6                      .done   ;
 7904 00.00008DB6 4E75                         rts
 7905 00.00008DB8                      
 7906 00.00008DB8 26790000E8DE         freepends       move.l  firstpend,a3
 7907 00.00008DBE 42B90000E8DE                 clr.l   firstpend
 7908 00.00008DC4 2C780004                     move.l  4.w,a6
 7909 00.00008DC8 B6FC0000             fpnd2   cmp     #0,a3
 7910 00.00008DCC 67000010                     beq     .done
 7911 00.00008DD0 224B                         move.l  a3,a1
 7912 00.00008DD2 7008                         moveq   #8,d0
 7913 00.00008DD4 2653                         move.l  (a3),a3
 7914 00.00008DD6 4EAEFF2E                     jsr     freemem(a6)
 7915 00.00008DDA 6000FFEC                     bra     fpnd2
 7916 00.00008DDE 4E75                 .done   rts
 7917 00.00008DE0                      
 7918 00.00008DE0                      freeprocs       ;free up all proc structs
 7919 00.00008DE0                              ;
 7920 00.00008DE0 24790000EC08                 move.l  firstproc,a2
 7921 00.00008DE6 42B90000EC08                 clr.l   firstproc
 7922 00.00008DEC 2C780004                     move.l  4.w,a6
 7923 00.00008DF0 B4FC0000             .loop   cmp     #0,a2
 7924 00.00008DF4 67000014                     beq     .done
 7925 00.00008DF8 224A                         move.l  a2,a1
 7926 00.00008DFA 2452                         move.l  (a2),a2
 7927 00.00008DFC 7000                         moveq   #0,d0
 7928 00.00008DFE 10290020                     move.b  32(a1),d0
 7929 00.00008E02 4EAEFF2E                     jsr     freemem(a6)
 7930 00.00008E06 6000FFE8                     bra     .loop
 7931 00.00008E0A 4E75                 .done   rts
 7932 00.00008E0C                      
 7933 00.00008E0C                      freetypes       ;free up type structs from a2 on
 7934 00.00008E0C B4FC0000             .loop   cmp     #0,a2
 7935 00.00008E10 67000028                     beq     .done
 7936 00.00008E14 266A0004                     move.l  4(a2),a3
 7937 00.00008E18 B6FC00FF                     cmp     #$ff,a3
 7938 00.00008E1C 67000006                     beq     .noway
 7939 00.00008E20                              ;
 7940 00.00008E20                              ;free offsets too
 7941 00.00008E20                              ;
 7942 00.00008E20 6100FF28                     bsr     freevars2
 7943 00.00008E24                              ;
 7944 00.00008E24 224A                 .noway  move.l  a2,a1
 7945 00.00008E26 2452                         move.l  (a2),a2
 7946 00.00008E28 7000                         moveq   #0,d0
 7947 00.00008E2A 1029000A                     move.b  10(a1),d0
 7948 00.00008E2E 2C780004                     move.l  4.w,a6
 7949 00.00008E32 4EAEFF2E                     jsr     freemem(a6)
 7950 00.00008E36 6000FFD4                     bra     .loop
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 193
blitz2.s


 7951 00.00008E3A 4E75                 .done   rts
 7952 00.00008E3C                      
 7953 00.00008E3C                      fetchvar        ;find/create variable/struct from namebuff
 7954 00.00008E3C                              ;flagmask.0=1 if pointer
 7955 00.00008E3C                              ;
 7956 00.00008E3C                              ;get pointer to variable in a3, pointer to type in a2
 7957 00.00008E3C                              ;
 7958 00.00008E3C 4EB900006A3E                 jsr     usevars
 7959 00.00008E42 42790000EC5C                 clr     added
 7960 00.00008E48 42790000EC02                 clr     varmode ;local mode
 7961 00.00008E4E 32390000EC0C                 move    procmode,d1
 7962 00.00008E54 660000F8                     bne     fvarlocal
 7963 00.00008E58                              ;
 7964 00.00008E58 45F900002B28                 lea     firstvar,a2
 7965 00.00008E5E 6100FE7C             fvarback        bsr     findvar
 7966 00.00008E62 6600001A             .more   bne     fvaradd
 7967 00.00008E66 12390000EC5B                 move.b  flagmask+1,d1
 7968 00.00008E6C 162A0007                     move.b  7(a2),d3
 7969 00.00008E70 B701                         eor.b   d3,d1
 7970 00.00008E72 67000134                     beq     fvarfound
 7971 00.00008E76 6100FE66                     bsr     findlab
 7972 00.00008E7A 6000FFE6                     bra     .more
 7973 00.00008E7E 32390000EC5E         fvaradd move    nonew,d1
 7974 00.00008E84 6600F6E2                     bne     nonewerr
 7975 00.00008E88 6100FDBA                     bsr     addhere ;create var
 7976 00.00008E8C 46790000EC5C                 not     added   ;set added flag
 7977 00.00008E92 264A                         move.l  a2,a3   
 7978 00.00008E94 24790000E848                 move.l  defaulttype,a2
 7979 00.00008E9A B07C002E                     cmp     #'.',d0
 7980 00.00008E9E 67000018                     beq     .clapton
 7981 00.00008EA2 B07C0024                     cmp     #'$',d0
 7982 00.00008EA6 66000022                     bne     .usedef
 7983 00.00008EAA 45F90000E7B8                 lea     stringtype,a2
 7984 00.00008EB0 6100ED5C                     bsr     getchar3
 7985 00.00008EB4 60000014                     bra     .usedef
 7986 00.00008EB8 6100FD32             .clapton        bsr     makename
 7987 00.00008EBC 45F90000E760                 lea     alltypes,a2
 7988 00.00008EC2 6100FDFA                     bsr     findtype
 7989 00.00008EC6 6600F578                     bne     notypeerr
 7990 00.00008ECA B5FC0000E764         .usedef cmp.l   #bytetype,a2
 7991 00.00008ED0 6700001A                     beq     .byte
 7992 00.00008ED4 32390000EC02                 move    varmode,d1
 7993 00.00008EDA 66000008                     bne     .pit
 7994 00.00008EDE 527900002B38                 addq    #1,varoff
 7995 00.00008EE4 08B9000000002B39     .pit    bclr    #0,varoff+1
 7996 00.00008EEC 274A000A             .byte   move.l  a2,10(a3)       ;set type
 7997 00.00008EF0 37790000EC5A0006             move    flagmask,6(a3)
 7998 00.00008EF8 7204                         moveq   #4,d1
 7999 00.00008EFA 083900000000EC5B             btst    #0,flagmask+1
 8000 00.00008F02 6600001E                     bne     .skip3
 8001 00.00008F06 083900010000EC5B             btst    #1,flagmask+1
 8002 00.00008F0E 66000012                     bne     .skip3
 8003 00.00008F12 0CAA000001000004             cmp.l   #256,4(a2)
 8004 00.00008F1A 64000006                     bcc     .skip3
 8005 00.00008F1E 322A0008                     move    8(a2),d1
 8006 00.00008F22 4A790000EC02         .skip3  tst     varmode
 8007 00.00008F28 67000014                     beq     .pit2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 194
blitz2.s


 8008 00.00008F2C 4441                         neg     d1
 8009 00.00008F2E D37900002B38                 add     d1,varoff
 8010 00.00008F34 377900002B380004             move    varoff,4(a3)    ;loc offset
 8011 00.00008F3C 4E75                         rts
 8012 00.00008F3E 377900002B380004     .pit2   move    varoff,4(a3)    ;global
 8013 00.00008F46 D37900002B38                 add     d1,varoff
 8014 00.00008F4C 4E75                         rts
 8015 00.00008F4E                      
 8016 00.00008F4E 45F900002B34         fvarlocal       lea     firstglob,a2
 8017 00.00008F54 6100FD86                     bsr     findvar
 8018 00.00008F58 6600001A             .more   bne     .hendrix
 8019 00.00008F5C 12390000EC5B                 move.b  flagmask+1,d1
 8020 00.00008F62 162A0007                     move.b  7(a2),d3
 8021 00.00008F66 B701                         eor.b   d3,d1
 8022 00.00008F68 6700003E                     beq     fvarfound
 8023 00.00008F6C 6100FD70                     bsr     findlab
 8024 00.00008F70 6000FFE6                     bra     .more
 8025 00.00008F74 33FCFFFF0000EC02     .hendrix        move    #-1,varmode
 8026 00.00008F7C 3F3900002B38                 move    varoff,-(a7)
 8027 00.00008F82 33F900002B3A00002B38         move    locvaroff,varoff
 8028 00.00008F8C 45F900002B30                 lea     firstlocal,a2
 8029 00.00008F92 6100FECA                     bsr     fvarback
 8030 00.00008F96 33F900002B3800002B3A         move    varoff,locvaroff
 8031 00.00008FA0 33DF00002B38                 move    (a7)+,varoff
 8032 00.00008FA6 4E75                         rts
 8033 00.00008FA8                      
 8034 00.00008FA8 264A                 fvarfound       move.l  a2,a3
 8035 00.00008FAA                              ;
 8036 00.00008FAA                              ;var found, establish if type is correct!
 8037 00.00008FAA                              ;
 8038 00.00008FAA B07C002E                     cmp     #'.',d0
 8039 00.00008FAE 6700001E                     beq     .skipsh
 8040 00.00008FB2 B07C0024                     cmp     #'$',d0
 8041 00.00008FB6 66000030                     bne     .skip4
 8042 00.00008FBA 0CAB0000E7B8000A             cmp.l   #stringtype,10(a3)
 8043 00.00008FC2 6600F4E0                     bne     rongtypeerr
 8044 00.00008FC6 6100EC46                     bsr     getchar3
 8045 00.00008FCA 6000001C                     bra     .skip4
 8046 00.00008FCE 6100FC1C             .skipsh bsr     makename
 8047 00.00008FD2 45F90000E760                 lea     alltypes,a2
 8048 00.00008FD8 6100FCE4                     bsr     findtype
 8049 00.00008FDC 6600F462                     bne     notypeerr
 8050 00.00008FE0 B5EB000A                     cmp.l   10(a3),a2
 8051 00.00008FE4 6600F4BE                     bne     rongtypeerr
 8052 00.00008FE8 083900000000EC5B     .skip4  btst    #0,flagmask+1
 8053 00.00008FF0 6700000C                     beq     .skip4z
 8054 00.00008FF4                              ;
 8055 00.00008FF4 082B00000007                 btst    #0,7(a3)
 8056 00.00008FFA 6700F4EC                     beq     pointerr
 8057 00.00008FFE                              ;
 8058 00.00008FFE 246B000A             .skip4z move.l  10(a3),a2
 8059 00.00009002 4E75                         rts
 8060 00.00009004                      
 8061 00.00009004 4A43                 addd0a0 tst     d3
 8062 00.00009006 6700003A                     beq     .done2a
 8063 00.0000900A B67C0009                     cmp     #9,d3
 8064 00.0000900E 64000022                     bcc     .done3a
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 195
blitz2.s


 8065 00.00009012 02430007                     and     #7,d3
 8066 00.00009016 E14B                         lsl     #8,d3
 8067 00.00009018 E34B                         lsl     #1,d3
 8068 00.0000901A 0279F1FF00002AEA             and     #$f1ff,addqa0
 8069 00.00009022 877900002AEA                 or      d3,addqa0
 8070 00.00009028 323900002AEA                 move    addqa0,d1
 8071 00.0000902E 600004DC                     bra     pokewd
 8072 00.00009032 33C300002AEE         .done3a move    d3,leaa0a0+2
 8073 00.00009038 223900002AEC                 move.l  leaa0a0,d1
 8074 00.0000903E 610004C4                     bsr     pokel
 8075 00.00009042 4E75                 .done2a rts
 8076 00.00009044                      
 8077 00.00009044 B0AD0000             zarrchk cmp.l   0(a5),d0
 8078 00.00009048 65000008             arrchk2 bcs     arrchk3
 8079 00.0000904C 4EB900000000         arrchkf jsr     0
 8080 00.00009052                      arrchk3
 8081 00.00009052                      
 8082 00.00009052                      makeamul        ;
 8083 00.00009052                      
 8084 00.00009052                      makelmul        ;make long multiply for array calc
 8085 00.00009052                              ;
 8086 00.00009052 343900002B06                 move    regat,d2
 8087 00.00009058                              ;
 8088 00.00009058 323A00AA                     move    arrmul1(pc),d1
 8089 00.0000905C 8242                         or      d2,d1
 8090 00.0000905E 5341                         subq    #1,d1
 8091 00.00009060 610004AA                     bsr     pokewd
 8092 00.00009064 323A00A0                     move    arrmul2(pc),d1
 8093 00.00009068 8242                         or      d2,d1
 8094 00.0000906A 3602                         move    d2,d3
 8095 00.0000906C 5343                         subq    #1,d3
 8096 00.0000906E E14B                         lsl     #8,d3
 8097 00.00009070 E34B                         lsl     #1,d3
 8098 00.00009072 8243                         or      d3,d1
 8099 00.00009074 61000496                     bsr     pokewd
 8100 00.00009078 323A008E                     move    arrmul3(pc),d1
 8101 00.0000907C 3602                         move    d2,d3
 8102 00.0000907E E14B                         lsl     #8,d3
 8103 00.00009080 E34B                         lsl     #1,d3
 8104 00.00009082 8243                         or      d3,d1
 8105 00.00009084 6100043A                     bsr     pokewda5s
 8106 00.00009088 322F0004                     move    4+0(a7),d1
 8107 00.0000908C 5441                         addq    #2,d1
 8108 00.0000908E 6100047C                     bsr     pokewd
 8109 00.00009092                              ;
 8110 00.00009092 323A0078                     move    arrmul4(pc),d1
 8111 00.00009096 3602                         move    d2,d3
 8112 00.00009098 5343                         subq    #1,d3
 8113 00.0000909A E14B                         lsl     #8,d3
 8114 00.0000909C E34B                         lsl     #1,d3
 8115 00.0000909E 8243                         or      d3,d1
 8116 00.000090A0 6100041E                     bsr     pokewda5s
 8117 00.000090A4 322F0004                     move    4+0(a7),d1
 8118 00.000090A8 61000462                     bsr     pokewd
 8119 00.000090AC                              ;
 8120 00.000090AC 323A0062                     move    arrmul5(pc),d1
 8121 00.000090B0 8242                         or      d2,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 196
blitz2.s


 8122 00.000090B2 5341                         subq    #1,d1
 8123 00.000090B4 61000456                     bsr     pokewd
 8124 00.000090B8 323A0058                     move    arrmul6(pc),d1
 8125 00.000090BC 8242                         or      d2,d1
 8126 00.000090BE 5341                         subq    #1,d1
 8127 00.000090C0 6100044A                     bsr     pokewd
 8128 00.000090C4 323A004E                     move    arrmul7(pc),d1
 8129 00.000090C8 8242                         or      d2,d1
 8130 00.000090CA 5341                         subq    #1,d1
 8131 00.000090CC 3602                         move    d2,d3
 8132 00.000090CE E14B                         lsl     #8,d3
 8133 00.000090D0 E34B                         lsl     #1,d3
 8134 00.000090D2 8243                         or      d3,d1
 8135 00.000090D4 61000436                     bsr     pokewd
 8136 00.000090D8 323A003C                     move    arrmul8(pc),d1
 8137 00.000090DC 3602                         move    d2,d3
 8138 00.000090DE 5343                         subq    #1,d3
 8139 00.000090E0 E14B                         lsl     #8,d3
 8140 00.000090E2 E34B                         lsl     #1,d3
 8141 00.000090E4 8243                         or      d3,d1
 8142 00.000090E6 61000424                     bsr     pokewd
 8143 00.000090EA                              ;
 8144 00.000090EA 323900002B06                 move    regat,d1
 8145 00.000090F0 5341                         subq    #1,d1
 8146 00.000090F2 E149                         lsl     #8,d1
 8147 00.000090F4 E349                         lsl     #1,d1
 8148 00.000090F6 0041D080                     or      #$d080,d1
 8149 00.000090FA 827900002B06                 or      regat,d1
 8150 00.00009100 6000040A                     bra     pokewd
 8151 00.00009104                      
 8152 00.00009104                              ;code for doing long array calculations.
 8153 00.00009104                              ;d1.w=this subscript, d0.l=array offset
 8154 00.00009104                              ;
 8155 00.00009104                              ;do a x(a5).l * d1 + d0.l
 8156 00.00009104                              ;
 8157 00.00009104 2F00                 arrmul1 move.l  d0,-(a7)        ;move.l d0,-(a7)
 8158 00.00009106 3000                 arrmul2 move    d0,d0   ;move   d1,d0
 8159 00.00009108 C0ED0000             arrmul3 mulu    0(a5),d0        ;mulu   x+2(a5),d1      ;lo*lo
 8160 00.0000910C C0ED0000             arrmul4 mulu    0(a5),d0        ;mulu   x(a5),d0        ;hi*lo
 8161 00.00009110 4840                 arrmul5 swap    d0      ;swap   d0
 8162 00.00009112 4240                 arrmul6 clr     d0      ;clr    d0
 8163 00.00009114 D080                 arrmul7 add.l   d0,d0   ;add.l  d0,d1
 8164 00.00009116 201F                 arrmul8 move.l  (a7)+,d0        ;move.l (a7)+,d0
 8165 00.00009118                      
 8166 00.00009118 246D0000             listcode1       move.l  0(a5),a2        ;pointer to start of array data
 8167 00.0000911C 246AFFE0             listcode2       move.l  -32(a2),a2      ;pointer to current
 8168 00.00009120 504A                 listarfix       addq    #8,a2
 8169 00.00009122                      
 8170 00.00009122                      calcvar ;used to optimize this...no more!
 8171 00.00009122                              ;
 8172 00.00009122                      calcvar2        ;use a3 = var, a2 = type, flagmask = flags.
 8173 00.00009122                              ;
 8174 00.00009122                              ;if bit 15 of d2 then code has been generated for
 8175 00.00009122                              ;address of thing in a2. else d3=offset from a5
 8176 00.00009122                              ;for simple variable.
 8177 00.00009122                              ;
 8178 00.00009122                              ;d2 & ff=type. 0=struct address
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 197
blitz2.s


 8179 00.00009122                              ;
 8180 00.00009122                              ;bit 14 of d2=1 if result is a pointer
 8181 00.00009122                              ;
 8182 00.00009122 42B90000E9E4                 clr.l   lastoffset
 8183 00.00009128 082B00010007                 btst    #1,7(a3)
 8184 00.0000912E 670001AE                     beq     .notarr
 8185 00.00009132 32390000EC5C                 move    added,d1
 8186 00.00009138 6600F380                     bne     noarrerr
 8187 00.0000913C                              ;
 8188 00.0000913C 6100EAD0                     bsr     getchar3
 8189 00.00009140 B07C0029                     cmp     #')',d0
 8190 00.00009144 66000048                     bne     .notalist
 8191 00.00009148                              ;
 8192 00.00009148 082B00000006                 btst    #0,6(a3)
 8193 00.0000914E 6700ED4A                     beq     nolisterr
 8194 00.00009152 33EB00040000911A             move    4(a3),listcode1+2
 8195 00.0000915A 223AFFBC                     move.l  listcode1(pc),d1
 8196 00.0000915E 61000396                     bsr     pokela5s
 8197 00.00009162 223AFFB8                     move.l  listcode2(pc),d1
 8198 00.00009166 6100039C                     bsr     pokel
 8199 00.0000916A 4A390000400A                 tst.b   debugga
 8200 00.00009170 6700000E                     beq     .nolrerr
 8201 00.00009174                              ;
 8202 00.00009174                              ;a2=0 error check
 8203 00.00009174                              ;
 8204 00.00009174 2F0A                         move.l  a2,-(a7)
 8205 00.00009176 323CC315                     move    #currentchk,d1
 8206 00.0000917A 6100292C                     bsr     tokejsr
 8207 00.0000917E 245F                         move.l  (a7)+,a2
 8208 00.00009180                              ;
 8209 00.00009180 323AFF9E             .nolrerr        move    listarfix(pc),d1        ;addq #8,a2
 8210 00.00009184                                                      ;skip node.
 8211 00.00009184 61000386                     bsr     pokewd
 8212 00.00009188 60000124                     bra     .normalar
 8213 00.0000918C                              ;
 8214 00.0000918C 0000                 .listoff        dc      0
 8215 00.0000918E                              ;
 8216 00.0000918E 42790000918C         .notalist       clr     .listoff
 8217 00.00009194 082B00000006                 btst    #0,6(a3)
 8218 00.0000919A 6700000A                     beq     .knob
 8219 00.0000919E 33FC00080000918C             move    #8,.listoff     ;adjust size of one element if list.
 8220 00.000091A6 48E70030             .knob   movem.l a2-a3,-(a7)
 8221 00.000091AA 3F390000EC02                 move    varmode,-(a7)
 8222 00.000091B0 3F2B0008                     move    8(a3),-(a7)     ;number of dims
 8223 00.000091B4 3F2B0004                     move    4(a3),-(a7)     ;varoff
 8224 00.000091B8 2F0A                         move.l  a2,-(a7)
 8225 00.000091BA                              ;
 8226 00.000091BA 3F390000EC5A                 move    flagmask,-(a7)
 8227 00.000091C0 6100EA82                     bsr     bakup
 8228 00.000091C4 6100078C                     bsr     arreval
 8229 00.000091C8 33DF0000EC5A                 move    (a7)+,flagmask
 8230 00.000091CE                              ;
 8231 00.000091CE 33EF00080000EC02             move    8(a7),varmode
 8232 00.000091D6 4A390000400A                 tst.b   debugga
 8233 00.000091DC 67000006                     beq     .noszchk
 8234 00.000091E0 61000740                     bsr     arrszchk
 8235 00.000091E4 245F                 .noszchk        move.l  (a7)+,a2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 198
blitz2.s


 8236 00.000091E6 7204                         moveq   #4,d1
 8237 00.000091E8 083900000000EC5B             btst    #0,flagmask+1   ;pointer?
 8238 00.000091F0 6604                         bne.s   .domul          ;yes, then use 4 byte mul...
 8239 00.000091F2 322A0008                     move    8(a2),d1
 8240 00.000091F6 D27AFF94             .domul  add     .listoff(pc),d1
 8241 00.000091FA 610024E2                     bsr     muld1
 8242 00.000091FE 527900002B06                 addq    #1,regat
 8243 00.00009204                              ;
 8244 00.00009204 5857                 .arloop addq    #4,(a7)
 8245 00.00009206 4A6F0004                     tst     4(a7)
 8246 00.0000920A 67000004                     beq     .isglob
 8247 00.0000920E 5157                         subq    #8,(a7)
 8248 00.00009210 4A390000400A         .isglob tst.b   debugga
 8249 00.00009216 6700002C                     beq     .noer1
 8250 00.0000921A                              ;
 8251 00.0000921A 323900002B06                 move    regat,d1
 8252 00.00009220 5341                         subq    #1,d1
 8253 00.00009222 E149                         lsl     #8,d1
 8254 00.00009224 E349                         lsl     #1,d1
 8255 00.00009226 827AFE1C                     or      zarrchk(pc),d1
 8256 00.0000922A 61000294                     bsr     pokewda5s       ;cmp.l x(a5),D regat
 8257 00.0000922E 3217                         move    (a7),d1
 8258 00.00009230 610002DA                     bsr     pokewd
 8259 00.00009234 223AFE12                     move.l  arrchk2(pc),d1
 8260 00.00009238 610002CA                     bsr     pokel
 8261 00.0000923C 323CC309                     move    #arrerr,d1
 8262 00.00009240 61002866                     bsr     tokejsr
 8263 00.00009244                              ;
 8264 00.00009244 536F0002             .noer1  subq    #1,2(a7)
 8265 00.00009248 6700001E                     beq     .ardone
 8266 00.0000924C                              ;
 8267 00.0000924C B07C002C                     cmp     #',',d0
 8268 00.00009250 6600F190                     bne     syntaxerr
 8269 00.00009254 610006BE                     bsr     arrevalchk
 8270 00.00009258 33EF00040000EC02             move    4(a7),varmode
 8271 00.00009260 6100FDF0                     bsr     makeamul
 8272 00.00009264 6000FF9E                     bra     .arloop
 8273 00.00009268                              ;
 8274 00.00009268 B07C0029             .ardone cmp     #')',d0
 8275 00.0000926C 6600F174                     bne     syntaxerr
 8276 00.00009270 537900002B06                 subq    #1,regat
 8277 00.00009276 5C4F                         addq    #6,a7
 8278 00.00009278 4CDF0C00                     movem.l (a7)+,a2-a3
 8279 00.0000927C 33EB000400002AE4             move    4(a3),movea5a0+2
 8280 00.00009284 223900002AE2                 move.l  movea5a0,d1
 8281 00.0000928A 6100026A                     bsr     pokela5s
 8282 00.0000928E 323900002B06                 move    regat,d1
 8283 00.00009294 0041D5C0                     or      #$d5c0,d1       ;add.l Dr,a2
 8284 00.00009298 61000272                     bsr     pokewd
 8285 00.0000929C 082B00000006                 btst    #0,6(a3)
 8286 00.000092A2 6700000A                     beq     .normalar
 8287 00.000092A6                              ;
 8288 00.000092A6                              ;addq #8,a2 to skip node.
 8289 00.000092A6                              ;
 8290 00.000092A6 323AFE78                     move    listarfix(pc),d1
 8291 00.000092AA 61000260                     bsr     pokewd
 8292 00.000092AE                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 199
blitz2.s


 8293 00.000092AE 6100E95E             .normalar       bsr     getchar3
 8294 00.000092B2                              ;
 8295 00.000092B2                              ;this shit added lately - after the major fucking crash!
 8296 00.000092B2                              ;
 8297 00.000092B2 082B00000007                 btst    #0,7(a3)
 8298 00.000092B8 67000012                     beq     .noppnt
 8299 00.000092BC                              ;
 8300 00.000092BC B07C005C                     cmp     #'\',d0
 8301 00.000092C0 66000012                     bne     .pmskip
 8302 00.000092C4 323A0016                     move    .pfix(pc),d1
 8303 00.000092C8 61000242                     bsr     pokewd
 8304 00.000092CC                              ;
 8305 00.000092CC 343C8000             .noppnt move    #$8000,d2
 8306 00.000092D0 6000004E                     bra     .loopm1
 8307 00.000092D4                              ;
 8308 00.000092D4 343CC000             .pmskip move    #$c000,d2
 8309 00.000092D8 60000046                     bra     .loopm1
 8310 00.000092DC                              ;
 8311 00.000092DC 2452                 .pfix   move.l  (a2),a2
 8312 00.000092DE                              ;
 8313 00.000092DE B07C0028             .notarr cmp     #'(',d0
 8314 00.000092E2 6700F1D6                     beq     noarrerr
 8315 00.000092E6 0CAA000001000004             cmp.l   #256,4(a2)
 8316 00.000092EE 650001AA                     bcs     .simpvar
 8317 00.000092F2 082B00000007                 btst    #0,7(a3)
 8318 00.000092F8 67000010                     beq     .notap
 8319 00.000092FC                              ;
 8320 00.000092FC                              ;it's a pointer - is it a simple one?
 8321 00.000092FC                              ;
 8322 00.000092FC B07C005C                     cmp     #'\',d0
 8323 00.00009300 67000008                     beq     .notap
 8324 00.00009304 7400                         moveq   #0,d2
 8325 00.00009306 60000196                     bra     .simpvar2
 8326 00.0000930A                              ;
 8327 00.0000930A 343C8000             .notap  move    #$8000,d2
 8328 00.0000930E 33EB000400002AE4             move    4(a3),movea5a0+2
 8329 00.00009316 223900002AE2                 move.l  movea5a0,d1
 8330 00.0000931C 610001D8                     bsr     pokela5s        ;move.l x(a5),a2
 8331 00.00009320 7600                 .loopm1 moveq   #0,d3
 8332 00.00009322 B07C005C             .loop0  cmp     #'\',d0
 8333 00.00009326 6600015E                     bne     .done
 8334 00.0000932A 0CAA000001000004             cmp.l   #256,4(a2)      ;?
 8335 00.00009332 6500F170                     bcs     rongtypeerr     ;?
 8336 00.00009336 3F02                         move    d2,-(a7)
 8337 00.00009338 6100F8B2                     bsr     makename
 8338 00.0000933C 6700F0A4                     beq     syntaxerr
 8339 00.00009340 584A                         addq    #4,a2
 8340 00.00009342 6100F998                     bsr     findvar
 8341 00.00009346 6600F18A                     bne     noofferr
 8342 00.0000934A 341F                         move    (a7)+,d2
 8343 00.0000934C                              ;
 8344 00.0000934C 264A                         move.l  a2,a3   ;pointer to offset
 8345 00.0000934E 246B000A                     move.l  10(a3),a2       ;pointer to type
 8346 00.00009352 D66B0004                     add     4(a3),d3
 8347 00.00009356 23CB0000E9E4                 move.l  a3,lastoffset
 8348 00.0000935C                              ;
 8349 00.0000935C B07C005B                     cmp     #'[',d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 200
blitz2.s


 8350 00.00009360 660000C0                     bne     .realdone
 8351 00.00009364 082B00010007                 btst    #1,7(a3)
 8352 00.0000936A 6700F138                     beq     rongtypeerr
 8353 00.0000936E 6100FC94                     bsr     addd0a0
 8354 00.00009372                              ;
 8355 00.00009372 48E70030                     movem.l a2-a3,-(a7)
 8356 00.00009376 3F390000EC02                 move    varmode,-(a7)
 8357 00.0000937C 2F390000E9E4                 move.l  lastoffset,-(a7)
 8358 00.00009382 323900002A94                 move    pusha2,d1
 8359 00.00009388 61000182                     bsr     pokewd
 8360 00.0000938C                              ;
 8361 00.0000938C 7402                         moveq   #2,d2
 8362 00.0000938E 610005FC                     bsr     eval
 8363 00.00009392 B07C005D                     cmp     #']',d0
 8364 00.00009396 6600F04A                     bne     syntaxerr
 8365 00.0000939A                              ;
 8366 00.0000939A 323900002A98                 move    pulla2,d1
 8367 00.000093A0 6100016A                     bsr     pokewd
 8368 00.000093A4 23DF0000E9E4                 move.l  (a7)+,lastoffset
 8369 00.000093AA 33DF0000EC02                 move    (a7)+,varmode
 8370 00.000093B0 4CDF0C00                     movem.l (a7)+,a2-a3
 8371 00.000093B4                              ;
 8372 00.000093B4                              ;[] ***** error checking here! *****
 8373 00.000093B4                              ;
 8374 00.000093B4                              ;8(a3) = how many we can handle. special case for 0!
 8375 00.000093B4                              ;
 8376 00.000093B4 4A790000400A                 tst     debugga
 8377 00.000093BA 6738                         beq.s   .nobchk
 8378 00.000093BC 322B0008                     move    8(a3),d1
 8379 00.000093C0 6732                         beq.s   .nobchk ;no [0] checks!
 8380 00.000093C2                              ;
 8381 00.000093C2                              ;ok, check regat<8(a3)
 8382 00.000093C2                              ;
 8383 00.000093C2 33C1000094B8                 move    d1,brchkcode+2
 8384 00.000093C8 323900002B06                 move    regat,d1
 8385 00.000093CE E149                         lsl     #8,d1
 8386 00.000093D0 E349                         lsl     #1,d1
 8387 00.000093D2 827A00DE                     or      brchkcode0(pc),d1
 8388 00.000093D6 33C1000094B6                 move    d1,brchkcode
 8389 00.000093DC 223A00D8                     move.l  brchkcode(pc),d1
 8390 00.000093E0 61000122                     bsr     pokel
 8391 00.000093E4 223A00D4                     move.l  brchkcode+4(pc),d1
 8392 00.000093E8 6100011A                     bsr     pokel
 8393 00.000093EC 323A00D0                     move    brchkcode+8(pc),d1
 8394 00.000093F0 6100011A                     bsr     pokewd
 8395 00.000093F4                      .nobchk ;
 8396 00.000093F4 7204                         moveq   #4,d1
 8397 00.000093F6 082B00000007                 btst    #0,7(a3)
 8398 00.000093FC 66000006                     bne     .dothemul
 8399 00.00009400 322A0008                     move    8(a2),d1
 8400 00.00009404 610022D8             .dothemul       bsr     muld1
 8401 00.00009408 323900002AF0                 move    addrega2,d1
 8402 00.0000940E 827900002B06                 or      regat,d1
 8403 00.00009414 610000F6                     bsr     pokewd
 8404 00.00009418 6100E7F4                     bsr     getchar3
 8405 00.0000941C 7600                         moveq   #0,d3
 8406 00.0000941E 343C8000                     move    #$8000,d2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 201
blitz2.s


 8407 00.00009422                              ;
 8408 00.00009422 082B00000007         .realdone       btst    #0,7(a3)
 8409 00.00009428 66000006                     bne     .pointer
 8410 00.0000942C 6000FEF4                     bra     .loop0
 8411 00.00009430                              ;
 8412 00.00009430 B07C005C             .pointer        cmp     #'\',d0
 8413 00.00009434 6600003E                     bne     .done3
 8414 00.00009438 4A43                         tst     d3
 8415 00.0000943A 66000010                     bne     .pskip
 8416 00.0000943E 323900002AD8                 move    movea0,d1
 8417 00.00009444 610000C6                     bsr     pokewd
 8418 00.00009448 60000012                     bra     .pmore
 8419 00.0000944C 33C300002AE8         .pskip  move    d3,movea0a0+2
 8420 00.00009452 223900002AE6                 move.l  movea0a0,d1
 8421 00.00009458 610000AA                     bsr     pokel
 8422 00.0000945C 082B00020007         .pmore  btst    #2,7(a3)
 8423 00.00009462 6700FEBC                     beq     .loopm1
 8424 00.00009466 223900002ADA                 move.l  adda0a0,d1
 8425 00.0000946C 61000096                     bsr     pokel
 8426 00.00009470 6000FEAE                     bra     .loopm1
 8427 00.00009474 08C2000E             .done3  bset    #14,d2
 8428 00.00009478 082B00020007                 btst    #2,7(a3)
 8429 00.0000947E 66000006                     bne     .done
 8430 00.00009482 08C2000D                     bset    #13,d2
 8431 00.00009486 0CAA000001000004     .done   cmp.l   #256,4(a2)
 8432 00.0000948E 64000006                     bcc     .done2
 8433 00.00009492 142A0007                     move.b  7(a2),d2
 8434 00.00009496 6000FB6C             .done2  bra     addd0a0
 8435 00.0000949A                      
 8436 00.0000949A 342A0006             .simpvar        move    6(a2),d2
 8437 00.0000949E 362B0004             .simpvar2       move    4(a3),d3
 8438 00.000094A2 082B00000007                 btst    #0,7(a3)
 8439 00.000094A8 67000006                     beq     .nopoint
 8440 00.000094AC 08C2000E                     bset    #14,d2
 8441 00.000094B0 4E75                 .nopoint        rts
 8442 00.000094B2                      
 8443 00.000094B2 B07C0000             brchkcode0      cmp     #0,d0
 8444 00.000094B6                              ;
 8445 00.000094B6 B07C0000             brchkcode       cmp     #0,d0
 8446 00.000094BA 6504                         bcs.s   .ok
 8447 00.000094BC 7002                         moveq   #2,d0
 8448 00.000094BE 4E40                         trap    #0
 8449 00.000094C0                      .ok     ;
 8450 00.000094C0                      
 8451 00.000094C0                      ;-----------Poking to Object code stuff-------------------;
 8452 00.000094C0                      
 8453 00.000094C0 4A790000EC02         pokewda5s       tst     varmode
 8454 00.000094C6 67000044                     beq     pokewd
 8455 00.000094CA 08810000                     bclr    #0,d1
 8456 00.000094CE 6000003C                     bra     pokewd
 8457 00.000094D2                      
 8458 00.000094D2 4A790000EC02         pokewda5d       tst     varmode
 8459 00.000094D8 67000032                     beq     pokewd
 8460 00.000094DC 08810009                     bclr    #9,d1
 8461 00.000094E0 6000002A                     bra     pokewd
 8462 00.000094E4                      
 8463 00.000094E4 4A790000EC0C         pokela5d        tst     procmode
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 202
blitz2.s


 8464 00.000094EA 67000018                     beq     pokel
 8465 00.000094EE 08810019                     bclr    #25,d1
 8466 00.000094F2 60000010                     bra     pokel
 8467 00.000094F6                      
 8468 00.000094F6 4A790000EC02         pokela5s        tst     varmode
 8469 00.000094FC 67000006                     beq     pokel
 8470 00.00009500 08810010                     bclr    #16,d1
 8471 00.00009504                              ;
 8472 00.00009504 4841                 pokel   swap    d1
 8473 00.00009506 61000004                     bsr     pokewd
 8474 00.0000950A 4841                 pokelc  swap    d1
 8475 00.0000950C                              ;
 8476 00.0000950C                      pokewd  ;poke d1.w into pc - not an opcode
 8477 00.0000950C                              ;
 8478 00.0000950C 52B90000E8F6                 addq.l  #1,pc
 8479 00.00009512 08B900000000E8F9             bclr    #0,pc+3
 8480 00.0000951A 28790000E8F6                 move.l  pc,a4
 8481 00.00009520 B9F90000E8FA                 cmp.l   libat,a4
 8482 00.00009526 64000026                     bcc     .over
 8483 00.0000952A 38C1                         move    d1,(a4)+        
 8484 00.0000952C 23CC0000E8F6         .ms     move.l  a4,pc
 8485 00.00009532 B9FA006A                     cmp.l   bigpc(pc),a4
 8486 00.00009536 62000004                     bhi     .nbp    
 8487 00.0000953A 4E75                         rts
 8488 00.0000953C 4A790000E32E         .nbp    tst     cfetchmode
 8489 00.00009542 66000008                     bne     .nbp2
 8490 00.00009546 23CC0000959E                 move.l  a4,bigpc
 8491 00.0000954C 4E75                 .nbp2   rts
 8492 00.0000954E 33FCFFFF0000E858     .over   move    #-1,nomemleft
 8493 00.00009556 544C                         addq    #2,a4
 8494 00.00009558 6000FFD2                     bra     .ms
 8495 00.0000955C                      
 8496 00.0000955C 28790000E8F6         pokebyte        move.l  pc,a4
 8497 00.00009562 B9F90000E8FA                 cmp.l   libat,a4
 8498 00.00009568 64000026                     bcc     .over
 8499 00.0000956C 18C1                         move.b  d1,(a4)+
 8500 00.0000956E 23CC0000E8F6         .ms     move.l  a4,pc
 8501 00.00009574 B9FA0028                     cmp.l   bigpc(pc),a4
 8502 00.00009578 62000004                     bhi     .nbp
 8503 00.0000957C 4E75                         rts
 8504 00.0000957E 4A790000E32E         .nbp    tst     cfetchmode
 8505 00.00009584 66000008                     bne     .nbp2
 8506 00.00009588 23CC0000959E                 move.l  a4,bigpc
 8507 00.0000958E 4E75                 .nbp2   rts
 8508 00.00009590 33FCFFFF0000E858     .over   move    #-1,nomemleft
 8509 00.00009598 524C                         addq    #1,a4
 8510 00.0000959A 6000FFD2                     bra     .ms
 8511 00.0000959E                      
 8512 00.0000959E 00000000             bigpc   dc.l    0
 8513 00.000095A2                      
 8514 00.000095A2                      pokecode        ;a0=start of code to poke, a1=end
 8515 00.000095A2                              ;
 8516 00.000095A2 3218                         move    (a0)+,d1
 8517 00.000095A4 6100FF66                     bsr     pokewd
 8518 00.000095A8 B1C9                 .loop   cmp.l   a1,a0
 8519 00.000095AA 6400000C                     bcc     .done
 8520 00.000095AE 3218                         move    (a0)+,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 203
blitz2.s


 8521 00.000095B0 6100FF5A                     bsr     pokewd
 8522 00.000095B4 6000FFF2                     bra     .loop
 8523 00.000095B8 4E75                 .done   rts
 8524 00.000095BA                      
 8525 00.000095BA 3218                 pokecode2       move    (a0)+,d1
 8526 00.000095BC 6100FF4E                     bsr     pokewd
 8527 00.000095C0 B1C9                         cmp.l   a1,a0
 8528 00.000095C2 6500FFF6                     bcs     pokecode2
 8529 00.000095C6 4E75                         rts
 8530 00.000095C8                      
 8531 00.000095C8                      ;-----------End of poking to Object code------------------;
 8532 00.000095C8                      
 8533 00.000095C8                      bytetoword      ;
 8534 00.000095C8 4E75                         rts
 8535 00.000095CA                              ;
 8536 00.000095CA                              ;Below should ALWAYS be done when something is fetched
 8537 00.000095CA                              ;
 8538 00.000095CA                      ;       move    #$4880,d1
 8539 00.000095CA                      ;       or      regat(pc),d1
 8540 00.000095CA                      ;       bra     pokewd
 8541 00.000095CA                      bytetolong      ;
 8542 00.000095CA 6100FFFC                     bsr     bytetoword
 8543 00.000095CE 323C48C0             wordtolong      move    #$48c0,d1
 8544 00.000095D2 827900002B06                 or      regat,d1
 8545 00.000095D8 6000FF32                     bra     pokewd
 8546 00.000095DC                      bytetoquick     ;
 8547 00.000095DC 6100FFEA                     bsr     bytetoword
 8548 00.000095E0 323C4840             wordtoquick     move    #$4840,d1
 8549 00.000095E4 827900002B06                 or      regat,d1
 8550 00.000095EA 6100FF20                     bsr     pokewd
 8551 00.000095EE 323C4240                     move    #$4240,d1
 8552 00.000095F2 827900002B06                 or      regat,d1
 8553 00.000095F8 6000FF12                     bra     pokewd
 8554 00.000095FC                      bytetofloat     ;
 8555 00.000095FC 6100FFCC                     bsr     bytetolong
 8556 00.00009600 323CFFDC             bytetof2        move    #-36,d1
 8557 00.00009604 33C100002A5C         fdo2    move    d1,libjsr+2
 8558 00.0000960A 61001734                     bsr     savereg
 8559 00.0000960E 2204                         move.l  d4,d1
 8560 00.00009610 61001726                     bsr     pokemovem
 8561 00.00009614 323CC900                     move    #getffpbase,d1
 8562 00.00009618 6100248E                     bsr     tokejsr
 8563 00.0000961C 61000D34                     bsr     ritetod0
 8564 00.00009620 223900002A5A                 move.l  libjsr,d1
 8565 00.00009626 6100FEDC                     bsr     pokel
 8566 00.0000962A 61000D42                     bsr     ritefromd0
 8567 00.0000962E 2205                         move.l  d5,d1
 8568 00.00009630 60001706                     bra     pokemovem
 8569 00.00009634 4E75                         rts
 8570 00.00009636                      wordtobyte      ;
 8571 00.00009636 323CC317                     move    #wtobover,d1
 8572 00.0000963A                              ;
 8573 00.0000963A                      overchk ;d1=overflow check routine.
 8574 00.0000963A 4A390000400A                 tst.b   debugga
 8575 00.00009640 67000054                     beq     .skip
 8576 00.00009644 0839000700000733             btst    #7,optreq2ga4+13        ;*** was 7! overflow checking?
 8577 00.0000964C 67000048                     beq     .skip
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 204
blitz2.s


 8578 00.00009650                              ;
 8579 00.00009650 4A790000E32E                 tst     cfetchmode
 8580 00.00009656 6600003E                     bne     .skip
 8581 00.0000965A                              ;       
 8582 00.0000965A 4A7900002B06                 tst     regat
 8583 00.00009660 67000028                     beq     .isok
 8584 00.00009664 3F01                         move    d1,-(a7)
 8585 00.00009666 323A0030                     move    .code1(pc),d1
 8586 00.0000966A 6100FEA0                     bsr     pokewd
 8587 00.0000966E 323900002B06                 move    regat,d1
 8588 00.00009674 827A0026                     or      .code3(pc),d1
 8589 00.00009678 6100FE92                     bsr     pokewd
 8590 00.0000967C 321F                         move    (a7)+,d1
 8591 00.0000967E 6100000A                     bsr     .isok
 8592 00.00009682 323A0016                     move    .code2(pc),d1
 8593 00.00009686 6000FE84                     bra     pokewd
 8594 00.0000968A                              ;
 8595 00.0000968A 48E7FFFE             .isok   movem.l d0-d7/a0-a6,-(a7)
 8596 00.0000968E 61002418                     bsr     tokejsr
 8597 00.00009692 4CDF7FFF                     movem.l (a7)+,d0-d7/a0-a6
 8598 00.00009696                              ;
 8599 00.00009696 4E75                 .skip   rts
 8600 00.00009698 2F00                 .code1  move.l  d0,-(a7)
 8601 00.0000969A 201F                 .code2  move.l  (a7)+,d0
 8602 00.0000969C 2000                 .code3  move.l  d0,d0
 8603 00.0000969E                      
 8604 00.0000969E                      wordtofloat     ;
 8605 00.0000969E 6100FF2E                     bsr     wordtolong
 8606 00.000096A2 6000FF5C                     bra     bytetof2
 8607 00.000096A6                      longtobyte      ;
 8608 00.000096A6 323CC316                     move    #ltobover,d1
 8609 00.000096AA 6000FF8E                     bra     overchk
 8610 00.000096AE                      longtoword      ;
 8611 00.000096AE 323CC318                     move    #ltowover,d1
 8612 00.000096B2 6000FF86                     bra     overchk
 8613 00.000096B6                      longtoquick     ;
 8614 00.000096B6 323CC318                     move    #ltowover,d1
 8615 00.000096BA 6100FF7E                     bsr     overchk
 8616 00.000096BE 6000FF20                     bra     wordtoquick
 8617 00.000096C2                      longtofloat     ;
 8618 00.000096C2 6000FF3C                     bra     bytetof2
 8619 00.000096C6 4E75                         rts
 8620 00.000096C8                      quicktobyte     ;
 8621 00.000096C8 323CC319                     move    #qtobover,d1
 8622 00.000096CC 6100FF6C                     bsr     overchk
 8623 00.000096D0                              ;
 8624 00.000096D0 323C4240             quicktob2       move    #$4240,d1
 8625 00.000096D4 827900002B06                 or      regat,d1
 8626 00.000096DA 6100FE30                     bsr     pokewd
 8627 00.000096DE 323C4840                     move    #$4840,d1
 8628 00.000096E2 827900002B06                 or      regat,d1
 8629 00.000096E8 6000FE22                     bra     pokewd
 8630 00.000096EC                      quicktoword     ;
 8631 00.000096EC 6000FFE2                     bra     quicktob2
 8632 00.000096F0                      quicktolong     ;
 8633 00.000096F0 6100FFDE                     bsr     quicktob2
 8634 00.000096F4 6000FED8                     bra     wordtolong
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 205
blitz2.s


 8635 00.000096F8                      quicktofloat;
 8636 00.000096F8                              ;put my own routine here
 8637 00.000096F8                              ;
 8638 00.000096F8 323CD300                     move    #qutofl,d1
 8639 00.000096FC 3F01                 qtof2   move    d1,-(a7)
 8640 00.000096FE 61001640                     bsr     savereg
 8641 00.00009702 2204                         move.l  d4,d1
 8642 00.00009704 61001632                     bsr     pokemovem
 8643 00.00009708                              ;
 8644 00.00009708 61000C48                     bsr     ritetod0
 8645 00.0000970C 321F                         move    (a7)+,d1
 8646 00.0000970E 61002398                     bsr     tokejsr
 8647 00.00009712                              ;
 8648 00.00009712 61000C5A                     bsr     ritefromd0
 8649 00.00009716 2205                         move.l  d5,d1
 8650 00.00009718 6000161E                     bra     pokemovem
 8651 00.0000971C 4E75                         rts
 8652 00.0000971E                      floattobyte     ;
 8653 00.0000971E 323CC31A                     move    #ftobover,d1
 8654 00.00009722 6100FF16                     bsr     overchk
 8655 00.00009726                              ;
 8656 00.00009726 61000022                     bsr     floattolong2
 8657 00.0000972A 6000FF7A                     bra     longtobyte
 8658 00.0000972E 4E75                         rts
 8659 00.00009730                      floattoword     ;
 8660 00.00009730 323CC31B                     move    #ftowover,d1
 8661 00.00009734 6100FF04                     bsr     overchk
 8662 00.00009738                              ;
 8663 00.00009738 61000010                     bsr     floattolong2
 8664 00.0000973C 6000FF70                     bra     longtoword
 8665 00.00009740 4E75                         rts
 8666 00.00009742                      floattolong     ;
 8667 00.00009742 323CC31C                     move    #ftolover,d1
 8668 00.00009746 6100FEF2                     bsr     overchk
 8669 00.0000974A                      floattolong2
 8670 00.0000974A 323CFFE2                     move    #-30,d1
 8671 00.0000974E 6000FEB4                     bra     fdo2
 8672 00.00009752 4E75                         rts
 8673 00.00009754                      floattoquick;
 8674 00.00009754                              ;do my own routine here for float to quick conversion
 8675 00.00009754                              ;
 8676 00.00009754 323CC31B                     move    #ftowover,d1
 8677 00.00009758 6100FEE0                     bsr     overchk
 8678 00.0000975C                              ;
 8679 00.0000975C 323CD301                     move    #fltoqu,d1
 8680 00.00009760 6000FF9A                     bra     qtof2
 8681 00.00009764                      stringtolong;
 8682 00.00009764 323A9272                     move    stol(pc),d1
 8683 00.00009768 6100FDA2                     bsr     pokewd
 8684 00.0000976C 6000011A                     bra     sbtolong
 8685 00.00009770                      
 8686 00.00009770                      convtypef       ;as below, but regat+1 should be saved!
 8687 00.00009770                              ;
 8688 00.00009770 52790000AD80                 addq    #1,fuckpos
 8689 00.00009776 6100000A                     bsr     convtype
 8690 00.0000977A 53790000AD80                 subq    #1,fuckpos
 8691 00.00009780 4E75                         rts
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 206
blitz2.s


 8692 00.00009782                      
 8693 00.00009782                      convtype        ;convert type d3 to d2
 8694 00.00009782 3203                         move    d3,d1
 8695 00.00009784 5341                         subq    #1,d1
 8696 00.00009786 C2FC0007                     mulu    #7,d1
 8697 00.0000978A D242                         add     d2,d1
 8698 00.0000978C 5341                         subq    #1,d1
 8699 00.0000978E E549                         lsl     #2,d1
 8700 00.00009790 41F90000E376                 lea     convtable,a0
 8701 00.00009796 22301000                     move.l  0(a0,d1),d1
 8702 00.0000979A 67000006                     beq     .skip
 8703 00.0000979E 2041                         move.l  d1,a0
 8704 00.000097A0 4ED0                         jmp     (a0)
 8705 00.000097A2 4E75                 .skip   rts
 8706 00.000097A4                      
 8707 00.000097A4 00000000             usedfrom        dc.l    0
 8708 00.000097A8                      
 8709 00.000097A8                      getvname        ;transfer chars to namebuff. set flagmask according
 8710 00.000097A8                              ;to array/pointer etc status
 8711 00.000097A8                              ;
 8712 00.000097A8 B07C005C                     cmp     #'\',d0
 8713 00.000097AC 66000014                     bne     .skip0
 8714 00.000097B0 534D                         subq    #1,a5
 8715 00.000097B2 23CD000097A4                 move.l  a5,usedfrom
 8716 00.000097B8 4BF900004A20                 lea     usedpath,a5
 8717 00.000097BE 6100E44E                     bsr     getchar3
 8718 00.000097C2                              ;
 8719 00.000097C2 42790000EC5A         .skip0  clr     flagmask
 8720 00.000097C8 B07C002A                     cmp     #'*',d0
 8721 00.000097CC 6600006C                     bne     .skip
 8722 00.000097D0 33FC00010000EC5A             move    #1,flagmask
 8723 00.000097D8 6100F412             .more2  bsr     makename
 8724 00.000097DC 6700EC04             .more   beq     syntaxerr
 8725 00.000097E0 B07C0028                     cmp     #'(',d0
 8726 00.000097E4 6700004A                     beq     .setmask
 8727 00.000097E8 B07C002E                     cmp     #'.',d0
 8728 00.000097EC 6700001E                     beq     .morem
 8729 00.000097F0 B07C0024                     cmp     #'$',d0
 8730 00.000097F4 66000042                     bne     .done
 8731 00.000097F8 007900080000EC5A             or      #8,flagmask
 8732 00.00009800 6100E454                     bsr     storeloc
 8733 00.00009804 6100E408                     bsr     getchar3
 8734 00.00009808 60000018                     bra     .morez
 8735 00.0000980C                              ;
 8736 00.0000980C 6100E448             .morem  bsr     storeloc
 8737 00.00009810 3F02                         move    d2,-(a7)
 8738 00.00009812 43F90000ECE8                 lea     namebuff2,a1
 8739 00.00009818 6100F3D8                     bsr     makename3
 8740 00.0000981C 6700EBC4                     beq     syntaxerr
 8741 00.00009820 341F                         move    (a7)+,d2
 8742 00.00009822 3200                 .morez  move    d0,d1
 8743 00.00009824 6100E43E                     bsr     resloc
 8744 00.00009828 B27C0028                     cmp     #'(',d1
 8745 00.0000982C 6600000A                     bne     .done
 8746 00.00009830 007900020000EC5A     .setmask        or      #2,flagmask
 8747 00.00009838 4E75                 .done   rts
 8748 00.0000983A B07C0040             .skip   cmp     #'@',d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 207
blitz2.s


 8749 00.0000983E 6600000E                     bne     .skip2
 8750 00.00009842 33FC00050000EC5A             move    #5,flagmask
 8751 00.0000984A 6000FF8C                     bra     .more2
 8752 00.0000984E 6100F398             .skip2  bsr     makename2
 8753 00.00009852 6000FF88                     bra     .more
 8754 00.00009856                      
 8755 00.00009856 323CFED3             dopusha3        move    #65235,d1
 8756 00.0000985A 6100D1E6                     bsr     uselib
 8757 00.0000985E 41F900002AA0                 lea     pusha3,a0
 8758 00.00009864 43F900002AA8                 lea     pusha3f,a1
 8759 00.0000986A 6000FD36                     bra     pokecode
 8760 00.0000986E                      
 8761 00.0000986E 323CFED3             dopulla3        move    #65235,d1
 8762 00.00009872 6100D1CE                     bsr     uselib
 8763 00.00009876 41F900002AA8                 lea     pulla3,a0
 8764 00.0000987C 43F900002AAC                 lea     pulla3f,a1
 8765 00.00009882 6000FD1E                     bra     pokecode
 8766 00.00009886                      
 8767 00.00009886 421B                 ceos    clr.b   (a3)+   ;*!
 8768 00.00009888                      
 8769 00.00009888                      sbtolong        ;make sbase into a long
 8770 00.00009888                              ;
 8771 00.00009888 323AFFFC                     move    ceos(pc),d1
 8772 00.0000988C 6100FC7E                     bsr     pokewd  ;clr.b (a3)
 8773 00.00009890                              ;
 8774 00.00009890 323900002B06                 move    regat,d1
 8775 00.00009896 E149                         lsl     #8,d1
 8776 00.00009898 E349                         lsl     #1,d1
 8777 00.0000989A 0C7900020000E9AE             cmp     #2,sbgot
 8778 00.000098A2 65000044                     bcs     .skip2
 8779 00.000098A6 36390000E9B8                 move    stackuse,d3
 8780 00.000098AC 967900009ACC                 sub     thisstuse,d3
 8781 00.000098B2 B67C0006                     cmp     #6,d3
 8782 00.000098B6 6600001C                     bne     .lenonly
 8783 00.000098BA 8279000029EE                 or      movestst2,d1
 8784 00.000098C0 6100FC4A                     bsr     pokewd
 8785 00.000098C4 41F9000029F0                 lea     movestst2+2,a0
 8786 00.000098CA 43F9000029FA                 lea     movestst2f,a1
 8787 00.000098D0 6000FCE8                     bra     pokecode2
 8788 00.000098D4                              ;
 8789 00.000098D4 8279000029FA         .lenonly        or      movea7dn,d1
 8790 00.000098DA 6100FC30                     bsr     pokewd
 8791 00.000098DE 2239000029FC                 move.l  movea7dn+2,d1
 8792 00.000098E4 6000FC1E                     bra     pokel
 8793 00.000098E8                              ;
 8794 00.000098E8 827900002A02         .skip2  or      movestdn,d1
 8795 00.000098EE 6100FC1C                     bsr     pokewd
 8796 00.000098F2 323CFED3                     move    #65235,d1
 8797 00.000098F6 6100D14A                     bsr     uselib
 8798 00.000098FA 3229000A                     move    10(a1),d1
 8799 00.000098FE 6000FC0C                     bra     pokewd
 8800 00.00009902                      
 8801 00.00009902 0000                 unknown dc      0
 8802 00.00009904                      
 8803 00.00009904 0C8000010000         somecode        cmpi.l  #65536,d0
 8804 00.0000990A 65000008             somecode2       bcs     codeisok
 8805 00.0000990E 4EB900000000                 jsr     0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 208
blitz2.s


 8806 00.00009914                              ;
 8807 00.00009914                      codeisok
 8808 00.00009914                      
 8809 00.00009914 4A390000400A         arrevalchk      tst.b   debugga
 8810 00.0000991A 6700002C                     beq     sharreval
 8811 00.0000991E 61000032                     bsr     arreval
 8812 00.00009922 323AFFE0             arrszchk        move    somecode(pc),d1
 8813 00.00009926 827900002B06                 or      regat,d1
 8814 00.0000992C 6100FBDE                     bsr     pokewd
 8815 00.00009930 7201                         moveq   #1,d1
 8816 00.00009932 4841                         swap    d1
 8817 00.00009934 6100FBCE                     bsr     pokel
 8818 00.00009938 223AFFD0                     move.l  somecode2(pc),d1
 8819 00.0000993C 6100FBC6                     bsr     pokel
 8820 00.00009940 323CC309                     move    #arrerr,d1
 8821 00.00009944 60002162                     bra     tokejsr
 8822 00.00009948                      
 8823 00.00009948 7402                 sharreval       moveq   #2,d2
 8824 00.0000994A 7200                         moveq   #0,d1
 8825 00.0000994C 7600                         moveq   #0,d3
 8826 00.0000994E 60000056                     bra     maineval2
 8827 00.00009952                      
 8828 00.00009952 7403                 arreval moveq   #3,d2   ;getlong
 8829 00.00009954 7200                         moveq   #0,d1   ;no push
 8830 00.00009956 7600                         moveq   #0,d3   ;and convert
 8831 00.00009958 6000004C                     bra     maineval2       ;2!*
 8832 00.0000995C                      
 8833 00.0000995C 6100E2E6             bakpevalu       bsr     bakup
 8834 00.00009960                              ;
 8835 00.00009960 72FF                 pevalu  moveq   #-1,d1
 8836 00.00009962 76FF                         moveq   #-1,d3
 8837 00.00009964 60000006                     bra     peval
 8838 00.00009968                      
 8839 00.00009968 6100E2DA             bakpeval        bsr     bakup
 8840 00.0000996C                              ;
 8841 00.0000996C 72FF                 peval   moveq   #-1,d1
 8842 00.0000996E 7600                         moveq   #0,d3
 8843 00.00009970 6000001E                     bra     maineval
 8844 00.00009974                      
 8845 00.00009974 6100E2CE             bakevalu        bsr     bakup
 8846 00.00009978                              ;
 8847 00.00009978 7200                 evalu   moveq   #0,d1
 8848 00.0000997A 76FF                         moveq   #-1,d3
 8849 00.0000997C 60000012                     bra     maineval
 8850 00.00009980                      
 8851 00.00009980 7201                 evalu2  moveq   #1,d1
 8852 00.00009982 76FF                         moveq   #-1,d3
 8853 00.00009984 6000000A                     bra     maineval
 8854 00.00009988                      
 8855 00.00009988 6100E2BA             bakeval bsr     bakup
 8856 00.0000998C                              ;
 8857 00.0000998C 7200                 eval:   moveq   #0,d1   ;no push
 8858 00.0000998E 7600                         moveq   #0,d3
 8859 00.00009990                              ;
 8860 00.00009990                      maineval        ;Big Evaluation routine.....
 8861 00.00009990                              ;
 8862 00.00009990                              ;d2 = type to collect - 0 if unknown
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 209
blitz2.s


 8863 00.00009990                              ;
 8864 00.00009990                              ;d3 = 0 if conv to original type
 8865 00.00009990                              ;
 8866 00.00009990                              ;d1 = push result flag, 0 = no push, < 0 = push result
 8867 00.00009990                              ;     > 0 = push type when known
 8868 00.00009990                              ;
 8869 00.00009990                              ;result will be pushed anyway if using reg d6+
 8870 00.00009990                              ;
 8871 00.00009990                              ;if getting a string, then strings len is on stack
 8872 00.00009990                              ;(a long), and a3 points at arse end of string
 8873 00.00009990                              ;while D(regat) points to start of string
 8874 00.00009990                              ;
 8875 00.00009990 0C79000600002B06             cmp     #6,regat
 8876 00.00009998 6500000C                     bcs     maineval2
 8877 00.0000999C 72FF                         moveq   #-1,d1
 8878 00.0000999E 33FC000600002B06             move    #6,regat
 8879 00.000099A6                      maineval2       ;
 8880 00.000099A6                              ;d2=type to get, d1=push flag (should I push result?)
 8881 00.000099A6                              ;
 8882 00.000099A6 3F3900009ACC                 move    thisstuse,-(a7)
 8883 00.000099AC 33F90000E9B800009ACC         move    stackuse,thisstuse
 8884 00.000099B6                              ;
 8885 00.000099B6 3F390000E9AC                 move    pushflag,-(a7)
 8886 00.000099BC 33C10000E9AC                 move    d1,pushflag
 8887 00.000099C2 3F390000E9AE                 move    sbgot,-(a7)
 8888 00.000099C8 42790000E9AE                 clr     sbgot   ;not pushed yet
 8889 00.000099CE 3F3AFF32                     move    unknown(pc),-(a7)
 8890 00.000099D2 33C300009902                 move    d3,unknown
 8891 00.000099D8                              ;
 8892 00.000099D8 3F02                         move    d2,-(a7)
 8893 00.000099DA 610000F6                     bsr     eval3
 8894 00.000099DE 361F                         move    (a7)+,d3        ;type asked for
 8895 00.000099E0 67000010                     beq     .noconv
 8896 00.000099E4 323AFF1C                     move    unknown(pc),d1
 8897 00.000099E8 66000008                     bne     .noconv
 8898 00.000099EC C543                         exg     d2,d3
 8899 00.000099EE 6100FD92                     bsr     convtype
 8900 00.000099F2                      .noconv ;
 8901 00.000099F2 33DF00009902                 move    (a7)+,unknown
 8902 00.000099F8 32390000E9AC                 move    pushflag,d1
 8903 00.000099FE 6700005A                     beq     .skipme
 8904 00.00009A02 6B000056                     bmi     .skipme
 8905 00.00009A06                              ;
 8906 00.00009A06                              ;push the type got.
 8907 00.00009A06                              ;
 8908 00.00009A06 323A90FE                     move    regat(pc),d1
 8909 00.00009A0A E149                         lsl     #8,d1
 8910 00.00009A0C E349                         lsl     #1,d1
 8911 00.00009A0E B47C0007                     cmp     #7,d2
 8912 00.00009A12 66000010                     bne     .hi1
 8913 00.00009A16 3F01                         move    d1,-(a7)
 8914 00.00009A18 827900002A0A                 or      getstlen,d1
 8915 00.00009A1E 6100FAEC                     bsr     pokewd
 8916 00.00009A22 321F                         move    (a7)+,d1
 8917 00.00009A24                              ;
 8918 00.00009A24 54790000E9B8         .hi1    addq    #2,stackuse
 8919 00.00009A2A 00417000                     or      #$7000,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 210
blitz2.s


 8920 00.00009A2E 06410200                     add     #$0200,d1       ;moveq #x,dREGAT+1
 8921 00.00009A32 8242                         or      d2,d1
 8922 00.00009A34 6100FAD6                     bsr     pokewd
 8923 00.00009A38 323A0096                     move    pushut(pc),d1
 8924 00.00009A3C 827A90C8                     or      regat(pc),d1
 8925 00.00009A40 5241                         addq    #1,d1
 8926 00.00009A42 6100FAC8                     bsr     pokewd
 8927 00.00009A46                              ;
 8928 00.00009A46 B47C0007                     cmp     #7,d2
 8929 00.00009A4A 6600000E                     bne     .skipme
 8930 00.00009A4E 323A8FB8                     move    putstlen(pc),d1
 8931 00.00009A52 827A90B2                     or      regat(pc),d1
 8932 00.00009A56 6100FAB4                     bsr     pokewd
 8933 00.00009A5A                              ;
 8934 00.00009A5A B47C0007             .skipme cmp     #7,d2
 8935 00.00009A5E 66000010                     bne     .notst
 8936 00.00009A62                              ;
 8937 00.00009A62 58790000E9B8                 addq    #4,stackuse     ;a length on da stack.....
 8938 00.00009A68 6100FE1E                     bsr     sbtolong
 8939 00.00009A6C 60000016                     bra     .notst2
 8940 00.00009A70                      .notst  ;
 8941 00.00009A70 0C7900020000E9AE             cmp     #2,sbgot
 8942 00.00009A78 6500000A                     bcs     .notst2
 8943 00.00009A7C 323A0050                     move    ststfix(pc),d1
 8944 00.00009A80 6100FA8A                     bsr     pokewd  
 8945 00.00009A84                              ;
 8946 00.00009A84 33DF0000E9AE         .notst2 move    (a7)+,sbgot
 8947 00.00009A8A                              ;
 8948 00.00009A8A 32390000E9AC                 move    pushflag,d1
 8949 00.00009A90 6A00002C                     bpl     .skip
 8950 00.00009A94 54790000E9B8                 addq    #2,stackuse
 8951 00.00009A9A 3239000029DA                 move    pushd0wd,d1
 8952 00.00009AA0 B47C0003                     cmp     #3,d2
 8953 00.00009AA4 6500000E                     bcs     .ok
 8954 00.00009AA8 54790000E9B8                 addq    #2,stackuse
 8955 00.00009AAE 3239000029DC                 move    pushd0l,d1
 8956 00.00009AB4 827900002B06         .ok     or      regat,d1
 8957 00.00009ABA 6100FA50                     bsr     pokewd
 8958 00.00009ABE 33DF0000E9AC         .skip   move    (a7)+,pushflag
 8959 00.00009AC4 33DF00009ACC                 move    (a7)+,thisstuse
 8960 00.00009ACA 4E75                         rts
 8961 00.00009ACC                      
 8962 00.00009ACC 0000                 thisstuse       dc      0
 8963 00.00009ACE                      
 8964 00.00009ACE 584F                 ststfix addq    #4,a7
 8965 00.00009AD0                      
 8966 00.00009AD0 3F00                 pushut  move    d0,-(a7)
 8967 00.00009AD2                      
 8968 00.00009AD2 6100000E             eval3   bsr     eval4
 8969 00.00009AD6 04B9000000120000A6B0         sub.l   #18,forthsp
 8970 00.00009AE0 4E75                         rts
 8971 00.00009AE2                              
 8972 00.00009AE2                      eval4   ;
 8973 00.00009AE2 7201                         moveq   #1,d1
 8974 00.00009AE4 61000200                     bsr     pushprec
 8975 00.00009AE8                              ;
 8976 00.00009AE8 61000010                     bsr     eval5
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 211
blitz2.s


 8977 00.00009AEC 4A41                         tst     d1
 8978 00.00009AEE 6600E8F2                     bne     syntaxerr
 8979 00.00009AF2                              ;
 8980 00.00009AF2 5DB900009D10                 subq.l  #6,precsp       ;pop the prec set up
 8981 00.00009AF8 4E75                         rts
 8982 00.00009AFA                      
 8983 00.00009AFA 61000128             eval5   bsr     eval2
 8984 00.00009AFE 227A0210             .more   move.l  precsp(pc),a1
 8985 00.00009B02 B261                         cmp     -(a1),d1
 8986 00.00009B04 62000004                     bhi     .higher
 8987 00.00009B08 4E75                         rts
 8988 00.00009B0A                      
 8989 00.00009B0A 610001DA             .higher bsr     pushprec
 8990 00.00009B0E                              ;
 8991 00.00009B0E 3F02                         move    d2,-(a7)
 8992 00.00009B10 527900002B06                 addq    #1,regat
 8993 00.00009B16 6100FFE2                     bsr     eval5
 8994 00.00009B1A 537900002B06                 subq    #1,regat
 8995 00.00009B20 361F                         move    (a7)+,d3
 8996 00.00009B22 48E74080                     movem.l d1/a0,-(a7)
 8997 00.00009B26 67000006                     beq     .skip
 8998 00.00009B2A 6100FC44                     bsr     convtypef       ;could possibly fuck regat+1 !
 8999 00.00009B2E 610001C6             .skip   bsr     popprec
 9000 00.00009B32 6100019C                     bsr     doop
 9001 00.00009B36                              ;
 9002 00.00009B36                              ;O.K., lets check the forth stack to see if last
 9003 00.00009B36                              ;two operators are constants!
 9004 00.00009B36                              ;
 9005 00.00009B36                              ;if so, we can JSR the routine to optimize into a constant!
 9006 00.00009B36                              ;
 9007 00.00009B36 207A0B78                     move.l  forthsp(pc),a0
 9008 00.00009B3A 3228FFFE                     move    -2(a0),d1
 9009 00.00009B3E 8268FFEC                     or      -20(a0),d1
 9010 00.00009B42 3141FFEC                     move    d1,-20(a0)
 9011 00.00009B46 660000C6                     bne     .no
 9012 00.00009B4A 32390000E858                 move    nomemleft,d1
 9013 00.00009B50 660000BC                     bne     .no
 9014 00.00009B54                              ;
 9015 00.00009B54                              ;YES! We can do it!
 9016 00.00009B54                              ;
 9017 00.00009B54                              ;Set up MOVE.l regat,d0
 9018 00.00009B54                              ;
 9019 00.00009B54 323C2000                     move    #$2000,d1
 9020 00.00009B58 827A8FAC                     or      regat(pc),d1
 9021 00.00009B5C 6100F9AE                     bsr     pokewd
 9022 00.00009B60 323C4E75                     move    #$4e75,d1
 9023 00.00009B64 6100F9A6                     bsr     pokewd
 9024 00.00009B68 33E8FFE80000EC22             move    -24(a0),lasta6  
 9025 00.00009B70 23E8FFE40000EC22             move.l  -28(a0),lasta6
 9026 00.00009B78 2068FFDC                     move.l  -36(a0),a0
 9027 00.00009B7C 23C80000E8F6                 move.l  a0,pc
 9028 00.00009B82                              ;
 9029 00.00009B82 48E72004                     movem.l d2/a5,-(a7)
 9030 00.00009B86                              ;
 9031 00.00009B86 2C7900002B02                 move.l  maths,a6
 9032 00.00009B8C 227900007310                 move.l  ffplib,a1
 9033 00.00009B92 3029000A                     move    10(a1),d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 212
blitz2.s


 9034 00.00009B96 4BF900002B02                 lea     maths,a5
 9035 00.00009B9C 9AC0                         sub     d0,a5
 9036 00.00009B9E                              ;
 9037 00.00009B9E 610097DC                     bsr     flushc
 9038 00.00009BA2 4E90                         jsr     (a0)
 9039 00.00009BA4                              ;
 9040 00.00009BA4 4CDF2004                     movem.l (a7)+,d2/a5
 9041 00.00009BA8                              ;
 9042 00.00009BA8                              ;d0 has got constant!
 9043 00.00009BA8                              ;
 9044 00.00009BA8 323A8F5C                     move    regat(pc),d1
 9045 00.00009BAC E149                         lsl     #8,d1
 9046 00.00009BAE E349                         lsl     #1,d1
 9047 00.00009BB0 0041203C                     or      #$203c,d1       ;move.l #x,dn
 9048 00.00009BB4 B47C0003                     cmp     #3,d2
 9049 00.00009BB8 64000014                     bcc     .ok
 9050 00.00009BBC 00411000                     or      #$1000,d1
 9051 00.00009BC0 6100F94A                     bsr     pokewd
 9052 00.00009BC4 3200                         move    d0,d1
 9053 00.00009BC6 6100F944                     bsr     pokewd
 9054 00.00009BCA 6000000C                     bra     .mode
 9055 00.00009BCE 6100F93C             .ok     bsr     pokewd
 9056 00.00009BD2 2200                         move.l  d0,d1
 9057 00.00009BD4 6100F92E                     bsr     pokel
 9058 00.00009BD8                              ;
 9059 00.00009BD8                      .mode   ;Move #x,Dn
 9060 00.00009BD8                              ;
 9061 00.00009BD8                              ;clean up offset stack
 9062 00.00009BD8                              ;
 9063 00.00009BD8 207A0AD6                     move.l  forthsp(pc),a0
 9064 00.00009BDC 2668FFE0                     move.l  -32(a0),a3
 9065 00.00009BE0 24790000EC56                 move.l  firstoff,a2
 9066 00.00009BE6 23CB0000EC56                 move.l  a3,firstoff
 9067 00.00009BEC 2C780004                     move.l  4.w,a6
 9068 00.00009BF0 B5CB                 .loop   cmp.l   a3,a2
 9069 00.00009BF2 67000016                     beq     .done
 9070 00.00009BF6 53B90000EC52                 subq.l  #1,numoffs
 9071 00.00009BFC 224A                         move.l  a2,a1
 9072 00.00009BFE 2452                         move.l  (a2),a2
 9073 00.00009C00 7008                         moveq   #8,d0
 9074 00.00009C02 4EAEFF2E                     jsr     freemem(a6)
 9075 00.00009C06 6000FFE8                     bra     .loop
 9076 00.00009C0A 207A0AA4             .done   move.l  forthsp(pc),a0
 9077 00.00009C0E                              ;
 9078 00.00009C0E 41E8FFEE             .no     lea     -18(a0),a0
 9079 00.00009C12 23C80000A6B0                 move.l  a0,forthsp
 9080 00.00009C18                              ;
 9081 00.00009C18 4CDF0102                     movem.l (a7)+,d1/a0
 9082 00.00009C1C 6100E01C                     bsr     reget
 9083 00.00009C20 6000FEDC                     bra     .more
 9084 00.00009C24                      
 9085 00.00009C24                      eval2   ;
 9086 00.00009C24                              ;get 1 element and operator
 9087 00.00009C24                              ;d1=op prec, or 0 if .done
 9088 00.00009C24                              ;a0=operator address
 9089 00.00009C24                              ;
 9090 00.00009C24 61000760                     bsr     getelement
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 213
blitz2.s


 9091 00.00009C28                              ;
 9092 00.00009C28 41F90000E43A                 lea     operators,a0
 9093 00.00009C2E 4A50                 .loop   tst     (a0)
 9094 00.00009C30 67000010                     beq     .done
 9095 00.00009C34 B050                         cmp     (a0),d0
 9096 00.00009C36 6700000E                     beq     .found
 9097 00.00009C3A 41E80020                     lea     32(a0),a0
 9098 00.00009C3E 6000FFEE                     bra     .loop
 9099 00.00009C42 7200                 .done   moveq   #0,d1
 9100 00.00009C44 4E75                         rts
 9101 00.00009C46                      .found  ;
 9102 00.00009C46 B07C003C                     cmp     #'<',d0
 9103 00.00009C4A 66000024                     bne     .notlt
 9104 00.00009C4E 6100DFBE                     bsr     getchar3
 9105 00.00009C52 B07C003D                     cmp     #'=',d0
 9106 00.00009C56 6600000C                     bne     .notlteq
 9107 00.00009C5A 41F90000E67A                 lea     ople,a0
 9108 00.00009C60 60000068                     bra     .found2
 9109 00.00009C64 B07C003E             .notlteq        cmp     #'>',d0
 9110 00.00009C68 6600002C                     bne     .found3
 9111 00.00009C6C 60000056                     bra     .isne
 9112 00.00009C70                              ;
 9113 00.00009C70 B07C003E             .notlt  cmp     #'>',d0
 9114 00.00009C74 66000028                     bne     .notgt
 9115 00.00009C78 6100DF94                     bsr     getchar3
 9116 00.00009C7C B07C003D                     cmp     #'=',d0
 9117 00.00009C80 6600000C                     bne     .notgteq
 9118 00.00009C84 41F90000E6BA                 lea     opge,a0
 9119 00.00009C8A 6000003E                     bra     .found2
 9120 00.00009C8E B07C003C             .notgteq        cmp     #'<',d0
 9121 00.00009C92 67000030                     beq     .isne
 9122 00.00009C96 6100DFAC             .found3 bsr     bakup
 9123 00.00009C9A 6000002E                     bra     .found2
 9124 00.00009C9E                              ;
 9125 00.00009C9E B07C003D             .notgt  cmp     #'=',d0
 9126 00.00009CA2 66000026                     bne     .found2
 9127 00.00009CA6 6100DF66                     bsr     getchar3
 9128 00.00009CAA B07C003E                     cmp     #'>',d0
 9129 00.00009CAE 6600000C                     bne     .noteqgt
 9130 00.00009CB2 41F90000E6BA                 lea     opge,a0
 9131 00.00009CB8 60000010                     bra     .found2
 9132 00.00009CBC B07C003C             .noteqgt        cmp     #'<',d0
 9133 00.00009CC0 6600FFD4                     bne     .found3
 9134 00.00009CC4 41F90000E63A         .isne   lea     opne,a0
 9135 00.00009CCA                              ;
 9136 00.00009CCA                      .found2 ;       
 9137 00.00009CCA                              ;We've found the operator.
 9138 00.00009CCA                              ;
 9139 00.00009CCA 3228001E                     move    30(a0),d1
 9140 00.00009CCE 4E75                         rts
 9141 00.00009CD0                      
 9142 00.00009CD0                      doop    ;a0=operator,d2=type
 9143 00.00009CD0                              ;
 9144 00.00009CD0 3202                         move    d2,d1
 9145 00.00009CD2 5341                         subq    #1,d1
 9146 00.00009CD4 6B00E84A                     bmi     illoperr
 9147 00.00009CD8 E549                         lsl     #2,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 214
blitz2.s


 9148 00.00009CDA 22301002                     move.l  2(a0,d1),d1
 9149 00.00009CDE 6700E840                     beq     illoperr
 9150 00.00009CE2 2041                         move.l  d1,a0
 9151 00.00009CE4 4ED0                         jmp     (a0)
 9152 00.00009CE6                      
 9153 00.00009CE6                      pushprec        ;push operator on stack
 9154 00.00009CE6                              ;
 9155 00.00009CE6 227A0028                     move.l  precsp(pc),a1
 9156 00.00009CEA 22C8                         move.l  a0,(a1)+
 9157 00.00009CEC 32C1                         move    d1,(a1)+
 9158 00.00009CEE 23C900009D10                 move.l  a1,precsp       
 9159 00.00009CF4 4E75                         rts
 9160 00.00009CF6                      
 9161 00.00009CF6                      popprec ;pull precedence into d1 from stack
 9162 00.00009CF6                              ;
 9163 00.00009CF6 227A0018                     move.l  precsp(pc),a1
 9164 00.00009CFA B3FC00009E94                 cmp.l   #precstackf,a1
 9165 00.00009D00 6400E376                     bcc     pserr
 9166 00.00009D04 3221                         move    -(a1),d1
 9167 00.00009D06 2061                         move.l  -(a1),a0
 9168 00.00009D08 23C900009D10                 move.l  a1,precsp
 9169 00.00009D0E 4E75                         rts
 9170 00.00009D10                      
 9171 00.00009D10 00009D14             precsp  dc.l    precstack
 9172 00.00009D14                      
 9173 00.00009D14                      precstack       ds      6*32    ;Lotsa Room?
 9174 00.00009E94                      precstackf      ;
 9175 00.00009E94                      
 9176 00.00009E94                      ;-----------PLUS------------;
 9177 00.00009E94                      
 9178 00.00009E94 57C0                 mseq    seq     d0
 9179 00.00009E96 56C0                 msne    sne     d0
 9180 00.00009E98 5DC0                 mslt    slt     d0
 9181 00.00009E9A 5FC0                 msle    sle     d0
 9182 00.00009E9C 5EC0                 msgt    sgt     d0
 9183 00.00009E9E 5CC0                 msge    sge     d0
 9184 00.00009EA0                      
 9185 00.00009EA0 B000                 cmp0    cmp.b   d0,d0
 9186 00.00009EA2 B040                 cmp1    cmp     d0,d0
 9187 00.00009EA4 B080                 cmp2    cmp.l   d0,d0
 9188 00.00009EA6                      
 9189 00.00009EA6 323AFFF8             doeqb   move    cmp0(pc),d1
 9190 00.00009EAA 60000188                     bra     doeqcmp2
 9191 00.00009EAE 323AFFF0             doneb   move    cmp0(pc),d1
 9192 00.00009EB2 6000018C                     bra     donecmp2
 9193 00.00009EB6 323AFFE8             doltb   move    cmp0(pc),d1
 9194 00.00009EBA 60000190                     bra     doltcmp2
 9195 00.00009EBE 323AFFE0             doleb   move    cmp0(pc),d1
 9196 00.00009EC2 60000194                     bra     dolecmp2
 9197 00.00009EC6 323AFFD8             dogtb   move    cmp0(pc),d1
 9198 00.00009ECA 60000198                     bra     dogtcmp2
 9199 00.00009ECE 323AFFD0             dogeb   move    cmp0(pc),d1
 9200 00.00009ED2 6000019C                     bra     dogecmp2
 9201 00.00009ED6                      
 9202 00.00009ED6 323AFFCA             doeqw   move    cmp1(pc),d1
 9203 00.00009EDA 60000158                     bra     doeqcmp2
 9204 00.00009EDE 323AFFC2             donew   move    cmp1(pc),d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 215
blitz2.s


 9205 00.00009EE2 6000015C                     bra     donecmp2
 9206 00.00009EE6 323AFFBA             doltw   move    cmp1(pc),d1
 9207 00.00009EEA 60000160                     bra     doltcmp2
 9208 00.00009EEE 323AFFB2             dolew   move    cmp1(pc),d1
 9209 00.00009EF2 60000164                     bra     dolecmp2
 9210 00.00009EF6 323AFFAA             dogtw   move    cmp1(pc),d1
 9211 00.00009EFA 60000168                     bra     dogtcmp2
 9212 00.00009EFE 323AFFA2             dogew   move    cmp1(pc),d1
 9213 00.00009F02 6000016C                     bra     dogecmp2
 9214 00.00009F06                      
 9215 00.00009F06 323AFF9C             doeql   move    cmp2(pc),d1
 9216 00.00009F0A 60000128                     bra     doeqcmp2
 9217 00.00009F0E 323AFF94             donel   move    cmp2(pc),d1
 9218 00.00009F12 6000012C                     bra     donecmp2
 9219 00.00009F16 323AFF8C             doltl   move    cmp2(pc),d1
 9220 00.00009F1A 60000130                     bra     doltcmp2
 9221 00.00009F1E 323AFF84             dolel   move    cmp2(pc),d1
 9222 00.00009F22 60000134                     bra     dolecmp2
 9223 00.00009F26 323AFF7C             dogtl   move    cmp2(pc),d1
 9224 00.00009F2A 60000138                     bra     dogtcmp2
 9225 00.00009F2E 323AFF74             dogel   move    cmp2(pc),d1
 9226 00.00009F32 6000013C                     bra     dogecmp2
 9227 00.00009F36                      
 9228 00.00009F36 0000                 cfregat dc      0
 9229 00.00009F38 33C100002A5C         docflib move    d1,libjsr+2
 9230 00.00009F3E 61000E00                     bsr     savereg
 9231 00.00009F42 2204                         move.l  d4,d1
 9232 00.00009F44 61000DF2                     bsr     pokemovem
 9233 00.00009F48 323CC900                     move    #getffpbase,d1
 9234 00.00009F4C 61001B5A                     bsr     tokejsr
 9235 00.00009F50 61000400                     bsr     ritetod0
 9236 00.00009F54 223900002A5A                 move.l  libjsr,d1
 9237 00.00009F5A 6100F5A8                     bsr     pokel
 9238 00.00009F5E 33F900002B0600009F36         move    regat,cfregat
 9239 00.00009F68 427900002B06                 clr     regat
 9240 00.00009F6E 4E75                         rts
 9241 00.00009F70                      
 9242 00.00009F70 33F900009F3600002B06 docflib2        move    cfregat,regat
 9243 00.00009F7A 610003F2                     bsr     ritefromd0
 9244 00.00009F7E 2205                         move.l  d5,d1
 9245 00.00009F80 60000DB6                     bra     pokemovem
 9246 00.00009F84                      
 9247 00.00009F84                      
 9248 00.00009F84 72D6                 doeqf   moveq   #-42,d1
 9249 00.00009F86 6100FFB0                     bsr     docflib
 9250 00.00009F8A 610000AC                     bsr     doeqcmp
 9251 00.00009F8E 6000FFE0                     bra     docflib2
 9252 00.00009F92 72D6                 donef   moveq   #-42,d1
 9253 00.00009F94 6100FFA2                     bsr     docflib
 9254 00.00009F98 610000AA                     bsr     donecmp
 9255 00.00009F9C 6000FFD2                     bra     docflib2
 9256 00.00009FA0 72D6                 doltf   moveq   #-42,d1
 9257 00.00009FA2 6100FF94                     bsr     docflib
 9258 00.00009FA6 610000A8                     bsr     doltcmp
 9259 00.00009FAA 6000FFC4                     bra     docflib2
 9260 00.00009FAE 72D6                 dolef   moveq   #-42,d1
 9261 00.00009FB0 6100FF86                     bsr     docflib
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 216
blitz2.s


 9262 00.00009FB4 610000A6                     bsr     dolecmp
 9263 00.00009FB8 6000FFB6                     bra     docflib2
 9264 00.00009FBC 72D6                 dogtf   moveq   #-42,d1
 9265 00.00009FBE 6100FF78                     bsr     docflib
 9266 00.00009FC2 610000A4                     bsr     dogtcmp
 9267 00.00009FC6 6000FFA8                     bra     docflib2
 9268 00.00009FCA 72D6                 dogef   moveq   #-42,d1
 9269 00.00009FCC 6100FF6A                     bsr     docflib
 9270 00.00009FD0 610000A2                     bsr     dogecmp
 9271 00.00009FD4 6000FF9A                     bra     docflib2
 9272 00.00009FD8                      
 9273 00.00009FD8 323CCE00             doeqs   move    #strcomp,d1
 9274 00.00009FDC 61001ACA                     bsr     tokejsr
 9275 00.00009FE0 60000056                     bra     doeqcmp
 9276 00.00009FE4 323CCE00             dones   move    #strcomp,d1
 9277 00.00009FE8 61001ABE                     bsr     tokejsr
 9278 00.00009FEC 60000056                     bra     donecmp
 9279 00.00009FF0 323CCE00             dolts   move    #strcomp,d1
 9280 00.00009FF4 61001AB2                     bsr     tokejsr
 9281 00.00009FF8 60000056                     bra     doltcmp
 9282 00.00009FFC 323CCE00             doles   move    #strcomp,d1
 9283 00.0000A000 61001AA6                     bsr     tokejsr
 9284 00.0000A004 60000056                     bra     dolecmp
 9285 00.0000A008 323CCE00             dogts   move    #strcomp,d1
 9286 00.0000A00C 61001A9A                     bsr     tokejsr
 9287 00.0000A010 60000056                     bra     dogtcmp
 9288 00.0000A014 323CCE00             doges   move    #strcomp,d1
 9289 00.0000A018 61001A8E                     bsr     tokejsr
 9290 00.0000A01C 60000056                     bra     dogecmp
 9291 00.0000A020                      
 9292 00.0000A020 363900002B06         cmpit   move    regat,d3
 9293 00.0000A026 8243                         or      d3,d1
 9294 00.0000A028 E14B                         lsl     #8,d3
 9295 00.0000A02A E34B                         lsl     #1,d3
 9296 00.0000A02C 8243                         or      d3,d1
 9297 00.0000A02E 5241                         addq    #1,d1
 9298 00.0000A030 6000F4DA                     bra     pokewd
 9299 00.0000A034                              
 9300 00.0000A034 6100FFEA             doeqcmp2        bsr     cmpit
 9301 00.0000A038 323AFE5A             doeqcmp move    mseq(pc),d1
 9302 00.0000A03C 6000003A                     bra     cpoke
 9303 00.0000A040                      
 9304 00.0000A040 6100FFDE             donecmp2        bsr     cmpit
 9305 00.0000A044 323AFE50             donecmp move    msne(pc),d1
 9306 00.0000A048 6000002E                     bra     cpoke
 9307 00.0000A04C                      
 9308 00.0000A04C 6100FFD2             doltcmp2        bsr     cmpit
 9309 00.0000A050 323AFE46             doltcmp move    mslt(pc),d1
 9310 00.0000A054 60000022                     bra     cpoke
 9311 00.0000A058                      
 9312 00.0000A058 6100FFC6             dolecmp2        bsr     cmpit
 9313 00.0000A05C 323AFE3C             dolecmp move    msle(pc),d1
 9314 00.0000A060 60000016                     bra     cpoke
 9315 00.0000A064                      
 9316 00.0000A064 6100FFBA             dogtcmp2        bsr     cmpit
 9317 00.0000A068 323AFE32             dogtcmp move    msgt(pc),d1
 9318 00.0000A06C 6000000A                     bra     cpoke
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 217
blitz2.s


 9319 00.0000A070                      
 9320 00.0000A070 6100FFAE             dogecmp2        bsr     cmpit
 9321 00.0000A074 323AFE28             dogecmp move    msge(pc),d1
 9322 00.0000A078 827A8A8C             cpoke   or      regat(pc),d1
 9323 00.0000A07C 6100F48E                     bsr     pokewd
 9324 00.0000A080 323C4880                     move    #$4880,d1               ;ext.w D regat
 9325 00.0000A084 827A8A80                     or      regat(pc),d1
 9326 00.0000A088 6100F482                     bsr     pokewd          
 9327 00.0000A08C                              ;
 9328 00.0000A08C 7402                         moveq   #2,d2   ;type now WORD!
 9329 00.0000A08E 4E75                         rts
 9330 00.0000A090                      
 9331 00.0000A090                      ;doplusb        move    #$d000,d1
 9332 00.0000A090                      ;       bra     doplus2
 9333 00.0000A090                      
 9334 00.0000A090 323CD040             doplusb move    #$d040,d1
 9335 00.0000A094 7402                         moveq   #2,d2   ;now a word
 9336 00.0000A096 60000014                     bra     doplus2
 9337 00.0000A09A 323CD040             doplusw move    #$d040,d1
 9338 00.0000A09E 7403                         moveq   #3,d2   ;now a long
 9339 00.0000A0A0 6100000A                     bsr     doplus2
 9340 00.0000A0A4 6000F528                     bra     wordtolong
 9341 00.0000A0A8                      doplusl ;add regat+1 to regat
 9342 00.0000A0A8 323CD080                     move    #$d080,d1
 9343 00.0000A0AC 363900002B06         doplus2 move    regat,d3
 9344 00.0000A0B2 8243                         or      d3,d1
 9345 00.0000A0B4 5241                         addq    #1,d1
 9346 00.0000A0B6 E14B                         lsl     #8,d3
 9347 00.0000A0B8 E34B                         lsl     #1,d3
 9348 00.0000A0BA 8243                         or      d3,d1
 9349 00.0000A0BC 6000F44E                     bra     pokewd
 9350 00.0000A0C0                      
 9351 00.0000A0C0                      doplusf ;
 9352 00.0000A0C0                              ;ffp add
 9353 00.0000A0C0                              ;
 9354 00.0000A0C0 323CFFBE                     move    #-66,d1
 9355 00.0000A0C4 33C100002A5C         doflib  move    d1,libjsr+2
 9356 00.0000A0CA 61000C74                     bsr     savereg
 9357 00.0000A0CE 2204                         move.l  d4,d1
 9358 00.0000A0D0 61000C66                     bsr     pokemovem
 9359 00.0000A0D4 323CC900                     move    #getffpbase,d1
 9360 00.0000A0D8 610019CE                     bsr     tokejsr
 9361 00.0000A0DC 61000274                     bsr     ritetod0
 9362 00.0000A0E0 223900002A5A                 move.l  libjsr,d1
 9363 00.0000A0E6 6100F41C                     bsr     pokel
 9364 00.0000A0EA 61000282                     bsr     ritefromd0
 9365 00.0000A0EE 2205                         move.l  d5,d1
 9366 00.0000A0F0 60000C46                     bra     pokemovem
 9367 00.0000A0F4                      
 9368 00.0000A0F4 323900002B06         addstrings      move    regat,d1
 9369 00.0000A0FA E149                         lsl     #8,d1
 9370 00.0000A0FC E349                         lsl     #1,d1
 9371 00.0000A0FE 3F01                         move    d1,-(a7)
 9372 00.0000A100 827900002A8A                 or      addcode,d1
 9373 00.0000A106 6100F404                     bsr     pokewd
 9374 00.0000A10A 321F                         move    (a7)+,d1
 9375 00.0000A10C 827900002A8C                 or      addcode+2,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 218
blitz2.s


 9376 00.0000A112 6000F3F8                     bra     pokewd
 9377 00.0000A116                      
 9378 00.0000A116                      ;-----------end of PLUS, start of MINUS---------;
 9379 00.0000A116                              
 9380 00.0000A116 323C9040             dominusb        move    #$9040,d1
 9381 00.0000A11A                              ;moveq  #2,d2   ;now a word!
 9382 00.0000A11A 6000FF90                     bra     doplus2
 9383 00.0000A11E 323C9040             dominusw        move    #$9040,d1
 9384 00.0000A122                              ;moveq  #3,d2   ;now a long
 9385 00.0000A122 6000FF88                     bra     doplus2
 9386 00.0000A126 323C9080             dominusl        move    #$9080,d1
 9387 00.0000A12A 6000FF80                     bra     doplus2
 9388 00.0000A12E 323CFFB8             dominusf        move    #-72,d1 
 9389 00.0000A132 6000FF90                     bra     doflib
 9390 00.0000A136                      
 9391 00.0000A136                      ;-----------end of MINUS, start of TIMES---------;
 9392 00.0000A136                      
 9393 00.0000A136                      ;dotimesb       move    #$48c0,d1
 9394 00.0000A136                      ;       or      regat(pc),d1
 9395 00.0000A136                      ;       bsr     pokewd
 9396 00.0000A136                      ;       addq    #1,d1
 9397 00.0000A136                      ;       bsr     pokewd
 9398 00.0000A136                      ;       bsr     dotimesw
 9399 00.0000A136                      ;       moveq   #2,d2   ;now a word
 9400 00.0000A136                      ;       rts
 9401 00.0000A136                      
 9402 00.0000A136 323CC1C0             dotimesb        move    #$c1c0,d1
 9403 00.0000A13A 7402                         moveq   #2,d2   ;now a word
 9404 00.0000A13C 6000FF6E                     bra     doplus2
 9405 00.0000A140                              
 9406 00.0000A140 323CC1C0             dotimesw        move    #$c1c0,d1
 9407 00.0000A144 7403                         moveq   #3,d2   ;now a long.
 9408 00.0000A146 6000FF64                     bra     doplus2
 9409 00.0000A14A                      
 9410 00.0000A14A 323CCA00             dotimesq        move    #quickmult,d1
 9411 00.0000A14E 60000006                     bra     domylib
 9412 00.0000A152                      
 9413 00.0000A152 323CCA01             dotimesl        move    #longmult,d1
 9414 00.0000A156 3F01                 domylib move    d1,-(a7)
 9415 00.0000A158 61000BE6                     bsr     savereg
 9416 00.0000A15C 2204                         move.l  d4,d1
 9417 00.0000A15E 61000BD8                     bsr     pokemovem
 9418 00.0000A162 610001EE                     bsr     ritetod0
 9419 00.0000A166 321F                         move    (a7)+,d1
 9420 00.0000A168 6100193E                     bsr     tokejsr
 9421 00.0000A16C 61000200                     bsr     ritefromd0
 9422 00.0000A170 2205                         move.l  d5,d1
 9423 00.0000A172 60000BC4                     bra     pokemovem
 9424 00.0000A176                      
 9425 00.0000A176 323CFFB2             dotimesf        move    #-78,d1
 9426 00.0000A17A 6000FF48                     bra     doflib
 9427 00.0000A17E                      
 9428 00.0000A17E 3F02                 dopow   move    d2,-(a7)
 9429 00.0000A180 3602                         move    d2,d3
 9430 00.0000A182 7405                         moveq   #5,d2   ;now a float
 9431 00.0000A184 6100F5EA                     bsr     convtypef
 9432 00.0000A188 527900002B06                 addq    #1,regat
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 219
blitz2.s


 9433 00.0000A18E 361F                         move    (a7)+,d3
 9434 00.0000A190 7405                         moveq   #5,d2
 9435 00.0000A192 6100F5EE                     bsr     convtype
 9436 00.0000A196 537900002B06                 subq    #1,regat
 9437 00.0000A19C 6100000A                     bsr     nocando
 9438 00.0000A1A0 323C6001                     move    #mathq*128+1,d1
 9439 00.0000A1A4 6000FFB0                     bra     domylib
 9440 00.0000A1A8                      
 9441 00.0000A1A8                      nocando ;can't eval this as a const!
 9442 00.0000A1A8                              ;
 9443 00.0000A1A8 207A0506                     move.l  forthsp(pc),a0
 9444 00.0000A1AC 313CFFFF                     move    #-1,-(a0)
 9445 00.0000A1B0 4E75                         rts
 9446 00.0000A1B2                      
 9447 00.0000A1B2                      ;-----------end of times, start of mod-------;
 9448 00.0000A1B2                      
 9449 00.0000A1B2 323CD400             domodb  move    #modbyte,d1
 9450 00.0000A1B6 6000FF9E                     bra     domylib
 9451 00.0000A1BA                      
 9452 00.0000A1BA 323CD401             domodw  move    #modword,d1
 9453 00.0000A1BE 6000FF96                     bra     domylib
 9454 00.0000A1C2                      
 9455 00.0000A1C2 6100FFE4             domodl  bsr     nocando ;modlib uses an alibjsr here!
 9456 00.0000A1C6 323CD402                     move    #modlong,d1
 9457 00.0000A1CA 6000FF8A                     bra     domylib
 9458 00.0000A1CE                      
 9459 00.0000A1CE 323CD403             domodq  move    #modquick,d1
 9460 00.0000A1D2 7402                         moveq   #2,d2   ;now a word.
 9461 00.0000A1D4 6000FF80                     bra     domylib
 9462 00.0000A1D8                      
 9463 00.0000A1D8 6100FFCE             domodf  bsr     nocando ;modlib lib uses an alibjsr!
 9464 00.0000A1DC 323CD404                     move    #modfloat,d1
 9465 00.0000A1E0 7403                         moveq   #3,d2   ;now a long
 9466 00.0000A1E2 6000FF72                     bra     domylib
 9467 00.0000A1E6                      
 9468 00.0000A1E6                      ;-----------end of mod, start of POWER OF----;
 9469 00.0000A1E6                      
 9470 00.0000A1E6                      ;-----------end of mod, start of DIVIDE------;
 9471 00.0000A1E6                      
 9472 00.0000A1E6 323C48C0             dodivb  move    #$48c0,d1
 9473 00.0000A1EA 827900002B06                 or      regat,d1
 9474 00.0000A1F0 6100F31A                     bsr     pokewd
 9475 00.0000A1F4 5241                         addq    #1,d1
 9476 00.0000A1F6 6100F314                     bsr     pokewd
 9477 00.0000A1FA                              ;
 9478 00.0000A1FA 323C48C0             dodivw  move    #$48c0,d1       ;ext.l Dn
 9479 00.0000A1FE 827900002B06                 or      regat,d1
 9480 00.0000A204 6100F306                     bsr     pokewd
 9481 00.0000A208 323C81C0                     move    #$81c0,d1
 9482 00.0000A20C 6000FE9E                     bra     doplus2
 9483 00.0000A210 323CCB01             dodivl  move    #longdiv,d1
 9484 00.0000A214 6000FF40                     bra     domylib
 9485 00.0000A218 323CCB00             dodivq  move    #quickdiv,d1
 9486 00.0000A21C 6000FF38                     bra     domylib
 9487 00.0000A220 323CFFAC             dodivf  move    #-84,d1
 9488 00.0000A224 6000FE9E                     bra     doflib
 9489 00.0000A228                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 220
blitz2.s


 9490 00.0000A228                      ;-----------end of DIVIDE, start of AND-----------;
 9491 00.0000A228                      
 9492 00.0000A228 323CC000             doandb  move    #$c000,d1
 9493 00.0000A22C 6000FE7E                     bra     doplus2
 9494 00.0000A230 323CC040             doandw  move    #$c040,d1
 9495 00.0000A234 6000FE76                     bra     doplus2
 9496 00.0000A238 323CC080             doandl  move    #$c080,d1
 9497 00.0000A23C 6000FE6E                     bra     doplus2
 9498 00.0000A240                      
 9499 00.0000A240                      ;-----------end of AND, start of OR---------------;
 9500 00.0000A240                      
 9501 00.0000A240 323C8000             doorb   move    #$8000,d1
 9502 00.0000A244 6000FE66                     bra     doplus2
 9503 00.0000A248 323C8040             doorw   move    #$8040,d1
 9504 00.0000A24C 6000FE5E                     bra     doplus2
 9505 00.0000A250 323C8080             doorl   move    #$8080,d1
 9506 00.0000A254 6000FE56                     bra     doplus2
 9507 00.0000A258                      
 9508 00.0000A258                      ;-----------end if OR, start of EOR---------------;
 9509 00.0000A258                      
 9510 00.0000A258 323CB100             doeorb  move    #$b100,d1
 9511 00.0000A25C                              ;
 9512 00.0000A25C 363900002B06         doeor2  move    regat,d3
 9513 00.0000A262 8243                         or      d3,d1
 9514 00.0000A264 5243                         addq    #1,d3
 9515 00.0000A266 E14B                         lsl     #8,d3
 9516 00.0000A268 E34B                         lsl     #1,d3
 9517 00.0000A26A 8243                         or      d3,d1
 9518 00.0000A26C 6000F29E                     bra     pokewd
 9519 00.0000A270 323CB140             doeorw  move    #$b140,d1
 9520 00.0000A274 6000FFE6                     bra     doeor2
 9521 00.0000A278 323CB180             doeorl  move    #$b180,d1
 9522 00.0000A27C 6000FFDE                     bra     doeor2
 9523 00.0000A280                      
 9524 00.0000A280                      ;-----------end of OR, start of LSL---------------;
 9525 00.0000A280                      
 9526 00.0000A280                      dolslb  ;
 9527 00.0000A280                      dolslw  ;
 9528 00.0000A280 323CE1A8             dolsll  move    #$e1a8,d1
 9529 00.0000A284 60000012                     bra     shpoke
 9530 00.0000A288                      
 9531 00.0000A288                      ;-----------end of LSL, start of LSR--------------;
 9532 00.0000A288                      
 9533 00.0000A288                      dolsrb  ;       andi.l #255,regat
 9534 00.0000A288                      dolsrw  ;       andi.l #$ffff,regat
 9535 00.0000A288 323CE0A8             dolsrl  move    #$e0a8,d1
 9536 00.0000A28C 6000000A                     bra     shpoke
 9537 00.0000A290                      
 9538 00.0000A290                      ;-----------end of LSR, start of ASR--------------;
 9539 00.0000A290                      
 9540 00.0000A290                      doasrb  ;
 9541 00.0000A290                      doasrw  ;
 9542 00.0000A290 323CE0A0             doasrl  move    #$e0a0,d1
 9543 00.0000A294 60000002                     bra     shpoke
 9544 00.0000A298                      
 9545 00.0000A298                      ;-----------end of ASR----------------------; 
 9546 00.0000A298                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 221
blitz2.s


 9547 00.0000A298 3F01                 shpoke  move    d1,-(a7)
 9548 00.0000A29A 527900002B06                 addq    #1,regat        ;make second a word!
 9549 00.0000A2A0 3F02                         move    d2,-(a7)
 9550 00.0000A2A2 3602                         move    d2,d3
 9551 00.0000A2A4 7402                         moveq   #2,d2
 9552 00.0000A2A6 6100F4DA                     bsr     convtype
 9553 00.0000A2AA 341F                         move    (a7)+,d2        ;type
 9554 00.0000A2AC 537900002B06                 subq    #1,regat
 9555 00.0000A2B2 B47C0004                     cmp     #4,d2   ;don't fuck with quix
 9556 00.0000A2B6 6700000A                     beq     .skip
 9557 00.0000A2BA 3602                         move    d2,d3
 9558 00.0000A2BC 7403                         moveq   #3,d2
 9559 00.0000A2BE 6100F4B0                     bsr     convtypef       ;make first (and current) a long
 9560 00.0000A2C2 321F                 .skip   move    (a7)+,d1
 9561 00.0000A2C4                              ;
 9562 00.0000A2C4 363900002B06                 move    regat,d3
 9563 00.0000A2CA 8243                         or      d3,d1
 9564 00.0000A2CC 5243                         addq    #1,d3
 9565 00.0000A2CE E14B                         lsl     #8,d3
 9566 00.0000A2D0 E34B                         lsl     #1,d3
 9567 00.0000A2D2 8243                         or      d3,d1
 9568 00.0000A2D4 6000F236                     bra     pokewd
 9569 00.0000A2D8                      
 9570 00.0000A2D8                      ;-----------start of bittst-----------------;
 9571 00.0000A2D8                      
 9572 00.0000A2D8 323C0100             bittst  move    #$100,d1
 9573 00.0000A2DC 6100003E                     bsr     dothebit
 9574 00.0000A2E0                              ;
 9575 00.0000A2E0 323900002B06                 move    regat,d1
 9576 00.0000A2E6 004156C0                     or      #$56c0,d1               ;sne regat
 9577 00.0000A2EA 6100F220                     bsr     pokewd
 9578 00.0000A2EE                              ;
 9579 00.0000A2EE 323900002B06                 move    regat,d1
 9580 00.0000A2F4 00414880                     or      #$4880,d1               ;ext.w D regat
 9581 00.0000A2F8 6100F212                     bsr     pokewd          
 9582 00.0000A2FC                              ;
 9583 00.0000A2FC 7402                         moveq   #2,d2   ;type now WORD!
 9584 00.0000A2FE 4E75                         rts
 9585 00.0000A300                      
 9586 00.0000A300 323C01C0             bitset  move    #$1c0,d1
 9587 00.0000A304                              ;
 9588 00.0000A304 61000016             dobitmip        bsr     dothebit
 9589 00.0000A308                              ;
 9590 00.0000A308 7403                         moveq   #3,d2   ;type now LONG!
 9591 00.0000A30A 4E75                         rts
 9592 00.0000A30C                      
 9593 00.0000A30C 323C0180             bitclr  move    #$180,d1
 9594 00.0000A310 6000FFF2                     bra     dobitmip
 9595 00.0000A314                      
 9596 00.0000A314 323C0140             bitchg  move    #$140,d1
 9597 00.0000A318 6000FFEA                     bra     dobitmip
 9598 00.0000A31C                      
 9599 00.0000A31C 3F01                 dothebit        move    d1,-(a7)
 9600 00.0000A31E                              ;
 9601 00.0000A31E                              ;make first a long
 9602 00.0000A31E                              ;
 9603 00.0000A31E 3F02                         move    d2,-(a7)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 222
blitz2.s


 9604 00.0000A320 3602                         move    d2,d3
 9605 00.0000A322 7403                         moveq   #3,d2   ;first to long!
 9606 00.0000A324 6100F44A                     bsr     convtypef
 9607 00.0000A328                              ;
 9608 00.0000A328 361F                         move    (a7)+,d3
 9609 00.0000A32A 7401                         moveq   #1,d2   ;second to byte!
 9610 00.0000A32C 527900002B06                 addq    #1,regat
 9611 00.0000A332 6100F44E                     bsr     convtype
 9612 00.0000A336 537900002B06                 subq    #1,regat
 9613 00.0000A33C                              ;
 9614 00.0000A33C 323900002B06                 move    regat,d1
 9615 00.0000A342 3401                         move    d1,d2
 9616 00.0000A344 5242                         addq    #1,d2
 9617 00.0000A346 E14A                         lsl     #8,d2
 9618 00.0000A348 E34A                         lsl     #1,d2
 9619 00.0000A34A 825F                         or      (a7)+,d1
 9620 00.0000A34C 8242                         or      d2,d1
 9621 00.0000A34E 6000F1BC                     bra     pokewd          ;btst regat+1,regat
 9622 00.0000A352                      
 9623 00.0000A352                      ritetod0        ;put regat to d0
 9624 00.0000A352                              ;
 9625 00.0000A352 323900002B06                 move    regat,d1
 9626 00.0000A358 67000012                     beq     .skip
 9627 00.0000A35C 00412000                     or      #$2000,d1
 9628 00.0000A360 6100F1AA                     bsr     pokewd
 9629 00.0000A364 06410201                     add     #$201,d1
 9630 00.0000A368 6100F1A2                     bsr     pokewd
 9631 00.0000A36C 4E75                 .skip   rts
 9632 00.0000A36E                      
 9633 00.0000A36E                      ritefromd0      ;get regat from d0
 9634 00.0000A36E                              ;
 9635 00.0000A36E 323900002B06                 move    regat,d1
 9636 00.0000A374 6700000E                     beq     .skip
 9637 00.0000A378 E149                         lsl     #8,d1
 9638 00.0000A37A E349                         lsl     #1,d1
 9639 00.0000A37C 00412000                     or      #$2000,d1
 9640 00.0000A380 6100F18A                     bsr     pokewd
 9641 00.0000A384 4E75                 .skip   rts
 9642 00.0000A386                      
 9643 00.0000A386 0C79000700002B06     getelement      cmp     #7,regat
 9644 00.0000A38E 65000324                     bcs     getelement2
 9645 00.0000A392 323C3F06                     move    #$3f06,d1
 9646 00.0000A396 B47C0003                     cmp     #3,d2
 9647 00.0000A39A 65000006                     bcs     .skip
 9648 00.0000A39E 323C2F06                     move    #$2f06,d1
 9649 00.0000A3A2 6100F168             .skip   bsr     pokewd
 9650 00.0000A3A6 3F01                         move    d1,-(a7)
 9651 00.0000A3A8                              ;
 9652 00.0000A3A8 537900002B06                 subq    #1,regat
 9653 00.0000A3AE 61000304                     bsr     getelement2
 9654 00.0000A3B2 527900002B06                 addq    #1,regat
 9655 00.0000A3B8                              ;
 9656 00.0000A3B8 323C3E06                     move    #$3e06,d1
 9657 00.0000A3BC B47C0003                     cmp     #3,d2
 9658 00.0000A3C0 65000006                     bcs     .skip2
 9659 00.0000A3C4 323C2E06                     move    #$2e06,d1
 9660 00.0000A3C8 6100F142             .skip2  bsr     pokewd
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 223
blitz2.s


 9661 00.0000A3CC                              ;
 9662 00.0000A3CC 321F                         move    (a7)+,d1
 9663 00.0000A3CE 0241F000                     and     #$f000,d1
 9664 00.0000A3D2 00410C1F                     or      #$c1f,d1
 9665 00.0000A3D6 6000F134                     bra     pokewd
 9666 00.0000A3DA                      
 9667 00.0000A3DA 610002D8             negate  bsr     getelement2
 9668 00.0000A3DE 323C4440                     move    #$4440,d1
 9669 00.0000A3E2 B47C0003                     cmp     #3,d2
 9670 00.0000A3E6 6500001E                     bcs     .doneg
 9671 00.0000A3EA 323C4480                     move    #$4480,d1
 9672 00.0000A3EE B47C0005                     cmp     #5,d2
 9673 00.0000A3F2 65000012                     bcs     .doneg
 9674 00.0000A3F6 B47C0006                     cmp     #6,d2
 9675 00.0000A3FA 6400E124                     bcc     illoperr
 9676 00.0000A3FE 323CFFC4                     move    #-60,d1
 9677 00.0000A402 6000F200                     bra     fdo2
 9678 00.0000A406 827900002B06         .doneg  or      regat,d1
 9679 00.0000A40C 6000F0FE                     bra     pokewd
 9680 00.0000A410                      
 9681 00.0000A410 6100F6D0             bracket bsr     eval4
 9682 00.0000A414 B07C0029                     cmp     #')',d0
 9683 00.0000A418 6700000A                     beq     .done
 9684 00.0000A41C B07C007D                     cmp     #'}',d0
 9685 00.0000A420 6600DFC0                     bne     syntaxerr
 9686 00.0000A424 6000D7E8             .done   bra     getchar3
 9687 00.0000A428                      
 9688 00.0000A428                      notit   ;do NOT.
 9689 00.0000A428                              ;
 9690 00.0000A428 6100F6B8                     bsr     eval4
 9691 00.0000A42C B47C0005                     cmp     #5,d2
 9692 00.0000A430 6400E0EE                     bcc     illoperr
 9693 00.0000A434 323900002B06                 move    regat,d1
 9694 00.0000A43A 00414640                     or      #$4640,d1       ;not.w
 9695 00.0000A43E B47C0003                     cmp     #3,d2
 9696 00.0000A442 6500F0C8                     bcs     pokewd
 9697 00.0000A446 0A4100C0                     eor     #$c0,d1
 9698 00.0000A44A 6000F0C0                     bra     pokewd
 9699 00.0000A44E                      
 9700 00.0000A44E 7405                 fetchpi moveq   #5,d2   ;return Pi.f
 9701 00.0000A450 323900002B06                 move    regat,d1
 9702 00.0000A456 E149                         lsl     #8,d1
 9703 00.0000A458 E349                         lsl     #1,d1
 9704 00.0000A45A 0041203C                     or      #$203c,d1
 9705 00.0000A45E 6100F0AC                     bsr     pokewd  ;move.l #x,dn
 9706 00.0000A462 223CC90FDA42                 move.l  #$c90fda42,d1
 9707 00.0000A468 6100F09A                     bsr     pokel
 9708 00.0000A46C 6000D7A0                     bra     getchar3
 9709 00.0000A470                      
 9710 00.0000A470                              ;stack contains.....
 9711 00.0000A470                              ;pc.l,firstoff.l,optat.l,lasta6.w,0,constgot.w!
 9712 00.0000A470                              ;
 9713 00.0000A470                              ;18 bytes!
 9714 00.0000A470                      
 9715 00.0000A470                      forthstack      ds.b    18*32
 9716 00.0000A6B0 0000A470             forthsp dc.l    forthstack
 9717 00.0000A6B4                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 224
blitz2.s


 9718 00.0000A6B4                      getelement2     ;
 9719 00.0000A6B4                              ;recursive stuff first.....
 9720 00.0000A6B4                              ;
 9721 00.0000A6B4 6100D558                     bsr     getchar3
 9722 00.0000A6B8 B07C0028                     cmp     #'(',d0
 9723 00.0000A6BC 6700FD52                     beq     bracket
 9724 00.0000A6C0 B07C007B                     cmp     #'{',d0
 9725 00.0000A6C4 6700FD4A                     beq     bracket
 9726 00.0000A6C8 B07C002D                     cmp     #'-',d0
 9727 00.0000A6CC 6700FD0C                     beq     negate
 9728 00.0000A6D0 B07C8089                     cmp     #(opnot-opabcd)/$1c+$8000+fnum,d0
 9729 00.0000A6D4 6700FD52                     beq     notit
 9730 00.0000A6D8                              ;
 9731 00.0000A6D8 227AFFD6                     move.l  forthsp(pc),a1
 9732 00.0000A6DC B3FC0000A6B0                 cmp.l   #forthsp,a1
 9733 00.0000A6E2 6400D978                     bcc     conmemerr
 9734 00.0000A6E6                              ;
 9735 00.0000A6E6 22F90000E8F6                 move.l  pc,(a1)+
 9736 00.0000A6EC 22F90000EC56                 move.l  firstoff,(a1)+
 9737 00.0000A6F2 22F90000EC22                 move.l  lasta6,(a1)+
 9738 00.0000A6F8 32F90000EC22                 move    lasta6,(a1)+
 9739 00.0000A6FE 4259                         clr     (a1)+
 9740 00.0000A700                              ;
 9741 00.0000A700 4259                         clr     (a1)+
 9742 00.0000A702 23C90000A6B0                 move.l  a1,forthsp
 9743 00.0000A708                              ;
 9744 00.0000A708                              ;First, we have stuff which won't fuck constgot
 9745 00.0000A708                              ;
 9746 00.0000A708 6100E4AC                     bsr     tstnum
 9747 00.0000A70C 67000B16                     beq     fetchnum
 9748 00.0000A710 B07C002E                     cmp     #'.',d0
 9749 00.0000A714 67000B08                     beq     fetchfrac
 9750 00.0000A718 B07C0023                     cmp     #'#',d0
 9751 00.0000A71C 670001CC                     beq     fetchconst
 9752 00.0000A720 B07C0024                     cmp     #'$',d0
 9753 00.0000A724 67000160                     beq     fetchhex
 9754 00.0000A728 B07C0025                     cmp     #'%',d0
 9755 00.0000A72C 67000192                     beq     fetchbin
 9756 00.0000A730 B07C802F                     cmp     #$8000+47,d0
 9757 00.0000A734 6700008C                     beq     fetchsize
 9758 00.0000A738 B07C80BA                     cmp     #$8007+tnum,d0
 9759 00.0000A73C 6700FD10                     beq     fetchpi
 9760 00.0000A740 B07C80C5                     cmp     #$8000+tnum+18,d0
 9761 00.0000A744 670000F6                     beq     fetchon
 9762 00.0000A748 B07C80C6                     cmp     #$8000+tnum+19,d0
 9763 00.0000A74C 670000F8                     beq     fetchoff
 9764 00.0000A750                              ;
 9765 00.0000A750 32390000E91E                 move    constmode,d1
 9766 00.0000A756 6700001E                     beq     .noasm
 9767 00.0000A75A                              ;
 9768 00.0000A75A 6100E436                     bsr     tstalpha
 9769 00.0000A75E 670007C2                     beq     fetchasm
 9770 00.0000A762 B07C005F                     cmp     #'_',d0
 9771 00.0000A766 670007BA                     beq     fetchasm
 9772 00.0000A76A B07C0022                     cmp     #'"',d0
 9773 00.0000A76E 67000790                     beq     fetchqasm
 9774 00.0000A772                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 225
blitz2.s


 9775 00.0000A772 6000DC6E                     bra     syntaxerr
 9776 00.0000A776                      
 9777 00.0000A776 32390000E32E         .noasm  move    cfetchmode,d1
 9778 00.0000A77C 67000006                     beq     .asmok
 9779 00.0000A780 6000E342                     bra     badconerr       ;we're trying to get a const here!
 9780 00.0000A784 4661                 .asmok  not     -(a1)   ;set forth stack type to non-const
 9781 00.0000A786                              ;
 9782 00.0000A786                              ;Here, we have stuff which will fuck it!
 9783 00.0000A786                              ;
 9784 00.0000A786 6100E40A                     bsr     tstalpha
 9785 00.0000A78A 670007C0                     beq     variable
 9786 00.0000A78E B07C002A                     cmp     #'*',d0
 9787 00.0000A792 670007B8                     beq     variable
 9788 00.0000A796 B07C005C                     cmp     #'\',d0
 9789 00.0000A79A 670007B0                     beq     variable
 9790 00.0000A79E B07C0022                     cmp     #'"',d0
 9791 00.0000A7A2 6700061C                     beq     litstring
 9792 00.0000A7A6 0800000F                     btst    #15,d0
 9793 00.0000A7AA 66000346                     bne     function
 9794 00.0000A7AE B07C0026                     cmp     #'&',d0
 9795 00.0000A7B2 6700015A                     beq     ampersand
 9796 00.0000A7B6 B07C003F                     cmp     #'?',d0
 9797 00.0000A7BA 67000718                     beq     qmark
 9798 00.0000A7BE                              ;
 9799 00.0000A7BE 6000DC22                     bra     syntaxerr
 9800 00.0000A7C2                      
 9801 00.0000A7C2 6100D44A             fetchsize       bsr     getchar3
 9802 00.0000A7C6 B07C002E                     cmp     #'.',d0
 9803 00.0000A7CA 6728                         beq.s   .sizeobj
 9804 00.0000A7CC                              ;
 9805 00.0000A7CC                              ;find size of a var!
 9806 00.0000A7CC                              ;
 9807 00.0000A7CC 6100D476                     bsr     bakup
 9808 00.0000A7D0 3F02                         move    d2,-(a7)
 9809 00.0000A7D2 6100E418                     bsr     makename
 9810 00.0000A7D6 6700DC0A                     beq     syntaxerr
 9811 00.0000A7DA 45F900002B28                 lea     firstvar,a2
 9812 00.0000A7E0 6100E4FA                     bsr     findvar
 9813 00.0000A7E4 6600DC5A                     bne     notypeerr       ;!
 9814 00.0000A7E8 362A0004             .found  move    4(a2),d3
 9815 00.0000A7EC 48C3                         ext.l   d3
 9816 00.0000A7EE 341F                         move    (a7)+,d2
 9817 00.0000A7F0 60000C7C                     bra     fetchnum2
 9818 00.0000A7F4                      
 9819 00.0000A7F4 3F02                 .sizeobj        move    d2,-(a7)
 9820 00.0000A7F6 6100E3F4                     bsr     makename
 9821 00.0000A7FA 6700DBE6                     beq     syntaxerr
 9822 00.0000A7FE 45F90000E760                 lea     alltypes,a2
 9823 00.0000A804 6100E4B8                     bsr     findtype
 9824 00.0000A808 6600DC36                     bne     notypeerr
 9825 00.0000A80C 7600                         moveq   #0,d3
 9826 00.0000A80E B07C005C                     cmp     #'\',d0
 9827 00.0000A812 6600001E                     bne     .jty
 9828 00.0000A816 6100E3D4                     bsr     makename
 9829 00.0000A81A 6700DBC6                     beq     syntaxerr
 9830 00.0000A81E 45EA0004                     lea     4(a2),a2
 9831 00.0000A822 6100E4B8                     bsr     findvar
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 226
blitz2.s


 9832 00.0000A826 6600DCAA                     bne     noofferr
 9833 00.0000A82A 362A0004                     move    4(a2),d3
 9834 00.0000A82E 60000006                     bra     .jty2
 9835 00.0000A832 362A0008             .jty    move    8(a2),d3
 9836 00.0000A836 341F                 .jty2   move    (a7)+,d2
 9837 00.0000A838 60000C34                     bra     fetchnum2
 9838 00.0000A83C                      
 9839 00.0000A83C 76FF                 fetchon moveq   #-1,d3
 9840 00.0000A83E 6100D3CE                     bsr     getchar3
 9841 00.0000A842 60000C2A                     bra     fetchnum2
 9842 00.0000A846                      
 9843 00.0000A846 7600                 fetchoff        moveq   #0,d3
 9844 00.0000A848 6100D3C4                     bsr     getchar3
 9845 00.0000A84C 60000C20                     bra     fetchnum2
 9846 00.0000A850                      
 9847 00.0000A850                      chkhex  ;is d0 a hex number?
 9848 00.0000A850                              ;
 9849 00.0000A850 B07C0030                     cmp     #'0',d0
 9850 00.0000A854 65000020                     bcs     .no
 9851 00.0000A858 B07C0039                     cmp     #'9',d0
 9852 00.0000A85C 63000016                     bls     .yes
 9853 00.0000A860 0240FFDF                     and     #$ffdf,d0
 9854 00.0000A864 B07C0046                     cmp     #'F',d0
 9855 00.0000A868 6200000C                     bhi     .no
 9856 00.0000A86C B07C0041                     cmp     #'A',d0
 9857 00.0000A870 65000004                     bcs     .no
 9858 00.0000A874 B040                 .yes    cmp     d0,d0
 9859 00.0000A876 4E75                 .no     rts
 9860 00.0000A878                      
 9861 00.0000A878 B07C0031             chkbin  cmp     #'1',d0
 9862 00.0000A87C 67000006                     beq     .ok
 9863 00.0000A880 B07C0030                     cmp     #'0',d0
 9864 00.0000A884 4E75                 .ok     rts
 9865 00.0000A886                      
 9866 00.0000A886 6100D386             fetchhex        bsr     getchar3
 9867 00.0000A88A 6100FFC4                     bsr     chkhex
 9868 00.0000A88E 6600DB52                     bne     syntaxerr
 9869 00.0000A892 7600                         moveq   #0,d3
 9870 00.0000A894 B6BC10000000         .loop   cmp.l   #$10000000,d3
 9871 00.0000A89A 6400DBE0                     bcc     overerr
 9872 00.0000A89E E98B                         lsl.l   #4,d3
 9873 00.0000A8A0 04400030                     sub     #48,d0
 9874 00.0000A8A4 B07C0009                     cmp     #9,d0
 9875 00.0000A8A8 63000004                     bls     .skip
 9876 00.0000A8AC 5F40                         subq    #7,d0
 9877 00.0000A8AE 8640                 .skip   or      d0,d3
 9878 00.0000A8B0 6100D35C                     bsr     getchar3
 9879 00.0000A8B4 6100FF9A                     bsr     chkhex
 9880 00.0000A8B8 6700FFDA                     beq     .loop
 9881 00.0000A8BC 60000BB0                     bra     fetchnum2
 9882 00.0000A8C0                      
 9883 00.0000A8C0 6100D34C             fetchbin        bsr     getchar3
 9884 00.0000A8C4 6100FFB2                     bsr     chkbin
 9885 00.0000A8C8 6600DB18                     bne     syntaxerr
 9886 00.0000A8CC 7600                         moveq   #0,d3
 9887 00.0000A8CE E38B                 .loop   lsl.l   #1,d3
 9888 00.0000A8D0 6500DBAA                     bcs     overerr
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 227
blitz2.s


 9889 00.0000A8D4 04400030                     sub     #48,d0
 9890 00.0000A8D8 8640                         or      d0,d3
 9891 00.0000A8DA 6100D332                     bsr     getchar3
 9892 00.0000A8DE 6100FF98                     bsr     chkbin
 9893 00.0000A8E2 6700FFEA                     beq     .loop
 9894 00.0000A8E6 60000B86                     bra     fetchnum2
 9895 00.0000A8EA                      
 9896 00.0000A8EA 3F02                 fetchconst      move    d2,-(a7)
 9897 00.0000A8EC 6100E2FE                     bsr     makename
 9898 00.0000A8F0 6100E3C0                     bsr     findadd
 9899 00.0000A8F4 6600E1B6                     bne     cnferr
 9900 00.0000A8F8 0CAA000000010004             cmp.l   #1,4(a2)
 9901 00.0000A900 6600E1AA                     bne     cnferr
 9902 00.0000A904 262A0008                     move.l  8(a2),d3
 9903 00.0000A908 341F                         move    (a7)+,d2
 9904 00.0000A90A 60000B62                     bra     fetchnum2       ;to right type.
 9905 00.0000A90E                      
 9906 00.0000A90E 61000006             ampersand       bsr     ampersand2
 9907 00.0000A912 7403                         moveq   #3,d2
 9908 00.0000A914 4E75                         rts
 9909 00.0000A916                      
 9910 00.0000A916 6100D2F6             ampersand2      bsr     getchar3
 9911 00.0000A91A 6100EE8C                     bsr     getvname
 9912 00.0000A91E 6100E51C                     bsr     fetchvar
 9913 00.0000A922 6100E7FE                     bsr     calcvar
 9914 00.0000A926                              ;
 9915 00.0000A926 B43C0007                     cmp.b   #7,d2
 9916 00.0000A92A 66000034                     bne     .notst
 9917 00.0000A92E 0802000F                     btst    #15,d2
 9918 00.0000A932 66000016                     bne     .algot2
 9919 00.0000A936 33C3000029D6                 move    d3,stamp2+2
 9920 00.0000A93C 2239000029D4                 move.l  stamp2,d1
 9921 00.0000A942 6100EBB2                     bsr     pokela5s
 9922 00.0000A946 60000030                     bra     .algot
 9923 00.0000A94A 323900002B06         .algot2 move    regat,d1
 9924 00.0000A950 E149                         lsl     #8,d1
 9925 00.0000A952 E349                         lsl     #1,d1
 9926 00.0000A954 8279000029D2                 or      stamp,d1
 9927 00.0000A95A 6100EBB0                     bsr     pokewd
 9928 00.0000A95E 4E75                         rts
 9929 00.0000A960                              ;
 9930 00.0000A960 0802000F             .notst  btst    #15,d2
 9931 00.0000A964 66000012                     bne     .algot
 9932 00.0000A968 33C3000029CA                 move    d3,leaamp+2
 9933 00.0000A96E 2239000029C8                 move.l  leaamp,d1
 9934 00.0000A974 6100EB80                     bsr     pokela5s
 9935 00.0000A978 323900002B06         .algot  move    regat,d1
 9936 00.0000A97E E149                         lsl     #8,d1
 9937 00.0000A980 E349                         lsl     #1,d1
 9938 00.0000A982 8279000029CC                 or      leaamp2,d1
 9939 00.0000A988 6000EB82                     bra     pokewd
 9940 00.0000A98C                      
 9941 00.0000A98C                      doern   ;read err number
 9942 00.0000A98C 323CD200                     move    #ern,d1
 9943 00.0000A990 61001116                     bsr     tokejsr
 9944 00.0000A994 7403                         moveq   #3,d2
 9945 00.0000A996 4E75                         rts
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 228
blitz2.s


 9946 00.0000A998                      
 9947 00.0000A998 206D0000             addrcode        move.l  0(a5),a0
 9948 00.0000A99C D0C0                         add     d0,a0
 9949 00.0000A99E 2008                         move.l  a0,d0
 9950 00.0000A9A0                      addrcodef       ;
 9951 00.0000A9A0                      
 9952 00.0000A9A0                      fetchit
 9953 00.0000A9A0 6100D26C                     bsr     getchar3
 9954 00.0000A9A4                              ;
 9955 00.0000A9A4 3200                         move    d0,d1
 9956 00.0000A9A6 6A00DA3A                     bpl     syntaxerr
 9957 00.0000A9AA 3F02                         move    d2,-(a7)
 9958 00.0000A9AC 0881000F                     bclr    #15,d1
 9959 00.0000A9B0 6100C5A4                     bsr     findtoke
 9960 00.0000A9B4 202A0012                     move.l  18(a2),d0
 9961 00.0000A9B8 4A7208FE                     tst     -2(a2,d0.l)
 9962 00.0000A9BC 6700D806                     beq     freeerr
 9963 00.0000A9C0 341F                         move    (a7)+,d2
 9964 00.0000A9C2 4E75                         rts
 9965 00.0000A9C4                      
 9966 00.0000A9C4 202D0000             usedcode        move.l  0(a5),d0
 9967 00.0000A9C8 6604                         bne.s   ucodeskip
 9968 00.0000A9CA 70FF                         moveq   #-1,d0
 9969 00.0000A9CC 6006                         bra.s   usedcodef
 9970 00.0000A9CE 90AD0000             ucodeskip       sub.l   0(a5),d0
 9971 00.0000A9D2 E048                 ucodediv        lsr     #8,d0
 9972 00.0000A9D4                      usedcodef       ;
 9973 00.0000A9D4                      
 9974 00.0000A9D4 202D0000             usedcode2       move.l  0(a5),d0
 9975 00.0000A9D8 6604                         bne.s   ucodeskip2
 9976 00.0000A9DA 70FF                         moveq   #-1,d0
 9977 00.0000A9DC 6008                         bra.s   usedcodef2
 9978 00.0000A9DE 90AD0000             ucodeskip2      sub.l   0(a5),d0
 9979 00.0000A9E2 E048                         lsr     #8,d0
 9980 00.0000A9E4 E048                 ucodediv2       lsr     #8,d0
 9981 00.0000A9E6                      usedcodef2      ;
 9982 00.0000A9E6                      
 9983 00.0000A9E6 2F00                 usedprep        move.l  d0,-(a7)
 9984 00.0000A9E8                      
 9985 00.0000A9E8 201F                 useddone        move.l  (a7)+,d0
 9986 00.0000A9EA                      
 9987 00.0000A9EA 2000                 usedfix move.l  d0,d0
 9988 00.0000A9EC                      
 9989 00.0000A9EC                      doused  ;return 'used' object.
 9990 00.0000A9EC                              ;
 9991 00.0000A9EC 6100FFB2                     bsr     fetchit
 9992 00.0000A9F0                              ;
 9993 00.0000A9F0 363208FE                     move    -2(a2,d0.l),d3
 9994 00.0000A9F4 B67C0009                     cmp     #9,d3
 9995 00.0000A9F8 64000020                     bcc     .skip
 9996 00.0000A9FC                              ;
 9997 00.0000A9FC                              ;shift 1-8
 9998 00.0000A9FC                              ;
 9999 00.0000A9FC 41FAFFC6                     lea     usedcode(pc),a0
10000 00.0000AA00 43FAFFD2                     lea     usedcodef(pc),a1
10001 00.0000AA04                              ;
10002 00.0000AA04 0268F1FF000E                 and     #$f1ff,ucodediv-usedcode(a0)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 229
blitz2.s


10003 00.0000AA0A 02430007                     and     #7,d3
10004 00.0000AA0E E14B                         lsl     #8,d3
10005 00.0000AA10 E34B                         lsl     #1,d3
10006 00.0000AA12 8768000E                     or      d3,ucodediv-usedcode(a0)
10007 00.0000AA16 6000001A                     bra     .skip2
10008 00.0000AA1A                              ;
10009 00.0000AA1A                      .skip   ;shift 9+
10010 00.0000AA1A                              ;
10011 00.0000AA1A 41FAFFB8                     lea     usedcode2(pc),a0
10012 00.0000AA1E 43FAFFC6                     lea     usedcodef2(pc),a1
10013 00.0000AA22                              ;
10014 00.0000AA22 0268F1FF0010                 and     #$f1ff,ucodediv2-usedcode2(a0)
10015 00.0000AA28 5143                         subq    #8,d3
10016 00.0000AA2A E14B                         lsl     #8,d3
10017 00.0000AA2C E34B                         lsl     #1,d3
10018 00.0000AA2E 87680010                     or      d3,ucodediv2-usedcode2(a0)
10019 00.0000AA32                      .skip2  ;
10020 00.0000AA32 363208FA                     move    -6(a2,d0.l),d3
10021 00.0000AA36 3143000C                     move    d3,ucodeskip-usedcode+2(a0)
10022 00.0000AA3A 5843                         addq    #4,d3
10023 00.0000AA3C 31430002                     move    d3,2(a0)
10024 00.0000AA40                              ;
10025 00.0000AA40 323900002B06                 move    regat,d1
10026 00.0000AA46 6700000A                     beq     .skip3
10027 00.0000AA4A 323AFF9A                     move    usedprep(pc),d1
10028 00.0000AA4E 6100EABC                     bsr     pokewd
10029 00.0000AA52 6100EB4E             .skip3  bsr     pokecode
10030 00.0000AA56 323900002B06                 move    regat,d1
10031 00.0000AA5C 67000016                     beq     .skip4
10032 00.0000AA60 E149                         lsl     #8,d1
10033 00.0000AA62 E349                         lsl     #1,d1
10034 00.0000AA64 827AFF84                     or      usedfix(pc),d1
10035 00.0000AA68 6100EAA2                     bsr     pokewd
10036 00.0000AA6C 323AFF7A                     move    useddone(pc),d1
10037 00.0000AA70 6100EA9A                     bsr     pokewd
10038 00.0000AA74                      .skip4  ;
10039 00.0000AA74 7402                         moveq   #2,d2
10040 00.0000AA76 6000D196                     bra     getchar3
10041 00.0000AA7A                      
10042 00.0000AA7A                      domaximum       ;number of maximums
10043 00.0000AA7A                              ;
10044 00.0000AA7A                              ;eg a=Maximum Shape
10045 00.0000AA7A                              ;
10046 00.0000AA7A 6100FF24                     bsr     fetchit
10047 00.0000AA7E                              ;
10048 00.0000AA7E 7600                         moveq   #0,d3
10049 00.0000AA80 363208FC                     move    -4(a2,d0.l),d3
10050 00.0000AA84 6100D188                     bsr     getchar3
10051 00.0000AA88 600009E4                     bra     fetchnum2
10052 00.0000AA8C                      
10053 00.0000AA8C                      doaddr  ;address of something
10054 00.0000AA8C                              ;eg a.l=Addr Window(0)
10055 00.0000AA8C                              ;
10056 00.0000AA8C 6100D180                     bsr     getchar3        ;get the token
10057 00.0000AA90 3F00                         move    d0,-(a7)
10058 00.0000AA92 6100D17A                     bsr     getchar3        ;and the bracket?
10059 00.0000AA96 B07C0028                     cmp     #'(',d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 230
blitz2.s


10060 00.0000AA9A 6600D946                     bne     syntaxerr
10061 00.0000AA9E 301F                         move    (a7)+,d0
10062 00.0000AAA0 6100189E                     bsr     getmaxel
10063 00.0000AAA4 6100D194                     bsr     reget
10064 00.0000AAA8 B07C0029                     cmp     #')',d0
10065 00.0000AAAC 6600D934                     bne     syntaxerr
10066 00.0000AAB0                              ;
10067 00.0000AAB0                              ;OK, now a2=lib it's from
10068 00.0000AAB0                              ;
10069 00.0000AAB0 41FAFEE6                     lea     addrcode(pc),a0
10070 00.0000AAB4 43FAFEEA                     lea     addrcodef(pc),a1
10071 00.0000AAB8 316AFFFA0002                 move    -6(a2),2(a0)    ;x(a5)
10072 00.0000AABE 32280004                     move    4(a0),d1
10073 00.0000AAC2 0241FFF8                     and     #$fff8,d1
10074 00.0000AAC6 827900002B06                 or      regat,d1
10075 00.0000AACC 31410004                     move    d1,4(a0)                ;add Dregat,a0
10076 00.0000AAD0 32280006                     move    6(a0),d1
10077 00.0000AAD4 0241F1FF                     and     #$f1ff,d1
10078 00.0000AAD8 303900002B06                 move    regat,d0
10079 00.0000AADE E148                         lsl     #8,d0
10080 00.0000AAE0 E348                         lsl     #1,d0
10081 00.0000AAE2 8240                         or      d0,d1
10082 00.0000AAE4 31410006                     move    d1,6(a0)                ;move.l a0,Dregat
10083 00.0000AAE8 6100EAB8                     bsr     pokecode
10084 00.0000AAEC 7403                         moveq   #3,d2           ;now a long
10085 00.0000AAEE 6000D11E                     bra     getchar3
10086 00.0000AAF2                      
10087 00.0000AAF2                      function        ;do a function
10088 00.0000AAF2 B07C80B3                     cmp     #$8000+tnum,d0
10089 00.0000AAF6 62000006                     bhi     .overasm
10090 00.0000AAFA                              ;
10091 00.0000AAFA 6000D8E6                     bra     syntaxerr
10092 00.0000AAFE                              ;
10093 00.0000AAFE B07C80B6             .overasm        cmp     #$8003+tnum,d0
10094 00.0000AB02 6700FE88                     beq     doern
10095 00.0000AB06 B07C80B8                     cmp     #$8005+tnum,d0
10096 00.0000AB0A 6700FF80                     beq     doaddr
10097 00.0000AB0E B07C80C4                     cmp     #$8011+tnum,d0
10098 00.0000AB12 6700FF66                     beq     domaximum
10099 00.0000AB16 B07C80D1                     cmp     #$801e+tnum,d0
10100 00.0000AB1A 6700FED0                     beq     doused
10101 00.0000AB1E                              ;
10102 00.0000AB1E 3F02                         move    d2,-(a7)        ;remember old type!
10103 00.0000AB20 3200                         move    d0,d1
10104 00.0000AB22 0881000F                     bclr    #15,d1
10105 00.0000AB26 6100C42E                     bsr     findtoke
10106 00.0000AB2A 3213                         move    (a3),d1
10107 00.0000AB2C 08010001                     btst    #1,d1
10108 00.0000AB30 6700D8B0                     beq     syntaxerr
10109 00.0000AB34 08010002                     btst    #2,d1
10110 00.0000AB38 660000E0                     bne     amigalib
10111 00.0000AB3C                              ;
10112 00.0000AB3C                      libfunction     ;do a user library function -
10113 00.0000AB3C                              ;eg a=pixel{x,y}
10114 00.0000AB3C                              ;
10115 00.0000AB3C E049                         lsr     #8,d1
10116 00.0000AB3E 082B00030001                 btst    #3,1(a3)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 231
blitz2.s


10117 00.0000AB44 67000006                     beq     .no0
10118 00.0000AB48                              ;
10119 00.0000AB48 61009E40                     bsr     sizespec2
10120 00.0000AB4C                              ;
10121 00.0000AB4C 3F01                 .no0    move    d1,-(a7)
10122 00.0000AB4E B27C0007                     cmp     #7,d1
10123 00.0000AB52 6600000A                     bne     .notst0
10124 00.0000AB56 2F0A                         move.l  a2,-(a7)
10125 00.0000AB58 61000228                     bsr     makesbase
10126 00.0000AB5C 245F                         move.l  (a7)+,a2
10127 00.0000AB5E 61000442             .notst0 bsr     savem
10128 00.0000AB62 3F03                         move    d3,-(a7)        ;the movem regs
10129 00.0000AB64                              ;
10130 00.0000AB64 6100D0A8                     bsr     getchar3
10131 00.0000AB68 7200                         moveq   #0,d1
10132 00.0000AB6A B07C0028                     cmp     #'(',d0
10133 00.0000AB6E 66000010                     bne     .nopars
10134 00.0000AB72 6100BB82                     bsr     countpees
10135 00.0000AB76 4A41                         tst     d1
10136 00.0000AB78 6700D868                     beq     syntaxerr
10137 00.0000AB7C 60000006                     bra     .skip0
10138 00.0000AB80 6100D0C2             .nopars bsr     bakup
10139 00.0000AB84 3F3900002B06         .skip0  move    regat,-(a7)
10140 00.0000AB8A 427900002B06                 clr     regat
10141 00.0000AB90 3F01                         move    d1,-(a7)
10142 00.0000AB92 082B00030001                 btst    #3,1(a3)
10143 00.0000AB98 67000016                     beq     .no2
10144 00.0000AB9C 322F0006                     move    6(a7),d1
10145 00.0000ABA0 00417000                     or      #$7000,d1
10146 00.0000ABA4 6100E966                     bsr     pokewd
10147 00.0000ABA8 527900002B06                 addq    #1,regat
10148 00.0000ABAE 3217                         move    (a7),d1
10149 00.0000ABB0 61009CC6             .no2    bsr     dolibtoke
10150 00.0000ABB4 4A5F                         tst     (a7)+
10151 00.0000ABB6 6700000E                     beq     .skip
10152 00.0000ABBA B07C0029                     cmp     #')',d0
10153 00.0000ABBE 6600D822                     bne     syntaxerr
10154 00.0000ABC2 6100D04A                     bsr     getchar3
10155 00.0000ABC6 321F                 .skip   move    (a7)+,d1
10156 00.0000ABC8 33C100002B06                 move    d1,regat
10157 00.0000ABCE 6700000E                     beq     .skip2
10158 00.0000ABD2 E149                         lsl     #8,d1
10159 00.0000ABD4 E349                         lsl     #1,d1
10160 00.0000ABD6 00412000                     or      #$2000,d1
10161 00.0000ABDA 6100E930                     bsr     pokewd  ;move.l d0,regat
10162 00.0000ABDE                      .skip2  ;
10163 00.0000ABDE 361F                         move    (a7)+,d3
10164 00.0000ABE0 6700001A                     beq     .nomovem
10165 00.0000ABE4 323C4CDF                     move    #$4cdf,d1
10166 00.0000ABE8 6100E922                     bsr     pokewd
10167 00.0000ABEC 7200                         moveq   #0,d1
10168 00.0000ABEE 780F                         moveq   #15,d4
10169 00.0000ABF0 E34B                 .loopsw lsl     #1,d3
10170 00.0000ABF2 E251                         roxr    #1,d1
10171 00.0000ABF4 51CCFFFA                     dbf     d4,.loopsw      
10172 00.0000ABF8 6100E912                     bsr     pokewd  ;poke movem (a7)+...
10173 00.0000ABFC                      .nomovem        ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 232
blitz2.s


10174 00.0000ABFC 341F                         move    (a7)+,d2
10175 00.0000ABFE B47C0007                     cmp     #7,d2
10176 00.0000AC02 66000012                     bne     .notst
10177 00.0000AC06 323900002A08                 move    putstlen,d1
10178 00.0000AC0C 827900002B06                 or      regat,d1
10179 00.0000AC12 6100E8F8                     bsr     pokewd  
10180 00.0000AC16                              ;
10181 00.0000AC16 6000034E             .notst  bra     varcont
10182 00.0000AC1A                      
10183 00.0000AC1A 322B0006             amigalib        move    6(a3),d1
10184 00.0000AC1E 6100BE22                     bsr     uselib  ;get lib for base address
10185 00.0000AC22 6100011C                     bsr     savereg
10186 00.0000AC26 2204                         move.l  d4,d1
10187 00.0000AC28 2F05                         move.l  d5,-(a7)
10188 00.0000AC2A 6100010C                     bsr     pokemovem
10189 00.0000AC2E 3F29000A                     move    10(a1),-(a7)    ;libbase reg
10190 00.0000AC32 504B                         addq    #8,a3
10191 00.0000AC34 3F1B                         move    (a3)+,-(a7)             ;get offset for lib
10192 00.0000AC36 2F0B                         move.l  a3,-(a7)
10193 00.0000AC38 6100CFD4                     bsr     getchar3
10194 00.0000AC3C 3F00                         move    d0,-(a7)        ;remember first bracket....
10195 00.0000AC3E                              ;
10196 00.0000AC3E                              ;collect longs for lib
10197 00.0000AC3E                              ;
10198 00.0000AC3E 7600                         moveq   #0,d3
10199 00.0000AC40 121B                 .loop   move.b  (a3)+,d1
10200 00.0000AC42 6B000026                     bmi     .done
10201 00.0000AC46 7403                         moveq   #3,d2
10202 00.0000AC48 5243                         addq    #1,d3
10203 00.0000AC4A 48E71010                     movem.l d3/a3,-(a7)
10204 00.0000AC4E 6100ED1C                     bsr     peval
10205 00.0000AC52 59790000E9B8                 subq    #4,stackuse     ;readjust stack! it's coming off later!
10206 00.0000AC58 4CDF0808                     movem.l (a7)+,d3/a3
10207 00.0000AC5C B07C002C                     cmp     #',',d0
10208 00.0000AC60 6700FFDE                     beq     .loop
10209 00.0000AC64 4A13                         tst.b   (a3)
10210 00.0000AC66 6A00D77A                     bpl     syntaxerr
10211 00.0000AC6A                              ;
10212 00.0000AC6A 321F                 .done   move    (a7)+,d1
10213 00.0000AC6C 61000096                     bsr     tstbras
10214 00.0000AC70 265F                         move.l  (a7)+,a3
10215 00.0000AC72 5343                         subq    #1,d3
10216 00.0000AC74 6B000048                     bmi     .nopars
10217 00.0000AC78                              ;
10218 00.0000AC78 4A1B                 .toend  tst.b   (a3)+   ;go to end of params
10219 00.0000AC7A 6A00FFFC                     bpl     .toend
10220 00.0000AC7E 534B                         subq    #1,a3
10221 00.0000AC80 7200                 .loop2  moveq   #0,d1
10222 00.0000AC82 1223                         move.b  -(a3),d1
10223 00.0000AC84 08010004                     btst    #4,d1
10224 00.0000AC88 66000020                     bne     .addreg
10225 00.0000AC8C B27900002B06                 cmp     regat,d1
10226 00.0000AC92 6400000A                     bcc     .nomovem
10227 00.0000AC96 03C5                         bset    d1,d5
10228 00.0000AC98 700F                         moveq   #15,d0
10229 00.0000AC9A 9041                         sub     d1,d0
10230 00.0000AC9C 01C4                         bset    d0,d4
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 233
blitz2.s


10231 00.0000AC9E E149                 .nomovem        lsl     #8,d1
10232 00.0000ACA0 E349                         lsl     #1,d1
10233 00.0000ACA2 0041201F                     or      #$201f,d1
10234 00.0000ACA6 6000000E                     bra     .gotit
10235 00.0000ACAA 02410007             .addreg and     #7,d1
10236 00.0000ACAE E149                         lsl     #8,d1
10237 00.0000ACB0 E349                         lsl     #1,d1
10238 00.0000ACB2 0041205F                     or      #$205f,d1
10239 00.0000ACB6 6100E854             .gotit  bsr     pokewd
10240 00.0000ACBA 51CBFFC4                     dbf     d3,.loop2
10241 00.0000ACBE                              ;
10242 00.0000ACBE 33DF00002A5C         .nopars move    (a7)+,libjsr+2
10243 00.0000ACC4 33DF00002A58                 move    (a7)+,libbase+2
10244 00.0000ACCA 223900002A56                 move.l  libbase,d1
10245 00.0000ACD0 6100E832                     bsr     pokel
10246 00.0000ACD4 223900002A5A                 move.l  libjsr,d1
10247 00.0000ACDA 6100E828                     bsr     pokel
10248 00.0000ACDE 323900002B06                 move    regat,d1
10249 00.0000ACE4 6700000E                     beq     .nofin
10250 00.0000ACE8 E149                         lsl     #8,d1
10251 00.0000ACEA E349                         lsl     #1,d1
10252 00.0000ACEC 00412000                     or      #$2000,d1
10253 00.0000ACF0 6100E81A                     bsr     pokewd
10254 00.0000ACF4 221F                 .nofin  move.l  (a7)+,d1
10255 00.0000ACF6 61000040                     bsr     pokemovem
10256 00.0000ACFA 7403                         moveq   #3,d2
10257 00.0000ACFC 6100CF3C                     bsr     reget
10258 00.0000AD00 60000264                     bra     varcont
10259 00.0000AD04                      
10260 00.0000AD04                      tstbras ;chk that d1 (first bra char) and d0 (last)
10261 00.0000AD04                              ;are consistent with d3 (number of parameters)
10262 00.0000AD04                              ;also, skip last if nec.
10263 00.0000AD04                              ;
10264 00.0000AD04 4A43                         tst     d3
10265 00.0000AD06 67000016                     beq     .nopars
10266 00.0000AD0A B27C0028                     cmp     #'(',d1
10267 00.0000AD0E 6600D6D2                     bne     syntaxerr
10268 00.0000AD12 B07C0029                     cmp     #')',d0
10269 00.0000AD16 6600D6CA                     bne     syntaxerr
10270 00.0000AD1A 6000CEF2                     bra     getchar3
10271 00.0000AD1E B27C0028             .nopars cmp     #'(',d1
10272 00.0000AD22 66000012                     bne     .skip
10273 00.0000AD26 6100CEE6                     bsr     getchar3
10274 00.0000AD2A B07C0029                     cmp     #')',d0
10275 00.0000AD2E 6600D6B2                     bne     syntaxerr
10276 00.0000AD32 6000CEDA                     bra     getchar3
10277 00.0000AD36 4E75                 .skip   rts
10278 00.0000AD38                      
10279 00.0000AD38 4A41                 pokemovem       tst     d1
10280 00.0000AD3A 6600E7C8                     bne     pokel
10281 00.0000AD3E 4E75                         rts
10282 00.0000AD40                      
10283 00.0000AD40                      savereg ;set up d4 for movem -(a7) and d5 for movem (a7)+
10284 00.0000AD40 383C48E7                     move    #$48e7,d4
10285 00.0000AD44 4844                         swap    d4
10286 00.0000AD46 4244                         clr     d4
10287 00.0000AD48 3A3C4CDF                     move    #$4cdf,d5
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 234
blitz2.s


10288 00.0000AD4C 4845                         swap    d5
10289 00.0000AD4E 4245                         clr     d5
10290 00.0000AD50 323900002B06                 move    regat,d1
10291 00.0000AD56 6700001C                     beq     .skip
10292 00.0000AD5A 08C4000F                     bset    #15,d4
10293 00.0000AD5E 08C50000                     bset    #0,d5
10294 00.0000AD62 B27C0002                     cmp     #2,d1
10295 00.0000AD66 6500000A                     bcs     .skip2
10296 00.0000AD6A 08C4000E             .skip3  bset    #14,d4
10297 00.0000AD6E 08C50001                     bset    #1,d5
10298 00.0000AD72 4E75                 .skip2  rts
10299 00.0000AD74 4A790000AD80         .skip   tst     fuckpos
10300 00.0000AD7A 6600FFEE                     bne     .skip3
10301 00.0000AD7E 4E75                         rts
10302 00.0000AD80                      
10303 00.0000AD80 0000                 fuckpos dc      0
10304 00.0000AD82                      
10305 00.0000AD82 32390000EC48         makesbase:      move    sbasegot,d1
10306 00.0000AD88 6700001E                     beq     .skip
10307 00.0000AD8C                              ;
10308 00.0000AD8C                              ;S base has been got, was it for this Eval?
10309 00.0000AD8C                              ;
10310 00.0000AD8C 323A3C20                     move    sbgot(pc),d1
10311 00.0000AD90 66000014                     bne     .skip2
10312 00.0000AD94                              ;
10313 00.0000AD94                              ;No, push it on da stack!
10314 00.0000AD94                              ;
10315 00.0000AD94 33FC00020000E9AE             move    #2,sbgot        
10316 00.0000AD9C 3239000029EC                 move    movea3a7,d1
10317 00.0000ADA2 6000E768                     bra     pokewd
10318 00.0000ADA6 4E75                 .skip2  rts
10319 00.0000ADA8                              ;
10320 00.0000ADA8                      .skip   ;no sbase got at all!
10321 00.0000ADA8                              ;
10322 00.0000ADA8 33FCFFFF0000EC48             move    #-1,sbasegot
10323 00.0000ADB0 33FC00010000E9AE             move    #1,sbgot        ;voodoo magic! - Will it work?
10324 00.0000ADB8 323CC601                     move    #workstart,d1
10325 00.0000ADBC 60000CEA                     bra     tokejsr
10326 00.0000ADC0                      
10327 00.0000ADC0 6100FFC0             litstring       bsr     makesbase
10328 00.0000ADC4 23F90000E8EE0000EC4A         move.l  data1,litdata1
10329 00.0000ADCE 6100C68A                     bsr     pokedata1
10330 00.0000ADD2 6100C686                     bsr     pokedata1
10331 00.0000ADD6 7400                         moveq   #0,d2
10332 00.0000ADD8 6100CE34             .loop   bsr     getchar3
10333 00.0000ADDC 4A40                         tst     d0
10334 00.0000ADDE 6700D444                     beq     notqerr
10335 00.0000ADE2 B07C0022                     cmp     #'"',d0
10336 00.0000ADE6 6700000E                     beq     .done
10337 00.0000ADEA 5242                         addq    #1,d2
10338 00.0000ADEC 3200                         move    d0,d1
10339 00.0000ADEE 6100C638                     bsr     pokedata1b
10340 00.0000ADF2 6000FFE4                     bra     .loop
10341 00.0000ADF6 32390000E858         .done   move    nomemleft,d1
10342 00.0000ADFC 6600000C                     bne     .skip
10343 00.0000AE00 20790000EC4A                 move.l  litdata1,a0
10344 00.0000AE06 4258                         clr     (a0)+
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 235
blitz2.s


10345 00.0000AE08 3082                         move    d2,(a0)
10346 00.0000AE0A 52B90000E8EE         .skip   addq.l  #1,data1
10347 00.0000AE10 08B900000000E8F1             bclr    #0,data1+3
10348 00.0000AE18 6100008A                     bsr     makelit
10349 00.0000AE1C 7407                         moveq   #7,d2
10350 00.0000AE1E 6000CDEE                     bra     getchar3
10351 00.0000AE22                      
10352 00.0000AE22 6100DDC4             makealab        bsr     makename2
10353 00.0000AE26 6100DE8A             makealab2       bsr     findadd
10354 00.0000AE2A 6700001E                     beq     .found
10355 00.0000AE2E                              ;
10356 00.0000AE2E 6100DE14                     bsr     addhere
10357 00.0000AE32 42AA0004                     clr.l   4(a2)   ;no refs
10358 00.0000AE36 42AA0008                     clr.l   8(a2)   ;not created yet (no PC)
10359 00.0000AE3A 42AA000C                     clr.l   12(a2)  ;no data label
10360 00.0000AE3E 35790000E9E80010             move    linenumat,16(a2)        ;context
10361 00.0000AE46 6000000A                     bra     .makeit
10362 00.0000AE4A                              ;
10363 00.0000AE4A 4AAA0008             .found  tst.l   8(a2)
10364 00.0000AE4E 66000038                     bne     .gotit  ;already made
10365 00.0000AE52                              ;
10366 00.0000AE52                              ;create an oustanding reference to this label!
10367 00.0000AE52                              ;
10368 00.0000AE52                      .makeit ;
10369 00.0000AE52 2C780004                     move.l  4.w,a6
10370 00.0000AE56 700C                         moveq   #12,d0
10371 00.0000AE58 7201                         moveq   #1,d1
10372 00.0000AE5A 4EB900004B6C                 jsr     doallocmem
10373 00.0000AE60 2040                         move.l  d0,a0
10374 00.0000AE62 20AA0004                     move.l  4(a2),(a0)
10375 00.0000AE66 25480004                     move.l  a0,4(a2)
10376 00.0000AE6A 21790000E8F60004             move.l  pc,4(a0)
10377 00.0000AE72 54A80004                     addq.l  #2,4(a0)
10378 00.0000AE76 31790000D2DA0008             move    procnum,8(a0)
10379 00.0000AE7E 31790000E9E8000A             move    linenumat,10(a0)
10380 00.0000AE86 4E75                         rts
10381 00.0000AE88                              ;
10382 00.0000AE88 222A0004             .gotit  move.l  4(a2),d1
10383 00.0000AE8C 08010000                     btst    #0,d1
10384 00.0000AE90 6600CEE2                     bne     illlaberr
10385 00.0000AE94 32390000D2DA                 move    procnum,d1
10386 00.0000AE9A B26A0010                     cmp     16(a2),d1
10387 00.0000AE9E 6600CEB0                     bne     referr
10388 00.0000AEA2                              ;
10389 00.0000AEA2 4E75                 .skip   rts
10390 00.0000AEA4                      
10391 00.0000AEA4                      makelit ;put lit string from d3 (data1) into stringbuff
10392 00.0000AEA4                              ;
10393 00.0000AEA4 3F00                         move    d0,-(a7)
10394 00.0000AEA6 323900002AB0                 move    numtoa0,d1
10395 00.0000AEAC 6100E65E                     bsr     pokewd
10396 00.0000AEB0 6100CA6A                     bsr     addoff
10397 00.0000AEB4 22390000EC4A                 move.l  litdata1,d1
10398 00.0000AEBA 6100E648                     bsr     pokel
10399 00.0000AEBE 323900002A8E                 move    pushlen,d1
10400 00.0000AEC4 6100E646                     bsr     pokewd
10401 00.0000AEC8 323CC600                     move    #copstring,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 236
blitz2.s


10402 00.0000AECC 61000BDA                     bsr     tokejsr
10403 00.0000AED0 301F                         move    (a7)+,d0
10404 00.0000AED2 4E75                         rts
10405 00.0000AED4                      
10406 00.0000AED4 6100CD38             qmark   bsr     getchar3
10407 00.0000AED8 6100FF48                     bsr     makealab
10408 00.0000AEDC                              ;
10409 00.0000AEDC 323900002B06                 move    regat,d1
10410 00.0000AEE2 E149                         lsl     #8,d1
10411 00.0000AEE4 E349                         lsl     #1,d1
10412 00.0000AEE6 0041203C                     or      #$203c,d1
10413 00.0000AEEA 6100E620                     bsr     pokewd  ;create move.l #loc,dn
10414 00.0000AEEE 6100CA2C                     bsr     addoff
10415 00.0000AEF2 222A0008                     move.l  8(a2),d1
10416 00.0000AEF6 6100E60C                     bsr     pokel
10417 00.0000AEFA 7403                         moveq   #3,d2
10418 00.0000AEFC 6000CD3C                     bra     reget
10419 00.0000AF00                      
10420 00.0000AF00                      ;variable       
10421 00.0000AF00                      ;       ;
10422 00.0000AF00                      ;       cmp     #6,d2
10423 00.0000AF00                      ;       bne     calcadd
10424 00.0000AF00                      ;       ;
10425 00.0000AF00                      ;       ;get address for goto Etc!
10426 00.0000AF00                      ;       ;
10427 00.0000AF00                      ;agoto  movem.l a5/d2/d0,-(a7)
10428 00.0000AF00                      ;       bsr     makename2
10429 00.0000AF00                      ;       cmp     #'.',d0
10430 00.0000AF00                      ;       bne     .nottype
10431 00.0000AF00                      ;       movem.l (a7)+,a5/d2/d0
10432 00.0000AF00                      ;       bra     calcadd
10433 00.0000AF00                      ;       ;
10434 00.0000AF00                      ;.nottype       lea     12(a7),a7
10435 00.0000AF00                      ;       bsr     makealab2
10436 00.0000AF00                      ;       ;
10437 00.0000AF00                      ;       move    regat,d1
10438 00.0000AF00                      ;       lsl     #8,d1
10439 00.0000AF00                      ;       lsl     #1,d1
10440 00.0000AF00                      ;       or      #$203c,d1
10441 00.0000AF00                      ;       bsr     pokewd  ;create move.l #loc,dn
10442 00.0000AF00                      ;       bsr     addoff
10443 00.0000AF00                      ;       move.l  8(a2),d1
10444 00.0000AF00                      ;       bsr     pokel
10445 00.0000AF00                      ;       moveq   #6,d2
10446 00.0000AF00                      ;       bra     reget
10447 00.0000AF00                              ;
10448 00.0000AF00                      
10449 00.0000AF00 7600                 fetchqasm       moveq   #0,d3
10450 00.0000AF02 6100CD0A             .loop   bsr     getchar3
10451 00.0000AF06 6700D4DA                     beq     syntaxerr
10452 00.0000AF0A B07C0022                     cmp     #'"',d0
10453 00.0000AF0E 6700000A                     beq     .done
10454 00.0000AF12 E18B                         lsl.l   #8,d3
10455 00.0000AF14 1600                         move.b  d0,d3
10456 00.0000AF16 6000FFEA                     bra     .loop
10457 00.0000AF1A 6100CCF2             .done   bsr     getchar3
10458 00.0000AF1E 6000054E                     bra     fetchnum2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 237
blitz2.s


10459 00.0000AF22                              
10460 00.0000AF22 3F02                 fetchasm        move    d2,-(a7)
10461 00.0000AF24 6100DCC2                     bsr     makename2       ;get the things name
10462 00.0000AF28 6100DD88                     bsr     findadd
10463 00.0000AF2C 6600DB7E                     bne     cnferr
10464 00.0000AF30 262A0008                     move.l  8(a2),d3        ;val.
10465 00.0000AF34 0CAA000000010004             cmp.l   #1,4(a2)
10466 00.0000AF3C 67000008                     beq     .npc
10467 00.0000AF40 46790000E920                 not     asmtype
10468 00.0000AF46 341F                 .npc    move    (a7)+,d2
10469 00.0000AF48 60000524                     bra     fetchnum2
10470 00.0000AF4C                      
10471 00.0000AF4C                      variable:       ;
10472 00.0000AF4C 3F02                         move    d2,-(a7)        ;remember old type
10473 00.0000AF4E 6100E858                     bsr     getvname
10474 00.0000AF52 B07C007B                     cmp     #'{',d0
10475 00.0000AF56 67000086                     beq     afunction
10476 00.0000AF5A 6100DEE0                     bsr     fetchvar
10477 00.0000AF5E 6100E1C2                     bsr     calcvar
10478 00.0000AF62 610001EC                     bsr     variable2
10479 00.0000AF66 B47C0001             varcont cmp     #1,d2
10480 00.0000AF6A 66000010                     bne     .notabyte
10481 00.0000AF6E                              ;
10482 00.0000AF6E                              ;ALWAYS CONVERT BYTE TO WORD.
10483 00.0000AF6E                              ;
10484 00.0000AF6E 323900002B06                 move    regat,d1
10485 00.0000AF74 00414880                     or      #$4880,d1       ;ext.w Dn
10486 00.0000AF78 6100E592                     bsr     pokewd
10487 00.0000AF7C                              ;
10488 00.0000AF7C 361F                 .notabyte       move    (a7)+,d3        ;old type
10489 00.0000AF7E 6700001E                     beq     .done   ;type not set yet...
10490 00.0000AF82                                              ;it is now!
10491 00.0000AF82 B67C0003                     cmp     #3,d3
10492 00.0000AF86 6600000A                     bne     .nob
10493 00.0000AF8A B47C0004                     cmp     #4,d2
10494 00.0000AF8E 67000008                     beq     .conv2
10495 00.0000AF92                              ;
10496 00.0000AF92 B642                 .nob    cmp     d2,d3
10497 00.0000AF94 63000008                     bls     .done   
10498 00.0000AF98 C543                 .conv2  exg     d2,d3
10499 00.0000AF9A 6100E7E6                     bsr     convtype        ;bump up new type to old....
10500 00.0000AF9E 6000CC9A             .done   bra     reget
10501 00.0000AFA2                      
10502 00.0000AFA2 7600                 savem   moveq   #0,d3
10503 00.0000AFA4 323900002B06                 move    regat,d1
10504 00.0000AFAA 6700001C                     beq     .skip
10505 00.0000AFAE 5341                         subq    #1,d1
10506 00.0000AFB0 E28B                 .loop   lsr.l   #1,d3
10507 00.0000AFB2 08C3000F                     bset    #15,d3
10508 00.0000AFB6 51C9FFF8                     dbf     d1,.loop
10509 00.0000AFBA 323C48E7                     move    #$48e7,d1
10510 00.0000AFBE 6100E54C                     bsr     pokewd
10511 00.0000AFC2 3203                         move    d3,d1
10512 00.0000AFC4 6000E546                     bra     pokewd
10513 00.0000AFC8 4E75                 .skip   rts     
10514 00.0000AFCA                              
10515 00.0000AFCA 2F01                 makefjsr        move.l  d1,-(a7)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 238
blitz2.s


10516 00.0000AFCC 323C4EB9                     move    #$4eb9,d1
10517 00.0000AFD0 6100E53A                     bsr     pokewd
10518 00.0000AFD4 6100C946                     bsr     addoff
10519 00.0000AFD8 221F                         move.l  (a7)+,d1
10520 00.0000AFDA 6000E528                     bra     pokel
10521 00.0000AFDE                      
10522 00.0000AFDE                      afunction:      ;do a local function -
10523 00.0000AFDE                              ;eg a=pixel{x,y}
10524 00.0000AFDE                              ;
10525 00.0000AFDE 6100DCE4                     bsr     findproc
10526 00.0000AFE2 6600D8B4                     bne     noprocerr
10527 00.0000AFE6 7200                         moveq   #0,d1
10528 00.0000AFE8 122A0005                     move.b  5(a2),d1
10529 00.0000AFEC 6B00D912                     bmi     illprocerr
10530 00.0000AFF0 3F01                         move    d1,-(a7)
10531 00.0000AFF2 7200                         moveq   #0,d1
10532 00.0000AFF4 122A0004                     move.b  4(a2),d1
10533 00.0000AFF8 E849                         lsr     #4,d1
10534 00.0000AFFA 6700000A                     beq     .skip
10535 00.0000AFFE E549                         lsl     #2,d1
10536 00.0000B000 93790000E9B8                 sub     d1,stackuse
10537 00.0000B006                      .skip   ;
10538 00.0000B006 0C570007                     cmp     #7,(a7) ;function type!
10539 00.0000B00A 6608                         bne.s   .sss
10540 00.0000B00C 2F0A                         move.l  a2,-(a7)
10541 00.0000B00E 6100FD72                     bsr     makesbase
10542 00.0000B012 245F                         move.l  (a7)+,a2
10543 00.0000B014 3F390000EC48         .sss    move    sbasegot,-(a7)
10544 00.0000B01A 6704                         beq.s   .sssz
10545 00.0000B01C 6100E838                     bsr     dopusha3
10546 00.0000B020                      .sssz   ;
10547 00.0000B020 6100FF80                     bsr     savem
10548 00.0000B024 3F03                         move    d3,-(a7)                ;the movem regs
10549 00.0000B026                              ;
10550 00.0000B026 222A000E                     move.l  14(a2),d1       ;pc of function call
10551 00.0000B02A 4A2A0004                     tst.b   4(a2)
10552 00.0000B02E 6600000E                     bne     .somepars
10553 00.0000B032 6100FF96                     bsr     makefjsr
10554 00.0000B036 6100CBD6                     bsr     getchar3
10555 00.0000B03A 60000030                     bra     .nopars
10556 00.0000B03E 3F3900002B06         .somepars       move    regat,-(a7)     ;old regat
10557 00.0000B044 2F01                         move.l  d1,-(a7)
10558 00.0000B046 7000                         moveq   #0,d0
10559 00.0000B048 102A0004                     move.b  4(a2),d0
10560 00.0000B04C 45EA0016                     lea     22(a2),a2               ;pointer to var desc
10561 00.0000B050 427900002B06                 clr     regat
10562 00.0000B056 6100B798                     bsr     fetchpees2
10563 00.0000B05A                              ;
10564 00.0000B05A 4EB90000BA86                 jsr     chkstak
10565 00.0000B060 221F                         move.l  (a7)+,d1        
10566 00.0000B062 6100FF66                     bsr     makefjsr
10567 00.0000B066 33DF00002B06                 move    (a7)+,regat
10568 00.0000B06C                              ;
10569 00.0000B06C B07C007D             .nopars cmp     #'}',d0
10570 00.0000B070 6600D370                     bne     syntaxerr
10571 00.0000B074                              ;
10572 00.0000B074 323900002B06                 move    regat,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 239
blitz2.s


10573 00.0000B07A 6700000E                     beq     .nopars3
10574 00.0000B07E E149                         lsl     #8,d1
10575 00.0000B080 E349                         lsl     #1,d1
10576 00.0000B082 00412000                     or      #$2000,d1
10577 00.0000B086 6100E484                     bsr     pokewd  ;move.l d0,regat
10578 00.0000B08A                      .nopars3        ;
10579 00.0000B08A 361F                         move    (a7)+,d3
10580 00.0000B08C 6700001A                     beq     .nomovem
10581 00.0000B090 323C4CDF                     move    #$4cdf,d1
10582 00.0000B094 6100E476                     bsr     pokewd
10583 00.0000B098 7200                         moveq   #0,d1
10584 00.0000B09A 780F                         moveq   #15,d4
10585 00.0000B09C E34B                 .loopsw lsl     #1,d3
10586 00.0000B09E E251                         roxr    #1,d1
10587 00.0000B0A0 51CCFFFA                     dbf     d4,.loopsw      
10588 00.0000B0A4 6100E466                     bsr     pokewd  ;poke movem (a7)+...
10589 00.0000B0A8                      .nomovem        ;
10590 00.0000B0A8 321F                         move    (a7)+,d1
10591 00.0000B0AA 6726                         beq.s   .nores
10592 00.0000B0AC 0C570007                     cmp     #7,(a7)
10593 00.0000B0B0 6712                         beq.s   .issb
10594 00.0000B0B2                              ;not a string...set a3 back to start of any strings...
10595 00.0000B0B2 41F900002AAC                 lea     geta3,a0
10596 00.0000B0B8 43F900002AB0                 lea     geta3f,a1
10597 00.0000B0BE 6100E4E2                     bsr     pokecode
10598 00.0000B0C2 600A                         bra.s   .nosb
10599 00.0000B0C4                      .issb   ;is a string, wack off last '0'
10600 00.0000B0C4 32390000B0F4                 move    deca3,d1
10601 00.0000B0CA 6100E440                     bsr     pokewd
10602 00.0000B0CE 6100E79E             .nosb   bsr     dopulla3        ;fix up string base
10603 00.0000B0D2                      .nores  ;
10604 00.0000B0D2 341F                         move    (a7)+,d2        ;what it returns!
10605 00.0000B0D4 B47C0007                     cmp     #7,d2
10606 00.0000B0D8 66000012                     bne     .notst
10607 00.0000B0DC 323900002A08                 move    putstlen,d1
10608 00.0000B0E2 827900002B06                 or      regat,d1
10609 00.0000B0E8 6100E422                     bsr     pokewd
10610 00.0000B0EC                              ;
10611 00.0000B0EC 6100CB20             .notst  bsr     getchar3
10612 00.0000B0F0                              ;
10613 00.0000B0F0 6000FE74                     bra     varcont
10614 00.0000B0F4                      
10615 00.0000B0F4 534B                 deca3   subq    #1,a3
10616 00.0000B0F6                      
10617 00.0000B0F6                      stvar   ;handle string variable get!
10618 00.0000B0F6                              ;
10619 00.0000B0F6 6100FC8A                     bsr     makesbase
10620 00.0000B0FA 0802000F                     btst    #15,d2
10621 00.0000B0FE 66000012                     bne     .already
10622 00.0000B102 33C300002A92                 move    d3,leaa5d3a2+2
10623 00.0000B108 223900002A90                 move.l  leaa5d3a2,d1
10624 00.0000B10E 6100E3E6                     bsr     pokela5s
10625 00.0000B112 323900002B06         .already        move    regat,d1
10626 00.0000B118 E149                         lsl     #8,d1
10627 00.0000B11A E349                         lsl     #1,d1
10628 00.0000B11C 00417000                     or      #$7000,d1
10629 00.0000B120 41F900002A74                 lea     stvarget2,a0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 240
blitz2.s


10630 00.0000B126 3081                         move    d1,(a0)
10631 00.0000B128 323900002B06                 move    regat,d1
10632 00.0000B12E 0268FFF80002                 and     #$fff8,2(a0)
10633 00.0000B134 83680002                     or      d1,2(a0)
10634 00.0000B138 43F900002A84                 lea     stvarget2f,a1
10635 00.0000B13E 6100E462                     bsr     pokecode
10636 00.0000B142 323CC600                     move    #copstring,d1
10637 00.0000B146 61000960                     bsr     tokejsr
10638 00.0000B14A 7407                         moveq   #7,d2
10639 00.0000B14C 6000CAEC                     bra     reget
10640 00.0000B150                      
10641 00.0000B150 B43C0007             variable2       cmp.b   #7,d2
10642 00.0000B154 6700FFA0                     beq     stvar
10643 00.0000B158 323900002B06                 move    regat,d1
10644 00.0000B15E E149                         lsl     #8,d1
10645 00.0000B160 E349                         lsl     #1,d1
10646 00.0000B162 0802000E                     btst    #14,d2
10647 00.0000B166 66000012                     bne     .pointer
10648 00.0000B16A 4A02                         tst.b   d2
10649 00.0000B16C 66000010                     bne     .skip2
10650 00.0000B170 7403                         moveq   #3,d2
10651 00.0000B172 0041200A                     or      #$200a,d1
10652 00.0000B176 6000E394                     bra     pokewd
10653 00.0000B17A 143C0003             .pointer        move.b  #3,d2
10654 00.0000B17E 0802000F             .skip2  btst    #15,d2
10655 00.0000B182 67000016                     beq     .simpvar
10656 00.0000B186 827900002A6E                 or      movea2dn,d1
10657 00.0000B18C 61000024                     bsr     .size
10658 00.0000B190 6100E37A                     bsr     pokewd
10659 00.0000B194                              ;
10660 00.0000B194 024200FF             .more   and     #255,d2
10661 00.0000B198 4E75                         rts
10662 00.0000B19A                              ;
10663 00.0000B19A 827900002A70         .simpvar        or      moved3a5dn,d1
10664 00.0000B1A0 61000010                     bsr     .size
10665 00.0000B1A4 6100E31A                     bsr     pokewda5s
10666 00.0000B1A8 3203                         move    d3,d1
10667 00.0000B1AA 6100E360                     bsr     pokewd
10668 00.0000B1AE 6000FFE4                     bra     .more
10669 00.0000B1B2                              ;
10670 00.0000B1B2                      .size   ;correct for size
10671 00.0000B1B2                              ;       
10672 00.0000B1B2 0802000E                     btst    #14,d2
10673 00.0000B1B6 66000012                     bne     .long
10674 00.0000B1BA B43C0001                     cmp.b   #1,d2
10675 00.0000B1BE 6700000C                     beq     .byte
10676 00.0000B1C2 B43C0002                     cmp.b   #2,d2
10677 00.0000B1C6 6700000A                     beq     .word
10678 00.0000B1CA 4E75                 .long   rts
10679 00.0000B1CC 0A413000             .byte   eor     #$3000,d1
10680 00.0000B1D0 4E75                         rts
10681 00.0000B1D2 00411000             .word   or      #$1000,d1
10682 00.0000B1D6 4E75                         rts
10683 00.0000B1D8                      
10684 00.0000B1D8                      ;-----------fetch number and update type if necessary!----------;
10685 00.0000B1D8                      
10686 00.0000B1D8 33FCFFFF0000B3DA     fetchdata       move    #-1,dfetch
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 241
blitz2.s


10687 00.0000B1E0 6100CA2C                     bsr     getchar3
10688 00.0000B1E4 B07C002D                     cmp     #'-',d0
10689 00.0000B1E8 6600001C                     bne     .datado
10690 00.0000B1EC 6100CA20                     bsr     getchar3
10691 00.0000B1F0 61000014                     bsr     .datado
10692 00.0000B1F4                              ;
10693 00.0000B1F4 B47C0005                     cmp     #5,d2
10694 00.0000B1F8 64000006                     bcc     .nfp
10695 00.0000B1FC 4480                         neg.l   d0
10696 00.0000B1FE 4E75                         rts
10697 00.0000B200                      .nfp    ;negate floating point data!
10698 00.0000B200 08400007                     bchg    #7,d0
10699 00.0000B204 4E75                         rts
10700 00.0000B206                      
10701 00.0000B206 B07C0024             .datado cmp     #'$',d0
10702 00.0000B20A 6700F67A                     beq     fetchhex
10703 00.0000B20E B07C0025                     cmp     #'%',d0
10704 00.0000B212 6700F6AC                     beq     fetchbin
10705 00.0000B216                              ;
10706 00.0000B216 B07C002E             .doit   cmp     #'.',d0
10707 00.0000B21A 66000008                     bne     fetchnum
10708 00.0000B21E                              ;
10709 00.0000B21E 7600                 fetchfrac       moveq   #0,d3
10710 00.0000B220 60000050                     bra     fetchpoint2
10711 00.0000B224                      
10712 00.0000B224                      fetchnum        ;
10713 00.0000B224 7600                         moveq   #0,d3
10714 00.0000B226                              ;
10715 00.0000B226 6100017E                     bsr     fetchdec
10716 00.0000B22A                              ;
10717 00.0000B22A B07C002E                     cmp     #'.',d0
10718 00.0000B22E 67000038                     beq     fetchpoint
10719 00.0000B232 00400020                     or      #32,d0
10720 00.0000B236 B07C0065                     cmp     #'e',d0
10721 00.0000B23A 66000232                     bne     fetchnum2
10722 00.0000B23E B6BC00800000                 cmp.l   #$800000,d3
10723 00.0000B244 6400D236                     bcc     overerr
10724 00.0000B248 7CFF                         moveq   #-1,d6
10725 00.0000B24A 2003                         move.l  d3,d0
10726 00.0000B24C 2C7900002B02                 move.l  maths,a6
10727 00.0000B252 4EAEFFDC                     jsr     -36(a6) ;int to ffp
10728 00.0000B256 2600                         move.l  d0,d3
10729 00.0000B258 6100008C                     bsr     dothee
10730 00.0000B25C 6100C9DC                     bsr     reget
10731 00.0000B260 6100021E                     bsr     consttype2
10732 00.0000B264 60000176                     bra     fetchnum3
10733 00.0000B268                              ;
10734 00.0000B268 B6BC00800000         fetchpoint      cmp.l   #$800000,d3
10735 00.0000B26E 6400D20C                     bcc     overerr
10736 00.0000B272                              ;
10737 00.0000B272 7CFF                 fetchpoint2     moveq   #-1,d6  ;now a float.
10738 00.0000B274 2003                         move.l  d3,d0
10739 00.0000B276 2C7900002B02                 move.l  maths,a6
10740 00.0000B27C 4EAEFFDC                     jsr     -36(a6) ;int to ffp
10741 00.0000B280 2F00                         move.l  d0,-(a7)        ;save whole number
10742 00.0000B282 6100C98A                     bsr     getchar3
10743 00.0000B286 6100D92E                     bsr     tstnum
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 242
blitz2.s


10744 00.0000B28A 6600D156                     bne     syntaxerr
10745 00.0000B28E 7600                         moveq   #0,d3
10746 00.0000B290 61000114                     bsr     fetchdec        ;get int frac
10747 00.0000B294 4A83                         tst.l   d3
10748 00.0000B296 67000048                     beq     .pskip
10749 00.0000B29A B6BC00800000                 cmp.l   #$800000,d3
10750 00.0000B2A0 6400D1DA                     bcc     overerr
10751 00.0000B2A4 2005                         move.l  d5,d0
10752 00.0000B2A6 4EAEFFDC                     jsr     -36(a6) ;divisor to ffp
10753 00.0000B2AA 2A00                         move.l  d0,d5
10754 00.0000B2AC 2003                         move.l  d3,d0
10755 00.0000B2AE 4EAEFFDC                     jsr     -36(a6) ;to ffp
10756 00.0000B2B2 2205                         move.l  d5,d1
10757 00.0000B2B4 4EAEFFAC                     jsr     -84(a6) ;num/divisor (eg .25=25/100)
10758 00.0000B2B8 221F                         move.l  (a7)+,d1
10759 00.0000B2BA 4EAEFFBE                     jsr     -66(a6) ;add 'em
10760 00.0000B2BE 2600                         move.l  d0,d3
10761 00.0000B2C0 6100C978                     bsr     reget
10762 00.0000B2C4 00400020                     or      #32,d0
10763 00.0000B2C8 B07C0065                     cmp     #'e',d0
10764 00.0000B2CC 66000006                     bne     .pskip2
10765 00.0000B2D0                              ;
10766 00.0000B2D0                              ;E Something!
10767 00.0000B2D0 61000014                     bsr     dothee
10768 00.0000B2D4                              ;
10769 00.0000B2D4 6100C964             .pskip2 bsr     reget
10770 00.0000B2D8 610001A6                     bsr     consttype2
10771 00.0000B2DC 600000FE                     bra     fetchnum3
10772 00.0000B2E0 261F                 .pskip  move.l  (a7)+,d3
10773 00.0000B2E2 6000FFF0                     bra     .pskip2
10774 00.0000B2E6                      
10775 00.0000B2E6                      dothee  ;Suss stuff after the E
10776 00.0000B2E6 6100C926                     bsr     getchar3
10777 00.0000B2EA B07C002B                     cmp     #'+',d0
10778 00.0000B2EE 6700001E                     beq     .pos
10779 00.0000B2F2 B07C002D                     cmp     #'-',d0
10780 00.0000B2F6 6600001A                     bne     .pos2
10781 00.0000B2FA                              ;neg
10782 00.0000B2FA 6100C912                     bsr     getchar3
10783 00.0000B2FE 61000022                     bsr     getsign
10784 00.0000B302                              ;
10785 00.0000B302                              ;d3=number, d4=divisor
10786 00.0000B302                              ;
10787 00.0000B302 2003                         move.l  d3,d0
10788 00.0000B304 2204                         move.l  d4,d1
10789 00.0000B306 4EAEFFAC                     jsr     -84(a6)
10790 00.0000B30A 2600                         move.l  d0,d3
10791 00.0000B30C 4E75                         rts
10792 00.0000B30E                              ;
10793 00.0000B30E 6100C8FE             .pos    bsr     getchar3
10794 00.0000B312 6100000E             .pos2   bsr     getsign
10795 00.0000B316                              ;
10796 00.0000B316                              ;d3=number so far, d4=multiplier
10797 00.0000B316                              ;
10798 00.0000B316 2003                         move.l  d3,d0
10799 00.0000B318 2204                         move.l  d4,d1
10800 00.0000B31A 4EAEFFB2                     jsr     -78(a6)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 243
blitz2.s


10801 00.0000B31E 2600                         move.l  d0,d3
10802 00.0000B320 4E75                         rts
10803 00.0000B322                      
10804 00.0000B322 6100D892             getsign bsr     tstnum
10805 00.0000B326 6600D0BA                     bne     syntaxerr
10806 00.0000B32A 3800                         move    d0,d4
10807 00.0000B32C 04440030                     sub     #48,d4
10808 00.0000B330 6100C8DC                     bsr     getchar3
10809 00.0000B334 6100D880                     bsr     tstnum
10810 00.0000B338 66000010                     bne     .skip
10811 00.0000B33C C8FC000A                     mulu    #10,d4
10812 00.0000B340 04400030                     sub     #48,d0
10813 00.0000B344 D840                         add     d0,d4
10814 00.0000B346 6100C8C6                     bsr     getchar3
10815 00.0000B34A                      .skip   ;d4=number E+10
10816 00.0000B34A B87C0012                     cmp     #18,d4
10817 00.0000B34E 6200D12C                     bhi     overerr
10818 00.0000B352 E54C                         lsl     #2,d4
10819 00.0000B354 283B4004                     move.l  facts(pc,d4),d4
10820 00.0000B358 4E75                         rts
10821 00.0000B35A                      
10822 00.0000B35A 80000041A0000044     facts   dc.l    $80000041,$a0000044
10823 00.0000B362 C8000047FA00004A             dc.l    $c8000047,$fa00004a
10824 00.0000B36A 9C40004EC3500051             dc.l    $9c40004e,$c3500051
10825 00.0000B372 F424005498968058             dc.l    $f4240054,$98968058
10826 00.0000B37A BEBC205BEE6B285E             dc.l    $bebc205b,$ee6b285e
10827 00.0000B382 9502F962BA43B765             dc.l    $9502f962,$ba43b765
10828 00.0000B38A E8D4A5689184E76C             dc.l    $e8d4a568,$9184e76c
10829 00.0000B392 B5E6216FE35FA972             dc.l    $b5e6216f,$e35fa972
10830 00.0000B39A 8E1BCA76B1A2BD79             dc.l    $8e1bca76,$b1a2bd79
10831 00.0000B3A2 DE0B6C7C                     dc.l    $de0b6c7c
10832 00.0000B3A6                      
10833 00.0000B3A6 7A01                 fetchdec        moveq   #1,d5
10834 00.0000B3A8 E38D                 .loop   lsl.l   #1,d5
10835 00.0000B3AA 2205                         move.l  d5,d1
10836 00.0000B3AC E58D                         lsl.l   #2,d5
10837 00.0000B3AE DA81                         add.l   d1,d5   ;divisor for frac convert!
10838 00.0000B3B0                              ;
10839 00.0000B3B0 E38B                         lsl.l   #1,d3
10840 00.0000B3B2 6500D0C8                     bcs     overerr
10841 00.0000B3B6 2203                         move.l  d3,d1
10842 00.0000B3B8 E38B                         lsl.l   #1,d3
10843 00.0000B3BA 6500D0C0                     bcs     overerr
10844 00.0000B3BE E38B                         lsl.l   #1,d3
10845 00.0000B3C0 6500D0BA                     bcs     overerr
10846 00.0000B3C4 D681                         add.l   d1,d3
10847 00.0000B3C6 04400030                     sub     #48,d0
10848 00.0000B3CA D680                         add.l   d0,d3
10849 00.0000B3CC 6100C840                     bsr     getchar3
10850 00.0000B3D0 6100D7E4                     bsr     tstnum
10851 00.0000B3D4 6700FFD2                     beq     .loop
10852 00.0000B3D8 4E75                         rts
10853 00.0000B3DA                      
10854 00.0000B3DA 0000                 dfetch  dc      0       ;fetching data?
10855 00.0000B3DC                      
10856 00.0000B3DC 323AFFFC             fetchnum3       move    dfetch(pc),d1
10857 00.0000B3E0 6700000A                     beq     .doit
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 244
blitz2.s


10858 00.0000B3E4 42790000B3DA                 clr     dfetch
10859 00.0000B3EA 4E75                         rts
10860 00.0000B3EC B47C0001             .doit   cmp     #1,d2
10861 00.0000B3F0 67000026                     beq     .word
10862 00.0000B3F4 B47C0002                     cmp     #2,d2
10863 00.0000B3F8 6700001E                     beq     .word
10864 00.0000B3FC B47C0003                     cmp     #3,d2
10865 00.0000B400 67000032                     beq     .long
10866 00.0000B404 B47C0004                     cmp     #4,d2
10867 00.0000B408 6700002A                     beq     .long
10868 00.0000B40C B47C0005                     cmp     #5,d2
10869 00.0000B410 67000022                     beq     .long
10870 00.0000B414 6000D128                     bra     mismatcherr
10871 00.0000B418                              ;
10872 00.0000B418 323900002B06         .word   move    regat,d1
10873 00.0000B41E E149                         lsl     #8,d1
10874 00.0000B420 E349                         lsl     #1,d1
10875 00.0000B422 0041303C                     or      #$303c,d1
10876 00.0000B426 6100E0E4                     bsr     pokewd
10877 00.0000B42A 3200                         move    d0,d1
10878 00.0000B42C 6100E0DE                     bsr     pokewd
10879 00.0000B430 6000C808                     bra     reget
10880 00.0000B434                              ;
10881 00.0000B434 323900002B06         .long   move    regat,d1
10882 00.0000B43A E149                         lsl     #8,d1
10883 00.0000B43C E349                         lsl     #1,d1
10884 00.0000B43E 0041203C                     or      #$203c,d1
10885 00.0000B442 6100E0C8                     bsr     pokewd
10886 00.0000B446 2200                         move.l  d0,d1
10887 00.0000B448 6100E0BA                     bsr     pokel
10888 00.0000B44C 6000C7EC                     bra     reget
10889 00.0000B450                      
10890 00.0000B450                      ;-----------end of number fetch-------------;
10891 00.0000B450                      
10892 00.0000B450 2003                 makeint move.l  d3,d0
10893 00.0000B452 4A46                         tst     d6
10894 00.0000B454 67000016                     beq     .skip   ;already integer
10895 00.0000B458 2C7900002B02                 move.l  maths,a6
10896 00.0000B45E 4EAEFFE2                     jsr     -30(a6)
10897 00.0000B462 68000008                     bvc     .skip
10898 00.0000B466 584F                         addq    #4,a7
10899 00.0000B468 60000136                     bra     numdofloat
10900 00.0000B46C 4E75                 .skip   rts
10901 00.0000B46E                      
10902 00.0000B46E 7C00                 fetchnum2       moveq   #0,d6   ;no frac
10903 00.0000B470 6100000E                     bsr     consttype2
10904 00.0000B474 6000FF66                     bra     fetchnum3
10905 00.0000B478                      
10906 00.0000B478                      constotype      ;fetch a constant of type d2
10907 00.0000B478                              ;
10908 00.0000B478                              ;return new type in d2!
10909 00.0000B478                              ;
10910 00.0000B478 3F02                         move    d2,-(a7)
10911 00.0000B47A 61000AEE                     bsr     evalconst
10912 00.0000B47E 341F                         move    (a7)+,d2
10913 00.0000B480                      consttype2      ;
10914 00.0000B480 4A42                         tst     d2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 245
blitz2.s


10915 00.0000B482 66000014                     bne     .something
10916 00.0000B486                              ;
10917 00.0000B486                              ;Let's set type
10918 00.0000B486                              ;
10919 00.0000B486 4A46                         tst     d6
10920 00.0000B488 67000008                     beq     .nofrac
10921 00.0000B48C 7404                         moveq   #4,d2
10922 00.0000B48E 60000080                     bra     .quick2
10923 00.0000B492 7401                 .nofrac moveq   #1,d2
10924 00.0000B494 6000002E                     bra     .byte
10925 00.0000B498                              ;
10926 00.0000B498 B47C0001             .something      cmp     #1,d2
10927 00.0000B49C 67000026                     beq     .byte
10928 00.0000B4A0 B47C0002                     cmp     #2,d2
10929 00.0000B4A4 67000052                     beq     .word
10930 00.0000B4A8 B47C0003                     cmp     #3,d2
10931 00.0000B4AC 670000CC                     beq     .long
10932 00.0000B4B0 B47C0004                     cmp     #4,d2
10933 00.0000B4B4 67000050                     beq     .quick
10934 00.0000B4B8 B47C0005                     cmp     #5,d2
10935 00.0000B4BC 670000C8                     beq     .float
10936 00.0000B4C0 6000D07C                     bra     mismatcherr
10937 00.0000B4C4                              ;
10938 00.0000B4C4 6100FF8A             .byte   bsr     makeint
10939 00.0000B4C8 B0BC0000007F                 cmp.l   #127,d0
10940 00.0000B4CE 6E00000C                     bgt     .over1
10941 00.0000B4D2 B0BCFFFFFF80                 cmp.l   #-128,d0
10942 00.0000B4D8 6C0000C4                     bge     .dobword
10943 00.0000B4DC                              ;
10944 00.0000B4DC 7402                 .over1  moveq   #2,d2
10945 00.0000B4DE B0BC00007FFF                 cmp.l   #32767,d0
10946 00.0000B4E4 6E00000C                     bgt     .byte2
10947 00.0000B4E8 B0BCFFFF8000                 cmp.l   #-32768,d0
10948 00.0000B4EE 6C0000AE                     bge     .dobword
10949 00.0000B4F2                              ;
10950 00.0000B4F2 7403                 .byte2  moveq   #3,d2
10951 00.0000B4F4 600000A8                     bra     .dolong
10952 00.0000B4F8                              ;
10953 00.0000B4F8 4A46                 .word   tst     d6
10954 00.0000B4FA 66000014                     bne     .quick2
10955 00.0000B4FE 6100FF50                     bsr     makeint
10956 00.0000B502 6000FFD8                     bra     .over1
10957 00.0000B506                              ;
10958 00.0000B506 6100FF48             .quick  bsr     makeint
10959 00.0000B50A 4A46                         tst     d6
10960 00.0000B50C 67000052                     beq     .qint
10961 00.0000B510 B0BC00007FFF         .quick2 cmp.l   #32767,d0
10962 00.0000B516 6E000088                     bgt     numdofloat
10963 00.0000B51A B0BCFFFF8000                 cmp.l   #-32768,d0
10964 00.0000B520 6D00007E                     blt     numdofloat
10965 00.0000B524                              ;
10966 00.0000B524 3F00                         move    d0,-(a7)        ;save whole part
10967 00.0000B526 4EAEFFDC                     jsr     -36(a6) ;back to ffp
10968 00.0000B52A 2200                         move.l  d0,d1
10969 00.0000B52C 2003                         move.l  d3,d0
10970 00.0000B52E 4EAEFFB8                     jsr     -72(a6) ;subtract - d0=fraction!
10971 00.0000B532 223C80000051                 move.l  #$80000051,d1   ;65536
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 246
blitz2.s


10972 00.0000B538 4EAEFFB2                     jsr     -78(a6) ;*65536
10973 00.0000B53C 4EAEFFE2                     jsr     -30(a6) ;back to int
10974 00.0000B540                              ;
10975 00.0000B540 67000018                     beq     .knob   ;numdofloat
10976 00.0000B544 B0BC00010000                 cmp.l   #65536,d0
10977 00.0000B54A 6400000E                     bcc     .knob   ;numdofloat
10978 00.0000B54E 3200                         move    d0,d1
10979 00.0000B550 301F                         move    (a7)+,d0
10980 00.0000B552 4840                         swap    d0
10981 00.0000B554 3001                         move    d1,d0
10982 00.0000B556 60000046                     bra     .dolong
10983 00.0000B55A                              ;
10984 00.0000B55A 544F                 .knob   addq    #2,a7
10985 00.0000B55C 60000042                     bra     numdofloat
10986 00.0000B560                              ;
10987 00.0000B560 B0BC00007FFF         .qint   cmp.l   #32767,d0
10988 00.0000B566 6E00FF8A                     bgt     .byte2
10989 00.0000B56A B0BCFFFF8000                 cmp.l   #-32768,d0
10990 00.0000B570 6D00FF80                     blt     .byte2
10991 00.0000B574 4840                         swap    d0
10992 00.0000B576 60000026                     bra     .dolong
10993 00.0000B57A                              ;
10994 00.0000B57A 4A46                 .long   tst     d6
10995 00.0000B57C 66000022                     bne     numdofloat
10996 00.0000B580 2003                         move.l  d3,d0
10997 00.0000B582 6000001A                     bra     .dolong
10998 00.0000B586                              ;
10999 00.0000B586 4A46                 .float  tst     d6
11000 00.0000B588 66000016                     bne     numdofloat
11001 00.0000B58C 2003                         move.l  d3,d0
11002 00.0000B58E 2C7900002B02                 move.l  maths,a6
11003 00.0000B594 4EAEFFDC                     jsr     -36(a6) ;int to float
11004 00.0000B598 2600                         move.l  d0,d3
11005 00.0000B59A 60000004                     bra     numdofloat
11006 00.0000B59E                              ;
11007 00.0000B59E                      .dobword        ;
11008 00.0000B59E                      .dolong ;
11009 00.0000B59E 4E75                         rts
11010 00.0000B5A0                              ;
11011 00.0000B5A0 7405                 numdofloat      moveq   #5,d2
11012 00.0000B5A2 2003                         move.l  d3,d0
11013 00.0000B5A4 4E75                         rts
11014 00.0000B5A6                      
11015 00.0000B5A6 00000000             pushfrom        dc.l    0
11016 00.0000B5AA 00000000             pushpc  dc.l    0
11017 00.0000B5AE 00000000             pushoff dc.l    0
11018 00.0000B5B2 00000000             pushdooff       dc.l    0
11019 00.0000B5B6 0000                 pushclen        dc      0
11020 00.0000B5B8 00000000             pushat  dc.l    0
11021 00.0000B5BC                      
11022 00.0000B5BC                      pushstart       ;Here, we prepare to collect code to be saved and added
11023 00.0000B5BC                              ;later
11024 00.0000B5BC 23F90000E8F60000B5AA         move.l  pc,pushpc
11025 00.0000B5C6 23F90000EC560000B5AE         move.l  firstoff,pushoff
11026 00.0000B5D0 4E75                         rts
11027 00.0000B5D2                      
11028 00.0000B5D2                      pushdo  ;OK, push code since push start
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 247
blitz2.s


11029 00.0000B5D2                              ;
11030 00.0000B5D2 48E7C0C0                     movem.l d0-d1/a0-a1,-(a7)
11031 00.0000B5D6                              ;
11032 00.0000B5D6 20390000E8F6                 move.l  pc,d0
11033 00.0000B5DC 223AFFCC                     move.l  pushpc(pc),d1
11034 00.0000B5E0 23C10000E8F6                 move.l  d1,pc   ;New PC
11035 00.0000B5E6 9081                         sub.l   d1,d0   ;len
11036 00.0000B5E8 33C00000B5B6                 move    d0,pushclen
11037 00.0000B5EE 67000046                     beq     .skip
11038 00.0000B5F2 32390000E858                 move    nomemleft,d1
11039 00.0000B5F8 6600003C                     bne     .skip
11040 00.0000B5FC                              ;
11041 00.0000B5FC 7201                         moveq   #1,d1
11042 00.0000B5FE 2C780004                     move.l  4.w,a6
11043 00.0000B602 4EB900004B6C                 jsr     doallocmem
11044 00.0000B608 23C00000B5B8                 move.l  d0,pushat
11045 00.0000B60E 2040                         move.l  d0,a0   ;destination
11046 00.0000B610 22790000B5AA                 move.l  pushpc,a1       ;source
11047 00.0000B616 23C90000E8F6                 move.l  a1,pc
11048 00.0000B61C 30390000B5B6                 move    pushclen,d0
11049 00.0000B622 E248                         lsr     #1,d0
11050 00.0000B624 5340                         subq    #1,d0   ;to word dbf
11051 00.0000B626 30D9                 .loop   move    (a1)+,(a0)+
11052 00.0000B628 51C8FFFC                     dbf     d0,.loop
11053 00.0000B62C 23F90000EC560000B5B2         move.l  firstoff,pushdooff
11054 00.0000B636 4CDF0303             .skip   movem.l (a7)+,d0-d1/a0-a1
11055 00.0000B63A 4E75                         rts
11056 00.0000B63C                      
11057 00.0000B63C                      pushput ;replace pulled out code!
11058 00.0000B63C                              ;
11059 00.0000B63C 48E7C0C0                     movem.l d0-d1/a0-a1,-(a7)
11060 00.0000B640 7000                         moveq   #0,d0
11061 00.0000B642 30390000B5B6                 move    pushclen,d0
11062 00.0000B648 6700008E                     beq     .skip
11063 00.0000B64C 22390000E8F6                 move.l  pc,d1   ;pc before put
11064 00.0000B652 D1B90000E8F6                 add.l   d0,pc
11065 00.0000B658 4A790000E858                 tst     nomemleft
11066 00.0000B65E 66000078                     bne     .skip
11067 00.0000B662                              ;
11068 00.0000B662 E248                         lsr     #1,d0
11069 00.0000B664 5340                         subq    #1,d0
11070 00.0000B666                              ;
11071 00.0000B666 2241                         move.l  d1,a1
11072 00.0000B668 20790000B5B8                 move.l  pushat,a0
11073 00.0000B66E                              ;
11074 00.0000B66E B3F90000E8FA         .loop   cmp.l   libat,a1
11075 00.0000B674 6500000E                     bcs     .ok
11076 00.0000B678 33FCFFFF0000E858             move    #-1,nomemleft
11077 00.0000B680 60000056                     bra     .skip
11078 00.0000B684 32D8                 .ok     move    (a0)+,(a1)+
11079 00.0000B686 51C8FFE6                     dbf     d0,.loop
11080 00.0000B68A                              ;
11081 00.0000B68A                              ;OK, now all offsets between pushdooff and pushoff must
11082 00.0000B68A                              ;be adjusted by d1-pushpc
11083 00.0000B68A                              ;
11084 00.0000B68A 92B90000B5AA                 sub.l   pushpc,d1
11085 00.0000B690 67000030                     beq     .skip2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 248
blitz2.s


11086 00.0000B694 20790000B5B2                 move.l  pushdooff,a0
11087 00.0000B69A B1F90000B5AE         .loop2  cmp.l   pushoff,a0
11088 00.0000B6A0 67000020                     beq     .done
11089 00.0000B6A4 22680004                     move.l  4(a0),a1        ;address in prog.
11090 00.0000B6A8 D3F90000E8F2                 add.l   pcat,a1
11091 00.0000B6AE B3F90000E8FA                 cmp.l   libat,a1
11092 00.0000B6B4 64000006                     bcc     .next   ;leave offs >= lib
11093 00.0000B6B8 D3A80004                     add.l   d1,4(a0)
11094 00.0000B6BC 2050                 .next   move.l  (a0),a0
11095 00.0000B6BE 6000FFDA                     bra     .loop2
11096 00.0000B6C2                      .done   ;Whew!
11097 00.0000B6C2 22790000B5B8         .skip2  move.l  pushat,a1
11098 00.0000B6C8 7000                         moveq   #0,d0
11099 00.0000B6CA 30390000B5B6                 move    pushclen,d0
11100 00.0000B6D0 2C780004                     move.l  4.w,a6
11101 00.0000B6D4 4EAEFF2E                     jsr     freemem(a6)
11102 00.0000B6D8                              ;
11103 00.0000B6D8 4CDF0303             .skip   movem.l (a7)+,d0-d1/a0-a1
11104 00.0000B6DC 4E75                         rts     
11105 00.0000B6DE                      
11106 00.0000B6DE                      muld1   ;generate code for #d1.w*regat
11107 00.0000B6DE                              ;
11108 00.0000B6DE 3F01                         move    d1,-(a7)
11109 00.0000B6E0 7400                         moveq   #0,d2
11110 00.0000B6E2 760F                         moveq   #15,d3
11111 00.0000B6E4 E349                 .shloop lsl     #1,d1
11112 00.0000B6E6 64000006                     bcc     .shskip
11113 00.0000B6EA 5242                         addq    #1,d2
11114 00.0000B6EC 3803                         move    d3,d4
11115 00.0000B6EE 51CBFFF4             .shskip dbf     d3,.shloop
11116 00.0000B6F2 5342                         subq    #1,d2
11117 00.0000B6F4 66000030                     bne     .domul
11118 00.0000B6F8 544F                         addq    #2,a7
11119 00.0000B6FA 3204                         move    d4,d1
11120 00.0000B6FC 67000026                     beq     .done
11121 00.0000B700 B27C0008                     cmp     #8,d1
11122 00.0000B704 6500000C                     bcs     .once
11123 00.0000B708 04410008                     sub     #8,d1
11124 00.0000B70C 61000004                     bsr     .once
11125 00.0000B710 7200                         moveq   #0,d1
11126 00.0000B712 E149                 .once   lsl     #8,d1
11127 00.0000B714 E349                         lsl     #1,d1
11128 00.0000B716 0041E188                     or      #$e188,d1
11129 00.0000B71A 827900002B06                 or      regat,d1
11130 00.0000B720 6000DDEA                     bra     pokewd
11131 00.0000B724 4E75                 .done   rts
11132 00.0000B726 323900002B06         .domul  move    regat,d1
11133 00.0000B72C E149                         lsl     #8,d1
11134 00.0000B72E E349                         lsl     #1,d1
11135 00.0000B730 0041C0FC                     or      #$c0fc,d1
11136 00.0000B734 6100DDD6                     bsr     pokewd
11137 00.0000B738 321F                         move    (a7)+,d1
11138 00.0000B73A 6000DDD0                     bra     pokewd
11139 00.0000B73E                      
11140 00.0000B73E                      makeinits       ;make any initialing jsr's
11141 00.0000B73E                              ;
11142 00.0000B73E 2F390000E8F6                 move.l  pc,-(a7)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 249
blitz2.s


11143 00.0000B744 7EFF                         moveq   #-1,d7
11144 00.0000B746 610001DE             .loop   bsr     findhilib
11145 00.0000B74A 67000158                     beq     .done
11146 00.0000B74E 4A6A000C                     tst     12(a2)
11147 00.0000B752 6A00FFF2                     bpl     .loop
11148 00.0000B756 222A0016                     move.l  22(a2),d1
11149 00.0000B75A 6700FFEA                     beq     .loop
11150 00.0000B75E                              ;
11151 00.0000B75E 322A0004                     move    4(a2),d1
11152 00.0000B762 B27CFFFE                     cmp     #allocvars,d1
11153 00.0000B766 6600000A                     bne     .notvar
11154 00.0000B76A 61000198                     bsr     makevsize
11155 00.0000B76E 6000008E                     bra     .more
11156 00.0000B772                              ;
11157 00.0000B772 B27CFA3C             .notvar cmp     #debuglib,d1
11158 00.0000B776 66000018                     bne     .notdebuglib
11159 00.0000B77A                              ;
11160 00.0000B77A                              ;pass flag in d0 : non zero=auto run
11161 00.0000B77A                              ;
11162 00.0000B77A 323C7000                     move    #$7000,d1               ;moveq #0,d0
11163 00.0000B77E 08390007000006AF             btst    #7,optreq2ga1+13
11164 00.0000B786 56C1                         sne     d1
11165 00.0000B788 6100DD82                     bsr     pokewd
11166 00.0000B78C 60000070                     bra     .more
11167 00.0000B790                      .notdebuglib    ;
11168 00.0000B790 B27CFED3                     cmp     #65235,d1
11169 00.0000B794 6600000A                     bne     .notstring1
11170 00.0000B798 61000160                     bsr     makessize
11171 00.0000B79C 60000060                     bra     .more
11172 00.0000B7A0                              ;
11173 00.0000B7A0 B27CFE0B             .notstring1     cmp     #65035,d1
11174 00.0000B7A4 6600001C                     bne     .notexit
11175 00.0000B7A8                              ;
11176 00.0000B7A8 323C203C             .isexit move    #$203c,d1
11177 00.0000B7AC 6100DD5E                     bsr     pokewd
11178 00.0000B7B0 6100C16A                     bsr     addoff
11179 00.0000B7B4 22390000EC32                 move.l  endop,d1
11180 00.0000B7BA 6100DD48                     bsr     pokel
11181 00.0000B7BE 6000003E                     bra     .more
11182 00.0000B7C2                      .notexit        ;
11183 00.0000B7C2 B27CFC17                     cmp     #64535,d1
11184 00.0000B7C6 6600001C                     bne     .notdatalib
11185 00.0000B7CA 323C203C                     move    #$203c,d1
11186 00.0000B7CE 6100DD3C                     bsr     pokewd
11187 00.0000B7D2 6100C148                     bsr     addoff
11188 00.0000B7D6 22390000E8E2                 move.l  data2at,d1
11189 00.0000B7DC 6100DD26                     bsr     pokel
11190 00.0000B7E0 6000001C                     bra     .more
11191 00.0000B7E4                      .notdatalib     ;
11192 00.0000B7E4 B27C0001                     cmp     #dhandlerlib,d1
11193 00.0000B7E8 66000014                     bne     .notdhandler
11194 00.0000B7EC 323C203C                     move    #$203c,d1       ;move.l #x,d0 (?)
11195 00.0000B7F0 6100DD1A                     bsr     pokewd
11196 00.0000B7F4 223900002EF0                 move.l  dseg,d1
11197 00.0000B7FA 6100DD08                     bsr     pokel
11198 00.0000B7FE                      .notdhandler    ;
11199 00.0000B7FE 222A0016             .more   move.l  22(a2),d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 250
blitz2.s


11200 00.0000B802 33FCFFFF0000EC22             move    #-1,lasta6
11201 00.0000B80A 610002EC                     bsr     makelibsub
11202 00.0000B80E 0C6AFFFE0004                 cmp     #allocvars,4(a2)
11203 00.0000B814 66000024                     bne     .notvar2
11204 00.0000B818                              ;
11205 00.0000B818 2239000050C8                 move.l  intdata1,d1
11206 00.0000B81E 6700001A                     beq     .notvar2
11207 00.0000B822 32390000B8EE                 move    putidata1,d1
11208 00.0000B828 6100DCE2                     bsr     pokewd
11209 00.0000B82C 6100C0EE                     bsr     addoff
11210 00.0000B830 2239000050C8                 move.l  intdata1,d1
11211 00.0000B836 6100DCCC                     bsr     pokel
11212 00.0000B83A                              ;
11213 00.0000B83A 323C2B40             .notvar2        move    #$2b40,d1
11214 00.0000B83E 4A6A001A                     tst     26(a2)
11215 00.0000B842 6700FF02                     beq     .loop
11216 00.0000B846 6A000006                     bpl     .long
11217 00.0000B84A 323C3B40                     move    #$3b40,d1
11218 00.0000B84E 6100DCBC             .long   bsr     pokewd
11219 00.0000B852 322A000A                     move    10(a2),d1
11220 00.0000B856 6100DCB4                     bsr     pokewd
11221 00.0000B85A 0C6AFFFA0004                 cmp     #65530,4(a2)
11222 00.0000B860 6600FEE4                     bne     .loop
11223 00.0000B864                              ;
11224 00.0000B864 3F07                         move    d7,-(a7)
11225 00.0000B866 38390000EC3E                 move    numstatic,d4
11226 00.0000B86C 67000014                     beq     .nostats
11227 00.0000B870 26390000EC40                 move.l  staticdata,d3
11228 00.0000B876 6100BC6A                     bsr     datastart
11229 00.0000B87A 323CC500                     move    #alstat,d1
11230 00.0000B87E 61000220                     bsr     tokejsr2
11231 00.0000B882                      .nostats        ;
11232 00.0000B882 38390000E842                 move    maxsused,d4
11233 00.0000B888 67000014                     beq     .nomaxs
11234 00.0000B88C 26390000E83C                 move.l  maxsat,d3
11235 00.0000B892 6100BC4E                     bsr     datastart
11236 00.0000B896 323CCF00                     move    #setmaxs,d1
11237 00.0000B89A 61000204                     bsr     tokejsr2
11238 00.0000B89E 3E1F                 .nomaxs move    (a7)+,d7
11239 00.0000B8A0                              ;
11240 00.0000B8A0 6000FEA4                     bra     .loop
11241 00.0000B8A4                      .done   ;
11242 00.0000B8A4                              ;misc inits
11243 00.0000B8A4                              ;
11244 00.0000B8A4 22390000E8F6                 move.l  pc,d1
11245 00.0000B8AA B297                         cmp.l   (a7),d1
11246 00.0000B8AC 6600000E                     bne     .yi
11247 00.0000B8B0 33FC00080000E852             move    #8,noinits+2
11248 00.0000B8B8 6000002C                     bra     .yi3
11249 00.0000B8BC                              ;
11250 00.0000B8BC 42790000E852         .yi     clr     noinits+2
11251 00.0000B8C2 32390000E858                 move    nomemleft,d1
11252 00.0000B8C8 66000014                     bne     .yi2
11253 00.0000B8CC 20790000E8F2                 move.l  pcat,a0
11254 00.0000B8D2 30FC4EB9                     move    #$4eb9,(a0)+
11255 00.0000B8D6 2097                         move.l  (a7),(a0)
11256 00.0000B8D8 7402                         moveq   #2,d2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 251
blitz2.s


11257 00.0000B8DA 6100C056                     bsr     addoff2 
11258 00.0000B8DE 323C4E75             .yi2    move    #$4e75,d1
11259 00.0000B8E2 6100DC28                     bsr     pokewd
11260 00.0000B8E6 584F                 .yi3    addq    #4,a7
11261 00.0000B8E8 4E75                         rts
11262 00.0000B8EA                      
11263 00.0000B8EA 222D0000             prepd1  move.l  0(a5),d1
11264 00.0000B8EE                      
11265 00.0000B8EE 23CD00000000         putidata1       move.l  a5,0
11266 00.0000B8F4                      
11267 00.0000B8F4 247C00000000         prepint move.l  #0,a2
11268 00.0000B8FA                      
11269 00.0000B8FA 223900010EE0         makessize       move.l  stringwork,d1
11270 00.0000B900 60000014                     bra     makesize
11271 00.0000B904                      
11272 00.0000B904                      makevsize       ;create code for amount of variables in d0
11273 00.0000B904                              ;
11274 00.0000B904 7200                         moveq   #0,d1
11275 00.0000B906 323900002B38                 move    varoff,d1
11276 00.0000B90C 04418000                     sub     #$8000,d1
11277 00.0000B910 66000004                     bne     makesize        
11278 00.0000B914 7208                         moveq   #8,d1
11279 00.0000B916                              ;
11280 00.0000B916                      makesize        ;create code for #d1 into d0
11281 00.0000B916                              ;
11282 00.0000B916 2F01                         move.l  d1,-(a7)
11283 00.0000B918 323C203C                     move    #$203c,d1
11284 00.0000B91C 6100DBEE                     bsr     pokewd
11285 00.0000B920 221F                         move.l  (a7)+,d1
11286 00.0000B922 6000DBE0                     bra     pokel
11287 00.0000B926                      
11288 00.0000B926                      findhilib       ;find highest lib# under d7. set d7 to this lib number
11289 00.0000B926                              ;
11290 00.0000B926                              ;ne if found, eq if not
11291 00.0000B926                              ;
11292 00.0000B926 7200                         moveq   #0,d1
11293 00.0000B928 22790000EC44                 move.l  firstlib,a1
11294 00.0000B92E B2FC0000             .loop   cmp     #0,a1
11295 00.0000B932 6700001E                     beq     .done
11296 00.0000B936 BE690004                     cmp     4(a1),d7
11297 00.0000B93A 63000010                     bls     .next
11298 00.0000B93E B2690004                     cmp     4(a1),d1
11299 00.0000B942 64000008                     bcc     .next
11300 00.0000B946 32290004                     move    4(a1),d1
11301 00.0000B94A 2449                         move.l  a1,a2
11302 00.0000B94C 2251                 .next   move.l  (a1),a1
11303 00.0000B94E 6000FFDE                     bra     .loop
11304 00.0000B952 3E01                 .done   move    d1,d7
11305 00.0000B954 4E75                         rts
11306 00.0000B956                      
11307 00.0000B956                      findlolib       ;find lowest lib# above d7. set d7 to this lib number
11308 00.0000B956                              ;
11309 00.0000B956                              ;ne if found, eq if not
11310 00.0000B956                              ;
11311 00.0000B956 72FF                         moveq   #-1,d1
11312 00.0000B958 22790000EC44                 move.l  firstlib,a1
11313 00.0000B95E B2FC0000             .loop   cmp     #0,a1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 252
blitz2.s


11314 00.0000B962 6700001E                     beq     .done
11315 00.0000B966 BE690004                     cmp     4(a1),d7
11316 00.0000B96A 64000010                     bcc     .next
11317 00.0000B96E B2690004                     cmp     4(a1),d1
11318 00.0000B972 63000008                     bls     .next
11319 00.0000B976 32290004                     move    4(a1),d1
11320 00.0000B97A 2449                         move.l  a1,a2
11321 00.0000B97C 2251                 .next   move.l  (a1),a1
11322 00.0000B97E 6000FFDE                     bra     .loop
11323 00.0000B982 3E01                 .done   move    d1,d7
11324 00.0000B984 B27CFFFF                     cmp     #-1,d1
11325 00.0000B988 4E75                         rts
11326 00.0000B98A                      
11327 00.0000B98A                      makefinits      ;create jsr's to FINIT routines from libs
11328 00.0000B98A                              ;
11329 00.0000B98A                              ;also calculate the REGAT variables for inits!
11330 00.0000B98A                              ;
11331 00.0000B98A 527900002B38                 addq    #1,varoff
11332 00.0000B990 08B9000000002B39             bclr    #0,varoff+1
11333 00.0000B998 7E00                         moveq   #0,d7
11334 00.0000B99A 6100FFBA             .loop   bsr     findlolib
11335 00.0000B99E 670000D4                     beq     .azdone
11336 00.0000B9A2 4A6A000C                     tst     12(a2)
11337 00.0000B9A6 6A00FFF2                     bpl     .loop
11338 00.0000B9AA 224A                 .skipvar        move.l  a2,a1
11339 00.0000B9AC D3E90012                     add.l   18(a1),a1
11340 00.0000B9B0 4A69FFFE                     tst     -2(a1)
11341 00.0000B9B4 6700007E                     beq     .nomax
11342 00.0000B9B8                              ;
11343 00.0000B9B8                              ;A max lib, possible multiple frees!
11344 00.0000B9B8                              ;
11345 00.0000B9B8 2229FFF6                     move.l  -10(a1),d1
11346 00.0000B9BC 47F21806                     lea     6(a2,d1.l),a3
11347 00.0000B9C0 4A5B                 .plop   tst     (a3)+
11348 00.0000B9C2 67000008                     beq     .plopf
11349 00.0000B9C6 544B                         addq    #2,a3
11350 00.0000B9C8 6000FFF6                     bra     .plop
11351 00.0000B9CC 4AAB0004             .plopf  tst.l   4(a3)
11352 00.0000B9D0 67000062                     beq     .nomax
11353 00.0000B9D4                              ;
11354 00.0000B9D4                              ;Something to Do!
11355 00.0000B9D4                              ;
11356 00.0000B9D4 323A00A0                     move    freemax(pc),d1  ;move.w #x,-(a7)
11357 00.0000B9D8 6100DB32                     bsr     pokewd
11358 00.0000B9DC 3229FFFC                     move    -4(a1),d1
11359 00.0000B9E0 6100DB2A                     bsr     pokewd  ;x (max)
11360 00.0000B9E4 22390000C3DC                 move.l  free,d1
11361 00.0000B9EA 3229FFFA                     move    -6(a1),d1
11362 00.0000B9EE 6100DB14                     bsr     pokel   ;move.l x(a5),a3
11363 00.0000B9F2                              ;
11364 00.0000B9F2 2F390000E8F6                 move.l  pc,-(a7)
11365 00.0000B9F8 7201                         moveq   #1,d1
11366 00.0000B9FA 3429FFFE                     move    -2(a1),d2
11367 00.0000B9FE E569                         lsl     d2,d1
11368 00.0000BA00 3F01                         move    d1,-(a7)
11369 00.0000BA02 2229FFF6                     move.l  -10(a1),d1
11370 00.0000BA06 610000F0                     bsr     makelibsub
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 253
blitz2.s


11371 00.0000BA0A 323A0076                     move    freemax3(pc),d1
11372 00.0000BA0E 6100DAFC                     bsr     pokewd  ;lea x(a3),a3
11373 00.0000BA12 321F                         move    (a7)+,d1
11374 00.0000BA14 6100DAF6                     bsr     pokewd
11375 00.0000BA18 223A0060                     move.l  freemax2(pc),d1
11376 00.0000BA1C 6100DAE6                     bsr     pokel
11377 00.0000BA20 221F                         move.l  (a7)+,d1
11378 00.0000BA22 92B90000E8F6                 sub.l   pc,d1
11379 00.0000BA28 6100DAE2                     bsr     pokewd
11380 00.0000BA2C 323A0052                     move    freemax4(pc),d1
11381 00.0000BA30 6100DADA                     bsr     pokewd
11382 00.0000BA34                              ;
11383 00.0000BA34 222A001C             .nomax  move.l  28(a2),d1
11384 00.0000BA38 6700FF60                     beq     .loop
11385 00.0000BA3C                              ;
11386 00.0000BA3C                              ;check special cases!
11387 00.0000BA3C                              ;
11388 00.0000BA3C 322A0004                     move    4(a2),d1
11389 00.0000BA40 B27CFFFE                     cmp     #allocvars,d1
11390 00.0000BA44 6600000A                     bne     .notvfin
11391 00.0000BA48 6100FEBA                     bsr     makevsize
11392 00.0000BA4C                      ;       move.l  pc,varsizeat
11393 00.0000BA4C 60000012                     bra     .more
11394 00.0000BA50                              ;
11395 00.0000BA50 B27CFED3             .notvfin        cmp     #65235,d1
11396 00.0000BA54 6600000A                     bne     .notstring1
11397 00.0000BA58 6100FEA0                     bsr     makessize
11398 00.0000BA5C 60000002                     bra     .more
11399 00.0000BA60                              ;
11400 00.0000BA60                      .notstring1     ;
11401 00.0000BA60 222A001C             .more   move.l  28(a2),d1
11402 00.0000BA64 33FCFFFF0000EC22             move    #-1,lasta6
11403 00.0000BA6C 6100008A                     bsr     makelibsub
11404 00.0000BA70 6000FF28                     bra     .loop
11405 00.0000BA74 4E75                 .azdone rts
11406 00.0000BA76                      
11407 00.0000BA76 3F3C0000             freemax move    #0,-(a7)
11408 00.0000BA7A                      
11409 00.0000BA7A 5357                 freemax2        subq    #1,(a7)
11410 00.0000BA7C 6600FFFC                     bne     freemax2
11411 00.0000BA80                      
11412 00.0000BA80 544F                 freemax4        addq    #2,a7
11413 00.0000BA82                      
11414 00.0000BA82 47EB0000             freemax3        lea     0(a3),a3
11415 00.0000BA86                      
11416 00.0000BA86 4A390000400A         chkstak tst.b   debugga
11417 00.0000BA8C 6710                         beq.s   .skip
11418 00.0000BA8E                              ;
11419 00.0000BA8E 4A790000E84E                 tst     makeexec
11420 00.0000BA94 6608                         bne.s   .skip
11421 00.0000BA96                              ;
11422 00.0000BA96 323CC308                     move    #stchk,d1
11423 00.0000BA9A 6000000C                     bra     tokejsr
11424 00.0000BA9E                              ;
11425 00.0000BA9E 4E75                 .skip   rts
11426 00.0000BAA0                      
11427 00.0000BAA0                      tokejsr2        ;cmp    #stchk,d1       ;ignore stack checking if making an executable!
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 254
blitz2.s


11428 00.0000BAA0                              ;bne    .skip
11429 00.0000BAA0                              ;tst    makeexec
11430 00.0000BAA0                              ;beq    .skip
11431 00.0000BAA0                              ;rts
11432 00.0000BAA0 33FCFFFF0000EC22     .skip   move    #-1,lasta6
11433 00.0000BAA8                              ;
11434 00.0000BAA8                      tokejsr ;make a jsr (or simple reg get) from d1
11435 00.0000BAA8                              ;
11436 00.0000BAA8 48E72010                     movem.l d2/a3,-(a7)
11437 00.0000BAAC 6100B4A8                     bsr     findtoke
11438 00.0000BAB0 220B                         move.l  a3,d1
11439 00.0000BAB2 928A                         sub.l   a2,d1
11440 00.0000BAB4 61000042                     bsr     makelibsub
11441 00.0000BAB8 4CDF0804                     movem.l (a7)+,d2/a3
11442 00.0000BABC 4E75                         rts
11443 00.0000BABE                      
11444 00.0000BABE                      userjsr ;a2 = lib base
11445 00.0000BABE                              ;a1 = start of #parameters
11446 00.0000BABE                              ;
11447 00.0000BABE 2F390000BAF4                 move.l  libisat,-(a7)
11448 00.0000BAC4 23CA0000BAF4                 move.l  a2,libisat
11449 00.0000BACA 2449                         move.l  a1,a2
11450 00.0000BACC 321A                         move    (a2)+,d1
11451 00.0000BACE 024100FF                     and     #255,d1
11452 00.0000BAD2 D4C1                         add     d1,a2
11453 00.0000BAD4 C18A                         exg     a2,d0
11454 00.0000BAD6 5280                         addq.l  #1,d0
11455 00.0000BAD8 08800000                     bclr    #0,d0
11456 00.0000BADC C18A                         exg     a2,d0
11457 00.0000BADE 60000028                     bra     makelsub2
11458 00.0000BAE2                      
11459 00.0000BAE2 2F390000BAF4         cutejsr move.l  libisat,-(a7)
11460 00.0000BAE8 23CA0000BAF4                 move.l  a2,libisat
11461 00.0000BAEE 244B                         move.l  a3,a2
11462 00.0000BAF0 60000016                     bra     makelsub2
11463 00.0000BAF4                      
11464 00.0000BAF4 00000000             libisat dc.l    0
11465 00.0000BAF8                      
11466 00.0000BAF8                      makelibsub      ;lib in a2, sub offset in d1
11467 00.0000BAF8                              ;
11468 00.0000BAF8 2F390000BAF4                 move.l  libisat,-(a7)
11469 00.0000BAFE 23CA0000BAF4                 move.l  a2,libisat
11470 00.0000BB04 45F21806                     lea     6(a2,d1.l),a2
11471 00.0000BB08 6100000A             makelsub2       bsr     makelsub3
11472 00.0000BB0C 23DF0000BAF4                 move.l  (a7)+,libisat
11473 00.0000BB12 4E75                         rts
11474 00.0000BB14 610001DE             makelsub3       bsr     fetchregs
11475 00.0000BB18                              ;
11476 00.0000BB18 4A390000400A                 tst.b   debugga
11477 00.0000BB1E 67000056                     beq     .norerr
11478 00.0000BB22                              ;
11479 00.0000BB22 2212                         move.l  (a2),d1
11480 00.0000BB24 82AA0008                     or.l    8(a2),d1
11481 00.0000BB28 08810000                     bclr    #0,d1
11482 00.0000BB2C 4A81                         tst.l   d1
11483 00.0000BB2E 67000046                     beq     .norerr
11484 00.0000BB32                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 255
blitz2.s


11485 00.0000BB32 221A                         move.l  (a2)+,d1
11486 00.0000BB34 08010000                     btst    #0,d1
11487 00.0000BB38 67000026                     beq     .skiptt
11488 00.0000BB3C 4A790000BCF2                 tst     blitzmode
11489 00.0000BB42 6A00C428                     bpl     blitzerr
11490 00.0000BB46 4A390000400A                 tst.b   debugga
11491 00.0000BB4C 6700000E                     beq     .skiptt2
11492 00.0000BB50 2F01                         move.l  d1,-(a7)
11493 00.0000BB52 323CC311                     move    #inblitz,d1
11494 00.0000BB56 61000142                     bsr     makebtst
11495 00.0000BB5A 221F                         move.l  (a7)+,d1
11496 00.0000BB5C 08810000             .skiptt2        bclr    #0,d1
11497 00.0000BB60 4A81                 .skiptt tst.l   d1
11498 00.0000BB62                              ;
11499 00.0000BB62 61000062                     bsr     doajsr
11500 00.0000BB66 221A                         move.l  (a2)+,d1
11501 00.0000BB68 6100002E                     bsr     doajsrrout
11502 00.0000BB6C 221A                         move.l  (a2)+,d1
11503 00.0000BB6E 61000056                     bsr     doajsr
11504 00.0000BB72 6000001C                     bra     .more
11505 00.0000BB76                              ;
11506 00.0000BB76 082A00000003         .norerr btst    #0,3(a2)
11507 00.0000BB7C 6700000A                     beq     .penis
11508 00.0000BB80                              ;
11509 00.0000BB80                              ;Here, the routine can only run in Blitz Mode
11510 00.0000BB80                              ;
11511 00.0000BB80 323A0170                     move    blitzmode(pc),d1
11512 00.0000BB84 6A00C3E6                     bpl     blitzerr
11513 00.0000BB88 222A0004             .penis  move.l  4(a2),d1
11514 00.0000BB8C 6100000A                     bsr     doajsrrout
11515 00.0000BB90 24790000BAF4         .more   move.l  libisat,a2
11516 00.0000BB96 4E75                         rts
11517 00.0000BB98                      
11518 00.0000BB98                      doajsrrout      ;Here, we suss out bit 0 to see if this
11519 00.0000BB98                              ;can only happen in Amiga mode.
11520 00.0000BB98                              ;
11521 00.0000BB98 08010000                     btst    #0,d1
11522 00.0000BB9C 67000026                     beq     .doajsr
11523 00.0000BBA0 4A790000BCF2                 tst     blitzmode
11524 00.0000BBA6 6B00C3E6                     bmi     amigaerr
11525 00.0000BBAA                              ;btst   #0,optreqga10+13        ;!!!
11526 00.0000BBAA 4A390000400A                 tst.b   debugga
11527 00.0000BBB0 6700000E                     beq     .doajsr2
11528 00.0000BBB4 2F01                         move.l  d1,-(a7)
11529 00.0000BBB6 323CC312                     move    #inamiga,d1
11530 00.0000BBBA 610000DE                     bsr     makebtst
11531 00.0000BBBE 221F                         move.l  (a7)+,d1
11532 00.0000BBC0 08810000             .doajsr2        bclr    #0,d1
11533 00.0000BBC4 4A81                 .doajsr tst.l   d1
11534 00.0000BBC6                              ;
11535 00.0000BBC6 6700000A             doajsr  beq     .skip
11536 00.0000BBCA 2F09                         move.l  a1,-(a7)
11537 00.0000BBCC 61000006                     bsr     doajsr2
11538 00.0000BBD0 225F                         move.l  (a7)+,a1
11539 00.0000BBD2 4E75                 .skip   rts
11540 00.0000BBD4                      
11541 00.0000BBD4 20790000BAF4         doajsr2 move.l  libisat,a0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 256
blitz2.s


11542 00.0000BBDA 4A790000E32E                 tst     cfetchmode
11543 00.0000BBE0 67000014                     beq     .nfetch
11544 00.0000BBE4 D288                         add.l   a0,d1
11545 00.0000BBE6 2F01                         move.l  d1,-(a7)
11546 00.0000BBE8 323C4EB9                     move    #$4eb9,d1
11547 00.0000BBEC 6100D91E                     bsr     pokewd
11548 00.0000BBF0 221F                         move.l  (a7)+,d1
11549 00.0000BBF2 6000D910                     bra     pokel
11550 00.0000BBF6                      .nfetch ;
11551 00.0000BBF6                              ;d1 is an offset from start of lib.
11552 00.0000BBF6                              ;a0 is start of lib.
11553 00.0000BBF6                              ;
11554 00.0000BBF6 43F01800                     lea     0(a0,d1.l),a1
11555 00.0000BBFA 42790000BCEE                 clr     inline
11556 00.0000BC00 0C1900A0             .cute   cmp.b   #$a0,(a1)+
11557 00.0000BC04 66000062                     bne     .ugly
11558 00.0000BC08 4A19                         tst.b   (a1)+
11559 00.0000BC0A 6700000C                     beq     .iszero
11560 00.0000BC0E 0C290001FFFF                 cmp.b   #1,-1(a1)
11561 00.0000BC14 6700000E                     beq     .isone
11562 00.0000BC18                              ;
11563 00.0000BC18                      .iszero ;here, code can be made inline.
11564 00.0000BC18 33D90000BCEE                 move    (a1)+,inline
11565 00.0000BC1E 5881                         addq.l  #4,d1
11566 00.0000BC20 6000FFDE                     bra     .cute
11567 00.0000BC24                              ;
11568 00.0000BC24                      .isone  ;here, a blitzmode variation is available
11569 00.0000BC24                              ;
11570 00.0000BC24 4A790000BCF2                 tst     blitzmode
11571 00.0000BC2A 6A00001E                     bpl     .inamiga
11572 00.0000BC2E                              ;
11573 00.0000BC2E 4A390000400A                 tst.b   debugga
11574 00.0000BC34 6700000A                     beq     .nobrerr
11575 00.0000BC38 323CC311                     move    #inblitz,d1
11576 00.0000BC3C 6100005C                     bsr     makebtst
11577 00.0000BC40 2219                 .nobrerr        move.l  (a1)+,d1
11578 00.0000BC42 43F01800                     lea     0(a0,d1.l),a1
11579 00.0000BC46 6000FFB8                     bra     .cute
11580 00.0000BC4A                              ;
11581 00.0000BC4A 4A390000400A         .inamiga        tst.b   debugga
11582 00.0000BC50 6700000E                     beq     .noarerr
11583 00.0000BC54 2F01                         move.l  d1,-(a7)
11584 00.0000BC56 323CC312                     move    #inamiga,d1
11585 00.0000BC5A 6100003E                     bsr     makebtst
11586 00.0000BC5E 221F                         move.l  (a7)+,d1
11587 00.0000BC60 5849                 .noarerr        addq    #4,a1
11588 00.0000BC62 5C81                         addq.l  #6,d1
11589 00.0000BC64 6000FF9A                     bra     .cute
11590 00.0000BC68                              ;
11591 00.0000BC68 4A790000BCEE         .ugly   tst     inline
11592 00.0000BC6E 6700000E                     beq     .notin
11593 00.0000BC72                              ;here, we copy the inline code.
11594 00.0000BC72 5349                         subq    #1,a1
11595 00.0000BC74 2049                         move.l  a1,a0
11596 00.0000BC76 D2FA0076                     add     inline(pc),a1
11597 00.0000BC7A 6000D93E                     bra     pokecode2
11598 00.0000BC7E                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 257
blitz2.s


11599 00.0000BC7E 2F01                 .notin  move.l  d1,-(a7)
11600 00.0000BC80 323C4EB9                     move    #$4eb9,d1
11601 00.0000BC84 6100D886                     bsr     pokewd
11602 00.0000BC88 221F                         move.l  (a7)+,d1
11603 00.0000BC8A 6100BC90                     bsr     addoff
11604 00.0000BC8E 92A80012                     sub.l   18(a0),d1
11605 00.0000BC92 D2A80028                     add.l   40(a0),d1
11606 00.0000BC96 6000D86C                     bra     pokel
11607 00.0000BC9A                      
11608 00.0000BC9A 3F01                 makebtst        move    d1,-(a7)
11609 00.0000BC9C 323A004C                     move    tstmode(pc),d1
11610 00.0000BCA0 6100D86A                     bsr     pokewd
11611 00.0000BCA4 61000016                     bsr     getbbase
11612 00.0000BCA8 6100D862                     bsr     pokewd
11613 00.0000BCAC 321F                         move    (a7)+,d1
11614 00.0000BCAE 48E79FE8                     movem.l d0/d3-d7/a0-a2/a4,-(a7)
11615 00.0000BCB2 6100FDF4                     bsr     tokejsr
11616 00.0000BCB6 4CDF17F9                     movem.l (a7)+,d0/d3-d7/a0-a2/a4
11617 00.0000BCBA 4E75                         rts
11618 00.0000BCBC                      
11619 00.0000BCBC                      getbbase        ;this return returns varoff for blitzmode flag
11620 00.0000BCBC                              ;in d1
11621 00.0000BCBC                              ;it will create blitzoff if necessary
11622 00.0000BCBC                              ;
11623 00.0000BCBC 323A0032                     move    blitzoff(pc),d1
11624 00.0000BCC0 B27CFFFF                     cmp     #-1,d1
11625 00.0000BCC4 66000022                     bne     .done
11626 00.0000BCC8 527900002B38                 addq    #1,varoff
11627 00.0000BCCE 08B9000000002B39             bclr    #0,varoff+1
11628 00.0000BCD6 323900002B38                 move    varoff,d1
11629 00.0000BCDC 33C10000BCF0                 move    d1,blitzoff
11630 00.0000BCE2 547900002B38                 addq    #2,varoff
11631 00.0000BCE8 4E75                 .done   rts
11632 00.0000BCEA                      
11633 00.0000BCEA 4A6D0000             tstmode tst     0(a5)
11634 00.0000BCEE                              
11635 00.0000BCEE 0000                 inline  dc      0
11636 00.0000BCF0 FFFF                 blitzoff        dc      -1
11637 00.0000BCF2 0000                 blitzmode       dc      0       ;+=amiga, -=blitz
11638 00.0000BCF4                      
11639 00.0000BCF4                      fetchregs       ;
11640 00.0000BCF4 321A                 .loop   move    (a2)+,d1
11641 00.0000BCF6 6700000C                     beq     .done
11642 00.0000BCFA 341A                         move    (a2)+,d2
11643 00.0000BCFC 61000008                     bsr     toreg
11644 00.0000BD00 6000FFF2                     bra     .loop
11645 00.0000BD04 4E75                 .done   rts
11646 00.0000BD06                      
11647 00.0000BD06                      toreg   ;d1=lib num, d2.b=reg num
11648 00.0000BD06                              ;
11649 00.0000BD06 B47CFF00                     cmp     #$ff00,d2
11650 00.0000BD0A 6400002A                     bcc     .yeah
11651 00.0000BD0E                              ;
11652 00.0000BD0E 0882000F                     bclr    #15,d2  ;btst   #15,d2
11653 00.0000BD12 6700000E                     beq     .nobm
11654 00.0000BD16                              ;OK, blitz mode must be ON for us to bother doing this one
11655 00.0000BD16 4A790000BCF2                 tst     blitzmode
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 258
blitz2.s


11656 00.0000BD1C 6B000018                     bmi     .yeah
11657 00.0000BD20 4E75                         rts
11658 00.0000BD22 0882000E             .nobm   bclr    #14,d2  ;btst   #14,d2
11659 00.0000BD26 6700000E                     beq     .yeah
11660 00.0000BD2A                              ;OK, must be in amiga mode
11661 00.0000BD2A 4A790000BCF2                 tst     blitzmode
11662 00.0000BD30 6A000004                     bpl     .yeah
11663 00.0000BD34 4E75                         rts
11664 00.0000BD36 6100AD0A             .yeah   bsr     uselib
11665 00.0000BD3A 4A02                         tst.b   d2
11666 00.0000BD3C 6700017C                     beq     .norm
11667 00.0000BD40 B43C0004                     cmp.b   #4,d2
11668 00.0000BD44 66000010                     bne     .suv
11669 00.0000BD48 3F3C0004                     move    #4,-(a7)
11670 00.0000BD4C 2F3CFFFFFFFA                 move.l  #-6,-(a7)
11671 00.0000BD52 60000012                     bra     .sendmd
11672 00.0000BD56                              ;
11673 00.0000BD56 B43C0003             .suv    cmp.b   #3,d2
11674 00.0000BD5A 6600004A                     bne     .notnmax
11675 00.0000BD5E 4267                         clr     -(a7)
11676 00.0000BD60 2F3CFFFFFFFC                 move.l  #-4,-(a7)
11677 00.0000BD66                              ;
11678 00.0000BD66                              ;O.K., we are going to send the current maximum settings.
11679 00.0000BD66                              ;
11680 00.0000BD66 E04A                 .sendmd lsr     #8,d2
11681 00.0000BD68 323C303C                     move    #$303c,d1       ;move.w #x,dn
11682 00.0000BD6C 08020007                     btst    #7,d2
11683 00.0000BD70 67000016                     beq     .skipad
11684 00.0000BD74 323C307C                     move    #$307c,d1       ;move.w #x,an
11685 00.0000BD78 B47C0016                     cmp     #$16,d2
11686 00.0000BD7C 6600000A                     bne     .skipad
11687 00.0000BD80 33FCFFFF0000EC22             move    #-1,lasta6
11688 00.0000BD88 02420007             .skipad and     #7,d2
11689 00.0000BD8C E14A                         lsl     #8,d2
11690 00.0000BD8E E34A                         lsl     #1,d2
11691 00.0000BD90 8242                         or      d2,d1
11692 00.0000BD92 6100D778                     bsr     pokewd
11693 00.0000BD96 22290012                     move.l  18(a1),d1
11694 00.0000BD9A D29F                         add.l   (a7)+,d1
11695 00.0000BD9C 32311800                     move    0(a1,d1.l),d1
11696 00.0000BDA0 D25F                         add     (a7)+,d1
11697 00.0000BDA2 6000D768                     bra     pokewd
11698 00.0000BDA6                      .notnmax        ;
11699 00.0000BDA6 3F02                         move    d2,-(a7)
11700 00.0000BDA8 E04A                         lsr     #8,d2
11701 00.0000BDAA B47C0016                     cmp     #$16,d2
11702 00.0000BDAE 6600000A                     bne     .isnta6
11703 00.0000BDB2 33FCFFFF0000EC22             move    #-1,lasta6
11704 00.0000BDBA 22290012             .isnta6 move.l  18(a1),d1
11705 00.0000BDBE 3F3118FA                     move    -6(a1,d1.l),-(a7)
11706 00.0000BDC2 61000154                     bsr     makeregop
11707 00.0000BDC6 6100D744                     bsr     pokewd
11708 00.0000BDCA 321F                         move    (a7)+,d1
11709 00.0000BDCC 341F                         move    (a7)+,d2
11710 00.0000BDCE 4A02                         tst.b   d2
11711 00.0000BDD0 6A0000A4                     bpl     .skippy1
11712 00.0000BDD4                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 259
blitz2.s


11713 00.0000BDD4                              ;<0 - the rest is a register spec.
11714 00.0000BDD4                              ;this reg is used to calc a max item (must be dn)
11715 00.0000BDD4                              ;
11716 00.0000BDD4 6100D736                     bsr     pokewd  ;move.l x(a5),dn
11717 00.0000BDD8 3F02                         move    d2,-(a7)        ;store reg used
11718 00.0000BDDA                              ;
11719 00.0000BDDA D3E90012                     add.l   18(a1),a1
11720 00.0000BDDE 1202                         move.b  d2,d1
11721 00.0000BDE0 02410007                     and     #7,d1
11722 00.0000BDE4                              ;
11723 00.0000BDE4 4A390000400A                 tst.b   debugga
11724 00.0000BDEA 6700002E                     beq     .norerr
11725 00.0000BDEE                              ;
11726 00.0000BDEE 3F01                         move    d1,-(a7)
11727 00.0000BDF0 E149                         lsl     #8,d1
11728 00.0000BDF2 E349                         lsl     #1,d1
11729 00.0000BDF4 0041B07C                     or      #$b07c,d1       ;cmp #x,dn
11730 00.0000BDF8 6100D712                     bsr     pokewd
11731 00.0000BDFC 3229FFFC                     move    -4(a1),d1
11732 00.0000BE00 6100D70A                     bsr     pokewd
11733 00.0000BE04 223A0100                     move.l  maxchk(pc),d1   ;bcs
11734 00.0000BE08 6100D6FA                     bsr     pokel
11735 00.0000BE0C 2F0A                         move.l  a2,-(a7)
11736 00.0000BE0E 323CC30A                     move    #maxerr,d1
11737 00.0000BE12 6100FC94                     bsr     tokejsr
11738 00.0000BE16 245F                         move.l  (a7)+,a2
11739 00.0000BE18 321F                         move    (a7)+,d1
11740 00.0000BE1A                              ;
11741 00.0000BE1A 3429FFFE             .norerr move    -2(a1),d2       ;shift amount
11742 00.0000BE1E B47C0009             .shloop cmp     #9,d2
11743 00.0000BE22 65000020                     bcs     .simp
11744 00.0000BE26 48A76000                     movem   d2/d1,-(a7)
11745 00.0000BE2A                              ;
11746 00.0000BE2A                              ;and    #7,d2   ;?????
11747 00.0000BE2A 7400                         moveq   #0,d2   ;!!!!!
11748 00.0000BE2C                              ;
11749 00.0000BE2C E14A                         lsl     #8,d2
11750 00.0000BE2E E34A                         lsl     #1,d2
11751 00.0000BE30 8242                         or      d2,d1
11752 00.0000BE32 827A00D0                     or      lsldn(pc),d1
11753 00.0000BE36 6100D6D4                     bsr     pokewd
11754 00.0000BE3A 4C9F0006                     movem   (a7)+,d1/d2
11755 00.0000BE3E 5142                         subq    #8,d2
11756 00.0000BE40 6000FFDC                     bra     .shloop
11757 00.0000BE44 3F01                 .simp   move    d1,-(a7)
11758 00.0000BE46 4A42                         tst     d2
11759 00.0000BE48 67000014                     beq     .simp2
11760 00.0000BE4C                              ;
11761 00.0000BE4C 02420007                     and     #7,d2   ;?????
11762 00.0000BE50                              ;
11763 00.0000BE50 E14A                         lsl     #8,d2
11764 00.0000BE52 E34A                         lsl     #1,d2
11765 00.0000BE54 8242                         or      d2,d1
11766 00.0000BE56 827A00AC                     or      lsldn(pc),d1
11767 00.0000BE5A 6100D6B0                     bsr     pokewd
11768 00.0000BE5E                      .simp2  ;
11769 00.0000BE5E                              ;Shifts are done, add'em to the opcode
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 260
blitz2.s


11770 00.0000BE5E                              ;
11771 00.0000BE5E 321F                         move    (a7)+,d1
11772 00.0000BE60 02410007                     and     #7,d1
11773 00.0000BE64 827A00AA                     or      maxdo(pc),d1
11774 00.0000BE68 341F                         move    (a7)+,d2
11775 00.0000BE6A E34A                         lsl     #1,d2
11776 00.0000BE6C 02420E00                     and     #$e00,d2
11777 00.0000BE70 8242                         or      d2,d1
11778 00.0000BE72 6000D698                     bra     pokewd
11779 00.0000BE76                              ;
11780 00.0000BE76 B43C0001             .skippy1        cmp.b   #1,d2
11781 00.0000BE7A 6700002E                     beq     .skippy
11782 00.0000BE7E                              ;
11783 00.0000BE7E                              ;select used of a max block
11784 00.0000BE7E                              ;
11785 00.0000BE7E 5841                         addq    #4,d1
11786 00.0000BE80                              ;
11787 00.0000BE80 4A390000400A                 tst.b   debugga
11788 00.0000BE86 67000022                     beq     .skippy
11789 00.0000BE8A                              ;
11790 00.0000BE8A 6100D680                     bsr     pokewd
11791 00.0000BE8E 4841                         swap    d1
11792 00.0000BE90 323A001C                     move    .theretest(pc),d1
11793 00.0000BE94 4841                         swap    d1
11794 00.0000BE96 6100D66C                     bsr     pokel
11795 00.0000BE9A 223A0016                     move.l  .theretest+4(pc),d1
11796 00.0000BE9E 6100D664                     bsr     pokel
11797 00.0000BEA2 223A0012                     move.l  .theretest+8(pc),d1
11798 00.0000BEA6 6000D65C                     bra     pokel
11799 00.0000BEAA                              ;
11800 00.0000BEAA                      .skippy ;select base of a max block
11801 00.0000BEAA 6000D660                     bra     pokewd
11802 00.0000BEAE                      
11803 00.0000BEAE 4AAD0000             .theretest      tst.l   0(a5)
11804 00.0000BEB2 66000006                     bne     .ttskip
11805 00.0000BEB6 7001                         moveq   #1,d0
11806 00.0000BEB8 4E40                         trap    #0
11807 00.0000BEBA                      .ttskip
11808 00.0000BEBA                      
11809 00.0000BEBA                      .norm   ;
11810 00.0000BEBA E04A                         lsr     #8,d2
11811 00.0000BEBC B43C0016                     cmp.b   #$16,d2
11812 00.0000BEC0 66000016                     bne     .nota6
11813 00.0000BEC4 3229000A                     move    10(a1),d1
11814 00.0000BEC8 B2790000EC22                 cmp     lasta6,d1
11815 00.0000BECE 67000032                     beq     .sk
11816 00.0000BED2 33C10000EC22                 move    d1,lasta6
11817 00.0000BED8 6100003E             .nota6  bsr     makeregop
11818 00.0000BEDC 4A69001A                     tst     26(a1)
11819 00.0000BEE0 6A000014                     bpl     .long
11820 00.0000BEE4 B27A002E                     cmp     stackop(pc),d1
11821 00.0000BEE8 66000008                     bne     .notst
11822 00.0000BEEC 55790000E9B8                 subq    #2,stackuse
11823 00.0000BEF2 00411000             .notst  or      #$1000,d1
11824 00.0000BEF6 6100D614             .long   bsr     pokewd
11825 00.0000BEFA 3229000A                     move    10(a1),d1
11826 00.0000BEFE 6100D60C                     bsr     pokewd
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 261
blitz2.s


11827 00.0000BF02 4E75                 .sk     rts
11828 00.0000BF04                      
11829 00.0000BF04 E148                 lsldn   lsl     #8,d0
11830 00.0000BF06                      
11831 00.0000BF06 65000008             maxchk  bcs     .ok
11832 00.0000BF0A 4EB900000000                 jsr     0
11833 00.0000BF10                      .ok     ;
11834 00.0000BF10                      
11835 00.0000BF10 D0C0                 maxdo   add     d0,a0
11836 00.0000BF12                              ;lea    0(a0,d0),a0
11837 00.0000BF12                      
11838 00.0000BF12 0000                 stackopuse      dc      0
11839 00.0000BF14 2F2D0000             stackop move.l  0(a5),-(a7)
11840 00.0000BF18                      
11841 00.0000BF18                      makeregop       ;make move x(a5),dn/an based on d2
11842 00.0000BF18                              ;
11843 00.0000BF18 B43C00FF                     cmp.b   #$ff,d2
11844 00.0000BF1C 6600000E                     bne     .notst
11845 00.0000BF20 323AFFF2                     move    stackop(pc),d1
11846 00.0000BF24 58790000E9B8                 addq    #4,stackuse
11847 00.0000BF2A 4E75                         rts
11848 00.0000BF2C 2F0B                 .notst  move.l  a3,-(a7)
11849 00.0000BF2E 47F900002A5E                 lea     regtransd,a3
11850 00.0000BF34 08020004                     btst    #4,d2
11851 00.0000BF38 67000008                     beq     .skip
11852 00.0000BF3C 47F900002A62                 lea     regtransa,a3
11853 00.0000BF42 02420007             .skip   and     #7,d2
11854 00.0000BF46 3202                         move    d2,d1
11855 00.0000BF48 E149                         lsl     #8,d1
11856 00.0000BF4A E349                         lsl     #1,d1
11857 00.0000BF4C 8253                         or      (a3),d1
11858 00.0000BF4E 265F                         move.l  (a7)+,a3
11859 00.0000BF50 4E75                         rts
11860 00.0000BF52                      
11861 00.0000BF52                      ifchar  ;return eq=1 if <,=,>
11862 00.0000BF52                              ;
11863 00.0000BF52 B07C003C                     cmp     #60,d0
11864 00.0000BF56 65000010                     bcs     .no
11865 00.0000BF5A B07C003E                     cmp     #62,d0
11866 00.0000BF5E 62000008                     bhi     .no
11867 00.0000BF62 0440003C                     sub     #60,d0
11868 00.0000BF66 B040                         cmp     d0,d0
11869 00.0000BF68 4E75                 .no     rts
11870 00.0000BF6A                      
11871 00.0000BF6A                      evalconst       ;
11872 00.0000BF6A 6100BCD8                     bsr     bakup
11873 00.0000BF6E                              ;
11874 00.0000BF6E                              ;evaluate a constant at a5...
11875 00.0000BF6E                              ;first char in d0...
11876 00.0000BF6E                              ;
11877 00.0000BF6E                              ;get long into d3 (d6=0)
11878 00.0000BF6E                              ;or ffp into d3 (d6<>0)
11879 00.0000BF6E                              ;
11880 00.0000BF6E                      evalconst2      ;
11881 00.0000BF6E                      evalconst3      ;move.l maths,a6
11882 00.0000BF6E                              ;
11883 00.0000BF6E 3F3900002B06                 move    regat,-(a7)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 262
blitz2.s


11884 00.0000BF74 427900002B06                 clr     regat
11885 00.0000BF7A 2F390000E8F6                 move.l  pc,-(a7)
11886 00.0000BF80 2F390000E8FA                 move.l  libat,-(a7)
11887 00.0000BF86 3F390000E858                 move    nomemleft,-(a7)
11888 00.0000BF8C 3F390000EC22                 move    lasta6,-(a7)
11889 00.0000BF92 3F390000E32E                 move    cfetchmode,-(a7)
11890 00.0000BF98                              ;
11891 00.0000BF98 6600001C                     bne     .something
11892 00.0000BF9C                              ;
11893 00.0000BF9C 23F90000E8FA0000C034         move.l  libat,oldlibat
11894 00.0000BFA6 20790000E336                 move.l  constpcat,a0
11895 00.0000BFAC 23C80000E8F6                 move.l  a0,pc
11896 00.0000BFB2 60000008                     bra     .some2
11897 00.0000BFB6                              ;
11898 00.0000BFB6                      .something      ;already cfetching!
11899 00.0000BFB6                              ;
11900 00.0000BFB6 20790000E8F6                 move.l  pc,a0   ;continue in cmode buff
11901 00.0000BFBC                              ;
11902 00.0000BFBC 2F08                 .some2  move.l  a0,-(a7)
11903 00.0000BFBE                              ;
11904 00.0000BFBE 23F90000E33A0000E8FA         move.l  constlibat,libat        ;for overflow
11905 00.0000BFC8 42790000E858                 clr     nomemleft
11906 00.0000BFCE 33FCFFFF0000EC22             move    #-1,lasta6
11907 00.0000BFD6 33FCFFFF0000E32E             move    #-1,cfetchmode
11908 00.0000BFDE                              ;
11909 00.0000BFDE 6100D972                     bsr     arreval ;!
11910 00.0000BFE2                              ;
11911 00.0000BFE2 323C2600                     move    #$2600,d1       ;move.l d0,d3
11912 00.0000BFE6 827900002B06                 or      regat,d1
11913 00.0000BFEC 6100D51E                     bsr     pokewd
11914 00.0000BFF0 323C4E75                     move    #$4e75,d1       ;rts!
11915 00.0000BFF4 6100D516                     bsr     pokewd
11916 00.0000BFF8                              ;
11917 00.0000BFF8 32390000E858                 move    nomemleft,d1
11918 00.0000BFFE 6600C05C                     bne     conmemerr
11919 00.0000C002                              ;
11920 00.0000C002 205F                         move.l  (a7)+,a0
11921 00.0000C004 4EB90000337C                 jsr     flushc
11922 00.0000C00A                              ;
11923 00.0000C00A 4E90                         jsr     (a0)
11924 00.0000C00C                              ;
11925 00.0000C00C 33DF0000E32E                 move    (a7)+,cfetchmode
11926 00.0000C012 33DF0000EC22                 move    (a7)+,lasta6
11927 00.0000C018 33DF0000E858                 move    (a7)+,nomemleft
11928 00.0000C01E 23DF0000E8FA                 move.l  (a7)+,libat
11929 00.0000C024 23DF0000E8F6                 move.l  (a7)+,pc
11930 00.0000C02A 33DF00002B06                 move    (a7)+,regat
11931 00.0000C030                              ;
11932 00.0000C030 6000BC08                     bra     reget
11933 00.0000C034                      
11934 00.0000C034 00000000             oldlibat        dc.l    0
11935 00.0000C038                      
11936 00.0000C038 41F90000E7D4         doincdir        lea     incdir,a0
11937 00.0000C03E B07C0022             .loop   cmp     #'"',d0
11938 00.0000C042 6700000E                     beq     .skip
11939 00.0000C046 10C0                         move.b  d0,(a0)+
11940 00.0000C048 4A40                         tst     d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 263
blitz2.s


11941 00.0000C04A 6700000E                     beq     .done
11942 00.0000C04E 6B00C392                     bmi     syntaxerr
11943 00.0000C052 6100BBBA             .skip   bsr     getchar3
11944 00.0000C056 6000FFE6                     bra     .loop
11945 00.0000C05A 4E75                 .done   rts
11946 00.0000C05C                      
11947 00.0000C05C                      makeiname       ;
11948 00.0000C05C                              ;create include name
11949 00.0000C05C                              ;
11950 00.0000C05C 43F90000EC68                 lea     namebuff,a1
11951 00.0000C062 41F90000E7D4                 lea     incdir,a0
11952 00.0000C068 74FF                         moveq   #-1,d2
11953 00.0000C06A 5242                 .loop0  addq    #1,d2
11954 00.0000C06C 12D8                         move.b  (a0)+,(a1)+
11955 00.0000C06E 6600FFFA                     bne     .loop0
11956 00.0000C072 5349                         subq    #1,a1
11957 00.0000C074 6100BBCE                     bsr     bakup
11958 00.0000C078                              ;
11959 00.0000C078 6100BB94             .loop   bsr     getchar3
11960 00.0000C07C 4A40                         tst     d0
11961 00.0000C07E 6B00C362                     bmi     syntaxerr
11962 00.0000C082 B03C0022                     cmp.b   #'"',d0
11963 00.0000C086 6700FFF0                     beq     .loop
11964 00.0000C08A 12C0                         move.b  d0,(a1)+
11965 00.0000C08C 67000008                     beq     .done
11966 00.0000C090 5242                         addq    #1,d2
11967 00.0000C092 6000FFE4                     bra     .loop
11968 00.0000C096 4A42                 .done   tst     d2
11969 00.0000C098 6700C348                     beq     syntaxerr
11970 00.0000C09C 4E75                         rts
11971 00.0000C09E                      
11972 00.0000C09E                      readinc ;do include next line
11973 00.0000C09E                              ;a5=position in buffer
11974 00.0000C09E                              ;
11975 00.0000C09E 24790000EC1E                 move.l  firstinc,a2
11976 00.0000C0A4                              ;
11977 00.0000C0A4 2A6A000E                     move.l  14(a2),a5
11978 00.0000C0A8 206A0004                     move.l  4(a2),a0
11979 00.0000C0AC 302A000C                     move    12(a2),d0
11980 00.0000C0B0 41F00000                     lea     0(a0,d0),a0     ;end of buffer!
11981 00.0000C0B4 224D                         move.l  a5,a1
11982 00.0000C0B6 B3C8                 .loop   cmp.l   a0,a1
11983 00.0000C0B8 6400000C                     bcc     readpend
11984 00.0000C0BC 4A19                         tst.b   (a1)+
11985 00.0000C0BE 6600FFF6                     bne     .loop
11986 00.0000C0C2 6000004E                     bra     imakeend
11987 00.0000C0C6                              
11988 00.0000C0C6                      readpend        ;o.k., no 0's past where we're at!
11989 00.0000C0C6                              ;
11990 00.0000C0C6 226A0004                     move.l  4(a2),a1
11991 00.0000C0CA BBC8                 .loop   cmp.l   a0,a5
11992 00.0000C0CC 64000008                     bcc     .skip
11993 00.0000C0D0 12DD                         move.b  (a5)+,(a1)+
11994 00.0000C0D2 6000FFF6                     bra     .loop
11995 00.0000C0D6 2009                 .skip   move.l  a1,d0
11996 00.0000C0D8 90AA0004                     sub.l   4(a2),d0
11997 00.0000C0DC 3540000C                     move    d0,12(a2)       ;chars in there
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 264
blitz2.s


11998 00.0000C0E0                              ;
11999 00.0000C0E0 2C7900000154                 move.l  dos,a6
12000 00.0000C0E6 222A0008                     move.l  8(a2),d1
12001 00.0000C0EA 2409                         move.l  a1,d2
12002 00.0000C0EC 263C000003FF                 move.l  #inclen-1,d3
12003 00.0000C0F2 9640                         sub     d0,d3
12004 00.0000C0F4                              ;
12005 00.0000C0F4 4EAEFFD6                     jsr     read(a6)
12006 00.0000C0F8                              ;
12007 00.0000C0F8 4A80                         tst.l   d0 
12008 00.0000C0FA 6B00C70E                     bmi     readerr
12009 00.0000C0FE D16A000C                     add     d0,12(a2)
12010 00.0000C102 6700001C                     beq     closeinc
12011 00.0000C106 2A6A0004                     move.l  4(a2),a5
12012 00.0000C10A 302A000C                     move    12(a2),d0
12013 00.0000C10E 42350000                     clr.b   0(a5,d0)
12014 00.0000C112 204D                 imakeend        move.l  a5,a0
12015 00.0000C114 4A18                 .loop2  tst.b   (a0)+
12016 00.0000C116 6600FFFC                     bne     .loop2
12017 00.0000C11A 2548000E                     move.l  a0,14(a2)
12018 00.0000C11E 4E75                         rts
12019 00.0000C120                      
12020 00.0000C120 222A0008             closeinc        move.l  8(a2),d1
12021 00.0000C124 4EAEFFDC                     jsr     close(a6)
12022 00.0000C128 2C780004                     move.l  4.w,a6
12023 00.0000C12C 226A0004                     move.l  4(a2),a1
12024 00.0000C130 203C00000400                 move.l  #inclen,d0
12025 00.0000C136 4EAEFF2E                     jsr     freemem(a6)
12026 00.0000C13A                              ;
12027 00.0000C13A 23D20000EC1E                 move.l  (a2),firstinc
12028 00.0000C140 224A                         move.l  a2,a1
12029 00.0000C142 7000                         moveq   #0,d0
12030 00.0000C144 102A0012                     move.b  18(a2),d0
12031 00.0000C148 2C780004                     move.l  4.w,a6
12032 00.0000C14C 4EAEFF2E                     jsr     freemem(a6)
12033 00.0000C150 53790000EC18                 subq    #1,numincs
12034 00.0000C156 6600FF46                     bne     readinc
12035 00.0000C15A 4E75                         rts
12036 00.0000C15C                      
12037 00.0000C15C 24790000EC1A         freexincs       move.l  firstxinc,a2
12038 00.0000C162 42B90000EC1A                 clr.l   firstxinc
12039 00.0000C168 B4FC0000             .loop   cmp     #0,a2
12040 00.0000C16C 67000018                     beq     .done
12041 00.0000C170 7000                         moveq   #0,d0
12042 00.0000C172 102A0004                     move.b  4(a2),d0
12043 00.0000C176 224A                         move.l  a2,a1
12044 00.0000C178 2452                         move.l  (a2),a2
12045 00.0000C17A 2C780004                     move.l  4.w,a6
12046 00.0000C17E 4EAEFF2E                     jsr     freemem(a6)
12047 00.0000C182 6000FFE4                     bra     .loop
12048 00.0000C186 4E75                 .done   rts
12049 00.0000C188                      
12050 00.0000C188 24790000EC1E         freeincs        move.l  firstinc,a2
12051 00.0000C18E 42B90000EC1E                 clr.l   firstinc
12052 00.0000C194 B4FC0000             .loop   cmp     #0,a2
12053 00.0000C198 67000042                     beq     .done
12054 00.0000C19C 222A0008                     move.l  8(a2),d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 265
blitz2.s


12055 00.0000C1A0 6700000C                     beq     .noclose
12056 00.0000C1A4 2C7900000154                 move.l  dos,a6
12057 00.0000C1AA 4EAEFFDC                     jsr     close(a6)
12058 00.0000C1AE 202A0004             .noclose        move.l  4(a2),d0
12059 00.0000C1B2 67000012                     beq     .skip
12060 00.0000C1B6 2240                         move.l  d0,a1
12061 00.0000C1B8 203C00000400                 move.l  #inclen,d0
12062 00.0000C1BE 2C780004                     move.l  4.w,a6
12063 00.0000C1C2 4EAEFF2E                     jsr     freemem(a6)
12064 00.0000C1C6                              ;
12065 00.0000C1C6 7000                 .skip   moveq   #0,d0
12066 00.0000C1C8 102A0012                     move.b  18(a2),d0
12067 00.0000C1CC 224A                         move.l  a2,a1
12068 00.0000C1CE 2452                         move.l  (a2),a2
12069 00.0000C1D0 2C780004                     move.l  4.w,a6
12070 00.0000C1D4 4EAEFF2E                     jsr     freemem(a6)
12071 00.0000C1D8 6000FFBA                     bra     .loop
12072 00.0000C1DC 4E75                 .done   rts
12073 00.0000C1DE                      
12074 00.0000C1DE                      pokedata2l      ;
12075 00.0000C1DE                              ;poke a long into data2!
12076 00.0000C1DE                              ;
12077 00.0000C1DE 4840                         swap    d0
12078 00.0000C1E0 61000004                     bsr     pokedata2
12079 00.0000C1E4 4840                         swap    d0
12080 00.0000C1E6                              ;
12081 00.0000C1E6                      pokedata2       ;poke a word into data2 (data staements)
12082 00.0000C1E6                              ;
12083 00.0000C1E6 28790000E8E6                 move.l  data2,a4
12084 00.0000C1EC B9F90000E902                 cmp.l   allat,a4
12085 00.0000C1F2 6400000C                     bcc     .over
12086 00.0000C1F6 38C0                         move    d0,(a4)+
12087 00.0000C1F8 23CC0000E8E6                 move.l  a4,data2
12088 00.0000C1FE 4E75                         rts
12089 00.0000C200 33FCFFFF0000E858     .over   move    #-1,nomemleft
12090 00.0000C208 54B90000E8E6                 addq.l  #2,data2
12091 00.0000C20E 4E75                         rts
12092 00.0000C210                              ;
12093 00.0000C210                      
12094 00.0000C210 28790000E8E6         pokedata2b      move.l  data2,a4
12095 00.0000C216 B9F90000E902                 cmp.l   allat,a4
12096 00.0000C21C 6400000C                     bcc     .over
12097 00.0000C220 18C0                         move.b  d0,(a4)+
12098 00.0000C222 23CC0000E8E6                 move.l  a4,data2
12099 00.0000C228 4E75                         rts
12100 00.0000C22A 33FCFFFF0000E858     .over   move    #-1,nomemleft
12101 00.0000C232 52B90000E8E6                 addq.l  #1,data2
12102 00.0000C238 4E75                         rts
12103 00.0000C23A                      
12104 00.0000C23A                      getsp   ;get a string parameter for conditional stuff
12105 00.0000C23A                              ;into a0
12106 00.0000C23A B07C0022                     cmp     #'"',d0
12107 00.0000C23E 6600C1A2                     bne     syntaxerr
12108 00.0000C242 6100B9CA             getsp2  bsr     getchar3
12109 00.0000C246 B03C0022                     cmp.b   #'"',d0
12110 00.0000C24A 6700000E                     beq     .done
12111 00.0000C24E 4A40                         tst     d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 266
blitz2.s


12112 00.0000C250 6700C190                     beq     syntaxerr
12113 00.0000C254 10C0                         move.b  d0,(a0)+
12114 00.0000C256 6000FFEA                     bra     getsp2
12115 00.0000C25A 4210                 .done   clr.b   (a0)
12116 00.0000C25C 4E75                         rts
12117 00.0000C25E                      
12118 00.0000C25E 4A83                 numcom  tst.l   d3
12119 00.0000C260 4E75                         rts
12120 00.0000C262                      
12121 00.0000C262                      strcom  ;compare strings. set flags accordingly
12122 00.0000C262                              ;
12123 00.0000C262 41F90000EC68                 lea     namebuff,a0
12124 00.0000C268 43F90000ECE8                 lea     namebuff2,a1
12125 00.0000C26E 1018                 .loop   move.b  (a0)+,d0
12126 00.0000C270 6700000A                     beq     .short
12127 00.0000C274 B019                         cmp.b   (a1)+,d0
12128 00.0000C276 6700FFF6                     beq     .loop
12129 00.0000C27A 4E75                         rts
12130 00.0000C27C 4A11                 .short  tst.b   (a1)
12131 00.0000C27E 66000004                     bne     .lt
12132 00.0000C282 4E75                         rts
12133 00.0000C284 B07C0001             .lt     cmp     #1,d0
12134 00.0000C288 4E75                         rts
12135 00.0000C28A                      
12136 00.0000C28A                      ;-----------built in tokens------------;
12137 00.0000C28A                      tokes
12138 00.0000C28A                      
12139 00.0000C28A B07C002E             dodeftype       cmp     #'.',d0
12140 00.0000C28E 6600C152                     bne     syntaxerr
12141 00.0000C292 6100C958                     bsr     makename
12142 00.0000C296 45F90000E760                 lea     alltypes,a2
12143 00.0000C29C 6100CA20                     bsr     findtype
12144 00.0000C2A0 6600C19E                     bne     notypeerr
12145 00.0000C2A4 6100B994                     bsr     reget
12146 00.0000C2A8 6600000A                     bne     .more
12147 00.0000C2AC 23CA0000E848                 move.l  a2,defaulttype
12148 00.0000C2B2 4E75                         rts     
12149 00.0000C2B4                      .more   ;
12150 00.0000C2B4                              ;deftype.l varlist...
12151 00.0000C2B4                              ;
12152 00.0000C2B4 2F390000E848                 move.l  defaulttype,-(a7)
12153 00.0000C2BA 23CA0000E848                 move.l  a2,defaulttype
12154 00.0000C2C0                              ;
12155 00.0000C2C0 6100D4E6             .loopz  bsr     getvname
12156 00.0000C2C4 6100CB76                     bsr     fetchvar
12157 00.0000C2C8 B07C002C                     cmp     #',',d0
12158 00.0000C2CC 6600000A                     bne     .done
12159 00.0000C2D0 6100B93C                     bsr     getchar3
12160 00.0000C2D4 6000FFEA                     bra     .loopz
12161 00.0000C2D8                              ;
12162 00.0000C2D8 23DF0000E848         .done   move.l  (a7)+,defaulttype
12163 00.0000C2DE 4E75                         rts
12164 00.0000C2E0                      
12165 00.0000C2E0 45ED0000             maxprep1        lea     0(a5),a2
12166 00.0000C2E4 200A                 maxprep2        move.l  a2,d0
12167 00.0000C2E6                      
12168 00.0000C2E6                      domaxlen        ;set a strings maximum length.
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 267
blitz2.s


12169 00.0000C2E6                              ;
12170 00.0000C2E6 6100D4C0                     bsr     getvname
12171 00.0000C2EA 6100CB50                     bsr     fetchvar
12172 00.0000C2EE 6100CE32                     bsr     calcvar
12173 00.0000C2F2                              ;
12174 00.0000C2F2 B43C0007                     cmp.b   #7,d2
12175 00.0000C2F6 6600C246                     bne     mismatcherr
12176 00.0000C2FA 3F3A2906                     move    varmode(pc),-(a7)
12177 00.0000C2FE B07C003D                     cmp     #'=',d0
12178 00.0000C302 6600C0DE                     bne     syntaxerr
12179 00.0000C306 0802000F                     btst    #15,d2
12180 00.0000C30A 66000010                     bne     .already
12181 00.0000C30E 323AFFD0                     move    maxprep1(pc),d1
12182 00.0000C312 6100D1AC                     bsr     pokewda5s
12183 00.0000C316 3203                         move    d3,d1
12184 00.0000C318 6100D1F2                     bsr     pokewd
12185 00.0000C31C 323AFFC6             .already        move    maxprep2(pc),d1
12186 00.0000C320 6100D1EA                     bsr     pokewd
12187 00.0000C324 527900002B06                 addq    #1,regat
12188 00.0000C32A 7403                         moveq   #3,d2
12189 00.0000C32C 6100D65E                     bsr     eval
12190 00.0000C330 323CD000                     move    #maxlen,d1
12191 00.0000C334 4A5F                         tst     (a7)+
12192 00.0000C336 6700F770                     beq     tokejsr
12193 00.0000C33A 5241                         addq    #1,d1
12194 00.0000C33C 6000F76A                     bra     tokejsr
12195 00.0000C340                      
12196 00.0000C340 3200                 getmaxel        move    d0,d1
12197 00.0000C342 6A00C09E                     bpl     syntaxerr
12198 00.0000C346 0881000F                     bclr    #15,d1
12199 00.0000C34A 6100AC0A                     bsr     findtoke
12200 00.0000C34E 202A0012                     move.l  18(a2),d0
12201 00.0000C352 4A7208FE                     tst     -2(a2,d0.l)
12202 00.0000C356 6700BE6C                     beq     freeerr
12203 00.0000C35A 7402                         moveq   #2,d2
12204 00.0000C35C 2F0A                         move.l  a2,-(a7)
12205 00.0000C35E                              ;
12206 00.0000C35E 6100D62C                     bsr     eval
12207 00.0000C362                              ;
12208 00.0000C362 245F                         move.l  (a7)+,a2
12209 00.0000C364 23CA0000C3E2                 move.l  a2,mymaxlib
12210 00.0000C36A                              ;
12211 00.0000C36A D5EA0012                     add.l   18(a2),a2
12212 00.0000C36E 4A390000400A                 tst.b   debugga
12213 00.0000C374 67000032                     beq     .pen
12214 00.0000C378                              ;
12215 00.0000C378                              ;check maximum overflow
12216 00.0000C378                              ;
12217 00.0000C378 323900002B06                 move    regat,d1
12218 00.0000C37E E149                         lsl     #8,d1
12219 00.0000C380 E349                         lsl     #1,d1
12220 00.0000C382 0041B07C                     or      #$b07c,d1       ;cmp #x,dn
12221 00.0000C386 6100D184                     bsr     pokewd
12222 00.0000C38A 322AFFFC                     move    -4(a2),d1
12223 00.0000C38E 6100D17C                     bsr     pokewd
12224 00.0000C392 22390000BF06                 move.l  maxchk,d1       ;bcs
12225 00.0000C398 6100D16A                     bsr     pokel
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 268
blitz2.s


12226 00.0000C39C 2F0A                         move.l  a2,-(a7)
12227 00.0000C39E 323CC30A                     move    #maxerr,d1
12228 00.0000C3A2 6100F704                     bsr     tokejsr
12229 00.0000C3A6 245F                         move.l  (a7)+,a2
12230 00.0000C3A8                              ;
12231 00.0000C3A8 342AFFFE             .pen    move    -2(a2),d2       ;# shifts
12232 00.0000C3AC 323900002B06         .loop   move    regat,d1
12233 00.0000C3B2 8279000028CE                 or      lslimm,d1
12234 00.0000C3B8 B47C0008                     cmp     #8,d2
12235 00.0000C3BC 65000010                     bcs     .under
12236 00.0000C3C0 6100D14A                     bsr     pokewd
12237 00.0000C3C4 5142                         subq    #8,d2
12238 00.0000C3C6 6600FFE4                     bne     .loop
12239 00.0000C3CA 6000000E                     bra     .shdone
12240 00.0000C3CE 3002                 .under  move    d2,d0
12241 00.0000C3D0 E148                         lsl     #8,d0
12242 00.0000C3D2 E348                         lsl     #1,d0
12243 00.0000C3D4 8240                         or      d0,d1
12244 00.0000C3D6 6100D134                     bsr     pokewd
12245 00.0000C3DA 4E75                 .shdone rts
12246 00.0000C3DC                      
12247 00.0000C3DC 266D0000             free    move.l  0(a5),a3
12248 00.0000C3E0 D6C0                         add     d0,a3
12249 00.0000C3E2                      freef   ;
12250 00.0000C3E2                      
12251 00.0000C3E2 00000000             mymaxlib        dc.l    0
12252 00.0000C3E6                      
12253 00.0000C3E6 6100FF58             dofree  bsr     getmaxel
12254 00.0000C3EA                              ;
12255 00.0000C3EA 41FAFFF0                     lea     free(pc),a0
12256 00.0000C3EE 43FAFFF2                     lea     freef(pc),a1
12257 00.0000C3F2 316AFFFA0002                 move    -6(a2),2(a0)
12258 00.0000C3F8 6100D1A8                     bsr     pokecode
12259 00.0000C3FC                              ;
12260 00.0000C3FC 222AFFF6                     move.l  -10(a2),d1
12261 00.0000C400                              ;
12262 00.0000C400 6700BDB0             maxjsr  beq     nosuperr
12263 00.0000C404 247AFFDC                     move.l  mymaxlib(pc),a2
12264 00.0000C408 6000F6EE                     bra     makelibsub
12265 00.0000C40C                      
12266 00.0000C40C 6100FF32             douse   bsr     getmaxel
12267 00.0000C410                              ;
12268 00.0000C410 41F9000028D0                 lea     use,a0
12269 00.0000C416 43F9000028DA                 lea     usef,a1
12270 00.0000C41C 316AFFFA0002                 move    -6(a2),2(a0)
12271 00.0000C422 336AFFFAFFFE                 move    -6(a2),-2(a1)
12272 00.0000C428 5869FFFE                     addq    #4,-2(a1)
12273 00.0000C42C 6100D174                     bsr     pokecode
12274 00.0000C430                              ;
12275 00.0000C430 222AFFF2                     move.l  -14(a2),d1
12276 00.0000C434                              ;
12277 00.0000C434 6000FFCA                     bra     maxjsr
12278 00.0000C438                      
12279 00.0000C438 6100B7D4             doelse2 bsr     getchar3
12280 00.0000C43C 203900002B44         doelse  move.l  firstif,d0
12281 00.0000C442 6700C23A                     beq     noiferr
12282 00.0000C446 2040                         move.l  d0,a0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 269
blitz2.s


12283 00.0000C448 0C280001000D                 cmp.b   #1,13(a0)
12284 00.0000C44E 6700BE5E                     beq     illelseerr
12285 00.0000C452 323C6000                     move    #$6000,d1
12286 00.0000C456 4841                         swap    d1
12287 00.0000C458 6100D0AA                     bsr     pokel
12288 00.0000C45C 7200                         moveq   #0,d1
12289 00.0000C45E 61001358                     bsr     doendif2
12290 00.0000C462 21790000E8F60008             move.l  pc,8(a0)
12291 00.0000C46A 60000C94                     bra     dothen
12292 00.0000C46E                      
12293 00.0000C46E                      docerr  ;
12294 00.0000C46E 41F90000EC68                 lea     namebuff,a0
12295 00.0000C474 2F08                         move.l  a0,-(a7)
12296 00.0000C476 6100FDC2                     bsr     getsp
12297 00.0000C47A 6000C684                     bra     err
12298 00.0000C47E                      
12299 00.0000C47E                      docnif  ;
12300 00.0000C47E 6100FAEA                     bsr     evalconst
12301 00.0000C482 7205                         moveq   #5,d1   ;beq
12302 00.0000C484 6100B7BE                     bsr     bakup
12303 00.0000C488 41F90000C25E                 lea     numcom,a0
12304 00.0000C48E 60000024                     bra     compare
12305 00.0000C492                      
12306 00.0000C492                      docsif  ;
12307 00.0000C492 41F90000EC68                 lea     namebuff,a0
12308 00.0000C498 6100FDA0                     bsr     getsp
12309 00.0000C49C 6100B770                     bsr     getchar3
12310 00.0000C4A0 61000806                     bsr     collif
12311 00.0000C4A4 41F90000ECE8                 lea     namebuff2,a0
12312 00.0000C4AA 6100FD8E                     bsr     getsp
12313 00.0000C4AE 41F90000C262                 lea     strcom,a0
12314 00.0000C4B4                              ;
12315 00.0000C4B4                      compare ;use subroutine in a0, cc in d1 to compare then enable
12316 00.0000C4B4                              ;or disable compilation
12317 00.0000C4B4                              ;accordingly
12318 00.0000C4B4                              ;
12319 00.0000C4B4 E549                         lsl     #2,d1
12320 00.0000C4B6 43F900002B68                 lea     cifbras,a1
12321 00.0000C4BC 2F311000                     move.l  0(a1,d1),-(a7)
12322 00.0000C4C0 72FF                         moveq   #-1,d1  ;comp flag
12323 00.0000C4C2 4E90                         jsr     (a0)
12324 00.0000C4C4 225F                         move.l  (a7)+,a1
12325 00.0000C4C6 4ED1                         jmp     (a1)
12326 00.0000C4C8                              ;
12327 00.0000C4C8 6700002C             cifeq   beq     cifdo
12328 00.0000C4CC 60000026                     bra     cifdont
12329 00.0000C4D0 66000024             cifne   bne     cifdo
12330 00.0000C4D4 6000001E                     bra     cifdont
12331 00.0000C4D8 6D00001C             ciflt   blt     cifdo
12332 00.0000C4DC 60000016                     bra     cifdont
12333 00.0000C4E0 6F000014             cifle   ble     cifdo
12334 00.0000C4E4 6000000E                     bra     cifdont
12335 00.0000C4E8 6E00000C             cifgt   bgt     cifdo
12336 00.0000C4EC 60000006                     bra     cifdont
12337 00.0000C4F0 6C000004             cifge   bge     cifdo
12338 00.0000C4F4                              ;
12339 00.0000C4F4 7200                 cifdont moveq   #0,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 270
blitz2.s


12340 00.0000C4F6 20790000E99C         cifdo   move.l  concomsp,a0
12341 00.0000C4FC 30F90000EC0E                 move    comflag,(a0)+
12342 00.0000C502 23C80000E99C                 move.l  a0,concomsp
12343 00.0000C508 33C10000EC0E                 move    d1,comflag
12344 00.0000C50E 6100B6FE                     bsr     getchar3
12345 00.0000C512 6600BECE                     bne     syntaxerr
12346 00.0000C516 6000B72C                     bra     bakup
12347 00.0000C51A                      
12348 00.0000C51A 2B7C000000000000     rescode move.l  #0,0(a5)
12349 00.0000C522 2B400000             rescode2        move.l  d0,0(a5)
12350 00.0000C526                      
12351 00.0000C526                      dorestore       ;Restore 'label'
12352 00.0000C526                              ;
12353 00.0000C526 323CFC17                     move    #64535,d1
12354 00.0000C52A 6100A516                     bsr     uselib
12355 00.0000C52E                              ;
12356 00.0000C52E 6100B70A                     bsr     reget
12357 00.0000C532 67000034                     beq     .resbeg
12358 00.0000C536 6100E8EA                     bsr     makealab        ;get label name!
12359 00.0000C53A 323AFFDE                     move    rescode(pc),d1
12360 00.0000C53E 6100CFCC                     bsr     pokewd
12361 00.0000C542 6100B3D8                     bsr     addoff  ;add offset
12362 00.0000C546 222A000C                     move.l  12(a2),d1
12363 00.0000C54A 6100CFB8                     bsr     pokel
12364 00.0000C54E 323AFFD0                     move    rescode+6(pc),d1
12365 00.0000C552 6100CFB8                     bsr     pokewd
12366 00.0000C556 222A0004                     move.l  4(a2),d1        ;is it outstanding?
12367 00.0000C55A 6700000A                     beq     .no
12368 00.0000C55E                              ;yes - tell it that reference is a DATA statement one
12369 00.0000C55E 2241                         move.l  d1,a1
12370 00.0000C560 52A90004                     addq.l  #1,4(a1)        ;make odd - flag for data reference.
12371 00.0000C564 4E75                         rts
12372 00.0000C566                              ;
12373 00.0000C566                      .no     ;data label not outstanding...this not working!?!?
12374 00.0000C566                              ;
12375 00.0000C566                      
12376 00.0000C566 4E75                         rts
12377 00.0000C568                              ;
12378 00.0000C568                      .resbeg ;restore to beginning...
12379 00.0000C568 323CCD00                     move    #getdstart,d1
12380 00.0000C56C 4EB90000BAA8                 jsr     tokejsr
12381 00.0000C572 223AFFAE                     move.l  rescode2(pc),d1
12382 00.0000C576 4EF900009504                 jmp     pokel
12383 00.0000C57C                      
12384 00.0000C57C                      doread  ;
12385 00.0000C57C 323CFC17                     move    #64535,d1
12386 00.0000C580 6100A4C0                     bsr     uselib
12387 00.0000C584                              ;
12388 00.0000C584 223900002902         .loop   move.l  dataget,d1
12389 00.0000C58A 6100CF78                     bsr     pokel
12390 00.0000C58E 6100D218                     bsr     getvname
12391 00.0000C592 6100C8A8                     bsr     fetchvar
12392 00.0000C596 6100CB8A                     bsr     calcvar
12393 00.0000C59A 0802000E                     btst    #14,d2
12394 00.0000C59E 67000006                     beq     .notap
12395 00.0000C5A2                              ;
12396 00.0000C5A2 143C0006                     move.b  #6,d2   ;pointer becomes an address!
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 271
blitz2.s


12397 00.0000C5A6                              ;
12398 00.0000C5A6 4A02                 .notap  tst.b   d2
12399 00.0000C5A8 6700BF5A                     beq     noleterr        ;read in a whole struct....later!
12400 00.0000C5AC 4A390000400A                 tst.b   debugga
12401 00.0000C5B2 6700001C                     beq     .norerr
12402 00.0000C5B6                              ;
12403 00.0000C5B6 323C7000                     move    #$7000,d1
12404 00.0000C5BA 1202                         move.b  d2,d1
12405 00.0000C5BC 0201000F                     and.b   #15,d1
12406 00.0000C5C0 6100CF4A                     bsr     pokewd
12407 00.0000C5C4 323CC310                     move    #datachk,d1
12408 00.0000C5C8 3F02                         move    d2,-(a7)
12409 00.0000C5CA 6100F4DC                     bsr     tokejsr
12410 00.0000C5CE 341F                         move    (a7)+,d2
12411 00.0000C5D0                              ;
12412 00.0000C5D0 B43C0007             .norerr cmp.b   #7,d2
12413 00.0000C5D4 670000AE                     beq     .string
12414 00.0000C5D8 B43C0001                     cmp.b   #1,d2
12415 00.0000C5DC 6600004C                     bne     .notbyte
12416 00.0000C5E0                              ;
12417 00.0000C5E0 41F900002922                 lea     dataletb2,a0
12418 00.0000C5E6 43F900002926                 lea     dataletb2f,a1
12419 00.0000C5EC 0802000F                     btst    #15,d2
12420 00.0000C5F0 6700000A                     beq     .bimm
12421 00.0000C5F4 6100CFAC                     bsr     pokecode
12422 00.0000C5F8 6000006E                     bra     .next
12423 00.0000C5FC 41F900002916         .bimm   lea     dataletb,a0
12424 00.0000C602 43F90000291C                 lea     dataletbf,a1
12425 00.0000C608                              ;
12426 00.0000C608 4A790000EC02                 tst     varmode
12427 00.0000C60E 6700000E                     beq     .byteglobal
12428 00.0000C612 41F90000291C                 lea     dataletbl,a0
12429 00.0000C618 43F900002922                 lea     dataletblf,a1
12430 00.0000C61E                      .byteglobal     ;
12431 00.0000C61E 31430004                     move    d3,4(a0)
12432 00.0000C622 6100CF7E                     bsr     pokecode
12433 00.0000C626 60000040                     bra     .next
12434 00.0000C62A                              ;
12435 00.0000C62A 41F900002926         .notbyte        lea     dataletw,a0
12436 00.0000C630 B43C0003                     cmp.b   #3,d2
12437 00.0000C634 65000008                     bcs     .word
12438 00.0000C638 41F900002930                 lea     dataletl,a0
12439 00.0000C63E 0802000F             .word   btst    #15,d2
12440 00.0000C642 6700000E                     beq     .imm
12441 00.0000C646 32280004                     move    4(a0),d1
12442 00.0000C64A 6100CEC0                     bsr     pokewd
12443 00.0000C64E 60000018                     bra     .next
12444 00.0000C652 4A790000EC02         .imm    tst     varmode
12445 00.0000C658 67000004                     beq     .wlglobal
12446 00.0000C65C 5C48                         addq    #6,a0
12447 00.0000C65E 31430002             .wlglobal       move    d3,2(a0)
12448 00.0000C662 2210                         move.l  (a0),d1
12449 00.0000C664 6100CE9E                     bsr     pokel
12450 00.0000C668 223900002906         .next   move.l  dataput,d1
12451 00.0000C66E 6100CE94                     bsr     pokel
12452 00.0000C672 B07C002C                     cmp     #',',d0
12453 00.0000C676 67000004                     beq     .more
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 272
blitz2.s


12454 00.0000C67A 4E75                         rts
12455 00.0000C67C 6100B590             .more   bsr     getchar3
12456 00.0000C680 6000FF02                     bra     .loop   
12457 00.0000C684 32390000290A         .string move    stlenget,d1
12458 00.0000C68A 6100CE80                     bsr     pokewd  ;move.l (a3)+,-(a7)
12459 00.0000C68E 0802000F                     btst    #15,d2
12460 00.0000C692 6600002C                     bne     .ok
12461 00.0000C696                              ;
12462 00.0000C696 4A790000EC02                 tst     varmode
12463 00.0000C69C 67000012                     beq     .sglobal
12464 00.0000C6A0 33C3000029D0                 move    d3,leaampl+2
12465 00.0000C6A6 2239000029CE                 move.l  leaampl,d1
12466 00.0000C6AC 6000000E                     bra     .sskip
12467 00.0000C6B0                              ;
12468 00.0000C6B0 33C3000029CA         .sglobal        move    d3,leaamp+2
12469 00.0000C6B6 2239000029C8                 move.l  leaamp,d1
12470 00.0000C6BC 6100CE46             .sskip  bsr     pokel
12471 00.0000C6C0                              ;
12472 00.0000C6C0 323CC701             .ok     move    #astring,d1
12473 00.0000C6C4 34390000EC02                 move    varmode,d2
12474 00.0000C6CA 67000004                     beq     .global
12475 00.0000C6CE 5341                         subq    #1,d1
12476 00.0000C6D0 6100F3D6             .global bsr     tokejsr
12477 00.0000C6D4 33FCFFFF0000EC22             move    #-1,lasta6
12478 00.0000C6DC 41F90000290C                 lea     stalign,a0
12479 00.0000C6E2 43F900002916                 lea     stalignf,a1
12480 00.0000C6E8 6100CEB8                     bsr     pokecode
12481 00.0000C6EC 6000FF7A                     bra     .next
12482 00.0000C6F0                      
12483 00.0000C6F0 B07C002E             getsize2        cmp     #'.',d0
12484 00.0000C6F4 6600002A                     bne     .word
12485 00.0000C6F8 6100B514                     bsr     getchar3
12486 00.0000C6FC B07C0077                     cmp     #'w',d0
12487 00.0000C700 6700001A                     beq     .word2
12488 00.0000C704 B07C0062                     cmp     #'b',d0
12489 00.0000C708 6700000E                     beq     .byte
12490 00.0000C70C B07C006C                     cmp     #'l',d0
12491 00.0000C710 6600BCD0                     bne     syntaxerr
12492 00.0000C714 7202                         moveq   #2,d1
12493 00.0000C716 4E75                         rts
12494 00.0000C718 7200                 .byte   moveq   #0,d1
12495 00.0000C71A 4E75                         rts
12496 00.0000C71C 7201                 .word2  moveq   #1,d1
12497 00.0000C71E 4E75                         rts
12498 00.0000C720 7201                 .word   moveq   #1,d1
12499 00.0000C722 6000B520                     bra     bakup
12500 00.0000C726                      
12501 00.0000C726                      dodcb   ;
12502 00.0000C726 6100FFC8             dodcb2  bsr     getsize2
12503 00.0000C72A 3F01                         move    d1,-(a7)
12504 00.0000C72C 6100F840                     bsr     evalconst2
12505 00.0000C730 B07C002C                     cmp     #',',d0
12506 00.0000C734 6600BCAC                     bne     syntaxerr
12507 00.0000C738 2F03                         move.l  d3,-(a7)
12508 00.0000C73A 6100F832                     bsr     evalconst2
12509 00.0000C73E 2203                         move.l  d3,d1   ;to put in memory
12510 00.0000C740 261F                         move.l  (a7)+,d3        ;number of times
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 273
blitz2.s


12511 00.0000C742 341F                         move    (a7)+,d2
12512 00.0000C744 6700002E                     beq     .byte
12513 00.0000C748 61000136                     bsr     alignpc
12514 00.0000C74C B47C0001                     cmp     #1,d2
12515 00.0000C750 67000016                     beq     .word
12516 00.0000C754 4841                 .long   swap    d1
12517 00.0000C756 6100CDB4                     bsr     pokewd
12518 00.0000C75A 4841                         swap    d1
12519 00.0000C75C 6100CDAE                     bsr     pokewd
12520 00.0000C760 5383                         subq.l  #1,d3
12521 00.0000C762 6600FFF0                     bne     .long
12522 00.0000C766 4E75                         rts
12523 00.0000C768 6100CDA2             .word   bsr     pokewd
12524 00.0000C76C 5383                         subq.l  #1,d3
12525 00.0000C76E 6600FFF8                     bne     .word
12526 00.0000C772 4E75                         rts
12527 00.0000C774 6100CDE6             .byte   bsr     pokebyte
12528 00.0000C778 5383                         subq.l  #1,d3
12529 00.0000C77A 6600FFF8                     bne     .byte
12530 00.0000C77E 4E75                         rts
12531 00.0000C780                      
12532 00.0000C780 6100FF6E             dods    bsr     getsize2
12533 00.0000C784 3F01                         move    d1,-(a7)
12534 00.0000C786 6100F7E6                     bsr     evalconst2
12535 00.0000C78A 321F                         move    (a7)+,d1
12536 00.0000C78C E3AB                         lsl.l   d1,d3
12537 00.0000C78E D7B90000E8F6                 add.l   d3,pc
12538 00.0000C794 4E75                         rts
12539 00.0000C796                      
12540 00.0000C796 3F00                 insasm2 move    d0,-(a7)
12541 00.0000C798 41F90000E906                 lea     dummyasm,a0
12542 00.0000C79E 22790000E8F6                 move.l  pc,a1
12543 00.0000C7A4 33F90000E92E0000E92C         move    asmlen2,asmlen
12544 00.0000C7AE 61009E40                     bsr     insasm
12545 00.0000C7B2 301F                         move    (a7)+,d0
12546 00.0000C7B4 4E75                         rts
12547 00.0000C7B6                      
12548 00.0000C7B6 6100FF38             dodc    bsr     getsize2
12549 00.0000C7BA 23FC0000EC680000E928         move.l  #namebuff,asmbuff
12550 00.0000C7C4 4A41                         tst     d1
12551 00.0000C7C6 67000026                     beq     .byte
12552 00.0000C7CA B27C0001                     cmp     #1,d1
12553 00.0000C7CE 67000074                     beq     .word
12554 00.0000C7D2                              ;
12555 00.0000C7D2                              ;Long!
12556 00.0000C7D2                              ;
12557 00.0000C7D2 760B                         moveq   #11,d3
12558 00.0000C7D4 610000AA                     bsr     alignpc
12559 00.0000C7D8 61009888             .lloop  bsr     asmconst
12560 00.0000C7DC 6100FFB8                     bsr     insasm2
12561 00.0000C7E0 6100CD22                     bsr     pokel
12562 00.0000C7E4 B07C002C                     cmp     #',',d0
12563 00.0000C7E8 6700FFEE                     beq     .lloop
12564 00.0000C7EC 4E75                         rts
12565 00.0000C7EE                              ;
12566 00.0000C7EE                      .byte   ;Byte!
12567 00.0000C7EE                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 274
blitz2.s


12568 00.0000C7EE 7611                         moveq   #17,d3
12569 00.0000C7F0 6100B41C             .bloop  bsr     getchar3
12570 00.0000C7F4 B07C0022                     cmp     #'"',d0
12571 00.0000C7F8 66000024                     bne     .notq
12572 00.0000C7FC 6100B410             .qloop  bsr     getchar3
12573 00.0000C800 6700BBE0                     beq     syntaxerr
12574 00.0000C804 B07C0022                     cmp     #'"',d0
12575 00.0000C808 6700000C                     beq     .qdone
12576 00.0000C80C 3200                         move    d0,d1
12577 00.0000C80E 6100CD4C                     bsr     pokebyte
12578 00.0000C812 6000FFE8                     bra     .qloop
12579 00.0000C816 6100B3F6             .qdone  bsr     getchar3
12580 00.0000C81A 6000001E                     bra     .bdone
12581 00.0000C81E 6100B424             .notq   bsr     bakup
12582 00.0000C822 6100983E                     bsr     asmconst
12583 00.0000C826 53B90000E8F6                 subq.l  #1,pc
12584 00.0000C82C 6100FF68                     bsr     insasm2
12585 00.0000C830 52B90000E8F6                 addq.l  #1,pc
12586 00.0000C836 6100CD24                     bsr     pokebyte
12587 00.0000C83A B07C002C             .bdone  cmp     #',',d0
12588 00.0000C83E 6700FFB0                     beq     .bloop
12589 00.0000C842 4E75                         rts
12590 00.0000C844                      .word   ;
12591 00.0000C844 7610                         moveq   #16,d3
12592 00.0000C846 61000038                     bsr     alignpc
12593 00.0000C84A 61009816             .wloop  bsr     asmconst
12594 00.0000C84E 6100FF46                     bsr     insasm2
12595 00.0000C852 6100CCB8                     bsr     pokewd
12596 00.0000C856 B07C002C                     cmp     #',',d0
12597 00.0000C85A 6700FFEE                     beq     .wloop
12598 00.0000C85E 4E75                         rts
12599 00.0000C860                      
12600 00.0000C860                      doeven4 ;long align
12601 00.0000C860 56B90000E8F6                 addq.l  #3,pc
12602 00.0000C866 0279FFFC0000E8F8             and     #$fffc,pc+2
12603 00.0000C86E 4E75                         rts
12604 00.0000C870                      
12605 00.0000C870                      doeven8 ;phrase align
12606 00.0000C870 5EB90000E8F6                 addq.l  #7,pc
12607 00.0000C876 0279FFF80000E8F8             and     #$fff8,pc+2
12608 00.0000C87E 4E75                         rts
12609 00.0000C880                      
12610 00.0000C880                      doeven  ;word align
12611 00.0000C880 52B90000E8F6         alignpc addq.l  #1,pc
12612 00.0000C886 08B900000000E8F9             bclr    #0,pc+3
12613 00.0000C88E 4E75                         rts
12614 00.0000C890                      
12615 00.0000C890 0000                 datasize        dc      0
12616 00.0000C892                      
12617 00.0000C892                      pdt     ;insert type of data item into code
12618 00.0000C892                              ;if runtime error checking is on.....
12619 00.0000C892                              ;
12620 00.0000C892                              ;codes for data..... Dn
12621 00.0000C892                              ;when 'D' means data, and n = 1 (byte) to 7 (string)
12622 00.0000C892 4A390000400A                 tst.b   debugga
12623 00.0000C898 6700000E                     beq     .skip
12624 00.0000C89C 303C4420                     move    #'D ',d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 275
blitz2.s


12625 00.0000C8A0 103AFFEF                     move.b  datasize+1(pc),d0
12626 00.0000C8A4 6000F940                     bra     pokedata2
12627 00.0000C8A8 4E75                 .skip   rts
12628 00.0000C8AA                      
12629 00.0000C8AA                      dodata  ;
12630 00.0000C8AA 323CFC17                     move    #64535,d1
12631 00.0000C8AE 6100A192                     bsr     uselib
12632 00.0000C8B2 6100B390                     bsr     bakup 
12633 00.0000C8B6 4EB90000498A                 jsr     sizespec2       ;get size of it into d1
12634 00.0000C8BC 33C10000C890                 move    d1,datasize
12635 00.0000C8C2                              ;
12636 00.0000C8C2                              ;(eg. Data.w)
12637 00.0000C8C2                              ;
12638 00.0000C8C2 B27C0007                     cmp     #7,d1
12639 00.0000C8C6 6700007C                     beq     .string
12640 00.0000C8CA                              ;
12641 00.0000C8CA 3F01                         move    d1,-(a7)
12642 00.0000C8CC 6100FFC4             .more   bsr     pdt
12643 00.0000C8D0 3417                         move    (a7),d2
12644 00.0000C8D2 6100E904                     bsr     fetchdata
12645 00.0000C8D6 B457                         cmp     (a7),d2
12646 00.0000C8D8 67000046                     beq     .dataok
12647 00.0000C8DC                              ;
12648 00.0000C8DC 3202                         move    d2,d1
12649 00.0000C8DE 3417                         move    (a7),d2
12650 00.0000C8E0 B47C0002                     cmp     #2,d2
12651 00.0000C8E4 66000018                     bne     .notw
12652 00.0000C8E8 B27C0003                     cmp     #3,d1
12653 00.0000C8EC 6600C192                     bne     baddaterr
12654 00.0000C8F0 B6BC00010000                 cmp.l   #65536,d3
12655 00.0000C8F6 6400C188                     bcc     baddaterr
12656 00.0000C8FA 60000024                     bra     .dataok
12657 00.0000C8FE                              ;
12658 00.0000C8FE B47C0001             .notw   cmp     #1,d2
12659 00.0000C902 66000018                     bne     .notb
12660 00.0000C906 B27C0002                     cmp     #2,d1
12661 00.0000C90A 6600C174                     bne     baddaterr
12662 00.0000C90E B6BC00000100                 cmp.l   #256,d3
12663 00.0000C914 6400C16A                     bcc     baddaterr
12664 00.0000C918 60000006                     bra     .dataok
12665 00.0000C91C                              ;
12666 00.0000C91C 6000C162             .notb   bra     baddaterr
12667 00.0000C920                              ;
12668 00.0000C920 B47C0003             .dataok cmp     #3,d2
12669 00.0000C924 6400000A                     bcc     .notword
12670 00.0000C928 6100F8BC                     bsr     pokedata2
12671 00.0000C92C 60000006                     bra     .next
12672 00.0000C930 6100F8AC             .notword        bsr     pokedata2l
12673 00.0000C934 6100B304             .next   bsr     reget
12674 00.0000C938 B07C002C                     cmp     #',',d0
12675 00.0000C93C 6700FF8E                     beq     .more
12676 00.0000C940 544F                         addq    #2,a7
12677 00.0000C942 4E75                 .isdone rts     
12678 00.0000C944                      
12679 00.0000C944 6100FF4C             .string bsr     pdt
12680 00.0000C948 2F390000E8E6                 move.l  data2,-(a7)
12681 00.0000C94E 6100F88E                     bsr     pokedata2l
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 276
blitz2.s


12682 00.0000C952 7200                         moveq   #0,d1
12683 00.0000C954 6100B2B8             .loop   bsr     getchar3
12684 00.0000C958 6700004C                     beq     .done
12685 00.0000C95C B07C0022                     cmp     #'"',d0
12686 00.0000C960 67000026                     beq     .quoted
12687 00.0000C964 B07C002C                     cmp     #',',d0
12688 00.0000C968 6700003C                     beq     .done
12689 00.0000C96C 6100F8A2             .loop2  bsr     pokedata2b
12690 00.0000C970 5241                         addq    #1,d1
12691 00.0000C972 6100B0BA                     bsr     getchar
12692 00.0000C976 4A40                         tst     d0
12693 00.0000C978 6700002C                     beq     .done
12694 00.0000C97C B07C002C                     cmp     #',',d0
12695 00.0000C980 67000024                     beq     .done
12696 00.0000C984 6000FFE6                     bra     .loop2
12697 00.0000C988                              ;
12698 00.0000C988 6100B284             .quoted bsr     getchar3
12699 00.0000C98C 6700B896                     beq     notqerr
12700 00.0000C990 B07C0022                     cmp     #'"',d0
12701 00.0000C994 6700000C                     beq     .done2
12702 00.0000C998 6100F876                     bsr     pokedata2b
12703 00.0000C99C 5241                         addq    #1,d1
12704 00.0000C99E 6000FFE8                     bra     .quoted
12705 00.0000C9A2 6100B26A             .done2  bsr     getchar3
12706 00.0000C9A6 205F                 .done   move.l  (a7)+,a0
12707 00.0000C9A8 34390000E858                 move    nomemleft,d2
12708 00.0000C9AE 66000004                     bne     .nopoke
12709 00.0000C9B2 2081                         move.l  d1,(a0)
12710 00.0000C9B4 52B90000E8E6         .nopoke addq.l  #1,data2
12711 00.0000C9BA 08B900000000E8E9             bclr    #0,data2+3
12712 00.0000C9C2 B07C002C                     cmp     #',',d0
12713 00.0000C9C6 6700FF7C                     beq     .string
12714 00.0000C9CA 4E75                         rts     
12715 00.0000C9CC                      
12716 00.0000C9CC                      doshared        ;
12717 00.0000C9CC                              ;set up SHARED variables.....
12718 00.0000C9CC                              ;
12719 00.0000C9CC 32390000EC0C                 move    procmode,d1
12720 00.0000C9D2 6700BFB4                     beq     sharederr
12721 00.0000C9D6 3F01                         move    d1,-(a7)
12722 00.0000C9D8 42790000EC0C                 clr     procmode
12723 00.0000C9DE 6100CDC8             .loop2  bsr     getvname
12724 00.0000C9E2 3F02                         move    d2,-(a7)
12725 00.0000C9E4                              ;
12726 00.0000C9E4 45F900002B34                 lea     firstglob,a2
12727 00.0000C9EA 6100C2F0                     bsr     findvar
12728 00.0000C9EE 6616                         bne.s   .notfound
12729 00.0000C9F0                              ;
12730 00.0000C9F0 12390000EC5B         .try2   move.b  flagmask+1,d1
12731 00.0000C9F6 162A0007                     move.b  7(a2),d3
12732 00.0000C9FA B701                         eor.b   d3,d1
12733 00.0000C9FC 6700BFAA                     beq     dupsherr
12734 00.0000CA00 6100C2DC                     bsr     findlab
12735 00.0000CA04 67EA                         beq.s   .try2
12736 00.0000CA06                              ;
12737 00.0000CA06 6100C23C             .notfound       bsr     addhere
12738 00.0000CA0A 341F                         move    (a7)+,d2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 277
blitz2.s


12739 00.0000CA0C 2F0A                         move.l  a2,-(a7)        ;new glob
12740 00.0000CA0E 6100C42C                     bsr     fetchvar
12741 00.0000CA12 245F                         move.l  (a7)+,a2
12742 00.0000CA14 7204                         moveq   #4,d1
12743 00.0000CA16 584A                         addq    #4,a2
12744 00.0000CA18 584B                         addq    #4,a3
12745 00.0000CA1A 34DB                 .loop   move    (a3)+,(a2)+
12746 00.0000CA1C 51C9FFFC                     dbf     d1,.loop
12747 00.0000CA20 083900010000EC5B             btst    #1,flagmask+1
12748 00.0000CA28 67000012                     beq     .done
12749 00.0000CA2C 6100B1E0                     bsr     getchar3
12750 00.0000CA30 B07C0029                     cmp     #')',d0
12751 00.0000CA34 6600B9AC                     bne     syntaxerr
12752 00.0000CA38 6100B1D4                     bsr     getchar3
12753 00.0000CA3C B07C002C             .done   cmp     #',',d0
12754 00.0000CA40 6600000A                     bne     .done2
12755 00.0000CA44 6100B1C8                     bsr     getchar3
12756 00.0000CA48 6000FF94                     bra     .loop2
12757 00.0000CA4C 33DF0000EC0C         .done2  move    (a7)+,procmode
12758 00.0000CA52 4E75                         rts
12759 00.0000CA54                      
12760 00.0000CA54                      doxinclude      ;
12761 00.0000CA54                              ;do EXCLUSIVE (once only!) include
12762 00.0000CA54                              ;
12763 00.0000CA54 6100F606                     bsr     makeiname
12764 00.0000CA58 6100C234                     bsr     findxinc
12765 00.0000CA5C 6700000E                     beq     .done
12766 00.0000CA60 3F02                         move    d2,-(a7)
12767 00.0000CA62 6100C1E0                     bsr     addhere
12768 00.0000CA66 341F                         move    (a7)+,d2
12769 00.0000CA68 600000AE                     bra     doinc2
12770 00.0000CA6C 4E75                 .done   rts
12771 00.0000CA6E                      
12772 00.0000CA6E 6100F5EC             doincbin        bsr     makeiname
12773 00.0000CA72 223C0000EC68                 move.l  #namebuff,d1
12774 00.0000CA78 74FE                         moveq   #-2,d2
12775 00.0000CA7A 2C7900000154                 move.l  dos,a6
12776 00.0000CA80 4EAEFFAC                     jsr     lock(a6)
12777 00.0000CA84 2E00                         move.l  d0,d7
12778 00.0000CA86 6700BD6A                     beq     noincerr
12779 00.0000CA8A 2207                         move.l  d7,d1
12780 00.0000CA8C 24390000EC26                 move.l  macrobuff,d2
12781 00.0000CA92 4EAEFF9A                     jsr     examine(a6)
12782 00.0000CA96 20790000EC26                 move.l  macrobuff,a0
12783 00.0000CA9C 20280004                     move.l  4(a0),d0
12784 00.0000CAA0 6A00BD50                     bpl     noincerr
12785 00.0000CAA4 2628007C                     move.l  124(a0),d3      ;length
12786 00.0000CAA8 2207                         move.l  d7,d1
12787 00.0000CAAA 4EAEFFA6                     jsr     unlock(a6)
12788 00.0000CAAE 223C0000EC68                 move.l  #namebuff,d1
12789 00.0000CAB4 243C000003ED                 move.l  #1005,d2
12790 00.0000CABA 4EAEFFE2                     jsr     open(a6)
12791 00.0000CABE 2E00                         move.l  d0,d7
12792 00.0000CAC0 6700BD30                     beq     noincerr
12793 00.0000CAC4 20390000E8F6                 move.l  pc,d0
12794 00.0000CACA D083                         add.l   d3,d0
12795 00.0000CACC B0B90000E8FA                 cmp.l   libat,d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 278
blitz2.s


12796 00.0000CAD2 62000022                     bhi     .over
12797 00.0000CAD6 24390000E8F6                 move.l  pc,d2
12798 00.0000CADC 2207                         move.l  d7,d1
12799 00.0000CADE 4EAEFFD6                     jsr     read(a6)
12800 00.0000CAE2 B0BCFFFFFFFF                 cmp.l   #-1,d0
12801 00.0000CAE8 6700BD20                     beq     readerr
12802 00.0000CAEC D1B90000E8F6                 add.l   d0,pc
12803 00.0000CAF2 60000010                     bra     .close
12804 00.0000CAF6                              ;
12805 00.0000CAF6 33FCFFFF0000E858     .over   move    #-1,nomemleft
12806 00.0000CAFE 23C00000E8F6                 move.l  d0,pc
12807 00.0000CB04                              ;
12808 00.0000CB04 2207                 .close  move.l  d7,d1
12809 00.0000CB06 4EEEFFDC                     jmp     close(a6)
12810 00.0000CB0A                      
12811 00.0000CB0A                      doinclude       ;
12812 00.0000CB0A                              ;do a standard include
12813 00.0000CB0A                              ;
12814 00.0000CB0A 4A790000E834                 tst     dirmode
12815 00.0000CB10 6600B680                     bne     illdirerr
12816 00.0000CB14                              ;
12817 00.0000CB14 6100F546                     bsr     makeiname
12818 00.0000CB18 6100C168             doinc2  bsr     findinc
12819 00.0000CB1C 6700BCBE                     beq     alincerr
12820 00.0000CB20 45F90000EC1E                 lea     firstinc,a2
12821 00.0000CB26 6100C112                     bsr     addhere2        
12822 00.0000CB2A                              ;
12823 00.0000CB2A 426A000C                     clr     12(a2)
12824 00.0000CB2E 42AA0004                     clr.l   4(a2)
12825 00.0000CB32 203C00000400                 move.l  #inclen,d0
12826 00.0000CB38 7201                         moveq   #1,d1
12827 00.0000CB3A 2C780004                     move.l  4.w,a6
12828 00.0000CB3E 4EB900004B6C                 jsr     doallocmem
12829 00.0000CB44                              ;
12830 00.0000CB44 25400004                     move.l  d0,4(a2)
12831 00.0000CB48 2540000E                     move.l  d0,14(a2)
12832 00.0000CB4C 2A40                         move.l  d0,a5
12833 00.0000CB4E                              ;
12834 00.0000CB4E 223C0000EC68                 move.l  #namebuff,d1
12835 00.0000CB54 243C000003ED                 move.l  #1005,d2
12836 00.0000CB5A 2C7900000154                 move.l  dos,a6
12837 00.0000CB60 4EAEFFE2                     jsr     open(a6)
12838 00.0000CB64                              ;
12839 00.0000CB64 25400008                     move.l  d0,8(a2)
12840 00.0000CB68 6700BC88                     beq     noincerr
12841 00.0000CB6C 52790000EC18                 addq    #1,numincs
12842 00.0000CB72 2E790000EC10                 move.l  passstack,a7
12843 00.0000CB78 4EF90000413A                 jmp     passnxt
12844 00.0000CB7E                      
12845 00.0000CB7E 0000                 coolnest        dc      0
12846 00.0000CB80                      
12847 00.0000CB80 0000                 macline dc      0
12848 00.0000CB82                      
12849 00.0000CB82                      domacro ;shit!
12850 00.0000CB82                              ;
12851 00.0000CB82 33F90000E9E80000CB80         move    linenumat,macline
12852 00.0000CB8C                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 279
blitz2.s


12853 00.0000CB8C 6100C05A                     bsr     makename2
12854 00.0000CB90 6700B850                     beq     syntaxerr
12855 00.0000CB94 6100B0AE                     bsr     bakup
12856 00.0000CB98 6100C10C                     bsr     findmac
12857 00.0000CB9C 6700BB3A                     beq     dupmacerr
12858 00.0000CBA0 6100C0A2                     bsr     addhere
12859 00.0000CBA4 426A000A                     clr     10(a2)
12860 00.0000CBA8 20790000EC26                 move.l  macrobuff,a0
12861 00.0000CBAE 7400                         moveq   #0,d2   ;flag for nothing got yet!
12862 00.0000CBB0 42790000CB7E                 clr     coolnest
12863 00.0000CBB6 6100AFE8             .gather bsr     getcharb        ;get next character
12864 00.0000CBBA                                              ;but not conditional stuff
12865 00.0000CBBA 4A40                         tst     d0
12866 00.0000CBBC 66000020                     bne     .skip
12867 00.0000CBC0 48E720A0                     movem.l d2/a0/a2,-(a7)
12868 00.0000CBC4 4EB90000393E                 jsr     nextline
12869 00.0000CBCA 6700BB4A                     beq     macenderr
12870 00.0000CBCE 4CDF0504                     movem.l (a7)+,d2/a0/a2
12871 00.0000CBD2 4A42                         tst     d2
12872 00.0000CBD4 6700FFE0                     beq     .gather
12873 00.0000CBD8 703A                         moveq   #58,d0
12874 00.0000CBDA 6000004E                     bra     .notend2
12875 00.0000CBDE 6A00004A             .skip   bpl     .notend2
12876 00.0000CBE2 B07C800D                     cmp     #$800d,d0
12877 00.0000CBE6 6600000C                     bne     .notamac
12878 00.0000CBEA 52790000CB7E                 addq    #1,coolnest
12879 00.0000CBF0 60000030                     bra     .notend
12880 00.0000CBF4                              ;
12881 00.0000CBF4 B07C8002             .notamac        cmp     #$8002,d0
12882 00.0000CBF8 66000028                     bne     .notend
12883 00.0000CBFC 6100B010                     bsr     getchar3
12884 00.0000CC00 B07C800D                     cmp     #$800d,d0
12885 00.0000CC04 6600000C                     bne     .notem
12886 00.0000CC08 53790000CB7E                 subq    #1,coolnest
12887 00.0000CC0E 6B000022                     bmi     .macdone
12888 00.0000CC12                              ;
12889 00.0000CC12 3F00                 .notem  move    d0,-(a7)
12890 00.0000CC14 303C8002                     move    #$8002,d0
12891 00.0000CC18 61000078                     bsr     macputw
12892 00.0000CC1C 301F                         move    (a7)+,d0
12893 00.0000CC1E 60000002                     bra     .notend
12894 00.0000CC22                              ;
12895 00.0000CC22 6100006E             .notend bsr     macputw
12896 00.0000CC26 6000FF8E                     bra     .gather
12897 00.0000CC2A 6100006C             .notend2        bsr     macputb
12898 00.0000CC2E 6000FF86                     bra     .gather
12899 00.0000CC32                              ;
12900 00.0000CC32 584F                 .macdone        addq    #4,a7
12901 00.0000CC34 2008                         move.l  a0,d0
12902 00.0000CC36 90B90000EC26                 sub.l   macrobuff,d0
12903 00.0000CC3C                              ;
12904 00.0000CC3C                              ;clean up leading and trailing ':'s
12905 00.0000CC3C                              ;
12906 00.0000CC3C 67000020             .mclean beq     .cdone
12907 00.0000CC40 0C20003A                     cmp.b   #':',-(a0)
12908 00.0000CC44 66000018                     bne     .cdone
12909 00.0000CC48 B07C0001                     cmp     #1,d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 280
blitz2.s


12910 00.0000CC4C 6700000A                     beq     .cdo
12911 00.0000CC50 4A28FFFF                     tst.b   -1(a0)
12912 00.0000CC54 6B000008                     bmi     .cdone
12913 00.0000CC58 5340                 .cdo    subq    #1,d0
12914 00.0000CC5A 6000FFE0                     bra     .mclean
12915 00.0000CC5E                              ;
12916 00.0000CC5E 35400008             .cdone  move    d0,8(a2)
12917 00.0000CC62 6700002A                     beq     .skip2
12918 00.0000CC66 7201                         moveq   #1,d1
12919 00.0000CC68 2C780004                     move.l  4.w,a6
12920 00.0000CC6C 4EB900004B6C                 jsr     doallocmem
12921 00.0000CC72                              ;
12922 00.0000CC72 2040                         move.l  d0,a0
12923 00.0000CC74 25480004                     move.l  a0,4(a2)
12924 00.0000CC78 322A0008                     move    8(a2),d1
12925 00.0000CC7C 67000010                     beq     .skip2
12926 00.0000CC80 5341                         subq    #1,d1
12927 00.0000CC82 22790000EC26                 move.l  macrobuff,a1
12928 00.0000CC88 10D9                 .lll    move.b  (a1)+,(a0)+
12929 00.0000CC8A 51C9FFFC                     dbf     d1,.lll
12930 00.0000CC8E                      .skip2  ;
12931 00.0000CC8E 6000AF7E                     bra     getchar3
12932 00.0000CC92                      
12933 00.0000CC92 3200                 macputw move    d0,d1
12934 00.0000CC94 E049                         lsr     #8,d1
12935 00.0000CC96 10C1                         move.b  d1,(a0)+
12936 00.0000CC98 74FF                 macputb moveq   #-1,d2
12937 00.0000CC9A 10C0                         move.b  d0,(a0)+
12938 00.0000CC9C B1F90000EC2A                 cmp.l   macrobufff,a0
12939 00.0000CCA2 6400BA98                     bcc     macbigerr
12940 00.0000CCA6 4E75                         rts
12941 00.0000CCA8                      
12942 00.0000CCA8                      collif  ;collect a comparison thingy
12943 00.0000CCA8                              ;
12944 00.0000CCA8 6100F2A8                     bsr     ifchar
12945 00.0000CCAC 6600B734                     bne     syntaxerr
12946 00.0000CCB0 3200                         move    d0,d1
12947 00.0000CCB2 6100AF5A                     bsr     getchar3
12948 00.0000CCB6 6100F29A                     bsr     ifchar
12949 00.0000CCBA 6600001E                     bne     .skip
12950 00.0000CCBE 5240                         addq    #1,d0
12951 00.0000CCC0 3400                         move    d0,d2
12952 00.0000CCC2 D040                         add     d0,d0
12953 00.0000CCC4 D042                         add     d2,d0
12954 00.0000CCC6 D240                         add     d0,d1
12955 00.0000CCC8 3001                         move    d1,d0
12956 00.0000CCCA 02400003                     and     #3,d0
12957 00.0000CCCE B07C0003                     cmp     #3,d0
12958 00.0000CCD2 6700B70E                     beq     syntaxerr
12959 00.0000CCD6 6100AF36                     bsr     getchar3
12960 00.0000CCDA 4E75                 .skip   rts
12961 00.0000CCDC                              
12962 00.0000CCDC 4A00                 thetst1 tst.b   d0
12963 00.0000CCDE 4A40                 thetst2 tst.w   d0
12964 00.0000CCE0 4A80                 thetst3 tst.l   d0
12965 00.0000CCE2 4A9F                 thetst4 tst.l   (a7)+   ;Any Length?
12966 00.0000CCE4 4EAEFFD0             thetst5 jsr     -48(a6)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 281
blitz2.s


12967 00.0000CCE8                      
12968 00.0000CCE8 6700FFFE             posbr   beq     posbr
12969 00.0000CCEC 6600FFFE             negbr   bne     negbr
12970 00.0000CCF0                      
12971 00.0000CCF0 74FF                 dounless        moveq   #-1,d2
12972 00.0000CCF2 60000358                     bra     doifm
12973 00.0000CCF6                      
12974 00.0000CCF6 7201                 dowhile moveq   #1,d1   ;while flag
12975 00.0000CCF8 7400                         moveq   #0,d2   ;negate flag
12976 00.0000CCFA 60000352                     bra     doif2
12977 00.0000CCFE                      
12978 00.0000CCFE 45F900004D0A         freereps        lea     firstrep,a2
12979 00.0000CD04 7408                         moveq   #8,d2
12980 00.0000CD06 60000008                     bra     freeslist
12981 00.0000CD0A                      
12982 00.0000CD0A 45FA003E             freesels        lea     firstsel(pc),a2
12983 00.0000CD0E 740E                         moveq   #14,d2
12984 00.0000CD10                              ;
12985 00.0000CD10                      freeslist       ;free a simple list. a2=lea of list, d2=size
12986 00.0000CD10                              ;
12987 00.0000CD10 7600                         moveq   #0,d3
12988 00.0000CD12                              ;
12989 00.0000CD12                      freelist        ;a2=lea of list, d2=size of item
12990 00.0000CD12                              ;d3=offset to sub list, d4=size of sublist item
12991 00.0000CD12                              ;
12992 00.0000CD12                              ;if d3=0 then single list free only.
12993 00.0000CD12                              ;
12994 00.0000CD12 2012                         move.l  (a2),d0
12995 00.0000CD14 4292                         clr.l   (a2)
12996 00.0000CD16 2440                         move.l  d0,a2
12997 00.0000CD18 2C780004                     move.l  4.w,a6
12998 00.0000CD1C B4FC0000             .loop   cmp     #0,a2
12999 00.0000CD20 67000026                     beq     .done
13000 00.0000CD24 4A43                         tst     d3
13001 00.0000CD26 67000012                     beq     .skip
13002 00.0000CD2A 48E73020                     movem.l a2/d2-d3,-(a7)
13003 00.0000CD2E D4C3                         add     d3,a2
13004 00.0000CD30 2404                         move.l  d4,d2
13005 00.0000CD32 6100FFDC                     bsr     freeslist
13006 00.0000CD36 4CDF040C                     movem.l (a7)+,a2/d2-d3
13007 00.0000CD3A 224A                 .skip   move.l  a2,a1
13008 00.0000CD3C 2002                         move.l  d2,d0
13009 00.0000CD3E 2452                         move.l  (a2),a2
13010 00.0000CD40 4EAEFF2E                     jsr     freemem(a6)
13011 00.0000CD44 6000FFD6                     bra     .loop
13012 00.0000CD48 4E75                 .done   rts
13013 00.0000CD4A                      
13014 00.0000CD4A 00000000             firstsel        dc.l    0
13015 00.0000CD4E 024000FF             selpushb        and     #255,d0
13016 00.0000CD52 3F00                 selpushw        move    d0,-(a7)
13017 00.0000CD54                      selpushbf       ;
13018 00.0000CD54 2F00                 selpushl        move.l  d0,-(a7)
13019 00.0000CD56                      selpushlf       ;
13020 00.0000CD56 45EF0004             selpushs        lea     4(a7),a2        ;(a7)=len of string!
13021 00.0000CD5A                      selpushsf       ;
13022 00.0000CD5A                      
13023 00.0000CD5A 024000FF             selcomb and     #255,d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 282
blitz2.s


13024 00.0000CD5E B057                 selcomw cmp     (a7),d0
13025 00.0000CD60                      selcombf        ;
13026 00.0000CD60 B097                 selcoml cmp.l   (a7),d0
13027 00.0000CD62                      selcomlf        ;
13028 00.0000CD62 6600FFFE             selbne  bne     selbne
13029 00.0000CD66                      
13030 00.0000CD66 504F                 endsel  addq    #8,a7
13031 00.0000CD68                      
13032 00.0000CD68                      doendsel        ;END SELECT
13033 00.0000CD68                              ;
13034 00.0000CD68 203AFFE0                     move.l  firstsel(pc),d0
13035 00.0000CD6C 6700B160                     beq     eselerr
13036 00.0000CD70 2440                         move.l  d0,a2
13037 00.0000CD72 61000088                     bsr     fillbne
13038 00.0000CD76                              ;
13039 00.0000CD76                              ;fill in all bras at end of cases!
13040 00.0000CD76 2C780004                     move.l  4.w,a6
13041 00.0000CD7A                              ;
13042 00.0000CD7A 202A0004             .loop   move.l  4(a2),d0
13043 00.0000CD7E 67000036                     beq     .done
13044 00.0000CD82                              ;
13045 00.0000CD82 2640                         move.l  d0,a3
13046 00.0000CD84 206B0004                     move.l  4(a3),a0
13047 00.0000CD88 22390000E8F6                 move.l  pc,d1
13048 00.0000CD8E 9288                         sub.l   a0,d1
13049 00.0000CD90 B2BC00007FFF                 cmp.l   #32767,d1
13050 00.0000CD96 6200B154                     bhi     cbraerr
13051 00.0000CD9A 30390000E858                 move    nomemleft,d0
13052 00.0000CDA0 66000004                     bne     .skip
13053 00.0000CDA4 3081                         move    d1,(a0)
13054 00.0000CDA6                      .skip   ;free it up!
13055 00.0000CDA6 25530004                     move.l  (a3),4(a2)      ;next of me is new first
13056 00.0000CDAA 224B                         move.l  a3,a1
13057 00.0000CDAC 7008                         moveq   #8,d0
13058 00.0000CDAE 4EAEFF2E                     jsr     freemem(a6)
13059 00.0000CDB2 6000FFC6                     bra     .loop
13060 00.0000CDB6                      .done   ;
13061 00.0000CDB6 4EB900004C94                 jsr     popselect       ;fix stack on select
13062 00.0000CDBC                              ;
13063 00.0000CDBC 227AFF8C                     move.l  firstsel(pc),a1
13064 00.0000CDC0 23D10000CD4A                 move.l  (a1),firstsel
13065 00.0000CDC6 700E                         moveq   #14,d0
13066 00.0000CDC8 2C780004                     move.l  4.w,a6
13067 00.0000CDCC 4EAEFF2E                     jsr     freemem(a6)
13068 00.0000CDD0 6000AE3C                     bra     getchar3
13069 00.0000CDD4                      
13070 00.0000CDD4 225F                 endselstr       move.l  (a7)+,a1
13071 00.0000CDD6 5149                         subq    #8,a1
13072 00.0000CDD8 7009                         moveq   #9,d0
13073 00.0000CDDA D091                         add.l   (a1),d0
13074 00.0000CDDC 544F                 endselstrf      addq    #2,a7   ;for runtime errs!
13075 00.0000CDDE                      endselstrf2     ;
13076 00.0000CDDE                      
13077 00.0000CDDE 203AFF6A             dodefault       move.l  firstsel(pc),d0
13078 00.0000CDE2 6700B0CE                     beq     defaerr
13079 00.0000CDE6 2440                         move.l  d0,a2
13080 00.0000CDE8 6100003C                     bsr     fillbra
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 283
blitz2.s


13081 00.0000CDEC 6100000E                     bsr     fillbne
13082 00.0000CDF0 42AA0008                     clr.l   8(a2)
13083 00.0000CDF4 342A000C                     move    12(a2),d2
13084 00.0000CDF8 60000064                     bra     casechk
13085 00.0000CDFC                      
13086 00.0000CDFC                      fillbne ;a2=sel
13087 00.0000CDFC 202A0008                     move.l  8(a2),d0
13088 00.0000CE00 67000022                     beq     .skip   ;none to do!
13089 00.0000CE04 2040                         move.l  d0,a0
13090 00.0000CE06 22390000E8F6                 move.l  pc,d1
13091 00.0000CE0C 9288                         sub.l   a0,d1
13092 00.0000CE0E B2BC00007FFF                 cmp.l   #32767,d1
13093 00.0000CE14 6200B0D6                     bhi     cbraerr
13094 00.0000CE18 30390000E858                 move    nomemleft,d0
13095 00.0000CE1E 66000004                     bne     .skip
13096 00.0000CE22 3081                         move    d1,(a0)
13097 00.0000CE24 4E75                 .skip   rts
13098 00.0000CE26                      
13099 00.0000CE26                      fillbra ;make a bra if necessary
13100 00.0000CE26                              ;
13101 00.0000CE26 202A0008                     move.l  8(a2),d0
13102 00.0000CE2A 67000030                     beq     .skip
13103 00.0000CE2E                              ;
13104 00.0000CE2E                              ;OK, we're after a case thingy. add a BRA
13105 00.0000CE2E                              ;
13106 00.0000CE2E 2640                         move.l  d0,a3
13107 00.0000CE30 323C6000                     move    #$6000,d1
13108 00.0000CE34 6100C6D6                     bsr     pokewd  ;BRA
13109 00.0000CE38 7008                         moveq   #8,d0
13110 00.0000CE3A 7201                         moveq   #1,d1
13111 00.0000CE3C 2C780004                     move.l  4.w,a6
13112 00.0000CE40 4EB900004B6C                 jsr     doallocmem
13113 00.0000CE46 2040                         move.l  d0,a0
13114 00.0000CE48 20AA0004                     move.l  4(a2),(a0)
13115 00.0000CE4C 25480004                     move.l  a0,4(a2)
13116 00.0000CE50 21790000E8F60004             move.l  pc,4(a0)
13117 00.0000CE58 6000C6B2                     bra     pokewd
13118 00.0000CE5C                              ;
13119 00.0000CE5C 4E75                 .skip   rts
13120 00.0000CE5E                      
13121 00.0000CE5E 4A390000400A         casechk tst.b   debugga
13122 00.0000CE64 67000014                     beq     .norerr
13123 00.0000CE68 323CC313                     move    #casechkw,d1
13124 00.0000CE6C B47C0003                     cmp     #3,d2
13125 00.0000CE70 65000004                     bcs     .dochk
13126 00.0000CE74 5241                         addq    #1,d1
13127 00.0000CE76 6000EC30             .dochk  bra     tokejsr
13128 00.0000CE7A 4E75                 .norerr rts
13129 00.0000CE7C                      
13130 00.0000CE7C                      docase  ;eg : CASE a+10
13131 00.0000CE7C                              ;
13132 00.0000CE7C                              ;first, fill in last bra (if there is one!)
13133 00.0000CE7C                              ;
13134 00.0000CE7C 203AFECC                     move.l  firstsel(pc),d0
13135 00.0000CE80 6700B08C                     beq     caseerr
13136 00.0000CE84 2440                         move.l  d0,a2
13137 00.0000CE86 6100FF9E                     bsr     fillbra
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 284
blitz2.s


13138 00.0000CE8A 6100FF70                     bsr     fillbne
13139 00.0000CE8E                              ;
13140 00.0000CE8E 342A000C                     move    12(a2),d2       ;type to get!
13141 00.0000CE92 3F02                         move    d2,-(a7)
13142 00.0000CE94 6100FFC8                     bsr     casechk
13143 00.0000CE98 3417                         move    (a7),d2
13144 00.0000CE9A 6100CAEC             .norerr bsr     bakeval
13145 00.0000CE9E 341F                         move    (a7)+,d2        ;types to compare
13146 00.0000CEA0 41FAFEB8                     lea     selcomb(pc),a0
13147 00.0000CEA4 43FAFEBA                     lea     selcombf(pc),a1
13148 00.0000CEA8 B47C0001                     cmp     #1,d2
13149 00.0000CEAC 6700002A                     beq     .doit
13150 00.0000CEB0 41FAFEAC                     lea     selcomw(pc),a0
13151 00.0000CEB4 B47C0002                     cmp     #2,d2
13152 00.0000CEB8 6700001E                     beq     .doit
13153 00.0000CEBC 41FAFEA2                     lea     selcoml(pc),a0
13154 00.0000CEC0 43FAFEA0                     lea     selcomlf(pc),a1
13155 00.0000CEC4 B47C0007                     cmp     #7,d2
13156 00.0000CEC8 6500000E                     bcs     .doit
13157 00.0000CECC                              ;Strings....
13158 00.0000CECC 323CCE01                     move    #casestrcomp,d1
13159 00.0000CED0 6100EBD6                     bsr     tokejsr
13160 00.0000CED4 60000006                     bra     .doneit
13161 00.0000CED8                              ;
13162 00.0000CED8 6100C6C8             .doit   bsr     pokecode
13163 00.0000CEDC 323AFE84             .doneit move    selbne(pc),d1
13164 00.0000CEE0 6100C62A                     bsr     pokewd
13165 00.0000CEE4 207AFE64                     move.l  firstsel(pc),a0
13166 00.0000CEE8 21790000E8F60008             move.l  pc,8(a0)
13167 00.0000CEF0 6000C61A                     bra     pokewd
13168 00.0000CEF4                      
13169 00.0000CEF4 3F3C7345             pcchk   move    #"sE",-(a7)
13170 00.0000CEF8                      
13171 00.0000CEF8 42A7                 clrst   clr.l   -(a7)
13172 00.0000CEFA                      
13173 00.0000CEFA 0000                 sellineat       dc      0
13174 00.0000CEFC                      
13175 00.0000CEFC                      doselect        ;OK, as in : SELECT opt
13176 00.0000CEFC                              ;
13177 00.0000CEFC 4A390000400A                 tst.b   debugga
13178 00.0000CF02 6700000A                     beq     .norerr
13179 00.0000CF06 223AFFEC                     move.l  pcchk(pc),d1    ;move #"sE",-(a7)
13180 00.0000CF0A 6100C5F8                     bsr     pokel
13181 00.0000CF0E                      .norerr ;
13182 00.0000CF0E 33F90000E9E80000CEFA         move    linenumat,sellineat
13183 00.0000CF18 6100E6A2                     bsr     pushstart       ;we may have to CLR -(a7)!
13184 00.0000CF1C 7400                         moveq   #0,d2
13185 00.0000CF1E 6100CA54                     bsr     bakevalu        ;Evaluate
13186 00.0000CF22 6100E6AE                     bsr     pushdo
13187 00.0000CF26 B47C0007                     cmp     #7,d2
13188 00.0000CF2A 6600000A                     bne     .nos
13189 00.0000CF2E 323AFFC8                     move    clrst(pc),d1
13190 00.0000CF32 6100C5D8                     bsr     pokewd
13191 00.0000CF36                              ;
13192 00.0000CF36 6100E704             .nos    bsr     pushput
13193 00.0000CF3A 41FAFE12                     lea     selpushb(pc),a0
13194 00.0000CF3E 43FAFE14                     lea     selpushbf(pc),a1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 285
blitz2.s


13195 00.0000CF42 B47C0001                     cmp     #1,d2
13196 00.0000CF46 67000040                     beq     .doit
13197 00.0000CF4A 41FAFE06                     lea     selpushw(pc),a0
13198 00.0000CF4E B47C0002                     cmp     #2,d2
13199 00.0000CF52 67000034                     beq     .doit
13200 00.0000CF56 41FAFDFC                     lea     selpushl(pc),a0
13201 00.0000CF5A 43FAFDFA                     lea     selpushlf(pc),a1
13202 00.0000CF5E B47C0007                     cmp     #7,d2
13203 00.0000CF62 65000024                     bcs     .doit
13204 00.0000CF66                              ;
13205 00.0000CF66 323900002A00                 move    moved0a3,d1     ;d0 to a3!
13206 00.0000CF6C 6100C59E                     bsr     pokewd
13207 00.0000CF70 41FAFDE4                     lea     selpushs(pc),a0
13208 00.0000CF74 43FAFDE4                     lea     selpushsf(pc),a1
13209 00.0000CF78 6100C628                     bsr     pokecode
13210 00.0000CF7C 323CC701                     move    #astring,d1
13211 00.0000CF80 6100EB26                     bsr     tokejsr
13212 00.0000CF84 60000006                     bra     .doneit
13213 00.0000CF88                              ;
13214 00.0000CF88 6100C618             .doit   bsr     pokecode
13215 00.0000CF8C                              ;
13216 00.0000CF8C 700E                 .doneit moveq   #14,d0
13217 00.0000CF8E 7201                         moveq   #1,d1
13218 00.0000CF90 2C780004                     move.l  4.w,a6
13219 00.0000CF94 4EB900004B6C                 jsr     doallocmem      ;get the mem
13220 00.0000CF9A 2040                         move.l  d0,a0
13221 00.0000CF9C 20BAFDAC                     move.l  firstsel(pc),(a0)
13222 00.0000CFA0 23C80000CD4A                 move.l  a0,firstsel
13223 00.0000CFA6 42A80004                     clr.l   4(a0)
13224 00.0000CFAA 42A80008                     clr.l   8(a0)   ;default mode!
13225 00.0000CFAE 3142000C                     move    d2,12(a0)
13226 00.0000CFB2 4E75                         rts
13227 00.0000CFB4                      
13228 00.0000CFB4 203900004D0A         doforever       move.l  firstrep,d0
13229 00.0000CFBA 6700ADFC                     beq     unterr1
13230 00.0000CFBE 323C6000                     move    #$6000,d1       ;BRA
13231 00.0000CFC2 6100C548                     bsr     pokewd
13232 00.0000CFC6 2040                         move.l  d0,a0
13233 00.0000CFC8 22280004                     move.l  4(a0),d1        ;dest pc
13234 00.0000CFCC 92B90000E8F6                 sub.l   pc,d1
13235 00.0000CFD2 4A41                         tst     d1
13236 00.0000CFD4 6A00ADFC                     bpl     unterr2
13237 00.0000CFD8 6100C532                     bsr     pokewd
13238 00.0000CFDC 2C780004                     move.l  4.w,a6
13239 00.0000CFE0 60000054                     bra     unlinkrep
13240 00.0000CFE4                      
13241 00.0000CFE4 203900004D0A         dountil move.l  firstrep,d0
13242 00.0000CFEA 6700ADCC                     beq     unterr1 ;no repeat!
13243 00.0000CFEE 6100005A                     bsr     doif    ;do the until
13244 00.0000CFF2                              ;
13245 00.0000CFF2 6100AC46                     bsr     reget
13246 00.0000CFF6 6600B3EA                     bne     syntaxerr
13247 00.0000CFFA                              ;tst    lastchar
13248 00.0000CFFA                              ;bne    syntaxerr
13249 00.0000CFFA                              ;
13250 00.0000CFFA 32390000E858                 move    nomemleft,d1
13251 00.0000D000 6600001E                     bne     .skip
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 286
blitz2.s


13252 00.0000D004 207900004D0A                 move.l  firstrep,a0
13253 00.0000D00A 22790000E8F6                 move.l  pc,a1
13254 00.0000D010 5549                         subq    #2,a1
13255 00.0000D012 24280004                     move.l  4(a0),d2        ;dest pc.
13256 00.0000D016 9489                         sub.l   a1,d2
13257 00.0000D018 4A42                         tst     d2
13258 00.0000D01A 6A00ADB6                     bpl     unterr2
13259 00.0000D01E 3282                         move    d2,(a1) ;put in pra dest.
13260 00.0000D020                              ;
13261 00.0000D020 227900002B44         .skip   move.l  firstif,a1
13262 00.0000D026 23D100002B44                 move.l  (a1),firstif
13263 00.0000D02C 700E                         moveq   #14,d0
13264 00.0000D02E 2C780004                     move.l  4.w,a6
13265 00.0000D032 4EAEFF2E                     jsr     freemem(a6)
13266 00.0000D036 227900004D0A         unlinkrep       move.l  firstrep,a1
13267 00.0000D03C 23D100004D0A                 move.l  (a1),firstrep
13268 00.0000D042 7008                         moveq   #8,d0
13269 00.0000D044 4EEEFF2E                     jmp     freemem(a6)
13270 00.0000D048                      
13271 00.0000D048 0000                 iflineat        dc      0
13272 00.0000D04A 7400                 doif    moveq   #0,d2   ;negate flag
13273 00.0000D04C 7200                 doifm   moveq   #0,d1   ;if flag
13274 00.0000D04E                              ;
13275 00.0000D04E                      doif2   ;the main IF bit
13276 00.0000D04E                              ;
13277 00.0000D04E                              ;
13278 00.0000D04E 3F01                         move    d1,-(a7)
13279 00.0000D050 2F390000E8F6                 move.l  pc,-(a7)
13280 00.0000D056 3F02                         move    d2,-(a7)
13281 00.0000D058 33F90000E9E80000D048         move    linenumat,iflineat
13282 00.0000D062                              ;
13283 00.0000D062 7400                         moveq   #0,d2
13284 00.0000D064 6100C90E                     bsr     bakevalu        ;Get True/False Expression!
13285 00.0000D068                              ;
13286 00.0000D068 B47C0005                     cmp     #5,d2
13287 00.0000D06C 6700002E                     beq     .float
13288 00.0000D070 323AFC6A                     move    thetst1(pc),d1
13289 00.0000D074 B47C0001                     cmp     #1,d2
13290 00.0000D078 67000036                     beq     .gotst
13291 00.0000D07C 323AFC60                     move    thetst2(pc),d1
13292 00.0000D080 B47C0002                     cmp     #2,d2
13293 00.0000D084 6700002A                     beq     .gotst
13294 00.0000D088 323AFC58                     move    thetst4(pc),d1
13295 00.0000D08C B47C0007                     cmp     #7,d2
13296 00.0000D090 6700001E                     beq     .gotst
13297 00.0000D094 323AFC4A                     move    thetst3(pc),d1
13298 00.0000D098 60000016                     bra     .gotst
13299 00.0000D09C 323CC900             .float  move    #getffpbase,d1
13300 00.0000D0A0 6100EA06                     bsr     tokejsr
13301 00.0000D0A4 223AFC3E                     move.l  thetst5(pc),d1
13302 00.0000D0A8 6100C45A                     bsr     pokel
13303 00.0000D0AC 60000006                     bra     .gotst2
13304 00.0000D0B0                              ;
13305 00.0000D0B0 6100C45A             .gotst  bsr     pokewd
13306 00.0000D0B4                              ;
13307 00.0000D0B4 223AFC32             .gotst2 move.l  posbr(pc),d1
13308 00.0000D0B8 4A5F                         tst     (a7)+
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 287
blitz2.s


13309 00.0000D0BA 67000006                     beq     .skip
13310 00.0000D0BE 223AFC2C                     move.l  negbr(pc),d1
13311 00.0000D0C2 6100C440             .skip   bsr     pokel
13312 00.0000D0C6                              ;       
13313 00.0000D0C6 700E                         moveq   #14,d0
13314 00.0000D0C8 7201                         moveq   #1,d1
13315 00.0000D0CA 2C780004                     move.l  4.w,a6
13316 00.0000D0CE 4EB900004B6C                 jsr     doallocmem
13317 00.0000D0D4                              ;
13318 00.0000D0D4 2040                         move.l  d0,a0
13319 00.0000D0D6 20B900002B44                 move.l  firstif,(a0)
13320 00.0000D0DC 23C800002B44                 move.l  a0,firstif
13321 00.0000D0E2 215F0004                     move.l  (a7)+,4(a0)
13322 00.0000D0E6 21790000E8F60008             move.l  pc,8(a0)
13323 00.0000D0EE 315F000C                     move    (a7)+,12(a0)
13324 00.0000D0F2 6100AB46                     bsr     reget
13325 00.0000D0F6 67000014                     beq     ifdone
13326 00.0000D0FA 08E80007000C                 bset    #7,12(a0)       ;one liner
13327 00.0000D100 6100AB42             dothen  bsr     bakup   ;to reget last
13328 00.0000D104 33FC003A00002B12             move    #':',lastchar
13329 00.0000D10C 4E75                 ifdone  rts
13330 00.0000D10E                      
13331 00.0000D10E B07C0001             ongotocode      cmp     #1,d0   ;4
13332 00.0000D112 6D000014                     blt     gc1skip ;4
13333 00.0000D116 B07C0000                     cmp     #0,d0   ;2
13334 00.0000D11A 6E00000C                     bgt     gc1skip
13335 00.0000D11E D040                         add     d0,d0
13336 00.0000D120 D040                         add     d0,d0
13337 00.0000D122 207B0004                     move.l  gc1labs-4(pc,d0),a0
13338 00.0000D126 4ED0                         jmp     (a0)
13339 00.0000D128 6000FFFE             gc1skip bra     gc1skip
13340 00.0000D12C                      gc1labs ;
13341 00.0000D12C                      ongotocodef
13342 00.0000D12C                      
13343 00.0000D12C B07C0001             ongosubcode cmp #1,d0   ;4
13344 00.0000D130 6D000014                     blt     gc2skip ;4
13345 00.0000D134 B07C0000                     cmp     #0,d0   ;2
13346 00.0000D138 6E00000C                     bgt     gc2skip
13347 00.0000D13C D040                         add     d0,d0
13348 00.0000D13E D040                         add     d0,d0
13349 00.0000D140 207B0004                     move.l  gc2labs-4(pc,d0),a0
13350 00.0000D144 4E90                         jsr     (a0)
13351 00.0000D146 6000FFFE             gc2skip bra     gc2skip
13352 00.0000D14A                      gc2labs
13353 00.0000D14A                      ongosubcodef
13354 00.0000D14A                      
13355 00.0000D14A B07C0001             ongcode cmp     #1,d0   ;4
13356 00.0000D14E 6D000018                     blt     gc3skip ;4
13357 00.0000D152 B07C0000                     cmp     #0,d0   ;2
13358 00.0000D156 6E000010                     bgt     gc3skip
13359 00.0000D15A D040                         add     d0,d0
13360 00.0000D15C D040                         add     d0,d0
13361 00.0000D15E 207B0008                     move.l  gc3labs-4(pc,d0),a0
13362 00.0000D162 3F3C6753             goset   move    #'gS',-(a7)     ;for runtime error checking!
13363 00.0000D166 4E90                         jsr     (a0)
13364 00.0000D168 6000FFFE             gc3skip bra     gc3skip
13365 00.0000D16C                      gc3labs
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 288
blitz2.s


13366 00.0000D16C                      ongcodef
13367 00.0000D16C                      
13368 00.0000D16C 0000                 labcnt  dc      0
13369 00.0000D16E                      
13370 00.0000D16E                      doongo  ;On expression Goto/Gosub Label[Label...]
13371 00.0000D16E                              ;
13372 00.0000D16E                              ;Get expression as a word.
13373 00.0000D16E                              ;
13374 00.0000D16E 7402                         moveq   #2,d2
13375 00.0000D170 6100C816                     bsr     bakeval
13376 00.0000D174                              ;
13377 00.0000D174 41FAFF98                     lea     ongotocode(pc),a0
13378 00.0000D178 43FAFFB2                     lea     ongotocodef(pc),a1
13379 00.0000D17C 323C001A                     move    #gc1skip-ongotocode,d1
13380 00.0000D180 B07C8005                     cmp     #$8005,d0
13381 00.0000D184 67000030                     beq     .isok
13382 00.0000D188 B07C8006                     cmp     #$8006,d0
13383 00.0000D18C 6600B254                     bne     syntaxerr
13384 00.0000D190 41FAFF9A                     lea     ongosubcode(pc),a0
13385 00.0000D194 43FAFFB4                     lea     ongosubcodef(pc),a1
13386 00.0000D198 323C001A                     move    #gc2skip-ongosubcode,d1
13387 00.0000D19C                              ;
13388 00.0000D19C 4A390000400A                 tst.b   debugga
13389 00.0000D1A2 6712                         beq.s   .isok
13390 00.0000D1A4                              ;
13391 00.0000D1A4 4EB90000BA86                 jsr     chkstak
13392 00.0000D1AA 41FAFF9E                     lea     ongcode(pc),a0
13393 00.0000D1AE 43FAFFBC                     lea     ongcodef(pc),a1
13394 00.0000D1B2 323C001E                     move    #gc3skip-ongcode,d1
13395 00.0000D1B6                              ;
13396 00.0000D1B6 3F01                 .isok   move    d1,-(a7)
13397 00.0000D1B8 2F390000E8F6                 move.l  pc,-(a7)        ;for when we know number of labels!
13398 00.0000D1BE 6100C3E2                     bsr     pokecode
13399 00.0000D1C2 42790000D16C                 clr     labcnt
13400 00.0000D1C8                              ;
13401 00.0000D1C8                              ;now, make a labels list!
13402 00.0000D1C8                              ;
13403 00.0000D1C8 6100AA44             .loop   bsr     getchar3
13404 00.0000D1CC 55B90000E8F6                 subq.l  #2,pc   ;for makealab!
13405 00.0000D1D2 6100DC4E                     bsr     makealab
13406 00.0000D1D6 54B90000E8F6                 addq.l  #2,pc
13407 00.0000D1DC 6100A73E                     bsr     addoff
13408 00.0000D1E0 222A0008                     move.l  8(a2),d1
13409 00.0000D1E4 6100C31E                     bsr     pokel
13410 00.0000D1E8 52790000D16C                 addq    #1,labcnt
13411 00.0000D1EE 6100AA4A                     bsr     reget
13412 00.0000D1F2 B07C002C                     cmp     #',',d0
13413 00.0000D1F6 6700FFD0                     beq     .loop
13414 00.0000D1FA                              ;
13415 00.0000D1FA 205F                         move.l  (a7)+,a0
13416 00.0000D1FC 341F                         move    (a7)+,d2
13417 00.0000D1FE 32390000E858                 move    nomemleft,d1
13418 00.0000D204 66000014                     bne     .done
13419 00.0000D208                              ;
13420 00.0000D208 323AFF62                     move    labcnt(pc),d1
13421 00.0000D20C 3141000A                     move    d1,10(a0)               ;for cmp#
13422 00.0000D210 D241                         add     d1,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 289
blitz2.s


13423 00.0000D212 D241                         add     d1,d1
13424 00.0000D214 5441                         addq    #2,d1
13425 00.0000D216 31812002                     move    d1,2(a0,d2)             ;for bra!
13426 00.0000D21A                              ;
13427 00.0000D21A 4E75                 .done   rts
13428 00.0000D21C                      
13429 00.0000D21C 4A390000400A         dogosub tst.b   debugga
13430 00.0000D222 67000012                     beq     .noerr
13431 00.0000D226                              ;
13432 00.0000D226 4EB90000BA86                 jsr     chkstak
13433 00.0000D22C 22390000D162                 move.l  goset,d1
13434 00.0000D232 6100C2D0                     bsr     pokel
13435 00.0000D236                              ;
13436 00.0000D236 323900002A42         .noerr  move    gosubcode,d1
13437 00.0000D23C 60000008                     bra     dogoto2
13438 00.0000D240                      
13439 00.0000D240 323900002A3C         dogoto  move    gotocode,d1
13440 00.0000D246 3F01                 dogoto2 move    d1,-(a7)
13441 00.0000D248 6100DBD8                     bsr     makealab
13442 00.0000D24C 321F                         move    (a7)+,d1
13443 00.0000D24E 6100C2BC                     bsr     pokewd
13444 00.0000D252 6100A6C8                     bsr     addoff
13445 00.0000D256 222A0008                     move.l  8(a2),d1
13446 00.0000D25A 6000C2A8                     bra     pokel
13447 00.0000D25E                      
13448 00.0000D25E 32390000EC0C         eos     move    procmode,d1
13449 00.0000D264 6700B87E                     beq     badpenderr
13450 00.0000D268                              ;
13451 00.0000D268 323C4EF9                     move    #$4ef9,d1
13452 00.0000D26C 6100C29E                     bsr     pokewd
13453 00.0000D270 6100A6AA                     bsr     addoff
13454 00.0000D274                              ;
13455 00.0000D274 2C780004                     move.l  4.w,a6
13456 00.0000D278 7008                         moveq   #8,d0
13457 00.0000D27A 7201                         moveq   #1,d1
13458 00.0000D27C 4EB900004B6C                 jsr     doallocmem
13459 00.0000D282 2040                         move.l  d0,a0
13460 00.0000D284 20B90000E8DE                 move.l  firstpend,(a0)
13461 00.0000D28A 23C80000E8DE                 move.l  a0,firstpend
13462 00.0000D290 21790000E8F60004             move.l  pc,4(a0)
13463 00.0000D298                              ;
13464 00.0000D298 6000C26A                     bra     pokel
13465 00.0000D29C                      
13466 00.0000D29C 6100FFC0             stateret        bsr     eos
13467 00.0000D2A0 6000A96C                     bra     getchar3
13468 00.0000D2A4                      
13469 00.0000D2A4                      funcret ;
13470 00.0000D2A4 20790000EC04                 move.l  thisproc,a0
13471 00.0000D2AA 7400                         moveq   #0,d2
13472 00.0000D2AC 14280005                     move.b  5(a0),d2        ;type returning!
13473 00.0000D2B0 6100C6DA                     bsr     eval    ;put return val in d0.
13474 00.0000D2B4                              ;
13475 00.0000D2B4 6000FFA8                     bra     eos
13476 00.0000D2B8                      
13477 00.0000D2B8                      doreturn        ;
13478 00.0000D2B8 4A390000400A                 tst.b   debugga
13479 00.0000D2BE 6700000A                     beq     normret
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 290
blitz2.s


13480 00.0000D2C2 323CC305                     move    #chkret,d1
13481 00.0000D2C6 6000E7E0                     bra     tokejsr
13482 00.0000D2CA                      
13483 00.0000D2CA                      normret ;a normal return
13484 00.0000D2CA                              ;
13485 00.0000D2CA 323C4E75             .noerrchk       move    #$4e75,d1
13486 00.0000D2CE 6000C23C                     bra     pokewd
13487 00.0000D2D2                      
13488 00.0000D2D2 00000000             localslist      dc.l    0       ;all locals for procs.
13489 00.0000D2D6 00000000             proclocals      dc.l    0       ;for debugga!
13490 00.0000D2DA 0000                 procnum dc      0
13491 00.0000D2DC 0000                 procnum2        dc      0
13492 00.0000D2DE 0000                 prolineat       dc      0
13493 00.0000D2E0                      
13494 00.0000D2E0 B07C8007             dostate cmp     #$8007,d0
13495 00.0000D2E4 6700FFB6                     beq     stateret
13496 00.0000D2E8 72FF                         moveq   #-1,d1  ;statement flag
13497 00.0000D2EA 60000018                     bra     dofunc2
13498 00.0000D2EE B07C8007             dofunc  cmp     #$8007,d0
13499 00.0000D2F2 6700FFB0                     beq     funcret
13500 00.0000D2F6 6100A94C                     bsr     bakup
13501 00.0000D2FA 4EB90000498A                 jsr     sizespec2
13502 00.0000D300 6100A90C                     bsr     getchar3
13503 00.0000D304                              ;
13504 00.0000D304                      dofunc2 ;do some checking.....
13505 00.0000D304                              ;
13506 00.0000D304 4EB900004298                 jsr     errchx
13507 00.0000D30A 33F90000E9E80000D2DE         move    linenumat,prolineat
13508 00.0000D314                              ;
13509 00.0000D314 52790000D2DC                 addq    #1,procnum2
13510 00.0000D31A 33FAFFC00000D2DA             move    procnum2(pc),procnum
13511 00.0000D322 33C10000EC0C                 move    d1,procmode
13512 00.0000D328 427900002B3A                 clr     locvaroff
13513 00.0000D32E 6100B8B8                     bsr     makename2
13514 00.0000D332 B07C007B                     cmp     #'{',d0
13515 00.0000D336 6600B0AA                     bne     syntaxerr
13516 00.0000D33A 20790000EBF8                 move.l  memlib,a0
13517 00.0000D340 33E8000C0000EBFC             move    12(a0),memlibstat
13518 00.0000D348 08A8000F000C                 bclr    #15,12(a0)
13519 00.0000D34E 323C4EF9                     move    #$4ef9,d1       ;make a jump around the proc
13520 00.0000D352 6100C1B8                     bsr     pokewd
13521 00.0000D356 6100A5C4                     bsr     addoff
13522 00.0000D35A 6100C1A8                     bsr     pokel
13523 00.0000D35E                              ;
13524 00.0000D35E 6100B964                     bsr     findproc
13525 00.0000D362 6700B4F4                     beq     dupprocerr
13526 00.0000D366 6100B8DC                     bsr     addhere
13527 00.0000D36A 25790000E8F6000E             move.l  pc,14(a2)       ;new!
13528 00.0000D372 23CA0000EC04                 move.l  a2,thisproc
13529 00.0000D378                              ;
13530 00.0000D378 41F9000028F2                 lea     nops8,a0
13531 00.0000D37E 43F900002902                 lea     nopsf,a1
13532 00.0000D384 6100C234                     bsr     pokecode2
13533 00.0000D388                              ;
13534 00.0000D388 4A390000400A                 tst.b   debugga
13535 00.0000D38E 671A                         beq.s   .nodebug
13536 00.0000D390                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 291
blitz2.s


13537 00.0000D390 7204                         moveq   #4,d1
13538 00.0000D392 4EB9000044A8                 jsr     maketrap
13539 00.0000D398 23F90000E8F60000D2D6         move.l  pc,proclocals
13540 00.0000D3A2 6100C160                     bsr     pokel
13541 00.0000D3A6 6100C15C                     bsr     pokel
13542 00.0000D3AA                      .nodebug        ;
13543 00.0000D3AA 49EA0016                     lea     22(a2),a4
13544 00.0000D3AE 15790000EC0D0005             move.b  procmode+1,5(a2)
13545 00.0000D3B6 7C00                         moveq   #0,d6
13546 00.0000D3B8 7A00                         moveq   #0,d5
13547 00.0000D3BA 6100A852                     bsr     getchar3
13548 00.0000D3BE B07C007D                     cmp     #'}',d0
13549 00.0000D3C2 670000A2                     beq     .done
13550 00.0000D3C6 6100C3E0             .more   bsr     getvname
13551 00.0000D3CA 6100BA70                     bsr     fetchvar
13552 00.0000D3CE 0CAA000000070004             cmp.l   #7,4(a2)
13553 00.0000D3D6 6600001E                     bne     .notst
13554 00.0000D3DA 41F90000E9C2                 lea     stbuff,a0
13555 00.0000D3E0 3205                         move    d5,d1
13556 00.0000D3E2 E549                         lsl     #2,d1
13557 00.0000D3E4 31861000                     move    d6,0(a0,d1)
13558 00.0000D3E8 31AB00041002                 move    4(a3),2(a0,d1)
13559 00.0000D3EE 5245                         addq    #1,d5
13560 00.0000D3F0 7407                         moveq   #7,d2
13561 00.0000D3F2 6000004E                     bra     .pgot
13562 00.0000D3F6 323C2940             .notst  move    #$2940,d1
13563 00.0000D3FA 7403                         moveq   #3,d2
13564 00.0000D3FC 083900000000EC5B             btst    #0,flagmask+1
13565 00.0000D404 6600002A                     bne     .sgot
13566 00.0000D408 0CAA000001000004             cmp.l   #256,4(a2)
13567 00.0000D410 6400B524                     bcc     illprocperr
13568 00.0000D414 342A0006                     move    6(a2),d2
13569 00.0000D418 B47C0002                     cmp     #2,d2
13570 00.0000D41C 62000012                     bhi     .sgot
13571 00.0000D420 6700000A                     beq     .wgot
13572 00.0000D424 0A413000                     eor     #$3000,d1
13573 00.0000D428 60000006                     bra     .sgot
13574 00.0000D42C 00411000             .wgot   or      #$1000,d1
13575 00.0000D430 8246                 .sgot   or      d6,d1
13576 00.0000D432 2F0C                         move.l  a4,-(a7)
13577 00.0000D434 6100C0D6                     bsr     pokewd
13578 00.0000D438 322B0004                     move    4(a3),d1
13579 00.0000D43C 6100C0CE                     bsr     pokewd
13580 00.0000D440 285F                         move.l  (a7)+,a4
13581 00.0000D442 5246                 .pgot   addq    #1,d6
13582 00.0000D444 BC7C0007                     cmp     #7,d6
13583 00.0000D448 6400B466                     bcc     toovarerr
13584 00.0000D44C 18C2                         move.b  d2,(a4)+
13585 00.0000D44E B07C002C                     cmp     #',',d0
13586 00.0000D452 6600000A                     bne     .nomore
13587 00.0000D456 6100A7B6                     bsr     getchar3
13588 00.0000D45A 6000FF6A                     bra     .more
13589 00.0000D45E B07C007D             .nomore cmp     #'}',d0
13590 00.0000D462 6600AF7E                     bne     syntaxerr
13591 00.0000D466                              ;
13592 00.0000D466 24790000EC04         .done   move.l  thisproc,a2
13593 00.0000D46C E94D                         lsl     #4,d5
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 292
blitz2.s


13594 00.0000D46E 8C45                         or      d5,d6
13595 00.0000D470 15460004                     move.b  d6,4(a2)
13596 00.0000D474 E84E                         lsr     #4,d6
13597 00.0000D476 6700004C                     beq     .nostrings
13598 00.0000D47A 41F90000E9C2                 lea     stbuff,a0
13599 00.0000D480 5346                         subq    #1,d6
13600 00.0000D482                      .stloop ;
13601 00.0000D482                              ;do all the string things
13602 00.0000D482                              ;
13603 00.0000D482 3206                         move    d6,d1
13604 00.0000D484 E549                         lsl     #2,d1
13605 00.0000D486 5041                         addq    #8,d1
13606 00.0000D488 33C100002A20                 move    d1,funcst+2
13607 00.0000D48E 223900002A1E                 move.l  funcst,d1
13608 00.0000D494 6100C06E                     bsr     pokel
13609 00.0000D498 3218                         move    (a0)+,d1
13610 00.0000D49A 827900002A18                 or      movedna3,d1
13611 00.0000D4A0 6100C06A                     bsr     pokewd
13612 00.0000D4A4 33D800002A1C                 move    (a0)+,least+2
13613 00.0000D4AA 223900002A1A                 move.l  least,d1
13614 00.0000D4B0 6100C052                     bsr     pokel
13615 00.0000D4B4 2F08                         move.l  a0,-(a7)
13616 00.0000D4B6 323CC700                     move    #lastring,d1
13617 00.0000D4BA 6100E5EC                     bsr     tokejsr
13618 00.0000D4BE 205F                         move.l  (a7)+,a0
13619 00.0000D4C0 51CEFFC0                     dbf     d6,.stloop
13620 00.0000D4C4                              ;
13621 00.0000D4C4 6000A748             .nostrings      bra     getchar3
13622 00.0000D4C8                      
13623 00.0000D4C8 32390000E858         linkput move    nomemleft,d1
13624 00.0000D4CE 66000026                     bne     .skip
13625 00.0000D4D2 2F390000E8F6                 move.l  pc,-(a7)
13626 00.0000D4D8                              ;
13627 00.0000D4D8 23C80000E8F6                 move.l  a0,pc
13628 00.0000D4DE 223900002A32                 move.l  linka4,d1
13629 00.0000D4E4 6100C01E                     bsr     pokel
13630 00.0000D4E8 323CCC00                     move    #clrloc,d1
13631 00.0000D4EC 6100E5B2                     bsr     tokejsr2
13632 00.0000D4F0                              ;
13633 00.0000D4F0 23DF0000E8F6                 move.l  (a7)+,pc
13634 00.0000D4F6 4E75                 .skip   rts
13635 00.0000D4F8                      
13636 00.0000D4F8                      procfixer       ;fix up procs!
13637 00.0000D4F8                              ;
13638 00.0000D4F8 24790000EC04                 move.l  thisproc,a2
13639 00.0000D4FE 206A000E                     move.l  14(a2),a0       ;pc of proc
13640 00.0000D502 322A0006                     move    6(a2),d1
13641 00.0000D506 67000030                     beq     .skiplink
13642 00.0000D50A 33C100002A34                 move    d1,linka4+2
13643 00.0000D510 322A0008                     move    8(a2),d1
13644 00.0000D514 6600000C                     bne     .howdy
13645 00.0000D518                              ;
13646 00.0000D518                              ;link only
13647 00.0000D518                              ;
13648 00.0000D518 5C48                         addq    #6,a0
13649 00.0000D51A 2548000E                     move.l  a0,14(a2)
13650 00.0000D51E 6000FFA8                     bra     linkput
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 293
blitz2.s


13651 00.0000D522                              ;
13652 00.0000D522                      .howdy  ;link and jsr
13653 00.0000D522                              ;
13654 00.0000D522 2F08                         move.l  a0,-(a7)
13655 00.0000D524 6100FFA2                     bsr     linkput
13656 00.0000D528 205F                         move.l  (a7)+,a0
13657 00.0000D52A 41E8000A                     lea     10(a0),a0
13658 00.0000D52E 24790000EC04                 move.l  thisproc,a2
13659 00.0000D534 60000014                     bra     .cont
13660 00.0000D538                              ;
13661 00.0000D538 322A0008             .skiplink       move    8(a2),d1
13662 00.0000D53C 6600000C                     bne     .cont
13663 00.0000D540 41E80010                     lea     16(a0),a0
13664 00.0000D544 2548000E                     move.l  a0,14(a2)
13665 00.0000D548 4E75                         rts
13666 00.0000D54A 32390000E858         .cont   move    nomemleft,d1
13667 00.0000D550 6600002E                     bne     .contskip
13668 00.0000D554                              ;
13669 00.0000D554 2F390000E8F6                 move.l  pc,-(a7)
13670 00.0000D55A                              ;
13671 00.0000D55A 23C80000E8F6                 move.l  a0,pc
13672 00.0000D560 323C4EB9                     move    #$4eb9,d1       ;jsr
13673 00.0000D564 6100BFA6                     bsr     pokewd
13674 00.0000D568 6100A3B2                     bsr     addoff
13675 00.0000D56C 6100BF96                     bsr     pokel
13676 00.0000D570                              ;
13677 00.0000D570 205F                         move.l  (a7)+,a0
13678 00.0000D572 22790000E8F6                 move.l  pc,a1
13679 00.0000D578 2308                         move.l  a0,-(a1)
13680 00.0000D57A 23C80000E8F6                 move.l  a0,pc
13681 00.0000D580                              ;
13682 00.0000D580 382A0008             .contskip       move    8(a2),d4
13683 00.0000D584 6A000018                     bpl     .linky
13684 00.0000D588 323CC004                     move    #newmem,d1
13685 00.0000D58C 6100E512                     bsr     tokejsr2
13686 00.0000D590 24790000EC04                 move.l  thisproc,a2
13687 00.0000D596 382A0008                     move    8(a2),d4
13688 00.0000D59A 02447FFF                     and     #32767,d4
13689 00.0000D59E 67000040             .linky  beq     .skipstat
13690 00.0000D5A2                              ;
13691 00.0000D5A2                              ;allocate statics!
13692 00.0000D5A2                              ;
13693 00.0000D5A2 122A0004                     move.b  4(a2),d1
13694 00.0000D5A6 0241000F                     and     #15,d1
13695 00.0000D5AA 3F01                         move    d1,-(a7)
13696 00.0000D5AC B27C0005                     cmp     #5,d1
13697 00.0000D5B0 6500000A                     bcs     .npush
13698 00.0000D5B4 323C2F04                     move    #$2f04,d1
13699 00.0000D5B8 6100BF52                     bsr     pokewd
13700 00.0000D5BC                              ;
13701 00.0000D5BC 26390000E8DA         .npush  move.l  locdatast,d3
13702 00.0000D5C2 61009F1E                     bsr     datastart
13703 00.0000D5C6 323CC501                     move    #localstat,d1
13704 00.0000D5CA 6100E4D4                     bsr     tokejsr2
13705 00.0000D5CE                              ;
13706 00.0000D5CE 321F                         move    (a7)+,d1
13707 00.0000D5D0 B27C0005                     cmp     #5,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 294
blitz2.s


13708 00.0000D5D4 6500000A                     bcs     .skipstat
13709 00.0000D5D8 323C281F                     move    #$281f,d1
13710 00.0000D5DC 6100BF2E                     bsr     pokewd
13711 00.0000D5E0                      .skipstat       ;
13712 00.0000D5E0 323C4E75                     move    #$4e75,d1
13713 00.0000D5E4 6000BF26                     bra     pokewd
13714 00.0000D5E8                      
13715 00.0000D5E8 41F900002A48         domwait lea     mwait,a0
13716 00.0000D5EE 43F900002A54                 lea     mwaitf,a1
13717 00.0000D5F4 6000BFAC                     bra     pokecode
13718 00.0000D5F8                      
13719 00.0000D5F8                      donewtype       ;
13720 00.0000D5F8 B07C002E                     cmp     #'.',d0
13721 00.0000D5FC 6600ADE4                     bne     syntaxerr
13722 00.0000D600 6100B5EA                     bsr     makename
13723 00.0000D604 6700AE02                     beq     laberr
13724 00.0000D608 45F90000E760                 lea     alltypes,a2
13725 00.0000D60E 6100B6AE                     bsr     findtype
13726 00.0000D612 66000012                     bne     .ok1
13727 00.0000D616 0CAA000000FF0004             cmp.l   #$ff,4(a2)
13728 00.0000D61E 6600ADD4                     bne     typeerr
13729 00.0000D622 60000006                     bra     .ok2
13730 00.0000D626 6100B61C             .ok1    bsr     addhere
13731 00.0000D62A 42AA0004             .ok2    clr.l   4(a2)
13732 00.0000D62E 23CA00002B14                 move.l  a2,thistype
13733 00.0000D634 42B900002B0A                 clr.l   prevtype
13734 00.0000D63A 427900002B08                 clr     typelen
13735 00.0000D640 427900002B20                 clr     linemode
13736 00.0000D646 6100A5F2                     bsr     reget
13737 00.0000D64A 66000004                     bne     typemode
13738 00.0000D64E 4E75                         rts
13739 00.0000D650                              ;
13740 00.0000D650 B07C8002             typemode        cmp     #$8002,d0
13741 00.0000D654 670001D8                     beq     doend2
13742 00.0000D658 6100A5EA                     bsr     bakup
13743 00.0000D65C 7C00                         moveq   #0,d6   ;not pointer
13744 00.0000D65E B07C002A                     cmp     #'*',d0
13745 00.0000D662 6600000C                     bne     .skip
13746 00.0000D666 7C01                         moveq   #1,d6
13747 00.0000D668 6100A5A4                     bsr     getchar3
13748 00.0000D66C 60000010                     bra     .skipv
13749 00.0000D670 B07C0040             .skip   cmp     #'@',d0
13750 00.0000D674 66000008                     bne     .skipv
13751 00.0000D678 7C05                         moveq   #5,d6
13752 00.0000D67A 6100A592                     bsr     getchar3
13753 00.0000D67E 33C60000EC5A         .skipv  move    d6,flagmask
13754 00.0000D684 6100B566                     bsr     makename
13755 00.0000D688 6700AD58                     beq     syntaxerr
13756 00.0000D68C 247900002B14                 move.l  thistype,a2
13757 00.0000D692 584A                         addq    #4,a2
13758 00.0000D694 6100B646                     bsr     findvar
13759 00.0000D698 6700AA2C                     beq     dupofferr       ;beq    .skip2
13760 00.0000D69C                              ;
13761 00.0000D69C 6100B5A6                     bsr     addhere
13762 00.0000D6A0                              ;
13763 00.0000D6A0 2F0A                 .skip2  move.l  a2,-(a7)
13764 00.0000D6A2 B07C002E                     cmp     #'.',d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 295
blitz2.s


13765 00.0000D6A6 67000026                     beq     .skip3
13766 00.0000D6AA B07C0024                     cmp     #'$',d0
13767 00.0000D6AE 66000010                     bne     .notstring
13768 00.0000D6B2 243C0000E7B8                 move.l  #stringtype,d2
13769 00.0000D6B8 6100A554                     bsr     getchar3
13770 00.0000D6BC 60000052                     bra     .skip4a
13771 00.0000D6C0 243900002B0A         .notstring      move.l  prevtype,d2
13772 00.0000D6C6 6700AD78                     beq     notypeerr
13773 00.0000D6CA 6000003A                     bra     .skip4
13774 00.0000D6CE 6100B51C             .skip3  bsr     makename
13775 00.0000D6D2 6700AD0E                     beq     syntaxerr
13776 00.0000D6D6 45F90000E760                 lea     alltypes,a2
13777 00.0000D6DC 6100B5E0                     bsr     findtype
13778 00.0000D6E0 67000022                     beq     .gotit
13779 00.0000D6E4 083900000000EC5B             btst    #0,flagmask+1
13780 00.0000D6EC 6700AD52                     beq     notypeerr
13781 00.0000D6F0                              ;
13782 00.0000D6F0                              ;pointer type, gotta do something tricky!
13783 00.0000D6F0                              ;
13784 00.0000D6F0 6100B552                     bsr     addhere
13785 00.0000D6F4 35790000E9E80008             move    linenumat,8(a2)
13786 00.0000D6FC 257C000000FF0004             move.l  #$ff,4(a2)      ;set to pointer crap
13787 00.0000D704                              ;       
13788 00.0000D704 240A                 .gotit  move.l  a2,d2
13789 00.0000D706 B4BC0000E764         .skip4  cmp.l   #bytetype,d2
13790 00.0000D70C 67000010                     beq     .byte
13791 00.0000D710 527900002B08         .skip4a addq    #1,typelen
13792 00.0000D716 08B9000000002B09             bclr    #0,typelen+1
13793 00.0000D71E 7600                 .byte   moveq   #0,d3
13794 00.0000D720 2442                         move.l  d2,a2
13795 00.0000D722 23CA00002B0A                 move.l  a2,prevtype
13796 00.0000D728 362A0008                     move    8(a2),d3
13797 00.0000D72C 245F                         move.l  (a7)+,a2
13798 00.0000D72E 2542000A                     move.l  d2,10(a2)
13799 00.0000D732 7800                         moveq   #0,d4
13800 00.0000D734 383900002B08                 move    typelen,d4
13801 00.0000D73A 35440004                     move    d4,4(a2)
13802 00.0000D73E 083900000000EC5B             btst    #0,flagmask+1
13803 00.0000D746 67000004                     beq     .skipz
13804 00.0000D74A 7604                         moveq   #4,d3
13805 00.0000D74C B07C005B             .skipz  cmp     #'[',d0
13806 00.0000D750 66000030                     bne     .skipzz
13807 00.0000D754                              ;
13808 00.0000D754                              ;get constant value!
13809 00.0000D754                              ;
13810 00.0000D754 48E71820                     movem.l d3/d4/a2,-(a7)
13811 00.0000D758 6100E814                     bsr     evalconst2
13812 00.0000D75C B07C005D                     cmp     #']',d0
13813 00.0000D760 6600AC80                     bne     syntaxerr
13814 00.0000D764 4A46                         tst     d6
13815 00.0000D766 6600AC52                     bne     fpconerr
13816 00.0000D76A 2203                         move.l  d3,d1
13817 00.0000D76C 4CDF0418                     movem.l (a7)+,d3/d4/a2
13818 00.0000D770 6100A49C                     bsr     getchar3
13819 00.0000D774 35410008                     move    d1,8(a2)
13820 00.0000D778 C6C1                         mulu    d1,d3
13821 00.0000D77A 007900020000EC5A             or      #2,flagmask
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 296
blitz2.s


13822 00.0000D782                              ;
13823 00.0000D782 D883                 .skipzz add.l   d3,d4
13824 00.0000D784 B8BC00008000                 cmp.l   #32768,d4
13825 00.0000D78A 6400AD06                     bcc     toolongerr
13826 00.0000D78E 35790000EC5A0006             move    flagmask,6(a2)
13827 00.0000D796 33C400002B08                 move    d4,typelen
13828 00.0000D79C 4E75                         rts
13829 00.0000D79E                      
13830 00.0000D79E 203900002B44         doendif3        move.l  firstif,d0
13831 00.0000D7A4 6700AED8                     beq     noiferr
13832 00.0000D7A8 2040                         move.l  d0,a0
13833 00.0000D7AA 3028000C                     move    12(a0),d0
13834 00.0000D7AE 024000FF                     and     #255,d0
13835 00.0000D7B2 B240                         cmp     d0,d1
13836 00.0000D7B4 6600AF04                     bne     badenderr
13837 00.0000D7B8 B27C0001             doendif2        cmp     #1,d1
13838 00.0000D7BC 6600001A                     bne     .calcbra
13839 00.0000D7C0                              ;put in while bra
13840 00.0000D7C0 323C6000                     move    #$6000,d1
13841 00.0000D7C4 6100BD46                     bsr     pokewd
13842 00.0000D7C8 22790000E8F6                 move.l  pc,a1
13843 00.0000D7CE 22280004                     move.l  4(a0),d1
13844 00.0000D7D2 9289                         sub.l   a1,d1
13845 00.0000D7D4 6100BD36                     bsr     pokewd
13846 00.0000D7D8                              ;
13847 00.0000D7D8 22680008             .calcbra        move.l  8(a0),a1
13848 00.0000D7DC 22390000E8F6                 move.l  pc,d1
13849 00.0000D7E2 9289                         sub.l   a1,d1
13850 00.0000D7E4 5481                         addq.l  #2,d1
13851 00.0000D7E6                              ;
13852 00.0000D7E6 B2BC00008000                 cmp.l   #32768,d1
13853 00.0000D7EC 6400AEB4                     bcc     bigiferr
13854 00.0000D7F0                              ;
13855 00.0000D7F0 30390000E858                 move    nomemleft,d0
13856 00.0000D7F6 66000006                     bne     .skip
13857 00.0000D7FA 3341FFFE                     move    d1,-2(a1)
13858 00.0000D7FE 4E75                 .skip   rts
13859 00.0000D800                      
13860 00.0000D800 6100A442             dowend  bsr     bakup
13861 00.0000D804 7201                 dowend2 moveq   #1,d1
13862 00.0000D806 60000008                     bra     doendif
13863 00.0000D80A 6100A438             mydoendif2      bsr     bakup
13864 00.0000D80E 7200                 mydoendif       moveq   #0,d1
13865 00.0000D810 6100FF8C             doendif bsr     doendif3
13866 00.0000D814 61000006                     bsr     freetheifz
13867 00.0000D818 6000A3F4                     bra     getchar3
13868 00.0000D81C                      
13869 00.0000D81C 23D000002B44         freetheifz      move.l  (a0),firstif
13870 00.0000D822 2248                         move.l  a0,a1
13871 00.0000D824 700E                         moveq   #14,d0
13872 00.0000D826 2C780004                     move.l  4.w,a6
13873 00.0000D82A 4EEEFF2E                     jmp     freemem(a6)
13874 00.0000D82E                      
13875 00.0000D82E 6100A3DE             doend2  bsr     getchar3
13876 00.0000D832 6700014C             doend   beq     .done
13877 00.0000D836                              ;
13878 00.0000D836 6100000C             .loop   bsr     .doend3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 297
blitz2.s


13879 00.0000D83A 6100A3FE                     bsr     reget
13880 00.0000D83E 6600FFF6                     bne     .loop
13881 00.0000D842 4E75                         rts
13882 00.0000D844 B07C8001             .doend3 cmp     #$8001,d0
13883 00.0000D848 66000034                     bne     .nottype
13884 00.0000D84C 323900002B20                 move    linemode,d1
13885 00.0000D852 6600ABCC                     bne     modeerr
13886 00.0000D856 527900002B08                 addq    #1,typelen
13887 00.0000D85C 08B9000000002B09             bclr    #0,typelen+1
13888 00.0000D864 207900002B14                 move.l  thistype,a0
13889 00.0000D86A 317900002B080008             move    typelen,8(a0)
13890 00.0000D872 33FCFFFF00002B20             move    #-1,linemode
13891 00.0000D87A 6000A392                     bra     getchar3
13892 00.0000D87E                              ;
13893 00.0000D87E B07C800B             .nottype        cmp     #$800b,d0
13894 00.0000D882 6700FF8A                     beq     mydoendif
13895 00.0000D886                              ;
13896 00.0000D886 B07C800C             .notif  cmp     #$800c,d0
13897 00.0000D88A 6700FF78                     beq     dowend2
13898 00.0000D88E                              ;
13899 00.0000D88E B07C8008             .notwhile       cmp     #$8008,d0
13900 00.0000D892 66000006                     bne     .notstate
13901 00.0000D896                      .state  ;end of statement/function processing!
13902 00.0000D896                              ;
13903 00.0000D896 60000150                     bra     endstate
13904 00.0000D89A                              ;
13905 00.0000D89A B07C8009             .notstate       cmp     #$8009,d0
13906 00.0000D89E 66000028                     bne     .notfunc
13907 00.0000D8A2 323C7000                     move    #$7000,d1
13908 00.0000D8A6 6100BC64                     bsr     pokewd
13909 00.0000D8AA 20790000EC04                 move.l  thisproc,a0
13910 00.0000D8B0 0C2800070005                 cmp.b   #7,5(a0)
13911 00.0000D8B6 6600FFDE                     bne     .state
13912 00.0000D8BA 323900002A08                 move    putstlen,d1
13913 00.0000D8C0 6100BC4A                     bsr     pokewd
13914 00.0000D8C4 6000FFD0                     bra     .state
13915 00.0000D8C8                      .notfunc        ;
13916 00.0000D8C8 B07C8030                     cmp     #$8000+48,d0
13917 00.0000D8CC 66000098                     bne     .notsetint
13918 00.0000D8D0                              ;
13919 00.0000D8D0 32390000EC0C                 move    procmode,d1
13920 00.0000D8D6 6600A716                     bne     interr3
13921 00.0000D8DA                              ;
13922 00.0000D8DA 4A390000400A                 tst.b   debugga
13923 00.0000D8E0 67000028                     beq     .norerrf1
13924 00.0000D8E4                              ;
13925 00.0000D8E4 7203                         moveq   #3,d1
13926 00.0000D8E6 4EB9000044A8                 jsr     maketrap
13927 00.0000D8EC                              ;
13928 00.0000D8EC 32390000E858                 move    nomemleft,d1
13929 00.0000D8F2 66000016                     bne     .norerrf1
13930 00.0000D8F6                              ;
13931 00.0000D8F6 2079000050D6                 move.l  intcleanat,a0
13932 00.0000D8FC 20B90000E8F6                 move.l  pc,(a0)
13933 00.0000D902                              ;
13934 00.0000D902 323CC30C                     move    #gouse,d1
13935 00.0000D906 6100E1A0                     bsr     tokejsr ;for runerrlib stack chex
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 298
blitz2.s


13936 00.0000D90A                              ;
13937 00.0000D90A 3239000050D2         .norerrf1       move    intstring,d1
13938 00.0000D910 6700A704                     beq     interr
13939 00.0000D914 6A00001E                     bpl     .nosp
13940 00.0000D918                              ;
13941 00.0000D918 3239000050D4                 move    intlevel,d1
13942 00.0000D91E 00417200                     or      #$7200,d1
13943 00.0000D922 6100BBE8                     bsr     pokewd  ;moveq #level,d1
13944 00.0000D926 323CC103                     move    #oldint,d1
13945 00.0000D92A 6100E17C                     bsr     tokejsr
13946 00.0000D92E 4279000050D4                 clr     intlevel
13947 00.0000D934                              ;
13948 00.0000D934 4279000050D2         .nosp   clr     intstring
13949 00.0000D93A                              ;
13950 00.0000D93A 223900004F12                 move.l  intfin,d1
13951 00.0000D940 6100BBC2                     bsr     pokel
13952 00.0000D944                              ;
13953 00.0000D944 223C70004E75                 move.l  #$70004e75,d1
13954 00.0000D94A 6100BBB8                     bsr     pokel
13955 00.0000D94E                              ;
13956 00.0000D94E 32390000E858                 move    nomemleft,d1
13957 00.0000D954 6600000C                     bne     .sintdone
13958 00.0000D958 2079000050CC                 move.l  intjmpat,a0
13959 00.0000D95E 20BA0F96                     move.l  pc(pc),(a0)
13960 00.0000D962 6000A2AA             .sintdone       bra     getchar3
13961 00.0000D966                      
13962 00.0000D966 B07C800E             .notsetint      cmp     #$800e,d0       ;end select?
13963 00.0000D96A 6700F3FC                     beq     doendsel
13964 00.0000D96E B07C80B4                     cmp     #$8001+tnum,d0
13965 00.0000D972 66000008                     bne     .notseterr
13966 00.0000D976 4EF900004F48                 jmp     doendseterr
13967 00.0000D97C                      .notseterr      ;
13968 00.0000D97C                              ;
13969 00.0000D97C 6000AA64                     bra     syntaxerr
13970 00.0000D980 4A790000E834         .done   tst     dirmode
13971 00.0000D986 6600A7C0                     bne     baddirerr
13972 00.0000D98A 323CC800                     move    #endjmp,d1
13973 00.0000D98E 6000E118                     bra     tokejsr
13974 00.0000D992                      
13975 00.0000D992 4A790000E834         dostop  tst     dirmode
13976 00.0000D998 6600A7AE                     bne     baddirerr
13977 00.0000D99C 4A390000400A                 tst.b   debugga
13978 00.0000D9A2 6700A2D4                     beq     badstoperr
13979 00.0000D9A6                              ;
13980 00.0000D9A6 323CD501                     move    #$d501,d1
13981 00.0000D9AA 6000E0FC                     bra     tokejsr
13982 00.0000D9AE                      
13983 00.0000D9AE 4EF9000080FC         docont  jmp     badconterr      ;cont not currently supported!
13984 00.0000D9B4                      
13985 00.0000D9B4 323C4E71             nop     move    #$4e71,d1
13986 00.0000D9B8 6000BB52                     bra     pokewd
13987 00.0000D9BC                      
13988 00.0000D9BC 24790000E9A8         freefors        move.l  firstfor,a2
13989 00.0000D9C2 42B90000E9A8                 clr.l   firstfor
13990 00.0000D9C8 2C780004                     move.l  4.w,a6
13991 00.0000D9CC B4FC0000             .loop   cmp     #0,a2
13992 00.0000D9D0 67000014                     beq     .done
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 299
blitz2.s


13993 00.0000D9D4 224A                         move.l  a2,a1
13994 00.0000D9D6 2451                         move.l  (a1),a2
13995 00.0000D9D8 7000                         moveq   #0,d0
13996 00.0000D9DA 10290010                     move.b  16(a1),d0
13997 00.0000D9DE 4EAEFF2E                     jsr     freemem(a6)
13998 00.0000D9E2 6000FFE8                     bra     .loop
13999 00.0000D9E6 4E75                 .done   rts
14000 00.0000D9E8                      
14001 00.0000D9E8                      endstate        ;End Statement
14002 00.0000D9E8                              ;
14003 00.0000D9E8                              ;first, fill in any FUNCTION RETURN type shit.....
14004 00.0000D9E8                              ;
14005 00.0000D9E8 32390000EC0C                 move    procmode,d1
14006 00.0000D9EE 6700B0F4                     beq     badpenderr
14007 00.0000D9F2                              ;
14008 00.0000D9F2 32390000E858                 move    nomemleft,d1
14009 00.0000D9F8 66000020                     bne     .ship
14010 00.0000D9FC 24790000E8DE                 move.l  firstpend,a2
14011 00.0000DA02 B4FC0000             .loop0  cmp     #0,a2
14012 00.0000DA06 67000012                     beq     .ship
14013 00.0000DA0A 206A0004                     move.l  4(a2),a0
14014 00.0000DA0E 20B90000E8F6                 move.l  pc,(a0)
14015 00.0000DA14 2452                         move.l  (a2),a2
14016 00.0000DA16 6000FFEA                     bra     .loop0
14017 00.0000DA1A                              ;
14018 00.0000DA1A 4A390000400A         .ship   tst.b   debugga
14019 00.0000DA20 6708                         beq.s   .ship2
14020 00.0000DA22                              ;
14021 00.0000DA22 7205                         moveq   #5,d1
14022 00.0000DA24 4EB9000044A8                 jsr     maketrap
14023 00.0000DA2A                              ;
14024 00.0000DA2A 247900002B30         .ship2  move.l  firstlocal,a2
14025 00.0000DA30 61009A58                     bsr     calcstatic2
14026 00.0000DA34 20790000EC04                 move.l  thisproc,a0
14027 00.0000DA3A 31440008                     move    d4,8(a0)
14028 00.0000DA3E 23C30000E8DA                 move.l  d3,locdatast
14029 00.0000DA44 22790000EBF8                 move.l  memlib,a1
14030 00.0000DA4A 4A69000C                     tst     12(a1)
14031 00.0000DA4E 6A000014                     bpl     .nolskip
14032 00.0000DA52 08E800070008                 bset    #7,8(a0)
14033 00.0000DA58 323CC005                     move    #freelast,d1
14034 00.0000DA5C 6100E042                     bsr     tokejsr2
14035 00.0000DA60 6000000A                     bra     .lskip2
14036 00.0000DA64                              ;
14037 00.0000DA64 33790000EBFC000C     .nolskip        move    memlibstat,12(a1)
14038 00.0000DA6C                      .lskip2 ;
14039 00.0000DA6C 20790000EC04                 move.l  thisproc,a0
14040 00.0000DA72 2F28000E                     move.l  14(a0),-(a7)
14041 00.0000DA76 317900002B3A0006             move    locvaroff,6(a0)
14042 00.0000DA7E 08A800010007                 bclr    #1,7(a0)
14043 00.0000DA84 08A800000007                 bclr    #0,7(a0)
14044 00.0000DA8A 0C2800070005                 cmp.b   #7,5(a0)
14045 00.0000DA90 6600000C                     bne     .penis
14046 00.0000DA94 323900002A0A                 move    getstlen,d1
14047 00.0000DA9A 6100BA70                     bsr     pokewd
14048 00.0000DA9E 4A680006             .penis  tst     6(a0)
14049 00.0000DAA2 67000014                     beq     .nolink
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 300
blitz2.s


14050 00.0000DAA6 323CFC7B                     move    #64635,d1
14051 00.0000DAAA 61008F96                     bsr     uselib
14052 00.0000DAAE 323900002A36                 move    unlinka4,d1
14053 00.0000DAB4 6100BA56                     bsr     pokewd
14054 00.0000DAB8                      .nolink ;
14055 00.0000DAB8                              ;fix the stacked string lengths!
14056 00.0000DAB8                              ;
14057 00.0000DAB8 20790000EC04                 move.l  thisproc,a0
14058 00.0000DABE 7200                         moveq   #0,d1
14059 00.0000DAC0 12280004                     move.b  4(a0),d1
14060 00.0000DAC4 E849                         lsr     #4,d1
14061 00.0000DAC6 6700005C                     beq     .nofix
14062 00.0000DACA B27C0001                     cmp     #1,d1
14063 00.0000DACE 66000010                     bne     .not1
14064 00.0000DAD2 323900002A16                 move    fix1,d1
14065 00.0000DAD8 6100BA32                     bsr     pokewd
14066 00.0000DADC 60000046                     bra     .nofix
14067 00.0000DAE0 E549                 .not1   lsl     #2,d1
14068 00.0000DAE2 3F01                         move    d1,-(a7)
14069 00.0000DAE4 33C100002A0E                 move    d1,moverts+2
14070 00.0000DAEA 223900002A0C                 move.l  moverts,d1
14071 00.0000DAF0 6100BA12                     bsr     pokel
14072 00.0000DAF4 321F                         move    (a7)+,d1
14073 00.0000DAF6 B27C0008                     cmp     #8,d1
14074 00.0000DAFA 62000018                     bhi     .fix
14075 00.0000DAFE 02410007                     and     #7,d1
14076 00.0000DB02 E149                         lsl     #8,d1
14077 00.0000DB04 E349                         lsl     #1,d1
14078 00.0000DB06 827900002A14                 or      fixq,d1
14079 00.0000DB0C 6100B9FE                     bsr     pokewd
14080 00.0000DB10 60000012                     bra     .nofix
14081 00.0000DB14                              ;
14082 00.0000DB14 33C100002A12         .fix    move    d1,fixstack+2
14083 00.0000DB1A 223900002A10                 move.l  fixstack,d1
14084 00.0000DB20 6100B9E2                     bsr     pokel
14085 00.0000DB24                              ;
14086 00.0000DB24 6100F7A4             .nofix  bsr     normret
14087 00.0000DB28                              ;
14088 00.0000DB28                              ;put in the setup stuff here!
14089 00.0000DB28                              ;
14090 00.0000DB28 6100F9CE                     bsr     procfixer
14091 00.0000DB2C                              ;
14092 00.0000DB2C 205F                         move.l  (a7)+,a0
14093 00.0000DB2E 32390000E858                 move    nomemleft,d1
14094 00.0000DB34 66000008                     bne     .skipjp
14095 00.0000DB38 21390000E8F6                 move.l  pc,-(a0)
14096 00.0000DB3E                      .skipjp ;
14097 00.0000DB3E 42790000EC0C                 clr     procmode
14098 00.0000DB44 42B90000EC04                 clr.l   thisproc
14099 00.0000DB4A 42790000D2DA                 clr     procnum
14100 00.0000DB50 6100000A                     bsr     droplocals
14101 00.0000DB54 6100B262                     bsr     freepends
14102 00.0000DB58 6000A0B4                     bra     getchar3
14103 00.0000DB5C                      
14104 00.0000DB5C 700C                 droplocals      moveq   #12,d0
14105 00.0000DB5E 7201                         moveq   #1,d1
14106 00.0000DB60 2C780004                     move.l  4.w,a6
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 301
blitz2.s


14107 00.0000DB64 4EB900004B6C                 jsr     doallocmem
14108 00.0000DB6A 2040                         move.l  d0,a0
14109 00.0000DB6C 20B900002B2C                 move.l  alllocals,(a0)
14110 00.0000DB72 23C800002B2C                 move.l  a0,alllocals
14111 00.0000DB78                              ;
14112 00.0000DB78 203900002B30                 move.l  firstlocal,d0
14113 00.0000DB7E 42B900002B30                 clr.l   firstlocal
14114 00.0000DB84 21400004                     move.l  d0,4(a0)
14115 00.0000DB88 223900002B34                 move.l  firstglob,d1
14116 00.0000DB8E 42B900002B34                 clr.l   firstglob
14117 00.0000DB94 21410008                     move.l  d1,8(a0)
14118 00.0000DB98                              ;
14119 00.0000DB98 4A390000400A                 tst.b   debugga
14120 00.0000DB9E 6710                         beq.s   .skip
14121 00.0000DBA0 4A790000E858                 tst     nomemleft
14122 00.0000DBA6 6608                         bne.s   .skip
14123 00.0000DBA8                              ;
14124 00.0000DBA8 207AF72C                     move.l  proclocals(pc),a0
14125 00.0000DBAC 20C0                         move.l  d0,(a0)+
14126 00.0000DBAE 2081                         move.l  d1,(a0)
14127 00.0000DBB0                              ;
14128 00.0000DBB0 4E75                 .skip   rts
14129 00.0000DBB2                      
14130 00.0000DBB2                      donext  ;
14131 00.0000DBB2 4A790000E834                 tst     dirmode
14132 00.0000DBB8 6600A58E                     bne     baddirerr
14133 00.0000DBBC 22390000E9A8                 move.l  firstfor,d1
14134 00.0000DBC2 6700AE1C                     beq     noforerr
14135 00.0000DBC6 6100A072                     bsr     reget
14136 00.0000DBCA 6700004C                     beq     .unknown
14137 00.0000DBCE                              ;
14138 00.0000DBCE                              ;here, we've got 'Next Var[,Var...]'
14139 00.0000DBCE                              ;
14140 00.0000DBCE 6100BBD8             .nextnext       bsr     getvname
14141 00.0000DBD2 247A0DD4                     move.l  firstfor(pc),a2
14142 00.0000DBD6 7200                         moveq   #0,d1
14143 00.0000DBD8 122A0010                     move.b  16(a2),d1
14144 00.0000DBDC 04410012                     sub     #18,d1
14145 00.0000DBE0 B441                         cmp     d1,d2
14146 00.0000DBE2 6600ADFC                     bne     noforerr
14147 00.0000DBE6 41FA1080                     lea     namebuff(pc),a0
14148 00.0000DBEA 43EA0011                     lea     17(a2),a1
14149 00.0000DBEE 5342                         subq    #1,d2
14150 00.0000DBF0 B308                 .chkname        cmp.b   (a0)+,(a1)+
14151 00.0000DBF2 6600ADEC                     bne     noforerr
14152 00.0000DBF6 51CAFFF8                     dbf     d2,.chkname
14153 00.0000DBFA 6100001E                     bsr     .unknown2
14154 00.0000DBFE 6100A03A                     bsr     reget
14155 00.0000DC02 67000012                     beq     .byebye
14156 00.0000DC06 B07C002C                     cmp     #',',d0
14157 00.0000DC0A 6600A7D6                     bne     syntaxerr
14158 00.0000DC0E 61009FFE                     bsr     getchar3
14159 00.0000DC12 6000FFBA                     bra     .nextnext
14160 00.0000DC16 4E75                 .byebye rts
14161 00.0000DC18                              ;
14162 00.0000DC18 2441                 .unknown        move.l  d1,a2
14163 00.0000DC1A 4EB900004C5E         .unknown2       jsr     popnext ;error checking for next.
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 302
blitz2.s


14164 00.0000DC20 302A000C                     move    12(a2),d0
14165 00.0000DC24                              ;
14166 00.0000DC24 41F900002948                 lea     nextb,a0
14167 00.0000DC2A 43F900002950                 lea     nextbf,a1
14168 00.0000DC30 B07C0001                     cmp     #1,d0
14169 00.0000DC34 6700003E                     beq     .donext
14170 00.0000DC38 41F900002950                 lea     nextw,a0
14171 00.0000DC3E 43F900002958                 lea     nextwf,a1
14172 00.0000DC44 B07C0002                     cmp     #2,d0
14173 00.0000DC48 6700002A                     beq     .donext
14174 00.0000DC4C 41F900002958                 lea     nextl,a0
14175 00.0000DC52 43F900002960                 lea     nextlf,a1
14176 00.0000DC58 B07C0005                     cmp     #5,d0
14177 00.0000DC5C 66000016                     bne     .donext
14178 00.0000DC60 323CC900                     move    #getffpbase,d1
14179 00.0000DC64 6100DE42                     bsr     tokejsr
14180 00.0000DC68 41F900002960                 lea     nextf,a0
14181 00.0000DC6E 43F90000296E                 lea     nextff,a1
14182 00.0000DC74 6100B92C             .donext bsr     pokecode
14183 00.0000DC78 223A007A                     move.l  thebra(pc),d1
14184 00.0000DC7C 6100B886                     bsr     pokel
14185 00.0000DC80                              ;
14186 00.0000DC80 24790000E9A8                 move.l  firstfor,a2
14187 00.0000DC86 23D20000E9A8                 move.l  (a2),firstfor
14188 00.0000DC8C                              ;
14189 00.0000DC8C                              ;pass2, o.k. to put in my BRA's!
14190 00.0000DC8C                              ;
14191 00.0000DC8C 206A0008                     move.l  8(a2),a0
14192 00.0000DC90 22790000E8F6                 move.l  pc,a1
14193 00.0000DC96 2209                         move.l  a1,d1
14194 00.0000DC98 9288                         sub.l   a0,d1   ;d1=positive bra
14195 00.0000DC9A 5481                         addq.l  #2,d1
14196 00.0000DC9C B2BC00008000                 cmp.l   #32768,d1
14197 00.0000DCA2 6400AD52                     bcc     bigforerr
14198 00.0000DCA6 4A790000E858                 tst     nomemleft
14199 00.0000DCAC 66000006                     bne     .nopoke1
14200 00.0000DCB0 3141FFFE                     move    d1,-2(a0)
14201 00.0000DCB4 2209                 .nopoke1        move.l  a1,d1
14202 00.0000DCB6 92AA0004                     sub.l   4(a2),d1
14203 00.0000DCBA 5D81                         subq.l  #6,d1
14204 00.0000DCBC B2BC00008000                 cmp.l   #32768,d1
14205 00.0000DCC2 6400AD32                     bcc     bigforerr
14206 00.0000DCC6 4A790000E858                 tst     nomemleft
14207 00.0000DCCC 66000008                     bne     .skip
14208 00.0000DCD0 4441                         neg     d1
14209 00.0000DCD2 3341FFFE                     move    d1,-2(a1)
14210 00.0000DCD6                              ;
14211 00.0000DCD6 4EB900004C1C         .skip   jsr     popnext3        ;fix stack
14212 00.0000DCDC                              ;
14213 00.0000DCDC 2C780004                     move.l  4.w,a6
14214 00.0000DCE0 224A                         move.l  a2,a1
14215 00.0000DCE2 7000                         moveq   #0,d0
14216 00.0000DCE4 10290010                     move.b  16(a1),d0
14217 00.0000DCE8 4EAEFF2E                     jsr     freemem(a6)
14218 00.0000DCEC                              ;
14219 00.0000DCEC 60009F4C                     bra     reget
14220 00.0000DCF0                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 303
blitz2.s


14221 00.0000DCF0 3F3C664F             forset  move    #'fO',-(a7)
14222 00.0000DCF4                      
14223 00.0000DCF4 6000FFFE             thebra  bra     thebra
14224 00.0000DCF8                      
14225 00.0000DCF8 0000                 forlineat       dc      0
14226 00.0000DCFA 0000                 fortemp dc      0
14227 00.0000DCFC                      
14228 00.0000DCFC                      dofor   ;
14229 00.0000DCFC                              ;For var = START To FINISH [Step INCREMENT]
14230 00.0000DCFC                              ;
14231 00.0000DCFC 4A790000E834                 tst     dirmode
14232 00.0000DD02 6600A444                     bne     baddirerr
14233 00.0000DD06 33F90000E9E80000DCF8         move    linenumat,forlineat
14234 00.0000DD10                              ;
14235 00.0000DD10                              ;new stuff!
14236 00.0000DD10                              ;
14237 00.0000DD10 23CD0000E854                 move.l  a5,letstart
14238 00.0000DD16 6100BA90                     bsr     getvname
14239 00.0000DD1A 33C20000DCFA                 move    d2,fortemp
14240 00.0000DD20                              ;
14241 00.0000DD20 6100AFAE                     bsr     findfor
14242 00.0000DD24 67009F96                     beq     fornexterr
14243 00.0000DD28 45F90000E9A8                 lea     firstfor,a2
14244 00.0000DD2E 6100AF0A                     bsr     addhere2
14245 00.0000DD32 2F0A                         move.l  a2,-(a7)
14246 00.0000DD34                              ;
14247 00.0000DD34 4A390000400A                 tst.b   debugga
14248 00.0000DD3A 6710                         beq.s   .noerr
14249 00.0000DD3C                              ;
14250 00.0000DD3C 4EB90000BA86                 jsr     chkstak
14251 00.0000DD42 22390000DCF0                 move.l  forset,d1
14252 00.0000DD48 6100B7BA                     bsr     pokel
14253 00.0000DD4C 343AFFAC             .noerr  move    fortemp(pc),d2
14254 00.0000DD50 61000154                     bsr     dolet2
14255 00.0000DD54 B07C8018                     cmp     #$8018,d0
14256 00.0000DD58 6600A688                     bne     syntaxerr
14257 00.0000DD5C 32390000E9E2                 move    commode,d1
14258 00.0000DD62 6600A67E                     bne     syntaxerr
14259 00.0000DD66 B43C0006                     cmp.b   #6,d2
14260 00.0000DD6A 6400AC58                     bcc     badforerr       
14261 00.0000DD6E 0802000F                     btst    #15,d2
14262 00.0000DD72 66000012                     bne     .skip
14263 00.0000DD76 3239000029C8                 move    leaamp,d1
14264 00.0000DD7C 6100B742                     bsr     pokewda5s
14265 00.0000DD80 3203                         move    d3,d1
14266 00.0000DD82 6100B788                     bsr     pokewd
14267 00.0000DD86 3239000029C6         .skip   move    pushindex,d1
14268 00.0000DD8C 6100B77E                     bsr     pokewd  ;index lea on stack
14269 00.0000DD90 024200FF                     and     #255,d2
14270 00.0000DD94 2257                         move.l  (a7),a1
14271 00.0000DD96 3342000C                     move    d2,12(a1)
14272 00.0000DD9A                              ;
14273 00.0000DD9A 3F02                         move    d2,-(a7)
14274 00.0000DD9C 6100BBEE                     bsr     eval    ;get fin
14275 00.0000DDA0 3417                         move    (a7),d2
14276 00.0000DDA2                              ;
14277 00.0000DDA2 3239000029DC                 move    pushd0l,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 304
blitz2.s


14278 00.0000DDA8 B47C0003                     cmp     #3,d2
14279 00.0000DDAC 64000008                     bcc     .skipl
14280 00.0000DDB0 3239000029DA                 move    pushd0wd,d1
14281 00.0000DDB6 3F01                 .skipl  move    d1,-(a7)
14282 00.0000DDB8 6100B752                     bsr     pokewd  ;push fin on stack
14283 00.0000DDBC B07C8019                     cmp     #$8019,d0
14284 00.0000DDC0 6600000A                     bne     .defstep
14285 00.0000DDC4                              ;
14286 00.0000DDC4 6100BBC6                     bsr     eval    ;get step
14287 00.0000DDC8 60000042                     bra     .pushstep
14288 00.0000DDCC                              ;
14289 00.0000DDCC B47C0004             .defstep        cmp     #4,d2
14290 00.0000DDD0 6400000E                     bcc     .qup
14291 00.0000DDD4 323C7001                     move    #$7001,d1
14292 00.0000DDD8 6100B732                     bsr     pokewd
14293 00.0000DDDC 6000002E                     bra     .pushstep
14294 00.0000DDE0 66000018             .qup    bne     .notq
14295 00.0000DDE4 323C7001                     move    #$7001,d1
14296 00.0000DDE8 6100B722                     bsr     pokewd
14297 00.0000DDEC 3239000029C4                 move    swapd0,d1
14298 00.0000DDF2 6100B718                     bsr     pokewd
14299 00.0000DDF6 60000014                     bra     .pushstep
14300 00.0000DDFA 323C203C             .notq   move    #$203c,d1
14301 00.0000DDFE 6100B70C                     bsr     pokewd
14302 00.0000DE02 223C80000041                 move.l  #$80000041,d1   ;ffp '1'
14303 00.0000DE08 6100B6FA                     bsr     pokel
14304 00.0000DE0C 321F                 .pushstep       move    (a7)+,d1
14305 00.0000DE0E 6100B6FC                     bsr     pokewd          ;push step on stack
14306 00.0000DE12                              ; 
14307 00.0000DE12 341F                         move    (a7)+,d2
14308 00.0000DE14 2257                         move.l  (a7),a1
14309 00.0000DE16 23790000E8F60004             move.l  pc,4(a1)
14310 00.0000DE1E 41F90000296E                 lea     forcompb,a0
14311 00.0000DE24 43F900002982                 lea     forcompbf,a1
14312 00.0000DE2A B47C0001                     cmp     #1,d2
14313 00.0000DE2E 6700004E                     beq     .docomp
14314 00.0000DE32 41F900002982                 lea     forcompw,a0
14315 00.0000DE38 43F900002996                 lea     forcompwf,a1
14316 00.0000DE3E B47C0002                     cmp     #2,d2
14317 00.0000DE42 6700003A                     beq     .docomp
14318 00.0000DE46 41F900002996                 lea     forcompl,a0
14319 00.0000DE4C 43F9000029AA                 lea     forcomplf,a1
14320 00.0000DE52 B47C0005                     cmp     #5,d2
14321 00.0000DE56 66000026                     bne     .docomp
14322 00.0000DE5A 41F9000029AA                 lea     forcompf,a0
14323 00.0000DE60 43F9000029C0                 lea     forcompff,a1
14324 00.0000DE66 6100B73A                     bsr     pokecode
14325 00.0000DE6A 323CC900                     move    #getffpbase,d1
14326 00.0000DE6E 6100DC38                     bsr     tokejsr
14327 00.0000DE72 41F9000029C0                 lea     forcompf2,a0
14328 00.0000DE78 43F9000029C4                 lea     forcompf2f,a1
14329 00.0000DE7E 6100B722             .docomp bsr     pokecode
14330 00.0000DE82 223A0014                     move.l  thebgt(pc),d1
14331 00.0000DE86 6100B67C                     bsr     pokel
14332 00.0000DE8A 225F                         move.l  (a7)+,a1
14333 00.0000DE8C 23790000E8F60008             move.l  pc,8(a1)
14334 00.0000DE94 60009DA4                     bra     reget
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 305
blitz2.s


14335 00.0000DE98                      
14336 00.0000DE98 6E00FFFE             thebgt  bgt     thebgt
14337 00.0000DE9C                      
14338 00.0000DE9C 23CD0000E854         dolet   move.l  a5,letstart
14339 00.0000DEA2 6100B904                     bsr     getvname
14340 00.0000DEA6                      dolet2  ;
14341 00.0000DEA6 6100D714                     bsr     pushstart
14342 00.0000DEAA 33FC000100002B06             move    #1,regat        ;don't disturb this reg!
14343 00.0000DEB2 6100AF88                     bsr     fetchvar        ;var in a3, type in a2
14344 00.0000DEB6 6100B26A                     bsr     calcvar ;get offset stuff
14345 00.0000DEBA 427900002B06                 clr     regat   ;don't disturb this reg
14346 00.0000DEC0 6100D710                     bsr     pushdo
14347 00.0000DEC4 42790000E9E2                 clr     commode
14348 00.0000DECA 42790000E0E8                 clr     pcodd
14349 00.0000DED0                              ;
14350 00.0000DED0 B07C003D                     cmp     #'=',d0
14351 00.0000DED4 6700000A                     beq     .nextcom
14352 00.0000DED8                              ;
14353 00.0000DED8                              ;move char to start of var name!
14354 00.0000DED8                              ;
14355 00.0000DED8 2A790000E854                 move.l  letstart,a5
14356 00.0000DEDE 534D                         subq    #1,a5
14357 00.0000DEE0                              ;
14358 00.0000DEE0 B43C0007             .nextcom        cmp.b   #7,d2
14359 00.0000DEE4 660000A4                     bne     .notstring
14360 00.0000DEE8                              ;
14361 00.0000DEE8                              ;string get!
14362 00.0000DEE8                              ;
14363 00.0000DEE8 48A73000                     movem   d2-d3,-(a7)
14364 00.0000DEEC 2F390000E9E4                 move.l  lastoffset,-(a7)
14365 00.0000DEF2 3F390000EC02                 move    varmode,-(a7)
14366 00.0000DEF8 4EB90000457A                 jsr     setsvars        ;!@!
14367 00.0000DEFE 7407                         moveq   #7,d2
14368 00.0000DF00 6100BA8A                     bsr     eval
14369 00.0000DF04 33DF0000EC02                 move    (a7)+,varmode
14370 00.0000DF0A 23DF0000E9E4                 move.l  (a7)+,lastoffset
14371 00.0000DF10 323900002A00                 move    moved0a3,d1
14372 00.0000DF16 6100B5F4                     bsr     pokewd
14373 00.0000DF1A 32390000E9E2                 move    commode,d1
14374 00.0000DF20 67000016                     beq     .stconti
14375 00.0000DF24 41F900002A9A                 lea     pulla2st,a0
14376 00.0000DF2A 43F900002AA0                 lea     pulla2stf,a1
14377 00.0000DF30 6100B670                     bsr     pokecode
14378 00.0000DF34 60000006                     bra     .stconti2
14379 00.0000DF38 6100D702             .stconti        bsr     pushput
14380 00.0000DF3C 4C9F000C             .stconti2       movem   (a7)+,d2-d3
14381 00.0000DF40 0802000F                     btst    #15,d2
14382 00.0000DF44 66000012                     bne     .already
14383 00.0000DF48 33C300002A92                 move    d3,leaa5d3a2+2
14384 00.0000DF4E 223900002A90                 move.l  leaa5d3a2,d1
14385 00.0000DF54 6100B5A0                     bsr     pokela5s
14386 00.0000DF58 323CFE6F             .already        move    #65135,d1
14387 00.0000DF5C 61008AE4                     bsr     uselib
14388 00.0000DF60 323CC700                     move    #lastring,d1
14389 00.0000DF64 34390000EC02                 move    varmode,d2
14390 00.0000DF6A 66000004                     bne     .local
14391 00.0000DF6E 5241                         addq    #1,d1   ;use global allocmem
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 306
blitz2.s


14392 00.0000DF70 6100DB36             .local  bsr     tokejsr
14393 00.0000DF74 B07C002C                     cmp     #',',d0
14394 00.0000DF78 6600014C                     bne     .done
14395 00.0000DF7C 323900002A22                 move    addq4a2,d1
14396 00.0000DF82 6100B588                     bsr     pokewd
14397 00.0000DF86 60000090                     bra     .nextstr
14398 00.0000DF8A                              ;
14399 00.0000DF8A 0802000E             .notstring      btst    #14,d2  ;pointer, ignore!
14400 00.0000DF8E 6600000C                     bne     .skip
14401 00.0000DF92 4A02                         tst.b   d2
14402 00.0000DF94 6700A56E                     beq     noleterr        ;tried to assign a struct - later!
14403 00.0000DF98 60000006                     bra     .skip2
14404 00.0000DF9C 143C0003             .skip   move.b  #3,d2
14405 00.0000DFA0                      .skip2  ;
14406 00.0000DFA0                              ;let's get what is to be assigned.....
14407 00.0000DFA0                              ;
14408 00.0000DFA0 48A73000                     movem   d2-d3,-(a7)
14409 00.0000DFA4 3F390000EC02                 move    varmode,-(a7)
14410 00.0000DFAA 024200FF                     and     #$ff,d2
14411 00.0000DFAE 2F390000E9E4                 move.l  lastoffset,-(a7)
14412 00.0000DFB4 6100B9D6                     bsr     eval
14413 00.0000DFB8 23DF0000E9E4                 move.l  (a7)+,lastoffset
14414 00.0000DFBE 32390000E9E2                 move    commode,d1
14415 00.0000DFC4 66000006                     bne     .conti
14416 00.0000DFC8 6100D672                     bsr     pushput
14417 00.0000DFCC                              ;
14418 00.0000DFCC 33DF0000EC02         .conti  move    (a7)+,varmode
14419 00.0000DFD2 4C9F000C                     movem   (a7)+,d2-d3
14420 00.0000DFD6                              ;
14421 00.0000DFD6 323C2B40                     move    #$2b40,d1
14422 00.0000DFDA 38390000EC02                 move    varmode,d4
14423 00.0000DFE0 67000006                     beq     .skipl
14424 00.0000DFE4 08810009                     bclr    #9,d1
14425 00.0000DFE8 0802000F             .skipl  btst    #15,d2
14426 00.0000DFEC 670000A2                     beq     .code
14427 00.0000DFF0                              ;
14428 00.0000DFF0 32390000E9E2                 move    commode,d1
14429 00.0000DFF6 6700000C                     beq     .skipc1
14430 00.0000DFFA 323900002A98                 move    pulla2,d1
14431 00.0000E000 6100B50A                     bsr     pokewd
14432 00.0000E004                              ;
14433 00.0000E004 323C2480             .skipc1 move    #$2480,d1       ;move.l d0,(a2)
14434 00.0000E008                              ;
14435 00.0000E008 B07C002C                     cmp     #',',d0
14436 00.0000E00C 66000082                     bne     .code
14437 00.0000E010                              ;
14438 00.0000E010 323C24C0                     move    #$24c0,d1       ;move.l d0,(a2)+
14439 00.0000E014 6100007A                     bsr     .code
14440 00.0000E018                              ;
14441 00.0000E018 20390000E9E4         .nextstr        move.l  lastoffset,d0
14442 00.0000E01E 6700A77A                     beq     nocomerr
14443 00.0000E022 33FCFFFF0000E9E2             move    #-1,commode     
14444 00.0000E02A 42790000EBEE                 clr     varcodelen
14445 00.0000E030 323900002A94                 move    pusha2,d1
14446 00.0000E036 6100B4D4                     bsr     pokewd
14447 00.0000E03A 20790000E9E4                 move.l  lastoffset,a0
14448 00.0000E040 2010                         move.l  (a0),d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 307
blitz2.s


14449 00.0000E042 6700A73A                     beq     comerr  ;comma past end of struct
14450 00.0000E046 2040                         move.l  d0,a0
14451 00.0000E048 23C80000E9E4                 move.l  a0,lastoffset
14452 00.0000E04E 082800010007                 btst    #1,7(a0)
14453 00.0000E054 6600A744                     bne     nocomerr        ;can't use comma on multiple entries
14454 00.0000E058 2268000A                     move.l  10(a0),a1
14455 00.0000E05C 24290004                     move.l  4(a1),d2
14456 00.0000E060 082800000007                 btst    #0,7(a0)
14457 00.0000E066 66000010                     bne     .nextpnt        ;pointer
14458 00.0000E06A B4BC00000100                 cmp.l   #256,d2
14459 00.0000E070 6400A728                     bcc     nocomerr        ;or on structs
14460 00.0000E074 60000012                     bra     .docom 
14461 00.0000E078 B4BC00000100         .nextpnt        cmp.l   #256,d2
14462 00.0000E07E 65000004                     bcs     .nextpnt2
14463 00.0000E082 7400                         moveq   #0,d2
14464 00.0000E084 08C2000E             .nextpnt2       bset    #14,d2
14465 00.0000E088 08C2000F             .docom  bset    #15,d2
14466 00.0000E08C 6000FE52                     bra     .nextcom
14467 00.0000E090                              ;
14468 00.0000E090 B43C0001             .code   cmp.b   #1,d2
14469 00.0000E094 67000016                     beq     .byte
14470 00.0000E098 6100002E                     bsr     alignletpc
14471 00.0000E09C B43C0003                     cmp.b   #3,d2
14472 00.0000E0A0 64000014                     bcc     .do
14473 00.0000E0A4 00411000                     or      #$1000,d1
14474 00.0000E0A8 6000000C                     bra     .do
14475 00.0000E0AC 52790000E0E8         .byte   addq    #1,pcodd
14476 00.0000E0B2 0A413000                     eor     #$3000,d1
14477 00.0000E0B6 6100B454             .do     bsr     pokewd  ;bsr
14478 00.0000E0BA 08010007                     btst    #7,d1
14479 00.0000E0BE 6606                         bne.s   .done
14480 00.0000E0C0 3203                         move    d3,d1
14481 00.0000E0C2 6000B448                     bra     pokewd
14482 00.0000E0C6 4E75                 .done   rts
14483 00.0000E0C8                      
14484 00.0000E0C8                      ;       btst    #7,d1
14485 00.0000E0C8                      ;       bne.s   .cheese
14486 00.0000E0C8                      ;       move    d3,d1
14487 00.0000E0C8                      ;       bra     pokewd
14488 00.0000E0C8                      ;       ;
14489 00.0000E0C8                      ;.cheese        btst    #13,d1
14490 00.0000E0C8                      ;       bne.s   .done
14491 00.0000E0C8                      ;       btst    #6,d1
14492 00.0000E0C8                      ;       beq.s   .done
14493 00.0000E0C8                      ;       move    #$524a,d1
14494 00.0000E0C8                      ;       bra     pokewd
14495 00.0000E0C8                      ;       ;
14496 00.0000E0C8                      ;.done  rts
14497 00.0000E0C8                      
14498 00.0000E0C8 3F01                 alignletpc      move    d1,-(a7)
14499 00.0000E0CA 323A001C                     move    pcodd(pc),d1
14500 00.0000E0CE E249                         lsr     #1,d1
14501 00.0000E0D0 6410                         bcc.s   .done
14502 00.0000E0D2 42790000E0E8                 clr     pcodd
14503 00.0000E0D8 32390000E0E6                 move    add1a2,d1
14504 00.0000E0DE 6100B42C                     bsr     pokewd
14505 00.0000E0E2 321F                 .done   move    (a7)+,d1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 308
blitz2.s


14506 00.0000E0E4 4E75                         rts
14507 00.0000E0E6                      
14508 00.0000E0E6 524A                 add1a2  addq    #1,a2
14509 00.0000E0E8 0000                 pcodd   dc      0       ;add 1 to this for bytes
14510 00.0000E0EA 0000                 listadd dc      0       ;set to 8 if it's a list
14511 00.0000E0EC 0000                 listsize        dc      0
14512 00.0000E0EE                      
14513 00.0000E0EE                      dodim   ;dim an array
14514 00.0000E0EE                              ;
14515 00.0000E0EE 527900002B06                 addq    #1,regat        ;get things into d1
14516 00.0000E0F4                              ;
14517 00.0000E0F4 323CFF9A                     move    #65434,d1
14518 00.0000E0F8 61008948                     bsr     uselib  ;arrays lib!
14519 00.0000E0FC                              ;
14520 00.0000E0FC 42790000E0EA         dodim2  clr     listadd
14521 00.0000E102 B07C80B3                     cmp     #$8000+tnum,d0
14522 00.0000E106 66000016                     bne     .notlist
14523 00.0000E10A 33FC00080000E0EA             move    #8,listadd      ;it's a list
14524 00.0000E112 323CFFFA                     move    #65530,d1
14525 00.0000E116 6100892A                     bsr     uselib  ;use memlib
14526 00.0000E11A 61009AF2                     bsr     getchar3
14527 00.0000E11E 42790000EC5E         .notlist        clr     nonew
14528 00.0000E124 6100B682                     bsr     getvname
14529 00.0000E128 083900010000EC5B             btst    #1,flagmask+1
14530 00.0000E130 6700A2B0                     beq     syntaxerr
14531 00.0000E134 6100AD06                     bsr     fetchvar
14532 00.0000E138 32390000EC5C                 move    added,d1
14533 00.0000E13E 66000058                     bne     .added
14534 00.0000E142                              ;
14535 00.0000E142                              ;Here, an Array is being Re-Dimmed
14536 00.0000E142                              ;
14537 00.0000E142 33EB00080000EC60             move    8(a3),temp1
14538 00.0000E14A 34390000EC0C                 move    procmode,d2
14539 00.0000E150 66000024                     bne     .reloc
14540 00.0000E154                              ;
14541 00.0000E154 3F3900002B38                 move    varoff,-(a7)
14542 00.0000E15A 33EB000400002B38             move    4(a3),varoff
14543 00.0000E162 587900002B38                 addq    #4,varoff
14544 00.0000E168 61000066                     bsr     dimwit
14545 00.0000E16C 33DF00002B38                 move    (a7)+,varoff
14546 00.0000E172 60000046                     bra     .next
14547 00.0000E176                              ;
14548 00.0000E176 3F3900002B3A         .reloc  move    locvaroff,-(a7)
14549 00.0000E17C 33EB000400002B3A             move    4(a3),locvaroff
14550 00.0000E184 597900002B3A                 subq    #4,locvaroff
14551 00.0000E18A 61000044                     bsr     dimwit
14552 00.0000E18E 33DF00002B3A                 move    (a7)+,locvaroff
14553 00.0000E194 60000024                     bra     .next
14554 00.0000E198                              ;       
14555 00.0000E198                      .added  ;here, we are doing a brand new dim!
14556 00.0000E198                              ;
14557 00.0000E198 33FCFFFF0000EC60             move    #-1,temp1       ;no care on # dims
14558 00.0000E1A0 323AFF48                     move    listadd(pc),d1
14559 00.0000E1A4 67000010                     beq     .isok
14560 00.0000E1A8 33FC40000000EC60             move    #$4000,temp1    ;yes, we do care - must be 1
14561 00.0000E1B0                                              ;coz it's a list
14562 00.0000E1B0 08EB00000006                 bset    #0,6(a3)        ;set to list type of array
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 309
blitz2.s


14563 00.0000E1B6 61000018             .isok   bsr     dimwit
14564 00.0000E1BA 61009A52             .next   bsr     getchar3
14565 00.0000E1BE B07C002C                     cmp     #',',d0
14566 00.0000E1C2 6600000A                     bne     .done
14567 00.0000E1C6 61009A46                     bsr     getchar3
14568 00.0000E1CA 6000FF30                     bra     dodim2
14569 00.0000E1CE 4E75                 .done   rts
14570 00.0000E1D0                      
14571 00.0000E1D0 33FCFFFF0000EC5E     dimwit  move    #-1,nonew
14572 00.0000E1D8 3239000028DA                 move    beginarr,d1
14573 00.0000E1DE 6100B32C                     bsr     pokewd
14574 00.0000E1E2 7200                         moveq   #0,d1
14575 00.0000E1E4 6100B326                     bsr     pokewd  
14576 00.0000E1E8 7204                         moveq   #4,d1
14577 00.0000E1EA 083900000000EC5B             btst    #0,flagmask+1
14578 00.0000E1F2 66000006                     bne     .pointer
14579 00.0000E1F6 322A0008                     move    8(a2),d1
14580 00.0000E1FA D27AFEEE             .pointer        add     listadd(pc),d1  ;size of one element.
14581 00.0000E1FE 33C10000E0EC                 move    d1,listsize
14582 00.0000E204 6100B306                     bsr     pokewd
14583 00.0000E208 42790000EC64                 clr     temp2   ;# dim's got
14584 00.0000E20E 2F0B                         move.l  a3,-(a7)
14585 00.0000E210 52790000EC64         .loop   addq    #1,temp2
14586 00.0000E216 7403                         moveq   #3,d2   ;get word
14587 00.0000E218 6100B772                     bsr     eval
14588 00.0000E21C                              ;
14589 00.0000E21C 4A390000400A                 tst.b   debugga
14590 00.0000E222 6700000A                     beq     .norerr0
14591 00.0000E226 323CC30F                     move    #arrchk,d1
14592 00.0000E22A 6100D87C                     bsr     tokejsr
14593 00.0000E22E 323CC402             .norerr0        move    #arrmult,d1
14594 00.0000E232 6100D874                     bsr     tokejsr
14595 00.0000E236                              ;
14596 00.0000E236 34390000EC0C                 move    procmode,d2
14597 00.0000E23C 67000016                     beq     .global
14598 00.0000E240 597900002B3A                 subq    #4,locvaroff
14599 00.0000E246 33F900002B3A000028E4         move    locvaroff,putarr+2
14600 00.0000E250 60000012                     bra     .doit
14601 00.0000E254 33F900002B38000028E4 .global move    varoff,putarr+2
14602 00.0000E25E 587900002B38                 addq    #4,varoff
14603 00.0000E264                      .doit   ;
14604 00.0000E264 2239000028E2                 move.l  putarr,d1
14605 00.0000E26A 6100B278                     bsr     pokela5d
14606 00.0000E26E B07C002C                     cmp     #',',d0
14607 00.0000E272 6700FF9C                     beq     .loop
14608 00.0000E276 B07C0029                     cmp     #')',d0
14609 00.0000E27A 6600A166                     bne     syntaxerr
14610 00.0000E27E                              ;
14611 00.0000E27E 265F                         move.l  (a7)+,a3
14612 00.0000E280 32390000EC60                 move    temp1,d1
14613 00.0000E286 6B000044                     bmi     .nocare
14614 00.0000E28A                              ;
14615 00.0000E28A                              ;is it a list?
14616 00.0000E28A                              ;
14617 00.0000E28A 0801000E                     btst    #14,d1
14618 00.0000E28E 67000012                     beq     .notl
14619 00.0000E292 0C7900010000EC64             cmp     #1,temp2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 310
blitz2.s


14620 00.0000E29A 66009FD4                     bne     redimerr
14621 00.0000E29E 6000002C                     bra     .nocare
14622 00.0000E2A2                              ;
14623 00.0000E2A2 B2790000EC64         .notl   cmp     temp2,d1
14624 00.0000E2A8 66009FC6                     bne     redimerr
14625 00.0000E2AC 41F900002B38                 lea     varoff,a0
14626 00.0000E2B2 32390000EC0C                 move    procmode,d1
14627 00.0000E2B8 67000008                     beq     .gskip
14628 00.0000E2BC 41F900002B3A                 lea     locvaroff,a0
14629 00.0000E2C2 30B90000E922         .gskip  move    extraword,(a0)
14630 00.0000E2C8 6000000A                     bra     .care
14631 00.0000E2CC 37790000EC640008     .nocare move    temp2,8(a3)     ;set # dim's
14632 00.0000E2D4 41F9000028E6         .care   lea     doarr,a0
14633 00.0000E2DA 316B00040002                 move    4(a3),2(a0)
14634 00.0000E2E0 3179000028E40006             move    putarr+2,6(a0)
14635 00.0000E2E8 2218                         move.l  (a0)+,d1
14636 00.0000E2EA 6100B218                     bsr     pokel
14637 00.0000E2EE 2210                         move.l  (a0),d1
14638 00.0000E2F0 6100B212                     bsr     pokel
14639 00.0000E2F4 323CC400                     move    #newarr,d1
14640 00.0000E2F8 34390000EC0C                 move    procmode,d2
14641 00.0000E2FE 67000004                     beq     .isg
14642 00.0000E302 5241                         addq    #1,d1
14643 00.0000E304 343AFDE4             .isg    move    listadd(pc),d2
14644 00.0000E308 67000018                     beq     .isrg
14645 00.0000E30C 3F01                         move    d1,-(a7)
14646 00.0000E30E 323A0016                     move    setles(pc),d1
14647 00.0000E312 6100B1F8                     bsr     pokewd  ;move #x,d4
14648 00.0000E316 323AFDD4                     move    listsize(pc),d1
14649 00.0000E31A 6100B1F0                     bsr     pokewd
14650 00.0000E31E 321F                         move    (a7)+,d1
14651 00.0000E320 5641                         addq    #3,d1   ;for list Tokejsr
14652 00.0000E322 6000D784             .isrg   bra     tokejsr
14653 00.0000E326                      
14654 00.0000E326 383C0000             setles  move    #0,d4
14655 00.0000E32A                      
14656 00.0000E32A                      ;-----------data-----------------------;
14657 00.0000E32A                      
14658 00.0000E32A                      mydata
14659 00.0000E32A                      
14660 00.0000E32A 00000000             vbr     dc.l    0
14661 00.0000E32E                      
14662   =00000003                      numclibs        equ     3
14663 00.0000E32E                              
14664 00.0000E32E 0000                 cfetchmode      dc      0       ;1=fetching a constant
14665 00.0000E330                                              ;intercept uselib!
14666 00.0000E330                      
14667 00.0000E330 FDA7FCDFFD43         constlibs       dc      64935,64735,64835
14668 00.0000E336                              
14669 00.0000E336                              ;below is a PC for the constant evaluation routine
14670 00.0000E336                              ;
14671 00.0000E336 00000000             constpcat       dc.l    0
14672 00.0000E33A 00000000             constlibat      dc.l    0
14673 00.0000E33E 00000400             constmaxpc      dc.l    1024
14674 00.0000E342                              ;
14675 00.0000E342 00000000             stackfuck       dc.l    0
14676 00.0000E346 0000EC36             lastrescon      dc.l    firstlabel
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 311
blitz2.s


14677 00.0000E34A 0000EC2E             lastresmac      dc.l    firstmacro
14678 00.0000E34E 0000E7B8             lastrestype     dc.l    firsttype
14679 00.0000E352 0000                 rescnt  dc      0       ;# resident
14680 00.0000E354 0000                 reschg  dc      0       ;flag for if res's have changed
14681 00.0000E356 00011364             resat   dc.l    resbuff
14682 00.0000E35A 0000                 linedone        dc      0
14683 00.0000E35C 00000000             dirpcat dc.l    0
14684 00.0000E360 0000                 diropt  dc      0
14685 00.0000E362 00000000             dira4   dc.l    0
14686 00.0000E366 00000000             dira5   dc.l    0
14687 00.0000E36A 00000000             dira6   dc.l    0
14688 00.0000E36E 00000000             dirstack        dc.l    0
14689 00.0000E372 00000000             comdata dc.l    0
14690 00.0000E376                      
14691 00.0000E376                              ;routines for type conversion
14692 00.0000E376                      
14693 00.0000E376 00000000000095C80000 convtable       dc.l    0,bytetoword,bytetolong,bytetoquick,bytetofloat,bytetolong,noconerr
14694 00.0000E392 00009636000000000000         dc.l    wordtobyte,0,wordtolong,wordtoquick,wordtofloat,wordtolong,noconerr
14695 00.0000E3AE 000096A6000096AE0000         dc.l    longtobyte,longtoword,0,longtoquick,longtofloat,0,noconerr
14696 00.0000E3CA 000096C8000096EC0000         dc.l    quicktobyte,quicktoword,quicktolong,0,quicktofloat,quicktolong,noconerr
14697 00.0000E3E6 0000971E000097300000         dc.l    floattobyte,floattoword,floattolong,floattoquick,0,floattolong,noconerr
14698 00.0000E402 000096A6000096AE0000         dc.l    longtobyte,longtoword,0,longtoquick,longtofloat,0,noconerr
14699 00.0000E41E 00008A6800008A680000         dc.l    noconerr,noconerr,stringtolong,noconerr,noconerr,stringtolong,0
14700 00.0000E43A                      
14701 00.0000E43A                              ;dc     operator ascii
14702 00.0000E43A                              ;dc.l   ..b,.w,.l,.q,.f,.s,.a
14703 00.0000E43A                      
14704 00.0000E43A 002B                 operators       dc      '+'
14705 00.0000E43C 0000A0900000A09A0000         dc.l    doplusb,doplusw,doplusl,doplusl
14706 00.0000E44C 0000A0C0000000000000         dc.l    doplusf,0,addstrings
14707 00.0000E458 0BB8                         dc      3000
14708 00.0000E45A                              ;
14709 00.0000E45A 002D                         dc      '-'
14710 00.0000E45C 0000A1160000A11E0000         dc.l    dominusb,dominusw,dominusl,dominusl
14711 00.0000E46C 0000A12E000000000000         dc.l    dominusf,0,0
14712 00.0000E478 0BB8                         dc      3000
14713 00.0000E47A                              ;
14714 00.0000E47A 002A                         dc      '*'
14715 00.0000E47C 0000A1360000A1400000         dc.l    dotimesb,dotimesw,dotimesl,dotimesq
14716 00.0000E48C 0000A176000000000000         dc.l    dotimesf,0,0
14717 00.0000E498 0FA0                         dc      4000
14718 00.0000E49A                              ;
14719 00.0000E49A 002F                         dc      '/'
14720 00.0000E49C 0000A1E60000A1FA0000         dc.l    dodivb,dodivw,dodivl,dodivq
14721 00.0000E4AC 0000A220000000000000         dc.l    dodivf,0,0
14722 00.0000E4B8 0FA0                         dc      4000
14723 00.0000E4BA                              ;
14724 00.0000E4BA 0026                         dc      '&'     ;AND
14725 00.0000E4BC 0000A2280000A2300000         dc.l    doandb,doandw,doandl,doandl
14726 00.0000E4CC 00000000000000000000         dc.l    0,0,0
14727 00.0000E4D8 1388                         dc      5000
14728 00.0000E4DA                              ;
14729 00.0000E4DA 007C                         dc      '|'     ;OR
14730 00.0000E4DC 0000A2400000A2480000         dc.l    doorb,doorw,doorl,doorl
14731 00.0000E4EC 00000000000000000000         dc.l    0,0,0
14732 00.0000E4F8 1388                         dc      5000
14733 00.0000E4FA                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 312
blitz2.s


14734 00.0000E4FA 8042                         dc      (opand-opabcd)/$1c+$8000+fnum   ;AND
14735 00.0000E4FC 0000A2280000A2300000         dc.l    doandb,doandw,doandl,doandl
14736 00.0000E50C 00000000000000000000         dc.l    0,0,0
14737 00.0000E518 03E8                         dc      1000
14738 00.0000E51A                              ;
14739 00.0000E51A 808A                         dc      (opor-opabcd)/$1c+$8000+fnum    ;OR
14740 00.0000E51C 0000A2400000A2480000         dc.l    doorb,doorw,doorl,doorl
14741 00.0000E52C 00000000000000000000         dc.l    0,0,0
14742 00.0000E538 03E8                         dc      1000
14743 00.0000E53A                              ;
14744 00.0000E53A 8073                         dc      (opeor-opabcd)/$1c+$8000+fnum   ;OR
14745 00.0000E53C 0000A2580000A2700000         dc.l    doeorb,doeorw,doeorl,doeorl
14746 00.0000E54C 00000000000000000000         dc.l    0,0,0
14747 00.0000E558 03E8                         dc      1000
14748 00.0000E55A                              ;
14749 00.0000E55A 807C                         dc      (oplsl-opabcd)/$1c+$8000+fnum   ;LSL
14750 00.0000E55C 0000A2800000A2800000         dc.l    dolslb,dolslw,dolsll,dolsll
14751 00.0000E56C 00000000000000000000         dc.l    0,0,0
14752 00.0000E578 1770                         dc      6000
14753 00.0000E57A                              ;
14754 00.0000E57A 8044                         dc      (opasl-opabcd)/$1c+$8000+fnum   ;ASL
14755 00.0000E57C 0000A2800000A2800000         dc.l    dolslb,dolslw,dolsll,dolsll
14756 00.0000E58C 00000000000000000000         dc.l    0,0,0
14757 00.0000E598 1770                         dc      6000
14758 00.0000E59A                              ;
14759 00.0000E59A 807D                         dc      (oplsr-opabcd)/$1c+$8000+fnum   ;LSR
14760 00.0000E59C 0000A2880000A2880000         dc.l    dolsrb,dolsrw,dolsrl,dolsrl
14761 00.0000E5AC 00000000000000000000         dc.l    0,0,0
14762 00.0000E5B8 1770                         dc      6000
14763 00.0000E5BA                              ;
14764 00.0000E5BA 8045                         dc      (opasr-opabcd)/$1c+$8000+fnum   ;ASR
14765 00.0000E5BC 0000A2900000A2900000         dc.l    doasrb,doasrw,doasrl,doasrl
14766 00.0000E5CC 00000000000000000000         dc.l    0,0,0
14767 00.0000E5D8 1770                         dc      6000
14768 00.0000E5DA                              ;
14769 00.0000E5DA 80B9                         dc      $8006+tnum                      ;Mod
14770 00.0000E5DC 0000A1B20000A1BA0000         dc.l    domodb,domodw,domodl,domodq
14771 00.0000E5EC 0000A1D8000000000000         dc.l    domodf,0,0
14772 00.0000E5F8 1388                         dc      5000
14773 00.0000E5FA                              ;
14774 00.0000E5FA 005E                         dc      "^"
14775 00.0000E5FC 0000A17E0000A17E0000         dc.l    dopow,dopow,dopow,dopow
14776 00.0000E60C 0000A17E000000000000         dc.l    dopow,0,0
14777 00.0000E618 1B58                         dc      7000
14778 00.0000E61A                              ;
14779 00.0000E61A 003D                 opeq    dc      '='
14780 00.0000E61C 00009EA600009ED60000         dc.l    doeqb,doeqw,doeql,doeql
14781 00.0000E62C 00009F8400009F060000         dc.l    doeqf,doeql,doeqs
14782 00.0000E638 07D0                         dc      2000
14783 00.0000E63A                              ;
14784 00.0000E63A 3C3E                 opne    dc      '<>'
14785 00.0000E63C 00009EAE00009EDE0000         dc.l    doneb,donew,donel,donel
14786 00.0000E64C 00009F9200009F0E0000         dc.l    donef,donel,dones
14787 00.0000E658 07D0                         dc      2000
14788 00.0000E65A                              ;
14789 00.0000E65A 003C                 oplt    dc      '<'
14790 00.0000E65C 00009EB600009EE60000         dc.l    doltb,doltw,doltl,doltl
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 313
blitz2.s


14791 00.0000E66C 00009FA000009F160000         dc.l    doltf,doltl,dolts
14792 00.0000E678 07D0                         dc      2000
14793 00.0000E67A                              ;
14794 00.0000E67A 3C3D                 ople    dc      '<='
14795 00.0000E67C 00009EBE00009EEE0000         dc.l    doleb,dolew,dolel,dolel
14796 00.0000E68C 00009FAE00009F1E0000         dc.l    dolef,dolel,doles
14797 00.0000E698 07D0                         dc      2000
14798 00.0000E69A                              ;
14799 00.0000E69A 003E                 opgt    dc      '>'
14800 00.0000E69C 00009EC600009EF60000         dc.l    dogtb,dogtw,dogtl,dogtl
14801 00.0000E6AC 00009FBC00009F260000         dc.l    dogtf,dogtl,dogts
14802 00.0000E6B8 07D0                         dc      2000
14803 00.0000E6BA                              ;
14804 00.0000E6BA 3E3D                 opge    dc      '>='
14805 00.0000E6BC 00009ECE00009EFE0000         dc.l    dogeb,dogew,dogel,dogel
14806 00.0000E6CC 00009FCA00009F2E0000         dc.l    dogef,dogel,doges
14807 00.0000E6D8 07D0                         dc      2000
14808 00.0000E6DA                              ;
14809 00.0000E6DA 80CD                         dc      $8000+26+tnum
14810 00.0000E6DC 0000A2D80000A2D80000         dc.l    bittst,bittst,bittst,bittst
14811 00.0000E6EC 00000000000000000000         dc.l    0,0,0
14812 00.0000E6F8 1F40                         dc      8000
14813 00.0000E6FA                              ;
14814 00.0000E6FA 80CE                         dc      $8000+27+tnum
14815 00.0000E6FC 0000A3000000A3000000         dc.l    bitset,bitset,bitset,bitset
14816 00.0000E70C 00000000000000000000         dc.l    0,0,0
14817 00.0000E718 1F40                         dc      8000
14818 00.0000E71A                              ;
14819 00.0000E71A 80CF                         dc      $8000+28+tnum
14820 00.0000E71C 0000A30C0000A30C0000         dc.l    bitclr,bitclr,bitclr,bitclr
14821 00.0000E72C 00000000000000000000         dc.l    0,0,0
14822 00.0000E738 1F40                         dc      8000
14823 00.0000E73A                              ;
14824 00.0000E73A 80D0                         dc      $8000+29+tnum
14825 00.0000E73C 0000A3140000A3140000         dc.l    bitchg,bitchg,bitchg,bitchg
14826 00.0000E74C 00000000000000000000         dc.l    0,0,0
14827 00.0000E758 1F40                         dc      8000
14828 00.0000E75A                              ;
14829 00.0000E75A 0000                         dc      0
14830 00.0000E75C                      
14831 00.0000E75C 0000D650             modetable       dc.l    typemode
14832 00.0000E760                      
14833 00.0000E760 0000E764             alltypes        dc.l    bytetype
14834 00.0000E764                      
14835 00.0000E764 0000E77200000001     bytetype        dc.l    wordtype,1
14836 00.0000E76C 0001                         dc      1
14837 00.0000E76E 0D620000                     dc.b    13,'b',0,0
14838 00.0000E772 0000E78000000002     wordtype        dc.l    longtype,2
14839 00.0000E77A 0002                         dc      2
14840 00.0000E77C 0D770000                     dc.b    13,'w',0,0
14841 00.0000E780 0000E78E00000003     longtype        dc.l    quicktype,3
14842 00.0000E788 0004                         dc      4
14843 00.0000E78A 0D6C0000                     dc.b    13,'l',0,0
14844 00.0000E78E 0000E79C00000004     quicktype       dc.l    floattype,4
14845 00.0000E796 0004                         dc      4
14846 00.0000E798 0D710000                     dc.b    13,'q',0,0
14847 00.0000E79C 0000E7AA00000005     floattype       dc.l    addresstype,5
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 314
blitz2.s


14848 00.0000E7A4 0004                         dc      4
14849 00.0000E7A6 0D660000                     dc.b    13,'f',0,0
14850 00.0000E7AA 0000E7B800000006     addresstype     dc.l    stringtype,6
14851 00.0000E7B2 0004                         dc      4
14852 00.0000E7B4 0D610000                     dc.b    13,'a',0,0
14853 00.0000E7B8                      firsttype       ;
14854 00.0000E7B8 0000000000000007     stringtype      dc.l    0,7
14855 00.0000E7C0 0004                         dc      4
14856 00.0000E7C2 0D730000                     dc.b    13,'s',0,0
14857 00.0000E7C6                      
14858 00.0000E7C6 0000000000000000     dummytype       dc.l    0,0
14859 00.0000E7CE 0000                         dc      0
14860 00.0000E7D0 01000000                     dc.b    1,0,0,0
14861 00.0000E7D4                      
14862 00.0000E7D4                      incdir  dcb.b   96,0
14863 00.0000E834                              even
14864 00.0000E834                      
14865 00.0000E834 0000                 dirmode dc      0       ;direct mode flag
14866 00.0000E836 00000000             int     dc.l    0       ;intuition!
14867 00.0000E83A 0000                 maxat   dc      0       ;max at
14868 00.0000E83C 00000000             maxsat  dc.l    0       ;data1 info pos
14869 00.0000E840 0000                 nummaxs dc      0       ;number of maximums
14870 00.0000E842                                              ;in libs
14871 00.0000E842 0000                 maxsused        dc      0       ;maximums used in prog
14872 00.0000E844                              ;
14873 00.0000E844                              ;below are defaults to be saved with source
14874 00.0000E844                              ;
14875 00.0000E844 0000                 dark    dc      0       ;dark compile?
14876 00.0000E846 0000                 qlab    dc      0       ;quick lab allocate
14877 00.0000E848 0000E78E             defaulttype     dc.l    quicktype
14878 00.0000E84C                              ;
14879 00.0000E84C                              ;end of defaults
14880 00.0000E84C                              ;
14881 00.0000E84C                      
14882 00.0000E84C FFFF                 anyerrs dc      -1      ;Any Errors in compile ?
14883 00.0000E84E 0000                 makeexec        dc      0       ;make an executable file!
14884 00.0000E850 00000000             noinits dc.l    0       ;flag for if we have any init routines!
14885 00.0000E854                                              ;6.l=no!
14886 00.0000E854 00000000             letstart        dc.l    0
14887 00.0000E858 0000                 nomemleft       dc      0
14888 00.0000E85A                      lastbiglab      ds.b    128
14889 00.0000E8DA                              ;
14890 00.0000E8DA 00000000             locdatast       dc.l    0
14891 00.0000E8DE 00000000             firstpend       dc.l    0
14892 00.0000E8E2                              ;
14893 00.0000E8E2                              ;one pass compiler stuff!
14894 00.0000E8E2                              ;
14895 00.0000E8E2 00000000             data2at dc.l    0
14896 00.0000E8E6 00000000             data2   dc.l    0
14897 00.0000E8EA 00000000             data1at dc.l    0
14898 00.0000E8EE 00000000             data1   dc.l    0       ;pc for initialized data!
14899 00.0000E8F2 00000000             pcat    dc.l    0
14900 00.0000E8F6 00000000             pc      dc.l    0
14901 00.0000E8FA 00000000             libat   dc.l    0
14902 00.0000E8FE 00000000             lib     dc.l    0
14903 00.0000E902 00000000             allat   dc.l    0       ;highest allocmemd location for code
14904 00.0000E906                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 315
blitz2.s


14905 00.0000E906 00000000000000000000 dummyasm        dc      0,0,0,0,0
14906 00.0000E910 00000000                     dc.l    0
14907 00.0000E914 0000                         dc      0
14908 00.0000E916                              ;
14909 00.0000E916                              ;data for assembler
14910 00.0000E916                              ;
14911 00.0000E916 00000000             buff1   dc.l    0       ;buffer for text get
14912 00.0000E91A 00000000             buff2   dc.l    0       ;ditto for dest
14913 00.0000E91E 0000                 constmode       dc      0       ;0 for norm, <>0 for assembler
14914 00.0000E920 0000                 asmtype dc      0       ;0=contains no prog reference
14915 00.0000E922 0000                 extraword       dc      0       ;the extension word for assembler
14916 00.0000E924 0000                 extraword2      dc      0       ;ditto
14917 00.0000E926 0000                 asmsize dc      0
14918 00.0000E928 00000000             asmbuff dc.l    0
14919 00.0000E92C 0000                 asmlen  dc      0       ;first (src) text len
14920 00.0000E92E 0000                 asmlen2 dc      0       ;second (dest)
14921 00.0000E930 00000000             firstasm        dc.l    0       ;linked list of expressions to resolve
14922 00.0000E934                                              ;for one pass assembly.
14923 00.0000E934                              ;
14924 00.0000E934 0000                 macnum  dc      0       ;
14925 00.0000E936 00000000             nextinc0        dc.l    0       ;address of next 0 in include file
14926 00.0000E93A 00000000             titleat dc.l    0       ;5 longs for compile streaks
14927 00.0000E93E                      titleadd        ds      5       ;5 adds for compile streaks
14928 00.0000E948 0000                 connest dc      0       ;conditional nest level
14929 00.0000E94A 00000000             firstconst      dc.l    0       ;first constant (#a)
14930 00.0000E94E 0000                 numarg  dc      0       ;number of macro arguements
14931 00.0000E950 00000000             myoline dc.l    0       ;macro done yet?
14932 00.0000E954 00000000             myline  dc.l    0       ;pointer to some memory to create
14933 00.0000E958                                              ;line in.....
14934 00.0000E958 00000000             mylinef dc.l    0
14935 00.0000E95C                      concomstack     ds      32      ;32 deep conditional compilation
14936 00.0000E99C 0000E95C             concomsp        dc.l    concomstack     ;stack pointer
14937 00.0000E9A0 0000                 oldqflag        dc      0
14938 00.0000E9A2                      ;datalib        dc.l    0       ;pointer to datalib.obj (64535)
14939 00.0000E9A2 00000000             lastconloc      dc.l    0
14940 00.0000E9A6 0000                 lastconop       dc      0
14941 00.0000E9A8 00000000             firstfor        dc.l    0       ;first for
14942 00.0000E9AC 0000                 pushflag        dc      0
14943 00.0000E9AE 0000                 sbgot   dc      0       ;flag for string got 2
14944 00.0000E9B0 0000                 usertype        dc      0
14945 00.0000E9B2 0000                 userp   dc      0
14946 00.0000E9B4                      ;libspos        dc      0       ;pos in libs dir
14947 00.0000E9B4                      ;numlibs        dc      0       ;number of libraries in libslist
14948 00.0000E9B4 00000000             libslist        dc.l    0
14949 00.0000E9B8 0000                 stackuse        dc      0       ;stack used when gathering lib parameters
14950 00.0000E9BA 0000                 numreps dc      0       ;number of repeats in a repeatable
14951 00.0000E9BC                                              ;parameter list.....
14952 00.0000E9BC 00000000             locloc  dc.l    0
14953 00.0000E9C0 0000                 locchar dc      0
14954 00.0000E9C2                      stbuff  ds.l    8       ;six string varoffs
14955 00.0000E9E2 0000                 commode dc      0       ;in comma mode...
14956 00.0000E9E4 00000000             lastoffset      dc.l    0       ;last offset in calcvar!
14957 00.0000E9E8 FFFF                 linenumat       dc      -1      ;line being processed
14958 00.0000E9EA FFFF                 menuret dc      -1      ;menu return code
14959 00.0000E9EC 0000                 optresoff       dc      0       ;opt reset offset
14960 00.0000E9EE                      varcode ds.b    vcodelen        ;code used to generate
14961 00.0000EAEE                                              ;last var access
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 316
blitz2.s


14962 00.0000EAEE                      varcode2        ds.b    vcodelen        ;above for let.....
14963 00.0000EBEE 0000                 varcodelen      dc      0       ;and length
14964 00.0000EBF0 0000                 varcodelen2     dc      0       ;
14965 00.0000EBF2 0000                 oldvcodelen     dc      0       ;old varcodelen
14966 00.0000EBF4                      ;stringslib1    dc.l    0       ;address of stringslib1
14967 00.0000EBF4 00000000             procjmppc       dc.l    0       ;pc of jmp of proc
14968 00.0000EBF8 00000000             memlib  dc.l    0       ;address of memory library
14969 00.0000EBFC 0000                 memlibstat      dc      0       ;status of memory library during
14970 00.0000EBFE                                              ;procs
14971 00.0000EBFE 0000                 tempvmode       dc      0 
14972 00.0000EC00 0000                 tempvmode2      dc      0
14973 00.0000EC02 0000                 varmode dc      0       ;0=a5 is pointer to globals
14974 00.0000EC04                                              ;else pointer to locals
14975 00.0000EC04 00000000             thisproc        dc.l    0       ;this procedure being 'done'
14976 00.0000EC08 00000000             firstproc       dc.l    0
14977 00.0000EC0C 0000                 procmode        dc      0       ;1 if statement, 2 if function
14978 00.0000EC0E                                              ;0 if norm!
14979 00.0000EC0E 0000                 comflag dc      0       ;0 if no compile
14980 00.0000EC10 00000000             passstack       dc.l    0
14981 00.0000EC14 00000000             zero    dc.l    0       ;ZERO!
14982 00.0000EC18 0000                 numincs dc      0       ;number of included files,
14983 00.0000EC1A                                              ;0=main RAM code
14984 00.0000EC1A 00000000             firstxinc       dc.l    0       ;first exclusive include.
14985 00.0000EC1E 00000000             firstinc        dc.l    0       ;first include
14986 00.0000EC22 FFFF                 lasta6  dc      -1
14987 00.0000EC24 0000                 quoteflag       dc      0
14988 00.0000EC26 00000000             macrobuff       dc.l    0       ;pointer to macro collection buffer
14989 00.0000EC2A 00000000             macrobufff      dc.l    0       ;end of above
14990 00.0000EC2E 00000000             firstmacro      dc.l    0       ;linked list of macro's
14991 00.0000EC32 00000000             endop   dc.l    0       ;end of program pc - before finishups!
14992 00.0000EC36 00000000             firstlabel      dc.l    0       ;label list
14993 00.0000EC3A 00000000             lasttoken       dc.l    0
14994 00.0000EC3E 0000                 numstatic       dc      0       ;number of static structs
14995 00.0000EC40 00000000             staticdata      dc.l    0       ;data1 val for statics
14996 00.0000EC44 00000000             firstlib        dc.l    0       first lib struct
14997 00.0000EC48 0000                 sbasegot        dc      0       ;string base got? 
14998 00.0000EC4A 00000000             litdata1        dc.l    0
14999 00.0000EC4E                              ;
15000 00.0000EC4E                              ;Optimization stuff
15001 00.0000EC4E                              ;
15002 00.0000EC4E 00000000             objlen  dc.l    0
15003 00.0000EC52 00000000             numoffs dc.l    0
15004 00.0000EC56 00000000             firstoff        dc.l    0       ;pointer to linked list 
15005 00.0000EC5A                                              ;of amigados type reloc offsets
15006 00.0000EC5A 0000                 flagmask        dc      0       ;mask for flag of variable when
15007 00.0000EC5C                                              ;searching for it!
15008 00.0000EC5C 0000                 added   dc      0       ;flag for seeing if variable was added!
15009 00.0000EC5E 0000                 nonew   dc      0       ;1 to inhibit new variable creation
15010 00.0000EC60 00000000             temp1   dc.l    0
15011 00.0000EC64 00000000             temp2   dc.l    0
15012 00.0000EC68                              cnop    0,4
15013 00.0000EC68                      namebuff        ds.b    128
15014 00.0000ECE8                      namebuff2       ds.b    128
15015 00.0000ED68                              ds.b    8       ;for fileinfoblock
15016 00.0000ED70                      optstuff        ds.b    64      ;temp opt make buffer
15017 00.0000EDB0                      
15018 00.0000EDB0 41F90000F3DC         zerotypes       lea     typereqla30,a0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 317
blitz2.s


15019 00.0000EDB6 700B                         moveq   #11,d0
15020 00.0000EDB8 2248                 .loop0  move.l  a0,a1
15021 00.0000EDBA 721A                         moveq   #26,d1
15022 00.0000EDBC 12FC0020             .loopm1 move.b  #32,(a1)+
15023 00.0000EDC0 51C9FFFA                     dbf     d1,.loopm1
15024 00.0000EDC4 41E80030                     lea     typereqla31-typereqla30(a0),a0
15025 00.0000EDC8 51C8FFEE                     dbf     d0,.loop0
15026 00.0000EDCC 4E75                         rts
15027 00.0000EDCE                      
15028 00.0000EDCE 0000                 typeat  dc      0
15029 00.0000EDD0 0000                 maxtypes        dc      0
15030 00.0000EDD2                      
15031 00.0000EDD2 72FF                 makebody        moveq   #-1,d1  ;full bodied
15032 00.0000EDD4 30390000EDD0                 move    maxtypes,d0
15033 00.0000EDDA B07C000C                     cmp     #12,d0
15034 00.0000EDDE 63000008                     bls     .skip
15035 00.0000EDE2                              ;
15036 00.0000EDE2 720C                         moveq   #12,d1
15037 00.0000EDE4 4841                         swap    d1
15038 00.0000EDE6 82C0                         divu    d0,d1
15039 00.0000EDE8 33C10000F650         .skip   move    d1,typereqvp1+8
15040 00.0000EDEE 42790000F64C                 clr     typereqvp1+4
15041 00.0000EDF4 4E75                         rts
15042 00.0000EDF6                      
15043 00.0000EDF6 42790000EDCE         countlist       clr     typeat
15044 00.0000EDFC 224A                         move.l  a2,a1
15045 00.0000EDFE 7000                         moveq   #0,d0
15046 00.0000EE00 B2FC0000             .loop   cmp     #0,a1
15047 00.0000EE04 6700000A                     beq     .done
15048 00.0000EE08 5240                         addq    #1,d0
15049 00.0000EE0A 2251                         move.l  (a1),a1
15050 00.0000EE0C 6000FFF2                     bra     .loop
15051 00.0000EE10 33C00000EDD0         .done   move    d0,maxtypes
15052 00.0000EE16 4E75                         rts
15053 00.0000EE18                      
15054 00.0000EE18 00000000             f1      dc.l    0
15055 00.0000EE1C 0000                 f2      dc      0
15056 00.0000EE1E 0000                 f3      dc      0
15057 00.0000EE20                      fuckoff ds.b    8
15058 00.0000EE28                      
15059 00.0000EE28 24790000EE18         showlist3       move.l  f1,a2
15060 00.0000EE2E 34390000EE1C                 move    f2,d2
15061 00.0000EE34 36390000EE1E                 move    f3,d3
15062 00.0000EE3A 60000014                     bra     showlist2
15063 00.0000EE3E                              ;
15064 00.0000EE3E 23CA0000EE18         showlist        move.l  a2,f1
15065 00.0000EE44 33C20000EE1C                 move    d2,f2
15066 00.0000EE4A 33C30000EE1E                 move    d3,f3
15067 00.0000EE50                      showlist2       ;a2=first item, d2=offset for .offset (0 for none)
15068 00.0000EE50                              ;
15069 00.0000EE50                              ;d3=offset for chars
15070 00.0000EE50                              ;
15071 00.0000EE50                              ;typeat=pos, maxtypes=max
15072 00.0000EE50                              ;
15073 00.0000EE50 6100FF5E                     bsr     zerotypes
15074 00.0000EE54 30390000EDCE                 move    typeat,d0
15075 00.0000EE5A B0790000EDD0                 cmp     maxtypes,d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 318
blitz2.s


15076 00.0000EE60 640000D4                     bcc     .rdone
15077 00.0000EE64 5340                         subq    #1,d0
15078 00.0000EE66 6B000008                     bmi     .ok
15079 00.0000EE6A 2452                 .loop   move.l  (a2),a2
15080 00.0000EE6C 51C8FFFC                     dbf     d0,.loop
15081 00.0000EE70                              ;
15082 00.0000EE70 30390000EDCE         .ok     move    typeat,d0
15083 00.0000EE76 47F90000F3DC                 lea     typereqla30,a3
15084 00.0000EE7C 720B                         moveq   #11,d1
15085 00.0000EE7E                              ;
15086 00.0000EE7E 43F23000             .loop2  lea     0(a2,d3),a1
15087 00.0000EE82 284B                         move.l  a3,a4   ;start
15088 00.0000EE84 4BEC001B                     lea     27(a4),a5       ;end
15089 00.0000EE88                              ;
15090 00.0000EE88 4A42                         tst     d2
15091 00.0000EE8A 67000020                     beq     .ok2
15092 00.0000EE8E 082A00000007                 btst    #0,7(a2)
15093 00.0000EE94 67000016                     beq     .ok2
15094 00.0000EE98 183C002A                     move.b  #'*',d4
15095 00.0000EE9C 082A00020007                 btst    #2,7(a2)
15096 00.0000EEA2 67000006                     beq     .hiy
15097 00.0000EEA6 183C0040                     move.b  #'@',d4
15098 00.0000EEAA 18C4                 .hiy    move.b  d4,(a4)+
15099 00.0000EEAC                              ;
15100 00.0000EEAC 18D9                 .ok2    move.b  (a1)+,(a4)+
15101 00.0000EEAE 6600006A                     bne     .hello
15102 00.0000EEB2 193C0020                     move.b  #32,-(a4)
15103 00.0000EEB6 4A42                         tst     d2
15104 00.0000EEB8 67000066                     beq     .next   ;no offset
15105 00.0000EEBC 18FC002E                     move.b  #'.',(a4)+
15106 00.0000EEC0 226A000A                     move.l  10(a2),a1
15107 00.0000EEC4 43E9000B                     lea     11(a1),a1       ;type stuff
15108 00.0000EEC8 B9CD                 .ok3    cmp.l   a5,a4   
15109 00.0000EECA 64000054                     bcc     .next
15110 00.0000EECE 18D9                         move.b  (a1)+,(a4)+
15111 00.0000EED0 6600FFF6                     bne     .ok3
15112 00.0000EED4 193C0020                     move.b  #32,-(a4)
15113 00.0000EED8 082A00010007                 btst    #1,7(a2)
15114 00.0000EEDE 67000040                     beq     .next
15115 00.0000EEE2 18FC005B                     move.b  #'[',(a4)+
15116 00.0000EEE6 48E77000                     movem.l d1-d3,-(a7)
15117 00.0000EEEA 7400                         moveq   #0,d2
15118 00.0000EEEC 342A0008                     move    8(a2),d2
15119 00.0000EEF0 41F90000EE20                 lea     fuckoff,a0
15120 00.0000EEF6 4EB9000053DC                 jsr     makelong
15121 00.0000EEFC 4CDF000E                     movem.l (a7)+,d1-d3
15122 00.0000EF00 41F90000EE20                 lea     fuckoff,a0
15123 00.0000EF06 B9CD                 .penis  cmp.l   a5,a4
15124 00.0000EF08 64000016                     bcc     .next
15125 00.0000EF0C 18D8                         move.b  (a0)+,(a4)+
15126 00.0000EF0E 6600FFF6                     bne     .penis
15127 00.0000EF12 193C005D                     move.b  #']',-(a4)
15128 00.0000EF16 60000008                     bra     .next
15129 00.0000EF1A                              ;
15130 00.0000EF1A B9CD                 .hello  cmp.l   a5,a4
15131 00.0000EF1C 6500FF8E                     bcs     .ok2
15132 00.0000EF20 5240                 .next   addq    #1,d0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 319
blitz2.s


15133 00.0000EF22 B0790000EDD0                 cmp     maxtypes,d0
15134 00.0000EF28 6400000C                     bcc     .rdone
15135 00.0000EF2C 47EB0030                     lea     typereqla31-typereqla30(a3),a3
15136 00.0000EF30 2452                         move.l  (a2),a2
15137 00.0000EF32 51C9FF4A                     dbf     d1,.loop2
15138 00.0000EF36 4E75                 .rdone  rts
15139 00.0000EF38                      
15140 00.0000EF38 34390000EDCE         typeshow        move    typeat,d2
15141 00.0000EF3E 30390000F64C                 move    typereqvp1+4,d0
15142 00.0000EF44 32390000EDD0                 move    maxtypes,d1
15143 00.0000EF4A 0441000B                     sub     #11,d1
15144 00.0000EF4E 6B00000C                     bmi     .skip
15145 00.0000EF52 C2C0                         mulu    d0,d1
15146 00.0000EF54 4841                         swap    d1
15147 00.0000EF56 33C10000EDCE                 move    d1,typeat
15148 00.0000EF5C B4790000EDCE         .skip   cmp     typeat,d2
15149 00.0000EF62 66000004                     bne     .showem
15150 00.0000EF66 4E75                         rts
15151 00.0000EF68 6100FEBE             .showem bsr     showlist3
15152 00.0000EF6C 41F90000F726         reflist lea     typereqga5,a0
15153 00.0000EF72 700C                         moveq   #12,d0
15154 00.0000EF74 22790000E372                 move.l  comdata,a1
15155 00.0000EF7A 2269001C                     move.l  28(a1),a1
15156 00.0000EF7E 4ED1                         jmp     (a1)
15157 00.0000EF80                      
15158 00.0000EF80 24790000E7B8         allofem move.l  firsttype,a2
15159 00.0000EF86 6100FE6E                     bsr     countlist
15160 00.0000EF8A 6100FE46                     bsr     makebody
15161 00.0000EF8E 7400                         moveq   #0,d2
15162 00.0000EF90 760B                         moveq   #11,d3
15163 00.0000EF92 6000FEAA                     bra     showlist
15164 00.0000EF96                      
15165 00.0000EF96                      menu6   ;
15166 00.0000EF96                              ;Flashy Type Information....
15167 00.0000EF96                              ;
15168 00.0000EF96 6100FFE8                     bsr     allofem
15169 00.0000EF9A                              ;
15170 00.0000EF9A 22790000E372                 move.l  comdata,a1
15171 00.0000EFA0 2251                         move.l  (a1),a1
15172 00.0000EFA2 41F90000F134                 lea     typereq,a0
15173 00.0000EFA8 4E91                         jsr     (a1)
15174 00.0000EFAA 41F90000F65E         .loop   lea     typereqga2,a0
15175 00.0000EFB0 45F90000F134                 lea     typereq,a2
15176 00.0000EFB6 22790000E372                 move.l  comdata,a1
15177 00.0000EFBC 22690044                     move.l  68(a1),a1
15178 00.0000EFC0 4E91                         jsr     (a1)
15179 00.0000EFC2 22790000E372                 move.l  comdata,a1
15180 00.0000EFC8 22690008                     move.l  8(a1),a1
15181 00.0000EFCC 4E91                         jsr     (a1)
15182 00.0000EFCE BE7CFFFF                     cmp     #-1,d7
15183 00.0000EFD2 6600FFD6                     bne     .loop
15184 00.0000EFD6 BC7C0001                     cmp     #1,d6
15185 00.0000EFDA 66000034                     bne     .notvprop
15186 00.0000EFDE                              ;
15187 00.0000EFDE 20790000E372         .vloop  move.l  comdata,a0
15188 00.0000EFE4 20680020                     move.l  32(a0),a0
15189 00.0000EFE8 4E90                         jsr     (a0)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 320
blitz2.s


15190 00.0000EFEA 4A87                         tst.l   d7
15191 00.0000EFEC 67000012                     beq     .vdo
15192 00.0000EFF0 BE7CFFFF                     cmp     #-1,d7
15193 00.0000EFF4 6600000A                     bne     .vdo
15194 00.0000EFF8 BC7C0001                     cmp     #1,d6
15195 00.0000EFFC 6700000A                     beq     .vdone
15196 00.0000F000 6100FF36             .vdo    bsr     typeshow
15197 00.0000F004 6000FFD8                     bra     .vloop
15198 00.0000F008 6100FF2E             .vdone  bsr     typeshow
15199 00.0000F00C 6000FF9C                     bra     .loop
15200 00.0000F010                              ;
15201 00.0000F010                      .notvprop       ;
15202 00.0000F010 BC7C0002                     cmp     #2,d6
15203 00.0000F014 6600004A                     bne     .notsg
15204 00.0000F018 43F90000F6AE                 lea     typereqla21,a1
15205 00.0000F01E 4A11                         tst.b   (a1)
15206 00.0000F020 6600000A                     bne     .some
15207 00.0000F024 6100FF5A                     bsr     allofem
15208 00.0000F028 600000AA                     bra     .reflist
15209 00.0000F02C                              ;
15210 00.0000F02C 207C0000EC68         .some   move.l  #namebuff,a0
15211 00.0000F032 74FF                         moveq   #-1,d2
15212 00.0000F034 5242                 .sgl    addq    #1,d2
15213 00.0000F036 10D9                         move.b  (a1)+,(a0)+
15214 00.0000F038 6600FFFA                     bne     .sgl
15215 00.0000F03C 45F90000E7B8                 lea     firsttype,a2
15216 00.0000F042 61009C7A                     bsr     findtype
15217 00.0000F046 67000078                     beq     .all
15218 00.0000F04A 20790000E372         .beep   move.l  comdata,a0
15219 00.0000F050 20680028                     move.l  40(a0),a0
15220 00.0000F054                              callint displaybeep
15220 00.0000F054+2C7AF7E0                     move.l  int(pc),a6
15220 00.0000F058+4EAEFFA0                     jsr     displaybeep(a6)
15220 00.0000F05C                              endm
15221 00.0000F05C 6000FF4C                     bra     .loop
15222 00.0000F060                      .notsg  ;
15223 00.0000F060 BC7C0003                     cmp     #3,d6
15224 00.0000F064 66000010                     bne     .nottgad
15225 00.0000F068 42390000F6AE                 clr.b   typereqla21
15226 00.0000F06E 6100FF10                     bsr     allofem
15227 00.0000F072 60000060                     bra     .reflist
15228 00.0000F076                      .nottgad        ;
15229 00.0000F076 BC7C0004                     cmp     #4,d6
15230 00.0000F07A 6700009E                     beq     .done
15231 00.0000F07E 5B46                         subq    #5,d6
15232 00.0000F080 6B00FF28                     bmi     .loop
15233 00.0000F084 BC7C000C                     cmp     #12,d6
15234 00.0000F088 6400FF20                     bcc     .loop
15235 00.0000F08C                              ;d6=0 to 7
15236 00.0000F08C DC790000EDCE                 add     typeat,d6
15237 00.0000F092 BC790000EDD0                 cmp     maxtypes,d6
15238 00.0000F098 6400FF10                     bcc     .loop
15239 00.0000F09C                              ;
15240 00.0000F09C                              ;d6 selected
15241 00.0000F09C                              ;
15242 00.0000F09C 30390000EE1C                 move    f2,d0
15243 00.0000F0A2 6600004C                     bne     .intype
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 321
blitz2.s


15244 00.0000F0A6                              ;goto type
15245 00.0000F0A6 24790000E7B8                 move.l  firsttype,a2
15246 00.0000F0AC 5346                         subq    #1,d6
15247 00.0000F0AE 6B000008                     bmi     .gotit
15248 00.0000F0B2 2452                 .hit    move.l  (a2),a2
15249 00.0000F0B4 51CEFFFC                     dbf     d6,.hit
15250 00.0000F0B8 43EA000B             .gotit  lea     11(a2),a1
15251 00.0000F0BC 6100005E                     bsr     typename
15252 00.0000F0C0                              ;
15253 00.0000F0C0 246A0004             .all    move.l  4(a2),a2
15254 00.0000F0C4 6100FD30                     bsr     countlist
15255 00.0000F0C8 6100FD08                     bsr     makebody
15256 00.0000F0CC 74FF                         moveq   #-1,d2
15257 00.0000F0CE 760F                         moveq   #15,d3
15258 00.0000F0D0 6100FD6C                     bsr     showlist
15259 00.0000F0D4 6100FE96             .reflist        bsr     reflist
15260 00.0000F0D8 41F90000F608                 lea     typereqga1,a0
15261 00.0000F0DE 7002                         moveq   #2,d0
15262 00.0000F0E0 22790000E372                 move.l  comdata,a1
15263 00.0000F0E6 2269001C                     move.l  28(a1),a1
15264 00.0000F0EA 4E91                         jsr     (a1)
15265 00.0000F0EC 6000FEBC                     bra     .loop
15266 00.0000F0F0                              ;
15267 00.0000F0F0 24790000EE18         .intype move.l  f1,a2
15268 00.0000F0F6 5346                         subq    #1,d6
15269 00.0000F0F8 6B000008                     bmi     .gotit2
15270 00.0000F0FC 2452                 .hit2   move.l  (a2),a2
15271 00.0000F0FE 51CEFFFC                     dbf     d6,.hit2
15272 00.0000F102 246A000A             .gotit2 move.l  10(a2),a2
15273 00.0000F106 0CAA000001000004             cmp.l   #256,4(a2)
15274 00.0000F10E 6500FF3A                     bcs     .beep
15275 00.0000F112 6000FFA4                     bra     .gotit
15276 00.0000F116                              ;
15277 00.0000F116 6000FE92                     bra     .loop
15278 00.0000F11A                              ;
15279 00.0000F11A 4E75                 .done   rts
15280 00.0000F11C                      
15281 00.0000F11C 41F90000F6AE         typename        lea     typereqla21,a0
15282 00.0000F122 10D9                 .loop   move.b  (a1)+,(a0)+
15283 00.0000F124 6700000C                     beq     .done
15284 00.0000F128 B1FC0000F6CD                 cmp.l   #typereqla21+31,a0
15285 00.0000F12E 6500FFF2                     bcs     .loop
15286 00.0000F132 4E75                 .done   rts
15287 00.0000F134                      
    0 00.0000F134                              include typereq
    1 00.0000F134 00000000             typereq dc.l    0
    2 00.0000F138 00940002011000AC0000         dc.w    148,2,272,172,0,0
    3 00.0000F144 0000F6080000F1A40000         dc.l    typereqga1,typereqbo1,typereqin1
    4 00.0000F150 0000                         dc.w    0
    5 00.0000F152 0000                         dc.b    0,0
    6 00.0000F154 00000000                     dc.l    0
    7 00.0000F158                              ds.b    32
    8 00.0000F178 0000000000000000             dc.l    0,0
    9 00.0000F180                              ds.b    36
   10 00.0000F1A4                      
   11 00.0000F1A4 00000000             typereqbo1      dc.w    0,0
   12 00.0000F1A8 02010103                     dc.b    2,1,1,3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 322
TYPEREQ


   13 00.0000F1AC 0000F1B40000F1C0             dc.l    typereqla1,typereqla2
   14 00.0000F1B4 00EF0018001000180010 typereqla1      dc.w    239,24,16,24,16,123
   15 00.0000F1C0 00000000             typereqla2      dc.w    0,0
   16 00.0000F1C4 01020103                     dc.b    1,2,1,3
   17 00.0000F1C8 0000F1D00000F1DC             dc.l    typereqla3,typereqbo2
   18 00.0000F1D0 00EF001900EF007B0011 typereqla3      dc.w    239,25,239,123,17,123
   19 00.0000F1DC 00000000             typereqbo2      dc.w    0,0
   20 00.0000F1E0 01020103                     dc.b    1,2,1,3
   21 00.0000F1E4 0000F1EC0000F1F8             dc.l    typereqla4,typereqla5
   22 00.0000F1EC 01070014000800140008 typereqla4      dc.w    263,20,8,20,8,127
   23 00.0000F1F8 00000000             typereqla5      dc.w    0,0
   24 00.0000F1FC 02010103                     dc.b    2,1,1,3
   25 00.0000F200 0000F2080000F214             dc.l    typereqla6,typereqbo3
   26 00.0000F208 010700150107007F0009 typereqla6      dc.w    263,21,263,127,9,127
   27 00.0000F214 00000000             typereqbo3      dc.w    0,0
   28 00.0000F218 01020103                     dc.b    1,2,1,3
   29 00.0000F21C 0000F2240000F230             dc.l    typereqla7,typereqla8
   30 00.0000F224 01070084000800840008 typereqla7      dc.w    263,132,8,132,8,151
   31 00.0000F230 00000000             typereqla8      dc.w    0,0
   32 00.0000F234 02010103                     dc.b    2,1,1,3
   33 00.0000F238 0000F2400000F24C             dc.l    typereqla9,typereqbo4
   34 00.0000F240 01070085010700970009 typereqla9      dc.w    263,133,263,151,9,151
   35 00.0000F24C 00000000             typereqbo4      dc.w    0,0
   36 00.0000F250 02010103                     dc.b    2,1,1,3
   37 00.0000F254 0000F25C0000F268             dc.l    typereqla10,typereqla11
   38 00.0000F25C 00FF0088004800880048 typereqla10     dc.w    255,136,72,136,72,147
   39 00.0000F268 00000000             typereqla11     dc.w    0,0
   40 00.0000F26C 01020103                     dc.b    1,2,1,3
   41 00.0000F270 0000F2780000F284             dc.l    typereqla12,typereqbo5
   42 00.0000F278 00FF008900FF00930049 typereqla12     dc.w    255,137,255,147,73,147
   43 00.0000F284 00000000             typereqbo5      dc.w    0,0
   44 00.0000F288 01020103                     dc.b    1,2,1,3
   45 00.0000F28C 0000F2940000F2A0             dc.l    typereqla13,typereqla14
   46 00.0000F294 010F0000000000000000 typereqla13     dc.w    271,0,0,0,0,171
   47 00.0000F2A0 00000000             typereqla14     dc.w    0,0
   48 00.0000F2A4 02010103                     dc.b    2,1,1,3
   49 00.0000F2A8 0000F2B00000F2BC             dc.l    typereqla15,typereqbo6
   50 00.0000F2B0 010F0001010F00AB0001 typereqla15     dc.w    271,1,271,171,1,171
   51 00.0000F2BC 00000000             typereqbo6      dc.w    0,0
   52 00.0000F2C0 02010103                     dc.b    2,1,1,3
   53 00.0000F2C4 0000F2CC0000F2D8             dc.l    typereqla18,typereqla19
   54 00.0000F2CC 0103001A00F4001A00F4 typereqla18     dc.w    259,26,244,26,244,121
   55 00.0000F2D8 00000000             typereqla19     dc.w    0,0
   56 00.0000F2DC 01020103                     dc.b    1,2,1,3
   57 00.0000F2E0 0000F2E800000000             dc.l    typereqla20,0
   58 00.0000F2E8 0103001B0103007900F5 typereqla20     dc.w    259,27,259,121,245,121
   59 00.0000F2F4 00000000             typereqbo7      dc.w    0,0
   60 00.0000F2F8 01020103                     dc.b    1,2,1,3
   61 00.0000F2FC 0000F3040000F310             dc.l    typereqla22,typereqla23
   62 00.0000F304 002F0000000000000000 typereqla22     dc.w    47,0,0,0,0,11
   63 00.0000F310 00000000             typereqla23     dc.w    0,0
   64 00.0000F314 02010103                     dc.b    2,1,1,3
   65 00.0000F318 0000F32000000000             dc.l    typereqla24,0
   66 00.0000F320 002F0001002F000B0001 typereqla24     dc.w    47,1,47,11,1,11
   67 00.0000F32C 00000000             typereqbo8      dc.w    0,0
   68 00.0000F330 01020103                     dc.b    1,2,1,3
   69 00.0000F334 0000F33C0000F348             dc.l    typereqla26,typereqla27
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 323
TYPEREQ


   70 00.0000F33C 00570000000000000000 typereqla26     dc.w    87,0,0,0,0,11
   71 00.0000F348 00000000             typereqla27     dc.w    0,0
   72 00.0000F34C 02010103                     dc.b    2,1,1,3
   73 00.0000F350 0000F35800000000             dc.l    typereqla28,0
   74 00.0000F358 005700010057000B0001 typereqla28     dc.w    87,1,87,11,1,11
   75 00.0000F364                      
   76 00.0000F364 01000100             typereqin1      dc.b    1,0,1,0
   77 00.0000F368 000C0006                     dc.w    12,6
   78 00.0000F36C 00000000                     dc.l    0
   79 00.0000F370 0000F37800000000             dc.l    typereqla16,0
   80 00.0000F378 56696577205479706520 typereqla16     dc.b    'View Type Information',0
   81 00.0000F38E                              even
   82 00.0000F38E 01000100             typereqin2      dc.b    1,0,1,0
   83 00.0000F392 00040002                     dc.w    4,2
   84 00.0000F396 00000000                     dc.l    0
   85 00.0000F39A 0000F3A200000000             dc.l    typereqla25,0
   86 00.0000F3A2 545950453A00         typereqla25     dc.b    'TYPE:',0
   87 00.0000F3A8                              even
   88 00.0000F3A8 01000100             typereqin3      dc.b    1,0,1,0
   89 00.0000F3AC 00040002                     dc.w    4,2
   90 00.0000F3B0 00000000                     dc.l    0
   91 00.0000F3B4 0000F3BC00000000             dc.l    typereqla29,0
   92 00.0000F3BC 204641524557454C4C20 typereqla29     dc.b    ' FAREWELL ',0
   93 00.0000F3C8                              even
   94 00.0000F3C8 01000100             typereqin4      dc.b    1,0,1,0
   95 00.0000F3CC 00000000                     dc.w    0,0
   96 00.0000F3D0 00000000                     dc.l    0
   97 00.0000F3D4 0000F3DC00000000             dc.l    typereqla30,0
   98 00.0000F3DC 20202020202020202020 typereqla30     dc.b    '                           ',0
   99 00.0000F3F8                              even
  100 00.0000F3F8 01000100             typereqin5      dc.b    1,0,1,0
  101 00.0000F3FC 00000000                     dc.w    0,0
  102 00.0000F400 00000000                     dc.l    0
  103 00.0000F404 0000F40C00000000             dc.l    typereqla31,0
  104 00.0000F40C 20202020202020202020 typereqla31     dc.b    '                           ',0
  105 00.0000F428                              even
  106 00.0000F428 01000100             typereqin6      dc.b    1,0,1,0
  107 00.0000F42C 00000000                     dc.w    0,0
  108 00.0000F430 00000000                     dc.l    0
  109 00.0000F434 0000F43C00000000             dc.l    typereqla32,0
  110 00.0000F43C 20202020202020202020 typereqla32     dc.b    '                           ',0
  111 00.0000F458                              even
  112 00.0000F458 01000100             typereqin7      dc.b    1,0,1,0
  113 00.0000F45C 00000000                     dc.w    0,0
  114 00.0000F460 00000000                     dc.l    0
  115 00.0000F464 0000F46C00000000             dc.l    typereqla33,0
  116 00.0000F46C 20202020202020202020 typereqla33     dc.b    '                           ',0
  117 00.0000F488                              even
  118 00.0000F488 01000100             typereqin8      dc.b    1,0,1,0
  119 00.0000F48C 00000000                     dc.w    0,0
  120 00.0000F490 00000000                     dc.l    0
  121 00.0000F494 0000F49C00000000             dc.l    typereqla34,0
  122 00.0000F49C 20202020202020202020 typereqla34     dc.b    '                           ',0
  123 00.0000F4B8                              even
  124 00.0000F4B8 01000100             typereqin9      dc.b    1,0,1,0
  125 00.0000F4BC 00000000                     dc.w    0,0
  126 00.0000F4C0 00000000                     dc.l    0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 324
TYPEREQ


  127 00.0000F4C4 0000F4CC00000000             dc.l    typereqla35,0
  128 00.0000F4CC 20202020202020202020 typereqla35     dc.b    '                           ',0
  129 00.0000F4E8                              even
  130 00.0000F4E8 01000100             typereqin10     dc.b    1,0,1,0
  131 00.0000F4EC 00000000                     dc.w    0,0
  132 00.0000F4F0 00000000                     dc.l    0
  133 00.0000F4F4 0000F4FC00000000             dc.l    typereqla36,0
  134 00.0000F4FC 20202020202020202020 typereqla36     dc.b    '                           ',0
  135 00.0000F518                              even
  136 00.0000F518 01000100             typereqin11     dc.b    1,0,1,0
  137 00.0000F51C 00000000                     dc.w    0,0
  138 00.0000F520 00000000                     dc.l    0
  139 00.0000F524 0000F52C00000000             dc.l    typereqla37,0
  140 00.0000F52C 20202020202020202020 typereqla37     dc.b    '                           ',0
  141 00.0000F548                              even
  142 00.0000F548 01000100             typereqin12     dc.b    1,0,1,0
  143 00.0000F54C 00000000                     dc.w    0,0
  144 00.0000F550 00000000                     dc.l    0
  145 00.0000F554 0000F55C00000000             dc.l    typereqla38,0
  146 00.0000F55C 20202020202020202020 typereqla38     dc.b    '                           ',0
  147 00.0000F578                              even
  148 00.0000F578 01000100             typereqin13     dc.b    1,0,1,0
  149 00.0000F57C 00000000                     dc.w    0,0
  150 00.0000F580 00000000                     dc.l    0
  151 00.0000F584 0000F58C00000000             dc.l    typereqla39,0
  152 00.0000F58C 20202020202020202020 typereqla39     dc.b    '                           ',0
  153 00.0000F5A8                              even
  154 00.0000F5A8 01000100             typereqin14     dc.b    1,0,1,0
  155 00.0000F5AC 00000000                     dc.w    0,0
  156 00.0000F5B0 00000000                     dc.l    0
  157 00.0000F5B4 0000F5BC00000000             dc.l    typereqla40,0
  158 00.0000F5BC 20202020202020202020 typereqla40     dc.b    '                           ',0
  159 00.0000F5D8                              even
  160 00.0000F5D8 01000100             typereqin15     dc.b    1,0,1,0
  161 00.0000F5DC 00000000                     dc.w    0,0
  162 00.0000F5E0 00000000                     dc.l    0
  163 00.0000F5E4 0000F5EC00000000             dc.l    typereqla41,0
  164 00.0000F5EC 20202020202020202020 typereqla41     dc.b    '                           ',0
  165 00.0000F608                              even
  166 00.0000F608                      
  167 00.0000F608                      
  168 00.0000F608 0000F65E             typereqga1      dc.l    typereqga2
  169 00.0000F60C 00F7001C000A005C0000         dc.w    247,28,10,92,0,3,3
  170 00.0000F61A 0000F634000000000000         dc.l    typereqla17,0,0,0,typereqvp1
  171 00.0000F62E 0001                         dc.w    1
  172 00.0000F630 00000000                     dc.l    0
  173 00.0000F634 00000000000000000000 typereqla17     dc.l    0,0,0,0,0
  174 00.0000F648 000DFFFF0000FFFF8000 typereqvp1      dc.w    13,-1,0,-1,32768,0,0,0,0,0,0
  175 00.0000F65E 0000F6CE             typereqga2      dc.l    typereqga3
  176 00.0000F662 004C008A00B000080000         dc.w    76,138,176,8,0,1,4
  177 00.0000F670 00000000000000000000         dc.l    0,0,0,0,typereqsg1
  178 00.0000F684 0002                         dc.w    2
  179 00.0000F686 00000000                     dc.l    0
  180 00.0000F68A 0000F6AE0000221C     typereqsg1      dc.l    typereqla21,undobuffer
  181 00.0000F692 000000200000                 dc.w    0,32,0
  182 00.0000F698 00000000000000000000         dc.w    0,0,0,0,0,0,0
  183 00.0000F6A6 0000000000000000             dc.l    0,0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 325
TYPEREQ


  184 00.0000F6AE                      typereqla21     dcb.b   32,0
  185 00.0000F6CE                              even
  186 00.0000F6CE 0000F6FA             typereqga3      dc.l    typereqga4
  187 00.0000F6D2 001000880030000C0000         dc.w    16,136,48,12,0,1,1
  188 00.0000F6E0 0000F2F4000000000000         dc.l    typereqbo7,0,typereqin2,0,0
  189 00.0000F6F4 0003                         dc.w    3
  190 00.0000F6F6 00000000                     dc.l    0
  191 00.0000F6FA 0000F726             typereqga4      dc.l    typereqga5
  192 00.0000F6FE 0060009C0058000C0000         dc.w    96,156,88,12,0,5,1
  193 00.0000F70C 0000F32C000000000000         dc.l    typereqbo8,0,typereqin3,0,0
  194 00.0000F720 0004                         dc.w    4
  195 00.0000F722 00000000                     dc.l    0
  196 00.0000F726 0000F752             typereqga5      dc.l    typereqga6
  197 00.0000F72A 0014001A00D800080000         dc.w    20,26,216,8,0,1,1
  198 00.0000F738 00000000000000000000         dc.l    0,0,typereqin4,0,0
  199 00.0000F74C 0005                         dc.w    5
  200 00.0000F74E 00000000                     dc.l    0
  201 00.0000F752 0000F77E             typereqga6      dc.l    typereqga7
  202 00.0000F756 0014002200D800080000         dc.w    20,34,216,8,0,1,1
  203 00.0000F764 00000000000000000000         dc.l    0,0,typereqin5,0,0
  204 00.0000F778 0006                         dc.w    6
  205 00.0000F77A 00000000                     dc.l    0
  206 00.0000F77E 0000F7AA             typereqga7      dc.l    typereqga8
  207 00.0000F782 0014002A00D800080000         dc.w    20,42,216,8,0,1,1
  208 00.0000F790 00000000000000000000         dc.l    0,0,typereqin6,0,0
  209 00.0000F7A4 0007                         dc.w    7
  210 00.0000F7A6 00000000                     dc.l    0
  211 00.0000F7AA 0000F7D6             typereqga8      dc.l    typereqga9
  212 00.0000F7AE 0014003200D800080000         dc.w    20,50,216,8,0,1,1
  213 00.0000F7BC 00000000000000000000         dc.l    0,0,typereqin7,0,0
  214 00.0000F7D0 0008                         dc.w    8
  215 00.0000F7D2 00000000                     dc.l    0
  216 00.0000F7D6 0000F802             typereqga9      dc.l    typereqga10
  217 00.0000F7DA 0014003A00D800080000         dc.w    20,58,216,8,0,1,1
  218 00.0000F7E8 00000000000000000000         dc.l    0,0,typereqin8,0,0
  219 00.0000F7FC 0009                         dc.w    9
  220 00.0000F7FE 00000000                     dc.l    0
  221 00.0000F802 0000F82E             typereqga10     dc.l    typereqga11
  222 00.0000F806 0014004200D800080000         dc.w    20,66,216,8,0,1,1
  223 00.0000F814 00000000000000000000         dc.l    0,0,typereqin9,0,0
  224 00.0000F828 000A                         dc.w    10
  225 00.0000F82A 00000000                     dc.l    0
  226 00.0000F82E 0000F85A             typereqga11     dc.l    typereqga12
  227 00.0000F832 0014004A00D800080000         dc.w    20,74,216,8,0,1,1
  228 00.0000F840 00000000000000000000         dc.l    0,0,typereqin10,0,0
  229 00.0000F854 000B                         dc.w    11
  230 00.0000F856 00000000                     dc.l    0
  231 00.0000F85A 0000F886             typereqga12     dc.l    typereqga13
  232 00.0000F85E 0014005200D800080000         dc.w    20,82,216,8,0,1,1
  233 00.0000F86C 00000000000000000000         dc.l    0,0,typereqin11,0,0
  234 00.0000F880 000C                         dc.w    12
  235 00.0000F882 00000000                     dc.l    0
  236 00.0000F886 0000F8B2             typereqga13     dc.l    typereqga14
  237 00.0000F88A 0014005A00D800080000         dc.w    20,90,216,8,0,1,1
  238 00.0000F898 00000000000000000000         dc.l    0,0,typereqin12,0,0
  239 00.0000F8AC 000D                         dc.w    13
  240 00.0000F8AE 00000000                     dc.l    0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 326
TYPEREQ


  241 00.0000F8B2 0000F8DE             typereqga14     dc.l    typereqga15
  242 00.0000F8B6 0014006200D800080000         dc.w    20,98,216,8,0,1,1
  243 00.0000F8C4 00000000000000000000         dc.l    0,0,typereqin13,0,0
  244 00.0000F8D8 000E                         dc.w    14
  245 00.0000F8DA 00000000                     dc.l    0
  246 00.0000F8DE 0000F90A             typereqga15     dc.l    typereqga16
  247 00.0000F8E2 0014006A00D800080000         dc.w    20,106,216,8,0,1,1
  248 00.0000F8F0 00000000000000000000         dc.l    0,0,typereqin14,0,0
  249 00.0000F904 000F                         dc.w    15
  250 00.0000F906 00000000                     dc.l    0
  251 00.0000F90A 00000000             typereqga16     dc.l    0
  252 00.0000F90E 0014007200D800080000         dc.w    20,114,216,8,0,1,1
  253 00.0000F91C 00000000000000000000         dc.l    0,0,typereqin15,0,0
  254 00.0000F930 0010                         dc.w    16
  255 00.0000F932 00000000                     dc.l    0
15289 00.0000F936                      
15290 00.0000F936                      optspnts        ;pointers to options involved in source dependant
15291 00.0000F936                              ;stuff
15292 00.0000F936                              ;
15293 00.0000F936 0001                         dc      1       ;one byte stuff...
15294 00.0000F938                              ;
15295 00.0000F938 0000FD8E                     dc.l    vers
15296 00.0000F93C 00010FB9                     dc.l    optreqga9+13
15297 00.0000F940 00000000                     dc.l    0
15298 00.0000F944                              ;
15299 00.0000F944 0002                         dc      2       ;two byte stuff...
15300 00.0000F946                              ;
15301 00.0000F946 00010FE4             jimi0   dc.l    optreqga10+12
15302 00.0000F94A 000110100001103C             dc.l    optreqga11+12,optreqga12+12
15303 00.0000F952 0001106800011094             dc.l    optreqga13+12,optreqga14+12
15304 00.0000F95A 000110C0000110EC             dc.l    optreqga15+12,optreqga16+12
15305 00.0000F962 000006AE000006DA             dc.l    optreq2ga1+12,optreq2ga2+12
15306 00.0000F96A 00000706                     dc.l    optreq2ga3+12
15307 00.0000F96E                              ;
15308 00.0000F96E 000007320000075E             dc.l    optreq2ga4+12,optreq2ga5+12
15309 00.0000F976 0000078A000007B6             dc.l    optreq2ga6+12,optreq2ga7+12
15310 00.0000F97E                              ;
15311 00.0000F97E 00000000             jimi1   dc.l    0
15312 00.0000F982                              ;
15313 00.0000F982 0004                         dc      4       ;four byte stuff...
15314 00.0000F984                      jimi2   ;
15315 00.0000F984                              ;Maximums Int String Gadgets...
15316 00.0000F984                              ;
15317 00.0000F984 00010D1400010D70             dc.l    optreqla48-8,optreqla49-8
15318 00.0000F98C 00010DCC00010E28             dc.l    optreqla50-8,optreqla51-8
15319 00.0000F994 00010E8400010EE0             dc.l    optreqla52-8,optreqla53-8
15320 00.0000F99C                              ;
15321 00.0000F99C 00000000             jimi3   dc.l    0
15322 00.0000F9A0                              ;
15323 00.0000F9A0                              ;Resident Buffer...
15324 00.0000F9A0                              ;
15325 00.0000F9A0 0220                         dc      68*8
15326 00.0000F9A2 0001136400000000             dc.l    resbuff,0
15327 00.0000F9AA                              ;
15328 00.0000F9AA                              ;Executable name!
15329 00.0000F9AA                              ;
15330 00.0000F9AA 0180                         dc      192*2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 327
blitz2.s


15331 00.0000F9AC 0000318A00000000             dc.l    xpath,0
15332 00.0000F9B4                              ;
15333 00.0000F9B4                              ;all done...
15334 00.0000F9B4                              ;
15335 00.0000F9B4 0000                         dc      0
15336 00.0000F9B6                              ;
15337 00.0000F9B6                      optspntsf       ;
15338 00.0000F9B6                      
15339 00.0000F9B6                      optssave        ds.b    ((jimi1-jimi0)/4*2)+(jimi3-jimi2)+(68*8)+(192*2)+2
15340 00.0000FD8C                      
15341 00.0000FD8C 0000                 allchg  dc      0
15342 00.0000FD8E                      
15343 00.0000FD8E 0000                 vers    dc      0
15344 00.0000FD90                      
15345 00.0000FD90 4EB900005A10         loadxtra        jsr     freeres2
15346 00.0000FD96                              ;
15347 00.0000FD96 45F90000F936                 lea     optspnts,a2
15348 00.0000FD9C 7800                         moveq   #0,d4
15349 00.0000FD9E 381A                 .loop   move    (a2)+,d4
15350 00.0000FDA0 6714                         beq.s   .done
15351 00.0000FDA2 241A                 .loop2  move.l  (a2)+,d2
15352 00.0000FDA4 67F8                         beq.s   .loop
15353 00.0000FDA6 2604                         move.l  d4,d3
15354 00.0000FDA8 2207                         move.l  d7,d1
15355 00.0000FDAA 4EAEFFD6                     jsr     read(a6)
15356 00.0000FDAE 4A80                         tst.l   d0
15357 00.0000FDB0 66F0                         bne.s   .loop2
15358 00.0000FDB2 60000086                     bra     .done2
15359 00.0000FDB6                              ;
15360 00.0000FDB6 4A390000FD8E         .done   tst.b   vers
15361 00.0000FDBC 6624                         bne.s   .notver0
15362 00.0000FDBE                              ;
15363 00.0000FDBE 33FC0080000006AE             move    #128,optreq2ga1+12      ;auto run on
15364 00.0000FDC6 33F90000078A000006DA         move    optreq2ga6+12,optreq2ga2+12     ;interupt checking on
15365 00.0000FDD0 427900000706                 clr     optreq2ga3+12   ;assembler checking off
15366 00.0000FDD6 33F9000007B600000732         move    optreq2ga7+12,optreq2ga4+12     ;overflow chex
15367 00.0000FDE0 6012                         bra.s   .ver0
15368 00.0000FDE2                              ;
15369 00.0000FDE2 2207                 .notver0        move.l  d7,d1           ;load cli arg!
15370 00.0000FDE4 243C00011E10                 move.l  #argreqla8,d2
15371 00.0000FDEA 263C00000080                 move.l  #128,d3
15372 00.0000FDF0 4EAEFFD6                     jsr     read(a6)
15373 00.0000FDF4                              ;
15374 00.0000FDF4                      .ver0   ;here, we load in current max settings. done last coz of
15375 00.0000FDF4                              ;unknown number of max's
15376 00.0000FDF4                              ;
15377 00.0000FDF4 23CF00002B18                 move.l  a7,errstack
15378 00.0000FDFA 23FC0000FE3A00002B1C         move.l  #.done2,errcont
15379 00.0000FE04 33FCFFFF00008AFE             move    #-1,ezerr
15380 00.0000FE0C                              ;
15381 00.0000FE0C 243C0000EC60         .dloop  move.l  #temp1,d2
15382 00.0000FE12 7604                         moveq   #4,d3
15383 00.0000FE14 2207                         move.l  d7,d1
15384 00.0000FE16 4EAEFFD6                     jsr     read(a6)
15385 00.0000FE1A 4A80                         tst.l   d0
15386 00.0000FE1C 671C                         beq.s   .done2
15387 00.0000FE1E                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 328
blitz2.s


15388 00.0000FE1E 32390000EC60                 move    temp1,d1
15389 00.0000FE24                              ;
15390 00.0000FE24 4EB900006F1A                 jsr     findlibnoerr
15391 00.0000FE2A 670E                         beq.s   .done2
15392 00.0000FE2C                              ;beq.s  .dloop
15393 00.0000FE2C                              ;
15394 00.0000FE2C 20290012                     move.l  18(a1),d0
15395 00.0000FE30 33B90000EC6208FC             move    temp1+2,-4(a1,d0.l)
15396 00.0000FE38 60D2                         bra.s   .dloop
15397 00.0000FE3A                              ;
15398 00.0000FE3A                      .done2  ;
15399 00.0000FE3A                              ;load in residents
15400 00.0000FE3A                              ;
15401 00.0000FE3A 41FA1528                     lea     resbuff(pc),a0
15402 00.0000FE3E 7007                         moveq   #7,d0
15403 00.0000FE40 42A80040             .loop3  clr.l   64(a0)
15404 00.0000FE44 41E80044                     lea     68(a0),a0
15405 00.0000FE48 51C8FFF6                     dbf     d0,.loop3
15406 00.0000FE4C 48E70102                     movem.l d7/a6,-(a7)
15407 00.0000FE50 4EB900005316                 jsr     makeiallox
15408 00.0000FE56 4EB900005914                 jsr     loadres
15409 00.0000FE5C 4CDF4080                     movem.l (a7)+,d7/a6
15410 00.0000FE60 4E75                         rts
15411 00.0000FE62                      
15412 00.0000FE62 13FC00010000FD8E     savextra        move.b  #1,vers         ;.xtra version number...
15413 00.0000FE6A                              ;
15414 00.0000FE6A 45F90000F936                 lea     optspnts,a2
15415 00.0000FE70 7800                         moveq   #0,d4
15416 00.0000FE72 381A                 .loop   move    (a2)+,d4
15417 00.0000FE74 670E                         beq.s   .done
15418 00.0000FE76 241A                 .loop2  move.l  (a2)+,d2
15419 00.0000FE78 67F8                         beq.s   .loop
15420 00.0000FE7A 2604                         move.l  d4,d3
15421 00.0000FE7C 2207                         move.l  d7,d1
15422 00.0000FE7E 4EAEFFD0                     jsr     write(a6)
15423 00.0000FE82 60F2                         bra.s   .loop2
15424 00.0000FE84                              ;
15425 00.0000FE84                      .done   ;write out cli arguement...
15426 00.0000FE84                              ;
15427 00.0000FE84 2207                         move.l  d7,d1
15428 00.0000FE86 243C00011E10                 move.l  #argreqla8,d2
15429 00.0000FE8C 263C00000080                 move.l  #128,d3
15430 00.0000FE92 4EAEFFD0                     jsr     write(a6)
15431 00.0000FE96                              ;
15432 00.0000FE96                              ;OK, now to write out max's
15433 00.0000FE96                              ;
15434 00.0000FE96                              ;lib#.w,
15435 00.0000FE96                              ;max.w.
15436 00.0000FE96 45F90000EC44                 lea     firstlib,a2
15437 00.0000FE9C 2012                 .loop3  move.l  (a2),d0
15438 00.0000FE9E 67000030                     beq     .done2
15439 00.0000FEA2 2440                         move.l  d0,a2
15440 00.0000FEA4 282A0012                     move.l  18(a2),d4
15441 00.0000FEA8 4A7248FE                     tst     -2(a2,d4.l)
15442 00.0000FEAC 6700FFEE                     beq     .loop3
15443 00.0000FEB0 41EA0004                     lea     4(a2),a0
15444 00.0000FEB4 2408                         move.l  a0,d2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 329
blitz2.s


15445 00.0000FEB6 7602                         moveq   #2,d3
15446 00.0000FEB8 2207                         move.l  d7,d1
15447 00.0000FEBA 4EAEFFD0                     jsr     write(a6)
15448 00.0000FEBE 41F248FC                     lea     -4(a2,d4.l),a0
15449 00.0000FEC2 2408                         move.l  a0,d2
15450 00.0000FEC4 7602                         moveq   #2,d3
15451 00.0000FEC6 2207                         move.l  d7,d1
15452 00.0000FEC8 4EAEFFD0                     jsr     write(a6)
15453 00.0000FECC 6000FFCE                     bra     .loop3
15454 00.0000FED0 4E75                 .done2  rts
15455 00.0000FED2                      
15456 00.0000FED2                      menu4   ;options requester
15457 00.0000FED2                              ;
15458 00.0000FED2 41F90000F9B6                 lea     optssave,a0
15459 00.0000FED8 43F90000F936                 lea     optspnts,a1
15460 00.0000FEDE 3019                 .loop   move    (a1)+,d0        ;length of data move
15461 00.0000FEE0 6714                         beq.s   .done
15462 00.0000FEE2 5340                         subq    #1,d0
15463 00.0000FEE4 2219                 .loop2  move.l  (a1)+,d1
15464 00.0000FEE6 67F6                         beq.s   .loop
15465 00.0000FEE8 2441                         move.l  d1,a2
15466 00.0000FEEA 3200                         move    d0,d1
15467 00.0000FEEC 10DA                 .loop3  move.b  (a2)+,(a0)+
15468 00.0000FEEE 51C9FFFC                     dbf     d1,.loop3
15469 00.0000FEF2 6000FFF0                     bra     .loop2
15470 00.0000FEF6                      .done   ;
15471 00.0000FEF6                              ;MAKE INT GADS!
15472 00.0000FEF6 43F90000F984                 lea     jimi2,a1
15473 00.0000FEFC 2419                 .loop4  move.l  (a1)+,d2
15474 00.0000FEFE 670E                         beq.s   .done2
15475 00.0000FF00 2042                         move.l  d2,a0
15476 00.0000FF02 2410                         move.l  (a0),d2
15477 00.0000FF04 5048                         addq    #8,a0
15478 00.0000FF06 4EB9000053DC                 jsr     makelong
15479 00.0000FF0C 60EE                         bra.s   .loop4
15480 00.0000FF0E                              ;
15481 00.0000FF0E                      .done2  ;
15482 00.0000FF0E                              ;
15483 00.0000FF0E 42790000E354         menu4c  clr     reschg  ;resident change
15484 00.0000FF14 42790000FD8C                 clr     allchg  ;alloc change
15485 00.0000FF1A 42790000E83A                 clr     maxat
15486 00.0000FF20 6100026A                     bsr     makemax
15487 00.0000FF24 61000202                     bsr     makeres
15488 00.0000FF28                              ;
15489 00.0000FF28 22790000E372                 move.l  comdata,a1
15490 00.0000FF2E 2251                         move.l  (a1),a1
15491 00.0000FF30 41F900010314                 lea     optreq,a0
15492 00.0000FF36 4E91                         jsr     (a1)    ;openreq
15493 00.0000FF38                              ;
15494 00.0000FF38 20790000E372         .loop   move.l  comdata,a0
15495 00.0000FF3E 20680008                     move.l  8(a0),a0
15496 00.0000FF42 4E90                         jsr     (a0)    ;getinput
15497 00.0000FF44 BE7CFFFF             .igot   cmp     #-1,d7
15498 00.0000FF48 6600FFEE                     bne     .loop
15499 00.0000FF4C BC7C0001                     cmp     #1,d6
15500 00.0000FF50 65000014                     bcs     .notall
15501 00.0000FF54 BC7C0006                     cmp     #6,d6
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 330
blitz2.s


15502 00.0000FF58 6200000C                     bhi     .notall
15503 00.0000FF5C 33C60000FD8C                 move    d6,allchg
15504 00.0000FF62 6000FFD4                     bra     .loop
15505 00.0000FF66                      .notall ;
15506 00.0000FF66 BC7C0015                     cmp     #21,d6
15507 00.0000FF6A 66000038                     bne     .notup
15508 00.0000FF6E 53790000E83A                 subq    #1,maxat
15509 00.0000FF74 61000216             .newmax bsr     makemax
15510 00.0000FF78 2A790000E372                 move.l  comdata,a5
15511 00.0000FF7E 2A6D001C                     move.l  28(a5),a5
15512 00.0000FF82 41F900010EF4                 lea     optreqga7,a0
15513 00.0000FF88 7002                         moveq   #2,d0
15514 00.0000FF8A 4E95                         jsr     (a5)
15515 00.0000FF8C 41F9000111BC                 lea     optreqga21,a0
15516 00.0000FF92 7002                         moveq   #2,d0
15517 00.0000FF94 4E95                         jsr     (a5)
15518 00.0000FF96 41F90001126C                 lea     optreqga25,a0
15519 00.0000FF9C 7002                         moveq   #2,d0
15520 00.0000FF9E 4E95                         jsr     (a5)
15521 00.0000FFA0 6000FF96                     bra     .loop
15522 00.0000FFA4 BC7C0016             .notup  cmp     #22,d6
15523 00.0000FFA8 6600000C                     bne     .notdown
15524 00.0000FFAC 52790000E83A                 addq    #1,maxat
15525 00.0000FFB2 6000FFC0                     bra     .newmax
15526 00.0000FFB6 BC7C0007             .notdown        cmp     #7,d6
15527 00.0000FFBA 66000048                     bne     .notmax1
15528 00.0000FFBE 3A390000E83A                 move    maxat,d5
15529 00.0000FFC4 47F900010F3E                 lea     optreqla54-6,a3
15530 00.0000FFCA 20790000E372         .ugw    move.l  comdata,a0
15531 00.0000FFD0 20680008                     move.l  8(a0),a0
15532 00.0000FFD4 4E90                         jsr     (a0)    ;getinput (ungadget etc)
15533 00.0000FFD6 247AEC6C                     move.l  firstlib(pc),a2
15534 00.0000FFDA B4FC0000             .ugwl   cmp     #0,a2
15535 00.0000FFDE 6700FF64                     beq     .igot
15536 00.0000FFE2 224A                         move.l  a2,a1
15537 00.0000FFE4 D3E90012                     add.l   18(a1),a1
15538 00.0000FFE8 4A69FFFE                     tst     -2(a1)
15539 00.0000FFEC 67000008                     beq     .ugwl2
15540 00.0000FFF0 5345                         subq    #1,d5
15541 00.0000FFF2 6B000008                     bmi     .ugw2
15542 00.0000FFF6 2452                 .ugwl2  move.l  (a2),a2
15543 00.0000FFF8 6000FFE0                     bra     .ugwl
15544 00.0000FFFC                              ;
15545 00.0000FFFC 3353FFFC             .ugw2   move    (a3),-4(a1)
15546 00.00010000 6000FF42                     bra     .igot
15547 00.00010004                              ;
15548 00.00010004 BC7C0008             .notmax1        cmp     #8,d6
15549 00.00010008 66000014                     bne     .notmax2
15550 00.0001000C 3A390000E83A                 move    maxat,d5
15551 00.00010012 5245                         addq    #1,d5
15552 00.00010014 47F900010F9A                 lea     optreqla55-6,a3
15553 00.0001001A 6000FFAE                     bra     .ugw
15554 00.0001001E                              ;
15555 00.0001001E BC7C000A             .notmax2        cmp     #10,d6
15556 00.00010022 66000018                     bne     .notrerr
15557 00.00010026 0839000700010FE5             btst    #7,optreqga10+13
15558 00.0001002E 6700FF08                     beq     .loop
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 331
blitz2.s


15559 00.00010032                              ;
15560 00.00010032 4EB900005B3A                 jsr     runerropts
15561 00.00010038 6000FEFE                     bra     .loop
15562 00.0001003C                              ;
15563 00.0001003C                      .notrerr        
15564 00.0001003C BC7C0017                     cmp     #23,d6
15565 00.00010040 66000014                     bne     .notrup
15566 00.00010044 04B9000000440000E356         sub.l   #68,resat
15567 00.0001004E 610000B6             .newres bsr     newres
15568 00.00010052 6000FEE4                     bra     .loop
15569 00.00010056 BC7C0018             .notrup cmp     #24,d6
15570 00.0001005A 66000010                     bne     .notrdown
15571 00.0001005E 06B9000000440000E356         add.l   #68,resat
15572 00.00010068 6000FFE4                     bra     .newres
15573 00.0001006C                              ;       
15574 00.0001006C BC7C001B             .notrdown       cmp     #27,d6
15575 00.00010070 66000012                     bne     .notme
15576 00.00010074                      .chg    ;move.l comdata,a0      ;*** res ***
15577 00.00010074                              ;move.l 8(a0),a0
15578 00.00010074                              ;jsr    (a0)    ;getinput
15579 00.00010074 33FCFFFF0000E354             move    #-1,reschg
15580 00.0001007C 61000088                     bsr     newres
15581 00.00010080 6000FEB6                     bra     .loop
15582 00.00010084                              ;
15583 00.00010084 BC7C001C             .notme  cmp     #28,d6
15584 00.00010088 6700FFEA                     beq     .chg
15585 00.0001008C                              ;
15586 00.0001008C BC7C0011                     cmp     #17,d6
15587 00.00010090 6500FEA6                     bcs     .loop
15588 00.00010094 BC7C0014                     cmp     #20,d6
15589 00.00010098 6200FE9E                     bhi     .loop
15590 00.0001009C 67000044                     beq     menu4canc
15591 00.000100A0                              ;
15592 00.000100A0 3F06                 optsdone        move    d6,-(a7)
15593 00.000100A2 30390000FD8C                 move    allchg,d0
15594 00.000100A8 67000008                     beq     .skip
15595 00.000100AC 4EB900005316                 jsr     makeiallox
15596 00.000100B2                      .skip   ;
15597 00.000100B2 30390000E354                 move    reschg,d0
15598 00.000100B8 67000008                     beq     .zdone
15599 00.000100BC 4EB900005914                 jsr     loadres
15600 00.000100C2                              ;
15601 00.000100C2 3C1F                 .zdone  move    (a7)+,d6
15602 00.000100C4 BC7C0012                     cmp     #18,d6
15603 00.000100C8 6700000C                     beq     .menu0
15604 00.000100CC BC7C0013                     cmp     #19,d6
15605 00.000100D0 6700000A                     beq     .menu1
15606 00.000100D4 4E75                 .done   rts
15607 00.000100D6 4EF900003396         .menu0  jmp     menu0
15608 00.000100DC 4EF90000330E         .menu1  jmp     menu1
15609 00.000100E2                              ;
15610 00.000100E2                              ;cancel
15611 00.000100E2                              ;
15612 00.000100E2 41F90000F9B6         menu4canc       lea     optssave,a0
15613 00.000100E8 43F90000F936                 lea     optspnts,a1
15614 00.000100EE 3019                 .loop   move    (a1)+,d0
15615 00.000100F0 6712                         beq.s   .done
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 332
blitz2.s


15616 00.000100F2 5340                         subq    #1,d0
15617 00.000100F4 2219                 .loop2  move.l  (a1)+,d1
15618 00.000100F6 67F6                         beq.s   .loop
15619 00.000100F8 2441                         move.l  d1,a2
15620 00.000100FA 3200                         move    d0,d1
15621 00.000100FC 14D8                 .loop3  move.b  (a0)+,(a2)+
15622 00.000100FE 51C9FFFC                     dbf     d1,.loop3
15623 00.00010102 60F0                         bra.s   .loop2
15624 00.00010104                      .done   ;
15625 00.00010104 4E75                         rts
15626 00.00010106                              
15627 00.00010106 61000020             newres  bsr     makeres
15628 00.0001010A 2A790000E372                 move.l  comdata,a5
15629 00.00010110 2A6D001C                     move.l  28(a5),a5
15630 00.00010114 41F900011214                 lea     optreqga23,a0
15631 00.0001011A 7002                         moveq   #2,d0
15632 00.0001011C 4E95                         jsr     (a5)
15633 00.0001011E 41F9000112C4                 lea     optreqga27,a0
15634 00.00010124 7002                         moveq   #2,d0
15635 00.00010126 4ED5                         jmp     (a5)
15636 00.00010128                      
15637 00.00010128                      makeres ;
15638 00.00010128                              ;convert resident list to string gads
15639 00.00010128                              ;
15640 00.00010128                              ;resat=top gad.
15641 00.00010128                              ;
15642 00.00010128 4279000112F8                 clr     optreqsgz+8
15643 00.0001012E 4279000112FC                 clr     optreqsgz+12
15644 00.00010134 427900011348                 clr     optreqsgy+8
15645 00.0001013A 42790001134C                 clr     optreqsgy+12
15646 00.00010140                              ;
15647 00.00010140 0279FEFF00011220             and     #$ffff-$100,optreqga23+12
15648 00.00010148 0279FEFF0001124C             and     #$ffff-$100,optreqga24+12
15649 00.00010150                              ;
15650 00.00010150 20790000E356                 move.l  resat,a0
15651 00.00010156 23C8000112F0                 move.l  a0,optreqsgz
15652 00.0001015C B1FC00011364                 cmp.l   #resbuff,a0
15653 00.00010162 6600000A                     bne     .upok
15654 00.00010166 0079010000011220             or      #$100,optreqga23+12
15655 00.0001016E 41E80044             .upok   lea     68(a0),a0
15656 00.00010172 23C800011340                 move.l  a0,optreqsgy
15657 00.00010178 B1FC00011540                 cmp.l   #resbuff+(7*68),a0
15658 00.0001017E 6600000A                     bne     .downok
15659 00.00010182 007901000001124C             or      #$100,optreqga24+12
15660 00.0001018A 4E75                 .downok rts
15661 00.0001018C                      
15662 00.0001018C                      makemax ;put from maxat into gadgets.....
15663 00.0001018C                              ;
15664 00.0001018C 41F900010F44                 lea     optreqla54,a0
15665 00.00010192 43F900010FA0                 lea     optreqla55,a1
15666 00.00010198 700B                         moveq   #11,d0
15667 00.0001019A 7220                         moveq   #32,d1
15668 00.0001019C 10C1                 .cloop  move.b  d1,(a0)+
15669 00.0001019E 12C1                         move.b  d1,(a1)+
15670 00.000101A0 51C8FFFA                     dbf     d0,.cloop
15671 00.000101A4 41F900010C44                 lea     optreqla108,a0
15672 00.000101AA 43F900010C68                 lea     optreqla109,a1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 333
blitz2.s


15673 00.000101B0 700D                         moveq   #13,d0
15674 00.000101B2 10C1                 .cloop2 move.b  d1,(a0)+
15675 00.000101B4 12C1                         move.b  d1,(a1)+
15676 00.000101B6 51C8FFFA                     dbf     d0,.cloop2
15677 00.000101BA                              ;
15678 00.000101BA 0079010000010F00             or      #$100,optreqga7+12
15679 00.000101C2 0079010000011278             or      #$100,optreqga25+12
15680 00.000101CA 0279FEFF000111C8             and     #$ffff-$100,optreqga21+12       ;up!
15681 00.000101D2 0279FEFF000111F4             and     #$ffff-$100,optreqga22+12       ;down!
15682 00.000101DA 32390000E83A                 move    maxat,d1
15683 00.000101E0 6600000A                     bne     .upok
15684 00.000101E4 00790100000111C8             or      #$100,optreqga21+12     ;no up arrow
15685 00.000101EC B2790000E840         .upok   cmp     nummaxs,d1
15686 00.000101F2 6500001C                     bcs     .doit
15687 00.000101F6                              ;
15688 00.000101F6 0079010000010F5C     .nsec   or      #$100,optreqga8+12
15689 00.000101FE 00790100000112A4             or      #$100,optreqga26+12
15690 00.00010206 00790100000111F4     .ndown  or      #$100,optreqga22+12     ;no down
15691 00.0001020E                              ;
15692 00.0001020E 4E75                         rts
15693 00.00010210 0279FEFF00010F00     .doit   and     #$ffff-$100,optreqga7+12
15694 00.00010218 0279FEFF00011278             and     #$ffff-$100,optreqga25+12
15695 00.00010220 43F900010C44                 lea     optreqla108,a1
15696 00.00010226 41F900010F44                 lea     optreqla54,a0
15697 00.0001022C 61000048                     bsr     maxit
15698 00.00010230 32390000E83A                 move    maxat,d1
15699 00.00010236 5241                         addq    #1,d1
15700 00.00010238 B2790000E840                 cmp     nummaxs,d1
15701 00.0001023E 6700FFB6                     beq     .nsec
15702 00.00010242 0279FEFF00010F5C             and     #$ffff-$100,optreqga8+12
15703 00.0001024A 0279FEFF000112A4             and     #$ffff-$100,optreqga26+12
15704 00.00010252 43F900010C68                 lea     optreqla109,a1
15705 00.00010258 41F900010FA0                 lea     optreqla55,a0
15706 00.0001025E 61000016                     bsr     maxit
15707 00.00010262 32390000E83A                 move    maxat,d1
15708 00.00010268 5441                         addq    #2,d1
15709 00.0001026A B2790000E840                 cmp     nummaxs,d1
15710 00.00010270 6400FF94                     bcc     .ndown
15711 00.00010274 4E75                         rts
15712 00.00010276                      
15713 00.00010276 24790000EC44         maxit   move.l  firstlib,a2
15714 00.0001027C 202A0012             .loop   move.l  18(a2),d0
15715 00.00010280 4A7208FE                     tst     -2(a2,d0.l)
15716 00.00010284 67000024                     beq     .next
15717 00.00010288 5341                         subq    #1,d1
15718 00.0001028A 6A00001E                     bpl     .next
15719 00.0001028E                              ;
15720 00.0001028E 267208E6                     move.l  -26(a2,d0.l),a3 ;token offset
15721 00.00010292 D7CA                         add.l   a2,a3
15722 00.00010294 12DB                 .ttl    move.b  (a3)+,(a1)+
15723 00.00010296 6600FFFC                     bne     .ttl
15724 00.0001029A 133C0073                     move.b  #'s',-(a1)
15725 00.0001029E                              ;
15726 00.0001029E 7400                         moveq   #0,d2
15727 00.000102A0 343208FC                     move    -4(a2,d0.l),d2
15728 00.000102A4 4EF9000053DC                 jmp     makelong
15729 00.000102AA                              ;
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 334
blitz2.s


15730 00.000102AA 2452                 .next   move.l  (a2),a2
15731 00.000102AC 6000FFCE                     bra     .loop
15732 00.000102B0                      
    0 00.000102B0                              include options.src
    1 00.000102B0 7040                 optreqprep      moveq   #arrowf-uparrow,d0
    2 00.000102B2 7202                         moveq   #2,d1
    3 00.000102B4 2C780004                     move.l  4.w,a6
    4 00.000102B8 4EAEFF3A                     jsr     allocmem(a6)
    5 00.000102BC 23C0000102F6                 move.l  d0,uimageloc
    6 00.000102C2 2040                         move.l  d0,a0
    7 00.000102C4 068000000020                 add.l   #(arrowf-uparrow)/2,d0
    8 00.000102CA 23C00001030A                 move.l  d0,dimageloc
    9 00.000102D0 43FA12B2                     lea     uparrow(pc),a1
   10 00.000102D4 700F                         moveq   #(arrowf-uparrow)/4-1,d0
   11 00.000102D6 20D9                 .loop   move.l  (a1)+,(a0)+
   12 00.000102D8 51C8FFFC                     dbf     d0,.loop
   13 00.000102DC 4E75                         rts
   14 00.000102DE                      
   15 00.000102DE 227A0016             optreqdone      move.l  uimageloc(pc),a1
   16 00.000102E2 7040                         moveq   #arrowf-uparrow,d0
   17 00.000102E4 2C780004                     move.l  4.w,a6
   18 00.000102E8 4EEEFF2E                     jmp     freemem(a6)
   19 00.000102EC                      
   20 00.000102EC 00000000001000080002 upimage dc      0,0,16,8,2
   21 00.000102F6 00000000             uimageloc       dc.l    0
   22 00.000102FA 0300                         dc.b    3,0
   23 00.000102FC 00000000                     dc.l    0
   24 00.00010300                      
   25 00.00010300 00000000001000080002 downimage       dc      0,0,16,8,2
   26 00.0001030A 00000000             dimageloc       dc.l    0
   27 00.0001030E 0300                         dc.b    3,0
   28 00.00010310 00000000                     dc.l    0
   29 00.00010314                      
   30 00.00010314 00000000             optreq  dc.l    0
   31 00.00010318 002C000201A800AC0000         dc.w    44,2,424,172,0,0
   32 00.00010324 00010CCC000103840001         dc.l    optreqga1,optreqbo1,optreqin1
   33 00.00010330 0000                         dc.w    0
   34 00.00010332 0000                         dc.b    0,0
   35 00.00010334 00000000                     dc.l    0
   36 00.00010338                              ds.b    32
   37 00.00010358 0000000000000000             dc.l    0,0
   38 00.00010360                              ds.b    36
   39 00.00010384                      
   40 00.00010384 00000000             optreqbo1       dc.w    0,0
   41 00.00010388 02010103                     dc.b    2,1,1,3
   42 00.0001038C 00010394000103A0             dc.l    optreqla1,optreqla2
   43 00.00010394 00C7004C0088004C0088 optreqla1       dc.w    199,76,136,76,136,87
   44 00.000103A0 00000000             optreqla2       dc.w    0,0
   45 00.000103A4 01020103                     dc.b    1,2,1,3
   46 00.000103A8 000103B0000103BC             dc.l    optreqla3,optreqbo2
   47 00.000103B0 00C7004D00C700570089 optreqla3       dc.w    199,77,199,87,137,87
   48 00.000103BC 00000000             optreqbo2       dc.w    0,0
   49 00.000103C0 02010103                     dc.b    2,1,1,3
   50 00.000103C4 000103CC000103D8             dc.l    optreqla4,optreqla5
   51 00.000103CC 0197004C0158004C0158 optreqla4       dc.w    407,76,344,76,344,87
   52 00.000103D8 00000000             optreqla5       dc.w    0,0
   53 00.000103DC 01020103                     dc.b    1,2,1,3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 335
OPTIONS.SRC


   54 00.000103E0 000103E8000103F4             dc.l    optreqla6,optreqbo3
   55 00.000103E8 0197004D019700570159 optreqla6       dc.w    407,77,407,87,345,87
   56 00.000103F4 00000000             optreqbo3       dc.w    0,0
   57 00.000103F8 02010103                     dc.b    2,1,1,3
   58 00.000103FC 0001040400010410             dc.l    optreqla7,optreqla8
   59 00.00010404 00C70058008800580088 optreqla7       dc.w    199,88,136,88,136,99
   60 00.00010410 00000000             optreqla8       dc.w    0,0
   61 00.00010414 01020103                     dc.b    1,2,1,3
   62 00.00010418 000104200001042C             dc.l    optreqla9,optreqbo4
   63 00.00010420 00C7005900C700630089 optreqla9       dc.w    199,89,199,99,137,99
   64 00.0001042C 00000000             optreqbo4       dc.w    0,0
   65 00.00010430 02010103                     dc.b    2,1,1,3
   66 00.00010434 0001043C00010448             dc.l    optreqla10,optreqla11
   67 00.0001043C 01970058015800580158 optreqla10      dc.w    407,88,344,88,344,99
   68 00.00010448 00000000             optreqla11      dc.w    0,0
   69 00.0001044C 01020103                     dc.b    1,2,1,3
   70 00.00010450 0001045800010464             dc.l    optreqla12,optreqbo5
   71 00.00010458 01970059019700630159 optreqla12      dc.w    407,89,407,99,345,99
   72 00.00010464 00000000             optreqbo5       dc.w    0,0
   73 00.00010468 02010103                     dc.b    2,1,1,3
   74 00.0001046C 0001047400010480             dc.l    optreqla13,optreqla14
   75 00.00010474 00C70064008800640088 optreqla13      dc.w    199,100,136,100,136,111
   76 00.00010480 00000000             optreqla14      dc.w    0,0
   77 00.00010484 01020103                     dc.b    1,2,1,3
   78 00.00010488 000104900001049C             dc.l    optreqla15,optreqbo6
   79 00.00010490 00C7006500C7006F0089 optreqla15      dc.w    199,101,199,111,137,111
   80 00.0001049C 00000000             optreqbo6       dc.w    0,0
   81 00.000104A0 02010103                     dc.b    2,1,1,3
   82 00.000104A4 000104AC000104B8             dc.l    optreqla16,optreqla17
   83 00.000104AC 01970064015800640158 optreqla16      dc.w    407,100,344,100,344,111
   84 00.000104B8 00000000             optreqla17      dc.w    0,0
   85 00.000104BC 01020103                     dc.b    1,2,1,3
   86 00.000104C0 000104C8000104D4             dc.l    optreqla18,optreqbo7
   87 00.000104C8 019700650197006F0159 optreqla18      dc.w    407,101,407,111,345,111
   88 00.000104D4 00000000             optreqbo7       dc.w    0,0
   89 00.000104D8 01020103                     dc.b    1,2,1,3
   90 00.000104DC 000104E4000104F0             dc.l    optreqla19,optreqla20
   91 00.000104E4 00C70080001000800010 optreqla19      dc.w    199,128,16,128,16,147
   92 00.000104F0 00000000             optreqla20      dc.w    0,0
   93 00.000104F4 02010103                     dc.b    2,1,1,3
   94 00.000104F8 000105000001050C             dc.l    optreqla21,optreqbo8
   95 00.00010500 00C7008100C700930011 optreqla21      dc.w    199,129,199,147,17,147
   96 00.0001050C 00000000             optreqbo8       dc.w    0,0
   97 00.00010510 01020103                     dc.b    1,2,1,3
   98 00.00010514 0001051C00010528             dc.l    optreqla22,optreqla23
   99 00.0001051C 0197008000D8008000D8 optreqla22      dc.w    407,128,216,128,216,147
  100 00.00010528 00000000             optreqla23      dc.w    0,0
  101 00.0001052C 02010103                     dc.b    2,1,1,3
  102 00.00010530 0001053800010544             dc.l    optreqla24,optreqbo9
  103 00.00010538 019700810197009300D9 optreqla24      dc.w    407,129,407,147,217,147
  104 00.00010544 00000000             optreqbo9       dc.w    0,0
  105 00.00010548 01020103                     dc.b    1,2,1,3
  106 00.0001054C 0001055400010560             dc.l    optreqla25,optreqla26
  107 00.00010554 019F0014000800140008 optreqla25      dc.w    415,20,8,20,8,151
  108 00.00010560 00000000             optreqla26      dc.w    0,0
  109 00.00010564 02010103                     dc.b    2,1,1,3
  110 00.00010568 000105700001057C             dc.l    optreqla27,optreqbo10
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 336
OPTIONS.SRC


  111 00.00010570 019F0015019F00970009 optreqla27      dc.w    415,21,415,151,9,151
  112 00.0001057C 00000000             optreqbo10      dc.w    0,0
  113 00.00010580 01020103                     dc.b    1,2,1,3
  114 00.00010584 0001058C00010598             dc.l    optreqla28,optreqla29
  115 00.0001058C 01A70000000000000000 optreqla28      dc.w    423,0,0,0,0,171
  116 00.00010598 00000000             optreqla29      dc.w    0,0
  117 00.0001059C 02010103                     dc.b    2,1,1,3
  118 00.000105A0 000105A800000000             dc.l    optreqla30,0
  119 00.000105A8 01A7000101A700AB0001 optreqla30      dc.w    423,1,423,171,1,171
  120 00.000105B4 00000000             optreqbo11      dc.w    0,0
  121 00.000105B8 01020103                     dc.b    1,2,1,3
  122 00.000105BC 000105C4000105D0             dc.l    optreqla56,optreqla57
  123 00.000105C4 00170000000000000000 optreqla56      dc.w    23,0,0,0,0,11
  124 00.000105D0 00000000             optreqla57      dc.w    0,0
  125 00.000105D4 02010103                     dc.b    2,1,1,3
  126 00.000105D8 000105E000000000             dc.l    optreqla58,0
  127 00.000105E0 001700010017000B0001 optreqla58      dc.w    23,1,23,11,1,11
  128 00.000105EC 00000000             optreqbo12      dc.w    0,0
  129 00.000105F0 01020103                     dc.b    1,2,1,3
  130 00.000105F4 000105FC00010608             dc.l    optreqla60,optreqla61
  131 00.000105FC 00170000000000000000 optreqla60      dc.w    23,0,0,0,0,11
  132 00.00010608 00000000             optreqla61      dc.w    0,0
  133 00.0001060C 02010103                     dc.b    2,1,1,3
  134 00.00010610 0001061800000000             dc.l    optreqla62,0
  135 00.00010618 001700010017000B0001 optreqla62      dc.w    23,1,23,11,1,11
  136 00.00010624 00000000             optreqbo13      dc.w    0,0
  137 00.00010628 01020103                     dc.b    1,2,1,3
  138 00.0001062C 0001063400010640             dc.l    optreqla64,optreqla65
  139 00.00010634 00170000000000000000 optreqla64      dc.w    23,0,0,0,0,11
  140 00.00010640 00000000             optreqla65      dc.w    0,0
  141 00.00010644 02010103                     dc.b    2,1,1,3
  142 00.00010648 0001065000000000             dc.l    optreqla66,0
  143 00.00010650 001700010017000B0001 optreqla66      dc.w    23,1,23,11,1,11
  144 00.0001065C 00000000             optreqbo14      dc.w    0,0
  145 00.00010660 01020103                     dc.b    1,2,1,3
  146 00.00010664 0001066C00010678             dc.l    optreqla68,optreqla69
  147 00.0001066C 00170000000000000000 optreqla68      dc.w    23,0,0,0,0,11
  148 00.00010678 00000000             optreqla69      dc.w    0,0
  149 00.0001067C 02010103                     dc.b    2,1,1,3
  150 00.00010680 0001068800000000             dc.l    optreqla70,0
  151 00.00010688 001700010017000B0001 optreqla70      dc.w    23,1,23,11,1,11
  152 00.00010694 00000000             optreqbo15      dc.w    0,0
  153 00.00010698 01020103                     dc.b    1,2,1,3
  154 00.0001069C 000106A4000106B0             dc.l    optreqla72,optreqla73
  155 00.000106A4 00170000000000000000 optreqla72      dc.w    23,0,0,0,0,11
  156 00.000106B0 00000000             optreqla73      dc.w    0,0
  157 00.000106B4 02010103                     dc.b    2,1,1,3
  158 00.000106B8 000106C000000000             dc.l    optreqla74,0
  159 00.000106C0 001700010017000B0001 optreqla74      dc.w    23,1,23,11,1,11
  160 00.000106CC 00000000             optreqbo16      dc.w    0,0
  161 00.000106D0 01020103                     dc.b    1,2,1,3
  162 00.000106D4 000106DC000106E8             dc.l    optreqla76,optreqla77
  163 00.000106DC 00170000000000000000 optreqla76      dc.w    23,0,0,0,0,11
  164 00.000106E8 00000000             optreqla77      dc.w    0,0
  165 00.000106EC 02010103                     dc.b    2,1,1,3
  166 00.000106F0 000106F800000000             dc.l    optreqla78,0
  167 00.000106F8 001700010017000B0001 optreqla78      dc.w    23,1,23,11,1,11
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 337
OPTIONS.SRC


  168 00.00010704 00000000             optreqbo17      dc.w    0,0
  169 00.00010708 01020103                     dc.b    1,2,1,3
  170 00.0001070C 0001071400010720             dc.l    optreqla80,optreqla81
  171 00.00010714 00170000000000000000 optreqla80      dc.w    23,0,0,0,0,11
  172 00.00010720 00000000             optreqla81      dc.w    0,0
  173 00.00010724 02010103                     dc.b    2,1,1,3
  174 00.00010728 0001073000000000             dc.l    optreqla82,0
  175 00.00010730 001700010017000B0001 optreqla82      dc.w    23,1,23,11,1,11
  176 00.0001073C 00000000             optreqbo18      dc.w    0,0
  177 00.00010740 01020103                     dc.b    1,2,1,3
  178 00.00010744 0001074C00010758             dc.l    optreqla84,optreqla85
  179 00.0001074C 00170000000000000000 optreqla84      dc.w    23,0,0,0,0,11
  180 00.00010758 00000000             optreqla85      dc.w    0,0
  181 00.0001075C 02010103                     dc.b    2,1,1,3
  182 00.00010760 0001076800000000             dc.l    optreqla86,0
  183 00.00010768 001700010017000B0001 optreqla86      dc.w    23,1,23,11,1,11
  184 00.00010774 00000000             optreqbo19      dc.w    0,0
  185 00.00010778 01020103                     dc.b    1,2,1,3
  186 00.0001077C 0001078400010790             dc.l    optreqla88,optreqla89
  187 00.00010784 00270000000000000000 optreqla88      dc.w    39,0,0,0,0,11
  188 00.00010790 00000000             optreqla89      dc.w    0,0
  189 00.00010794 02010103                     dc.b    2,1,1,3
  190 00.00010798 000107A000000000             dc.l    optreqla90,0
  191 00.000107A0 002700010027000B0001 optreqla90      dc.w    39,1,39,11,1,11
  192 00.000107AC 00000000             optreqbo20      dc.w    0,0
  193 00.000107B0 01020103                     dc.b    1,2,1,3
  194 00.000107B4 000107BC000107C8             dc.l    optreqla92,optreqla93
  195 00.000107BC 006F0000000000000000 optreqla92      dc.w    111,0,0,0,0,11
  196 00.000107C8 00000000             optreqla93      dc.w    0,0
  197 00.000107CC 02010103                     dc.b    2,1,1,3
  198 00.000107D0 000107D800000000             dc.l    optreqla94,0
  199 00.000107D8 006F0001006F000B0001 optreqla94      dc.w    111,1,111,11,1,11
  200 00.000107E4 00000000             optreqbo21      dc.w    0,0
  201 00.000107E8 01020103                     dc.b    1,2,1,3
  202 00.000107EC 000107F400010800             dc.l    optreqla96,optreqla97
  203 00.000107F4 009F0000000000000000 optreqla96      dc.w    159,0,0,0,0,11
  204 00.00010800 00000000             optreqla97      dc.w    0,0
  205 00.00010804 02010103                     dc.b    2,1,1,3
  206 00.00010808 0001081000000000             dc.l    optreqla98,0
  207 00.00010810 009F0001009F000B0001 optreqla98      dc.w    159,1,159,11,1,11
  208 00.0001081C 00000000             optreqbo22      dc.w    0,0
  209 00.00010820 01020103                     dc.b    1,2,1,3
  210 00.00010824 0001082C00010838             dc.l    optreqla100,optreqla101
  211 00.0001082C 00470000000000000000 optreqla100     dc.w    71,0,0,0,0,11
  212 00.00010838 00000000             optreqla101     dc.w    0,0
  213 00.0001083C 02010103                     dc.b    2,1,1,3
  214 00.00010840 0001084800000000             dc.l    optreqla102,0
  215 00.00010848 004700010047000B0001 optreqla102     dc.w    71,1,71,11,1,11
  216 00.00010854                      
  217 00.00010854 01000100             optreqin1       dc.b    1,0,1,0
  218 00.00010858 00540006                     dc.w    84,6
  219 00.0001085C 00000000                     dc.l    0
  220 00.00010860 0001086800010888             dc.l    optreqla31,optreqin2
  221 00.00010868 424C49545A2042415349 optreqla31      dc.b    'BLITZ BASIC 2 COMPILER OPTIONS',0
  222 00.00010888                              even
  223 00.00010888 01000100             optreqin2       dc.b    1,0,1,0
  224 00.0001088C 0014001A                     dc.w    20,26
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 338
OPTIONS.SRC


  225 00.00010890 00000000                     dc.l    0
  226 00.00010894 0001089C000108C0             dc.l    optreqla32,optreqin3
  227 00.0001089C 4372656174652049636F optreqla32      dc.b    'Create Icons for Executable Files:',0
  228 00.000108C0                              even
  229 00.000108C0 01000100             optreqin3       dc.b    1,0,1,0
  230 00.000108C4 00140026                     dc.w    20,38
  231 00.000108C8 00000000                     dc.l    0
  232 00.000108CC 000108D400010976             dc.l    optreqla33,optreqin8    ;4
  233 00.000108D4 52756E74696D65204572 optreqla33      dc.b    'Runtime Error Debugger...',0   ;'RUNTIME ERRORS:',0
  234 00.000108EE                              even
  235 00.000108EE                              ;
  236 00.000108EE 01000100             optreqin4       dc.b    1,0,1,0
  237 00.000108F2 00140026                     dc.w    20,38
  238 00.000108F6 00000000                     dc.l    0
  239 00.000108FA 000109020001090C             dc.l    optreqla34,optreqin5
  240 00.00010902 44656275676765723A00 optreqla34      dc.b    'Debugger:',0
  241 00.0001090C                              even
  242 00.0001090C 01000100             optreqin5       dc.b    1,0,1,0
  243 00.00010910 00D40026                     dc.w    212,38
  244 00.00010914 00000000                     dc.l    0
  245 00.00010918 000109200001092E             dc.l    optreqla35,optreqin6
  246 00.00010920 4C6F6E67204172726179 optreqla35      dc.b    'Long Arrays:',0
  247 00.0001092E                              even
  248 00.0001092E 01000100             optreqin6       dc.b    1,0,1,0
  249 00.00010932 00140032                     dc.w    20,50
  250 00.00010936 00000000                     dc.l    0
  251 00.0001093A 0001094200010952             dc.l    optreqla36,optreqin7
  252 00.00010942 457870616E64204D6163 optreqla36      dc.b    'Expand Macros:',0
  253 00.00010952                              even
  254 00.00010952 01000100             optreqin7       dc.b    1,0,1,0
  255 00.00010956 00D40032                     dc.w    212,50
  256 00.0001095A 00000000                     dc.l    0
  257 00.0001095E 0001096600010976             dc.l    optreqla37,optreqin8
  258 00.00010966 51756F746564204D6163 optreqla37      dc.b    'Quoted Macros:',0
  259 00.00010976                              even
  260 00.00010976                              ;
  261 00.00010976 01000100             optreqin8       dc.b    1,0,1,0
  262 00.0001097A 00140032                     dc.w    20,50   ;62
  263 00.0001097E 00000000                     dc.l    0
  264 00.00010982 0001098A0001099E             dc.l    optreqla38,optreqin9
  265 00.0001098A 4D616B6520536D616C6C optreqla38      dc.b    'Make Smallest Code:',0
  266 00.0001099E                              even
  267 00.0001099E 01000100             optreqin9       dc.b    1,0,1,0
  268 00.000109A2 0014003E                     dc.w    20,62
  269 00.000109A6 00000000                     dc.l    0
  270 00.000109AA 000109B2000109DA             dc.l    optreqla39,optreqin10
  271 00.000109B2 43726561746520446562 optreqla39      dc.b    'Create Debug Info for Executable Files:',0
  272 00.000109DA                              even
  273 00.000109DA 01000100             optreqin10      dc.b    1,0,1,0
  274 00.000109DE 0014004E                     dc.w    20,78
  275 00.000109E2 00000000                     dc.l    0
  276 00.000109E6 000109EE000109FE             dc.l    optreqla40,optreqin11
  277 00.000109EE 4F626A65637420427566 optreqla40      dc.b    'Object Buffer:',0
  278 00.000109FE                              even
  279 00.000109FE 01000100             optreqin11      dc.b    1,0,1,0
  280 00.00010A02 00D4004E                     dc.w    212,78
  281 00.00010A06 00000000                     dc.l    0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 339
OPTIONS.SRC


  282 00.00010A0A 00010A1200010A20             dc.l    optreqla41,optreqin12
  283 00.00010A12 4C696273204275666665 optreqla41      dc.b    'Libs Buffer:',0
  284 00.00010A20                              even
  285 00.00010A20 01000100             optreqin12      dc.b    1,0,1,0
  286 00.00010A24 0014005A                     dc.w    20,90
  287 00.00010A28 00000000                     dc.l    0
  288 00.00010A2C 00010A3400010A44             dc.l    optreqla42,optreqin13
  289 00.00010A34 53797374656D20427566 optreqla42      dc.b    'System Buffer:',0
  290 00.00010A44                              even
  291 00.00010A44 01000100             optreqin13      dc.b    1,0,1,0
  292 00.00010A48 00D4005A                     dc.w    212,90
  293 00.00010A4C 00000000                     dc.l    0
  294 00.00010A50 00010A5800010A66             dc.l    optreqla43,optreqin14
  295 00.00010A58 44617461204275666665 optreqla43      dc.b    'Data Buffer:',0
  296 00.00010A66                              even
  297 00.00010A66 01000100             optreqin14      dc.b    1,0,1,0
  298 00.00010A6A 00140066                     dc.w    20,102
  299 00.00010A6E 00000000                     dc.l    0
  300 00.00010A72 00010A7A00010A88             dc.l    optreqla44,optreqin15
  301 00.00010A7A 4D6163726F2042756666 optreqla44      dc.b    'Macro Buffer:',0
  302 00.00010A88                              even
  303 00.00010A88 01000100             optreqin15      dc.b    1,0,1,0
  304 00.00010A8C 00D40066                     dc.w    212,102
  305 00.00010A90 00000000                     dc.l    0
  306 00.00010A94 00010A9C00010AAC             dc.l    optreqla45,optreqin16
  307 00.00010A9C 537472696E6720427566 optreqla45      dc.b    'String Buffer:',0
  308 00.00010AAC                              even
  309 00.00010AAC 01000100             optreqin16      dc.b    1,0,1,0
  310 00.00010AB0 00340076                     dc.w    76-24,118
  311 00.00010AB4 00000000                     dc.l    0
  312 00.00010AB8 00010AC000010AD0             dc.l    optreqla46,optreqin17
  313 00.00010AC0 4F626A656374204D6178 optreqla46      dc.b    'Object Maximums',0
  314 00.00010AD0                              even
  315 00.00010AD0 01000100             optreqin17      dc.b    1,0,1,0
  316 00.00010AD4 010C0076                     dc.w    268,118
  317 00.00010AD8 00000000                     dc.l    0
  318 00.00010ADC 00010AE400000000             dc.l    optreqla47,0
  319 00.00010AE4 5265736964656E7400   optreqla47      dc.b    'Resident',0
  320 00.00010AEE                              even
  321 00.00010AEE 01000100             optreqin18      dc.b    1,0,1,0
  322 00.00010AF2 00040002                     dc.w    4,2
  323 00.00010AF6 00000000                     dc.l    0
  324 00.00010AFA 00010B0200000000             dc.l    optreqla59,0
  325 00.00010B02 202000               optreqla59      dc.b    '  ',0
  326 00.00010B06                              even
  327 00.00010B06 01000100             optreqin19      dc.b    1,0,1,0
  328 00.00010B0A 00040002                     dc.w    4,2
  329 00.00010B0E 00000000                     dc.l    0
  330 00.00010B12 00010B1A00000000             dc.l    optreqla63,0
  331 00.00010B1A 202000               optreqla63      dc.b    '  ',0
  332 00.00010B1E                              even
  333 00.00010B1E 01000100             optreqin20      dc.b    1,0,1,0
  334 00.00010B22 00040002                     dc.w    4,2
  335 00.00010B26 00000000                     dc.l    0
  336 00.00010B2A 00010B3200000000             dc.l    optreqla67,0
  337 00.00010B32 202000               optreqla67      dc.b    '  ',0
  338 00.00010B36                              even
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 340
OPTIONS.SRC


  339 00.00010B36 01000100             optreqin21      dc.b    1,0,1,0
  340 00.00010B3A 00040002                     dc.w    4,2
  341 00.00010B3E 00000000                     dc.l    0
  342 00.00010B42 00010B4A00000000             dc.l    optreqla71,0
  343 00.00010B4A 202000               optreqla71      dc.b    '  ',0
  344 00.00010B4E                              even
  345 00.00010B4E 01000100             optreqin22      dc.b    1,0,1,0
  346 00.00010B52 00040002                     dc.w    4,2
  347 00.00010B56 00000000                     dc.l    0
  348 00.00010B5A 00010B6200000000             dc.l    optreqla75,0
  349 00.00010B62 202000               optreqla75      dc.b    '  ',0
  350 00.00010B66                              even
  351 00.00010B66 01000100             optreqin23      dc.b    1,0,1,0
  352 00.00010B6A 00040002                     dc.w    4,2
  353 00.00010B6E 00000000                     dc.l    0
  354 00.00010B72 00010B7A00000000             dc.l    optreqla79,0
  355 00.00010B7A 202000               optreqla79      dc.b    '  ',0
  356 00.00010B7E                              even
  357 00.00010B7E 01000100             optreqin24      dc.b    1,0,1,0
  358 00.00010B82 00040002                     dc.w    4,2
  359 00.00010B86 00000000                     dc.l    0
  360 00.00010B8A 00010B9200000000             dc.l    optreqla83,0
  361 00.00010B92 202000               optreqla83      dc.b    '  ',0
  362 00.00010B96                              even
  363 00.00010B96 01000100             optreqin25      dc.b    1,0,1,0
  364 00.00010B9A 00040002                     dc.w    4,2
  365 00.00010B9E 00000000                     dc.l    0
  366 00.00010BA2 00010BAA00000000             dc.l    optreqla87,0
  367 00.00010BAA 202000               optreqla87      dc.b    '  ',0
  368 00.00010BAE                              even
  369 00.00010BAE 01000100             optreqin26      dc.b    1,0,1,0
  370 00.00010BB2 00040002                     dc.w    4,2
  371 00.00010BB6 00000000                     dc.l    0
  372 00.00010BBA 00010BC200000000             dc.l    optreqla91,0
  373 00.00010BC2 204F4B2000           optreqla91      dc.b    ' OK ',0
  374 00.00010BC8                              even
  375 00.00010BC8 01000100             optreqin27      dc.b    1,0,1,0
  376 00.00010BCC 00040002                     dc.w    4,2
  377 00.00010BD0 00000000                     dc.l    0
  378 00.00010BD4 00010BDC00000000             dc.l    optreqla95,0
  379 00.00010BDC 20434F4D50494C452F52 optreqla95      dc.b    ' COMPILE/RUN ',0
  380 00.00010BEA                              even
  381 00.00010BEA 01000100             optreqin28      dc.b    1,0,1,0
  382 00.00010BEE 00040002                     dc.w    4,2
  383 00.00010BF2 00000000                     dc.l    0
  384 00.00010BF6 00010BFE00000000             dc.l    optreqla99,0
  385 00.00010BFE 20435245415445204558 optreqla99      dc.b    ' CREATE EXECUTABLE ',0
  386 00.00010C12                              even
  387 00.00010C12 01000100             optreqin29      dc.b    1,0,1,0
  388 00.00010C16 00040002                     dc.w    4,2
  389 00.00010C1A 00000000                     dc.l    0
  390 00.00010C1E 00010C2600000000             dc.l    optreqla103,0
  391 00.00010C26 2043414E43454C2000   optreqla103     dc.b    ' CANCEL ',0
  392 00.00010C30                              even
  393 00.00010C30 01000100             optreqin34      dc.b    1,0,1,0
  394 00.00010C34 00000000                     dc.w    0,0
  395 00.00010C38 00000000                     dc.l    0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 341
OPTIONS.SRC


  396 00.00010C3C 00010C4400000000             dc.l    optreqla108,0
  397 00.00010C44 20202020202020202020 optreqla108     dc.b    '              ',0
  398 00.00010C54                              even
  399 00.00010C54 01000100             optreqin35      dc.b    1,0,1,0
  400 00.00010C58 00000000                     dc.w    0,0
  401 00.00010C5C 00000000                     dc.l    0
  402 00.00010C60 00010C6800000000             dc.l    optreqla109,0
  403 00.00010C68 20202020202020202020 optreqla109     dc.b    '              ',0
  404 00.00010C78                              even
  405 00.00010C78 01000100             optreqin36      dc.b    1,0,1,0
  406 00.00010C7C 00000000                     dc.w    0,0
  407 00.00010C80 00000000                     dc.l    0
  408 00.00010C84 00010C8C00000000             dc.l    optreqla110,0
  409 00.00010C8C 20202020202020202020 optreqla110     dc.b    '                     ',0
  410 00.00010CA2                              even
  411 00.00010CA2 01000100             optreqin37      dc.b    1,0,1,0
  412 00.00010CA6 00000000                     dc.w    0,0
  413 00.00010CAA 00000000                     dc.l    0
  414 00.00010CAE 00010CB600000000             dc.l    optreqla111,0
  415 00.00010CB6 20202020202020202020 optreqla111     dc.b    '                     ',0
  416 00.00010CCC                              even
  417 00.00010CCC                      
  418 00.00010CCC                      
  419 00.00010CCC 00010D28             optreqga1       dc.l    optreqga2
  420 00.00010CD0 008C004E003800080000         dc.w    140,78,56,8,0,2050,4
  421 00.00010CDE 00000000000000000000         dc.l    0,0,0,0,optreqsg1
  422 00.00010CF2 0001                         dc.w    1
  423 00.00010CF4 00000000                     dc.l    0
  424 00.00010CF8 00010D1C0000221C     optreqsg1       dc.l    optreqla48,undobuffer
  425 00.00010D00 0000000C0000                 dc.w    0,12,0
  426 00.00010D06 00000000000000000000         dc.w    0,0,0,0,0,0,0
  427 00.00010D14 0000400000000000     maxpc   dc.l    16384,0
  428 00.00010D1C 3136333834           optreqla48      dc.b    '16384'
  429 00.00010D21                              dcb.b   7,0
  430 00.00010D28                              even
  431 00.00010D28 00010D84             optreqga2       dc.l    optreqga3
  432 00.00010D2C 015C004E003800080000         dc.w    348,78,56,8,0,2050,4
  433 00.00010D3A 00000000000000000000         dc.l    0,0,0,0,optreqsg2
  434 00.00010D4E 0002                         dc.w    2
  435 00.00010D50 00000000                     dc.l    0
  436 00.00010D54 00010D780000221C     optreqsg2       dc.l    optreqla49,undobuffer
  437 00.00010D5C 0000000C0000                 dc.w    0,12,0
  438 00.00010D62 00000000000000000000         dc.w    0,0,0,0,0,0,0
  439 00.00010D70 0000800000000000     maxlib  dc.l    32768,0
  440 00.00010D78 3136333834           optreqla49      dc.b    '16384'
  441 00.00010D7D                              dcb.b   7,0
  442 00.00010D84                              even
  443 00.00010D84 00010DE0             optreqga3       dc.l    optreqga4
  444 00.00010D88 008C005A003800080000         dc.w    140,90,56,8,0,2050,4
  445 00.00010D96 00000000000000000000         dc.l    0,0,0,0,optreqsg3
  446 00.00010DAA 0003                         dc.w    3
  447 00.00010DAC 00000000                     dc.l    0
  448 00.00010DB0 00010DD40000221C     optreqsg3       dc.l    optreqla50,undobuffer
  449 00.00010DB8 0000000C0000                 dc.w    0,12,0
  450 00.00010DBE 00000000000000000000         dc.w    0,0,0,0,0,0,0
  451 00.00010DCC 0000100000000000     maxdata1        dc.l    4096,0
  452 00.00010DD4 34303936             optreqla50      dc.b    '4096'
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 342
OPTIONS.SRC


  453 00.00010DD8                              dcb.b   8,0
  454 00.00010DE0                              even
  455 00.00010DE0 00010E3C             optreqga4       dc.l    optreqga5
  456 00.00010DE4 015C005A003800080000         dc.w    348,90,56,8,0,2050,4
  457 00.00010DF2 00000000000000000000         dc.l    0,0,0,0,optreqsg4
  458 00.00010E06 0004                         dc.w    4
  459 00.00010E08 00000000                     dc.l    0
  460 00.00010E0C 00010E300000221C     optreqsg4       dc.l    optreqla51,undobuffer
  461 00.00010E14 0000000C0000                 dc.w    0,12,0
  462 00.00010E1A 00000000000000000000         dc.w    0,0,0,0,0,0,0
  463 00.00010E28 0000100000000000     maxdata2        dc.l    4096,0
  464 00.00010E30 34303936             optreqla51      dc.b    '4096'
  465 00.00010E34                              dcb.b   8,0
  466 00.00010E3C                              even
  467 00.00010E3C 00010E98             optreqga5       dc.l    optreqga6
  468 00.00010E40 008C0066003800080000         dc.w    140,102,56,8,0,2050,4
  469 00.00010E4E 00000000000000000000         dc.l    0,0,0,0,optreqsg5
  470 00.00010E62 0005                         dc.w    5
  471 00.00010E64 00000000                     dc.l    0
  472 00.00010E68 00010E8C0000221C     optreqsg5       dc.l    optreqla52,undobuffer
  473 00.00010E70 0000000C0000                 dc.w    0,12,0
  474 00.00010E76 00000000000000000000         dc.w    0,0,0,0,0,0,0
  475 00.00010E84 0000200000000000     macrolen        dc.l    8192,0
  476 00.00010E8C 38313932             optreqla52      dc.b    '8192'
  477 00.00010E90                              dcb.b   8,0
  478 00.00010E98                              even
  479 00.00010E98 00010EF4             optreqga6       dc.l    optreqga7
  480 00.00010E9C 015C0066003800080000         dc.w    348,102,56,8,0,2050,4
  481 00.00010EAA 00000000000000000000         dc.l    0,0,0,0,optreqsg6
  482 00.00010EBE 0006                         dc.w    6
  483 00.00010EC0 00000000                     dc.l    0
  484 00.00010EC4 00010EE80000221C     optreqsg6       dc.l    optreqla53,undobuffer
  485 00.00010ECC 0000000C0000                 dc.w    0,12,0
  486 00.00010ED2 00000000000000000000         dc.w    0,0,0,0,0,0,0
  487 00.00010EE0 0000280000000000     stringwork      dc.l    10240,0
  488 00.00010EE8 3130323430           optreqla53      dc.b    '10240'
  489 00.00010EED                              dcb.b   7,0
  490 00.00010EF4                              even
  491 00.00010EF4 00010F50             optreqga7       dc.l    optreqga8
  492 00.00010EF8 00840082002800080000         dc.w    132,130,40,8,0,2051,4
  493 00.00010F06 00000000000000000000         dc.l    0,0,0,0,optreqsg7
  494 00.00010F1A 0007                         dc.w    7
  495 00.00010F1C 00000000                     dc.l    0
  496 00.00010F20 00010F440000221C     optreqsg7       dc.l    optreqla54,undobuffer
  497 00.00010F28 0000000C0000                 dc.w    0,12,0
  498 00.00010F2E 00000000000000000000         dc.w    0,0,0,0,0,0,0
  499 00.00010F3C 0000006400000000             dc.l    100,0
  500 00.00010F44 313030               optreqla54      dc.b    '100'
  501 00.00010F47                              dcb.b   9,0
  502 00.00010F50                              even
  503 00.00010F50 00010FAC             optreqga8       dc.l    optreqga9
  504 00.00010F54 0084008A002800080000         dc.w    132,138,40,8,0,2051,4
  505 00.00010F62 00000000000000000000         dc.l    0,0,0,0,optreqsg8
  506 00.00010F76 0008                         dc.w    8
  507 00.00010F78 00000000                     dc.l    0
  508 00.00010F7C 00010FA00000221C     optreqsg8       dc.l    optreqla55,undobuffer
  509 00.00010F84 0000000C0000                 dc.w    0,12,0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 343
OPTIONS.SRC


  510 00.00010F8A 00000000000000000000         dc.w    0,0,0,0,0,0,0
  511 00.00010F98 0000001400000000             dc.l    20,0
  512 00.00010FA0 3230                 optreqla55      dc.b    '20'
  513 00.00010FA2                              dcb.b   10,0
  514 00.00010FAC                              even
  515 00.00010FAC                              ;
  516 00.00010FAC 00010FD8             optreqga9       dc.l    optreqga10              ;executable icons
  517 00.00010FB0 018000180018000C0080         dc.w    384,24,24,12,128,257,1  ;36 was 24
  518 00.00010FBE 000105B4000000000001         dc.l    optreqbo11,0,optreqin18,0,0
  519 00.00010FD2 0009                         dc.w    9
  520 00.00010FD4 00000000                     dc.l    0
  521 00.00010FD8 000110B4             optreqga10      dc.l    optreqga15 ;11          ;runtime errors
  522 00.00010FDC 018000240018000C0080         dc.w    384,36,24,12,128,257,1
  523 00.00010FEA 000105EC000000000001         dc.l    optreqbo12,0,optreqin19,0,0
  524 00.00010FFE 000A                         dc.w    10
  525 00.00011000 00000000                     dc.l    0
  526 00.00011004 00011030             optreqga11      dc.l    optreqga12              ;debugger
  527 00.00011008 00B000240018000C0080         dc.w    176,36,24,12,128,257,1
  528 00.00011016 00010624000000000001         dc.l    optreqbo13,0,optreqin20,0,0
  529 00.0001102A 000B                         dc.w    11
  530 00.0001102C 00000000                     dc.l    0
  531 00.00011030 0001105C             optreqga12      dc.l    optreqga13
  532 00.00011034 018000240018000C0080         dc.w    384,36,24,12,128,257,1
  533 00.00011042 0001065C000000000001         dc.l    optreqbo14,0,optreqin21,0,0
  534 00.00011056 000C                         dc.w    12
  535 00.00011058 00000000                     dc.l    0
  536 00.0001105C 00011088             optreqga13      dc.l    optreqga14
  537 00.00011060 00B000300018000C0080         dc.w    176,48,24,12,128,257,1
  538 00.0001106E 00010694000000000001         dc.l    optreqbo15,0,optreqin22,0,0
  539 00.00011082 000D                         dc.w    13
  540 00.00011084 00000000                     dc.l    0
  541 00.00011088 000110B4             optreqga14      dc.l    optreqga15
  542 00.0001108C 018000300018000C0000         dc.w    384,48,24,12,0,257,1
  543 00.0001109A 000106CC000000000001         dc.l    optreqbo16,0,optreqin23,0,0
  544 00.000110AE 000E                         dc.w    14
  545 00.000110B0 00000000                     dc.l    0
  546 00.000110B4 000110E0             optreqga15      dc.l    optreqga16                      ;make smallest
  547 00.000110B8 018000300018000C0000         dc.w    384,48,24,12,0,257,1    ;48 was 60
  548 00.000110C6 00010704000000000001         dc.l    optreqbo17,0,optreqin24,0,0
  549 00.000110DA 000F                         dc.w    15
  550 00.000110DC 00000000                     dc.l    0
  551 00.000110E0 0001110C             optreqga16      dc.l    optreqga17                      ;debug info
  552 00.000110E4 0180003C0018000C0000         dc.w    384,60,24,12,0,257,1
  553 00.000110F2 0001073C000000000001         dc.l    optreqbo18,0,optreqin25,0,0
  554 00.00011106 0010                         dc.w    16
  555 00.00011108 00000000                     dc.l    0
  556 00.0001110C 00011138             optreqga17      dc.l    optreqga18
  557 00.00011110 0008009C0028000C0000         dc.w    8,156,40,12,0,5,1
  558 00.0001111E 00010774000000000001         dc.l    optreqbo19,0,optreqin26,0,0
  559 00.00011132 0011                         dc.w    17
  560 00.00011134 00000000                     dc.l    0
  561 00.00011138 00011164             optreqga18      dc.l    optreqga19
  562 00.0001113C 0038009C0070000C0000         dc.w    56,156,112,12,0,5,1
  563 00.0001114A 000107AC000000000001         dc.l    optreqbo20,0,optreqin27,0,0
  564 00.0001115E 0012                         dc.w    18
  565 00.00011160 00000000                     dc.l    0
  566 00.00011164 00011190             optreqga19      dc.l    optreqga20
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 344
OPTIONS.SRC


  567 00.00011168 00B0009C00A0000C0000         dc.w    176,156,160,12,0,5,1
  568 00.00011176 000107E4000000000001         dc.l    optreqbo21,0,optreqin28,0,0
  569 00.0001118A 0013                         dc.w    19
  570 00.0001118C 00000000                     dc.l    0
  571 00.00011190 000111BC             optreqga20      dc.l    optreqga21
  572 00.00011194 0158009C0048000C0000         dc.w    344,156,72,12,0,5,1
  573 00.000111A2 0001081C000000000001         dc.l    optreqbo22,0,optreqin29,0,0
  574 00.000111B6 0014                         dc.w    20
  575 00.000111B8 00000000                     dc.l    0
  576 00.000111BC 000111E8             optreqga21      dc.l    optreqga22
  577 00.000111C0 00B40082001000080004         dc.w    180,130,16,8,4,1,1
  578 00.000111CE 000102EC000000000000         dc.l    upimage,0,0,0,0
  579 00.000111E2 0015                         dc.w    21
  580 00.000111E4 00000000                     dc.l    0
  581 00.000111E8 00011214             optreqga22      dc.l    optreqga23
  582 00.000111EC 00B4008A001000080004         dc.w    180,138,16,8,4,1,1
  583 00.000111FA 00010300000000000000         dc.l    downimage,0,0,0,0
  584 00.0001120E 0016                         dc.w    22
  585 00.00011210 00000000                     dc.l    0
  586 00.00011214 00011240             optreqga23      dc.l    optreqga24
  587 00.00011218 01840082001000080004         dc.w    388,130,16,8,4,1,1
  588 00.00011226 000102EC000000000000         dc.l    upimage,0,0,0,0
  589 00.0001123A 0017                         dc.w    23
  590 00.0001123C 00000000                     dc.l    0
  591 00.00011240 0001126C             optreqga24      dc.l    optreqga25
  592 00.00011244 0184008A001000080004         dc.w    388,138,16,8,4,1,1
  593 00.00011252 00010300000000000000         dc.l    downimage,0,0,0,0
  594 00.00011266 0018                         dc.w    24
  595 00.00011268 00000000                     dc.l    0
  596 00.0001126C 00011298             optreqga25      dc.l    optreqga26
  597 00.00011270 00140082007000080000         dc.w    20,130,112,8,0,1,1
  598 00.0001127E 00000000000000000001         dc.l    0,0,optreqin34,0,0
  599 00.00011292 0019                         dc.w    25
  600 00.00011294 00000000                     dc.l    0
  601 00.00011298 000112C4             optreqga26      dc.l    optreqga27
  602 00.0001129C 0014008A007000080000         dc.w    20,138,112,8,0,1,1
  603 00.000112AA 00000000000000000001         dc.l    0,0,optreqin35,0,0
  604 00.000112BE 001A                         dc.w    26
  605 00.000112C0 00000000                     dc.l    0
  606 00.000112C4 00011314             optreqga27      dc.l    optreqga28
  607 00.000112C8 00DC008200A800080000         dc.w    220,130,168,8,0,3,4
  608 00.000112D6 00000000000000000000         dc.l    0,0,0,0,optreqsgz
  609 00.000112EA 001B                         dc.w    27
  610 00.000112EC 00000000                     dc.l    0
  611 00.000112F0 000113640000221C     optreqsgz       dc.l    resbuff,undobuffer
  612 00.000112F8 000000400000                 dc.w    0,64,0
  613 00.000112FE 00000000000000000000         dc.w    0,0,0,0,0,0,0
  614 00.0001130C 0000000000000000             dc.l    0,0
  615 00.00011314 00000000             optreqga28      dc.l    0
  616 00.00011318 00DC008A00A800080000         dc.w    220,138,168,8,0,3,4
  617 00.00011326 00000000000000000000         dc.l    0,0,0,0,optreqsgy
  618 00.0001133A 001C                         dc.w    28
  619 00.0001133C 00000000                     dc.l    0
  620 00.00011340 000113A80000221C     optreqsgy       dc.l    resbuff+68,undobuffer
  621 00.00011348 000000400000                 dc.w    0,64,0
  622 00.0001134E 00000000000000000000         dc.w    0,0,0,0,0,0,0
  623 00.0001135C 0000000000000000             dc.l    0,0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 345
OPTIONS.SRC


  624 00.00011364                      
  625 00.00011364                      resbuff dcb.b   8*68,0  ;8 res max
  626 00.00011584                      
  627 00.00011584 FFFF8000818083C087E0 uparrow dc      $ffff,$8000,$8180,$83c0,$87e0,$8ff0,$8000,$8000
  628 00.00011594 00000001018103C107E1         dc      $0000,$0001,$0181,$03c1,$07e1,$0ff1,$0001,$ffff
  629 00.000115A4                      
  630 00.000115A4 FFFF80008FF087E083C0 downarrow       dc      $ffff,$8000,$8ff0,$87e0,$83c0,$8180,$8000,$8000
  631 00.000115B4 000000010FF107E103C1         dc      $0000,$0001,$0ff1,$07e1,$03c1,$0181,$0001,$7fff
  632 00.000115C4                      
  633 00.000115C4                      arrowf  ;
15734 00.000115C4                      
    0 00.000115C4                              include calcreq
    1 00.000115C4 00000000             calcreq dc.l    0
    2 00.000115C8 00640022017800540000         dc.w    100,34,376,84,0,0
    3 00.000115D4 000118A0000116340001         dc.l    calcreqga1,calcreqbo1,calcreqin1
    4 00.000115E0 0000                         dc.w    0
    5 00.000115E2 0000                         dc.b    0,0
    6 00.000115E4 00000000                     dc.l    0
    7 00.000115E8                              ds.b    32
    8 00.00011608 0000000000000000             dc.l    0,0
    9 00.00011610                              ds.b    36
   10 00.00011634                      
   11 00.00011634 00000000             calcreqbo1      dc.w    0,0
   12 00.00011638 02010103                     dc.b    2,1,1,3
   13 00.0001163C 0001164400011650             dc.l    calcreqla1,calcreqla2
   14 00.00011644 015F001C0078001C0078 calcreqla1      dc.w    351,28,120,28,120,39
   15 00.00011650 00000000             calcreqla2      dc.w    0,0
   16 00.00011654 01020103                     dc.b    1,2,1,3
   17 00.00011658 000116600001166C             dc.l    calcreqla3,calcreqbo2
   18 00.00011660 015F001D015F00270079 calcreqla3      dc.w    351,29,351,39,121,39
   19 00.0001166C 00000000             calcreqbo2      dc.w    0,0
   20 00.00011670 01020103                     dc.b    1,2,1,3
   21 00.00011674 0001167C00011688             dc.l    calcreqla4,calcreqla5
   22 00.0001167C 01670018001000180010 calcreqla4      dc.w    359,24,16,24,16,43
   23 00.00011688 00000000             calcreqla5      dc.w    0,0
   24 00.0001168C 02010103                     dc.b    2,1,1,3
   25 00.00011690 00011698000116A4             dc.l    calcreqla6,calcreqbo3
   26 00.00011698 016700190167002B0011 calcreqla6      dc.w    359,25,359,43,17,43
   27 00.000116A4 00000000             calcreqbo3      dc.w    0,0
   28 00.000116A8 01020103                     dc.b    1,2,1,3
   29 00.000116AC 000116B4000116C0             dc.l    calcreqla7,calcreqla8
   30 00.000116B4 016F0014000800140008 calcreqla7      dc.w    367,20,8,20,8,63
   31 00.000116C0 00000000             calcreqla8      dc.w    0,0
   32 00.000116C4 02010103                     dc.b    2,1,1,3
   33 00.000116C8 000116D0000116DC             dc.l    calcreqla9,calcreqbo4
   34 00.000116D0 016F0015016F003F0009 calcreqla9      dc.w    367,21,367,63,9,63
   35 00.000116DC 00000000             calcreqbo4      dc.w    0,0
   36 00.000116E0 01020103                     dc.b    1,2,1,3
   37 00.000116E4 000116EC000116F8             dc.l    calcreqla10,calcreqla11
   38 00.000116EC 01770000000000000000 calcreqla10     dc.w    375,0,0,0,0,83
   39 00.000116F8 00000000             calcreqla11     dc.w    0,0
   40 00.000116FC 02010103                     dc.b    2,1,1,3
   41 00.00011700 0001170800000000             dc.l    calcreqla12,0
   42 00.00011708 01770001017700530001 calcreqla12     dc.w    375,1,375,83,1,83
   43 00.00011714 00000000             calcreqbo5      dc.w    0,0
   44 00.00011718 01020103                     dc.b    1,2,1,3
   45 00.0001171C 0001172400011730             dc.l    calcreqla16,calcreqla17
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 346
CALCREQ


   46 00.00011724 002F0000000000000000 calcreqla16     dc.w    47,0,0,0,0,11
   47 00.00011730 00000000             calcreqla17     dc.w    0,0
   48 00.00011734 02010103                     dc.b    2,1,1,3
   49 00.00011738 0001174000000000             dc.l    calcreqla18,0
   50 00.00011740 002F0001002F000B0001 calcreqla18     dc.w    47,1,47,11,1,11
   51 00.0001174C 00000000             calcreqbo6      dc.w    0,0
   52 00.00011750 01020103                     dc.b    1,2,1,3
   53 00.00011754 0001175C00011768             dc.l    calcreqla20,calcreqla21
   54 00.0001175C 002F0000000000000000 calcreqla20     dc.w    47,0,0,0,0,11
   55 00.00011768 00000000             calcreqla21     dc.w    0,0
   56 00.0001176C 02010103                     dc.b    2,1,1,3
   57 00.00011770 0001177800000000             dc.l    calcreqla22,0
   58 00.00011778 002F0001002F000B0001 calcreqla22     dc.w    47,1,47,11,1,11
   59 00.00011784 00000000             calcreqbo7      dc.w    0,0
   60 00.00011788 01020103                     dc.b    1,2,1,3
   61 00.0001178C 00011794000117A0             dc.l    calcreqla24,calcreqla25
   62 00.00011794 002F0000000000000000 calcreqla24     dc.w    47,0,0,0,0,11
   63 00.000117A0 00000000             calcreqla25     dc.w    0,0
   64 00.000117A4 02010103                     dc.b    2,1,1,3
   65 00.000117A8 000117B000000000             dc.l    calcreqla26,0
   66 00.000117B0 002F0001002F000B0001 calcreqla26     dc.w    47,1,47,11,1,11
   67 00.000117BC 00000000             calcreqbo8      dc.w    0,0
   68 00.000117C0 01020103                     dc.b    1,2,1,3
   69 00.000117C4 000117CC000117D8             dc.l    calcreqla28,calcreqla29
   70 00.000117CC 004F0000000000000000 calcreqla28     dc.w    79,0,0,0,0,11
   71 00.000117D8 00000000             calcreqla29     dc.w    0,0
   72 00.000117DC 02010103                     dc.b    2,1,1,3
   73 00.000117E0 000117E800000000             dc.l    calcreqla30,0
   74 00.000117E8 004F0001004F000B0001 calcreqla30     dc.w    79,1,79,11,1,11
   75 00.000117F4                      
   76 00.000117F4 01000100             calcreqin1      dc.b    1,0,1,0
   77 00.000117F8 001C001E                     dc.w    28,30
   78 00.000117FC 00000000                     dc.l    0
   79 00.00011800 0001180800011814             dc.l    calcreqla13,calcreqin2
   80 00.00011808 45585052455353494F4E calcreqla13     dc.b    'EXPRESSION:',0
   81 00.00011814                              even
   82 00.00011814 01000100             calcreqin2      dc.b    1,0,1,0
   83 00.00011818 000C0006                     dc.w    12,6
   84 00.0001181C 00000000                     dc.l    0
   85 00.00011820 0001182800000000             dc.l    calcreqla14,0
   86 00.00011828 43616C63756C61746F72 calcreqla14     dc.b    'Calculator',0
   87 00.00011834                              even
   88 00.00011834 01000100             calcreqin3      dc.b    1,0,1,0
   89 00.00011838 00040002                     dc.w    4,2
   90 00.0001183C 00000000                     dc.l    0
   91 00.00011840 0001184800000000             dc.l    calcreqla19,0
   92 00.00011848 204445432000         calcreqla19     dc.b    ' DEC ',0
   93 00.0001184E                              even
   94 00.0001184E 01000100             calcreqin4      dc.b    1,0,1,0
   95 00.00011852 00040002                     dc.w    4,2
   96 00.00011856 00000000                     dc.l    0
   97 00.0001185A 0001186200000000             dc.l    calcreqla23,0
   98 00.00011862 2042494E2000         calcreqla23     dc.b    ' BIN ',0
   99 00.00011868                              even
  100 00.00011868 01000100             calcreqin5      dc.b    1,0,1,0
  101 00.0001186C 00040002                     dc.w    4,2
  102 00.00011870 00000000                     dc.l    0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 347
CALCREQ


  103 00.00011874 0001187C00000000             dc.l    calcreqla27,0
  104 00.0001187C 204845582000         calcreqla27     dc.b    ' HEX ',0
  105 00.00011882                              even
  106 00.00011882 01000100             calcreqin6      dc.b    1,0,1,0
  107 00.00011886 00040002                     dc.w    4,2
  108 00.0001188A 00000000                     dc.l    0
  109 00.0001188E 0001189600000000             dc.l    calcreqla31,0
  110 00.00011896 20425945204259452000 calcreqla31     dc.b    ' BYE BYE ',0
  111 00.000118A0                              even
  112 00.000118A0                      
  113 00.000118A0                      
  114 00.000118A0 00011970             calcreqga1      dc.l    calcreqga2
  115 00.000118A4 007C001E00E000080000         dc.w    124,30,224,8,0,1,$1004
  116 00.000118B2 00000000000000000000         dc.l    0,0,0,0,calcreqsg1
  117 00.000118C6 0001                         dc.w    1
  118 00.000118C8 00000000                     dc.l    0
  119 00.000118CC 000118F00000221C     calcreqsg1      dc.l    calcreqla15,undobuffer
  120 00.000118D4 000000800000                 dc.w    0,128,0
  121 00.000118DA 00000000000000000000         dc.w    0,0,0,0,0,0,0
  122 00.000118E8 0000000000000000             dc.l    0,0
  123 00.000118F0                      calcreqla15     dcb.b   128,0
  124 00.00011970                              even
  125 00.00011970 0001199C             calcreqga2      dc.l    calcreqga3
  126 00.00011974 001000300030000C0080         dc.w    16,48,48,12,128,257,1
  127 00.00011982 00011714000000000001         dc.l    calcreqbo5,0,calcreqin3,0,0
  128 00.00011996 0002                         dc.w    2
  129 00.00011998 00000000                     dc.l    0
  130 00.0001199C 000119C8             calcreqga3      dc.l    calcreqga4
  131 00.000119A0 013800300030000C0000         dc.w    312,48,48,12,0,257,1
  132 00.000119AE 0001174C000000000001         dc.l    calcreqbo6,0,calcreqin4,0,0
  133 00.000119C2 0003                         dc.w    3
  134 00.000119C4 00000000                     dc.l    0
  135 00.000119C8 000119F4             calcreqga4      dc.l    calcreqga5
  136 00.000119CC 00A800300030000C0000         dc.w    168,48,48,12,0,257,1
  137 00.000119DA 00011784000000000001         dc.l    calcreqbo7,0,calcreqin5,0,0
  138 00.000119EE 0004                         dc.w    4
  139 00.000119F0 00000000                     dc.l    0
  140 00.000119F4 00000000             calcreqga5      dc.l    0
  141 00.000119F8 009800440050000C0000         dc.w    152,68,80,12,0,5,1
  142 00.00011A06 000117BC000000000001         dc.l    calcreqbo8,0,calcreqin6,0,0
  143 00.00011A1A 0005                         dc.w    5
  144 00.00011A1C 00000000                     dc.l    0
15736 00.00011A20                      
15737 00.00011A20 00000000             calclibat       dc.l    0
15738 00.00011A24                      
15739 00.00011A24                      menu7   ;
15740 00.00011A24                              ;calculator
15741 00.00011A24                              ;
15742 00.00011A24 23F90000E8FA00011A20         move.l  libat,calclibat
15743 00.00011A2E 23CF00002B18                 move.l  a7,errstack
15744 00.00011A34 23FC00011C0000002B1C         move.l  #.calcerr,errcont
15745 00.00011A3E                              ;
15746 00.00011A3E 4239000118F0                 clr.b   calcreqla15
15747 00.00011A44 22790000E372                 move.l  comdata,a1
15748 00.00011A4A 2251                         move.l  (a1),a1
15749 00.00011A4C 41F9000115C4                 lea     calcreq,a0
15750 00.00011A52 4E91                         jsr     (a1)
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 348
blitz2.s


15751 00.00011A54                              ;
15752 00.00011A54 41F900011970         .loopq  lea     calcreqga2,a0
15753 00.00011A5A 7003                         moveq   #3,d0
15754 00.00011A5C 45F9000115C4                 lea     calcreq,a2
15755 00.00011A62 22790000E372                 move.l  comdata,a1
15756 00.00011A68 2269001C                     move.l  28(a1),a1
15757 00.00011A6C 4E91                         jsr     (a1)
15758 00.00011A6E                              ;
15759 00.00011A6E                      .loop   ;
15760 00.00011A6E 41F9000118A0                 lea     calcreqga1,a0
15761 00.00011A74 45F9000115C4                 lea     calcreq,a2
15762 00.00011A7A 22790000E372                 move.l  comdata,a1
15763 00.00011A80 22690044                     move.l  68(a1),a1
15764 00.00011A84 4E91                         jsr     (a1)
15765 00.00011A86 4A80                         tst.l   d0
15766 00.00011A88 6700FFE4                     beq     .loop
15767 00.00011A8C                              ;
15768 00.00011A8C 22790000E372                 move.l  comdata,a1
15769 00.00011A92 22690008                     move.l  8(a1),a1
15770 00.00011A96 4E91                         jsr     (a1)
15771 00.00011A98 BE7CFFFF                     cmp     #-1,d7
15772 00.00011A9C 6600FFD0                     bne     .loop
15773 00.00011AA0 BC7C0001                     cmp     #1,d6
15774 00.00011AA4 66000100                     bne     .notex
15775 00.00011AA8                              ;
15776 00.00011AA8                              ;calculate the expression
15777 00.00011AA8                              ;
15778 00.00011AA8 41F9000118F0                 lea     calcreqla15,a0
15779 00.00011AAE 22790000E372                 move.l  comdata,a1
15780 00.00011AB4 22690038                     move.l  56(a1),a1
15781 00.00011AB8 4E91                         jsr     (a1)    ;tokenise line.....
15782 00.00011ABA                              ;
15783 00.00011ABA 4EB900003F3C                 jsr     setcvars
15784 00.00011AC0 4EB90000457A                 jsr     setsvars
15785 00.00011AC6                              ;
15786 00.00011AC6 42790000E948                 clr     connest ;no idea...
15787 00.00011ACC                              ;
15788 00.00011ACC 4BF9000118F0                 lea     calcreqla15,a5
15789 00.00011AD2 6100A49A                     bsr     evalconst2      ;evaluate constant
15790 00.00011AD6                              ;
15791 00.00011AD6 41F9000118F0                 lea     calcreqla15,a0
15792 00.00011ADC 4A83                         tst.l   d3
15793 00.00011ADE 6A000008                     bpl     .ispos
15794 00.00011AE2 10FC002D                     move.b  #'-',(a0)+
15795 00.00011AE6 4483                         neg.l   d3
15796 00.00011AE8                      .ispos  ;
15797 00.00011AE8 0C7900800001197C             cmp     #128,calcreqga2+12
15798 00.00011AF0 67000082                     beq     .dec
15799 00.00011AF4 7200                         moveq   #0,d1
15800 00.00011AF6 0C790080000119A8             cmp     #128,calcreqga3+12
15801 00.00011AFE 66000036                     bne     .hex
15802 00.00011B02                              ;
15803 00.00011B02                              ;bin Print
15804 00.00011B02 701F                         moveq   #31,d0
15805 00.00011B04 10FC0025                     move.b  #'%',(a0)+
15806 00.00011B08 E38B                 .bloop  lsl.l   #1,d3
15807 00.00011B0A 6400000C                     bcc     .bzero
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 349
blitz2.s


15808 00.00011B0E 10FC0031                     move.b  #49,(a0)+
15809 00.00011B12 72FF                         moveq   #-1,d1
15810 00.00011B14 6000000C                     bra     .bnext
15811 00.00011B18 4A41                 .bzero  tst     d1
15812 00.00011B1A 67000006                     beq     .bnext
15813 00.00011B1E 10FC0030                     move.b  #48,(a0)+
15814 00.00011B22 51C8FFE4             .bnext  dbf     d0,.bloop
15815 00.00011B26 4A41                 .bdone  tst     d1
15816 00.00011B28 66000006                     bne     .pc1
15817 00.00011B2C 10FC0030                     move.b  #48,(a0)+
15818 00.00011B30 4210                 .pc1    clr.b   (a0)
15819 00.00011B32 60000048                     bra     .pc
15820 00.00011B36                              ;
15821 00.00011B36                      .hex    ;
15822 00.00011B36 7007                         moveq   #7,d0
15823 00.00011B38 10FC0024                     move.b  #'$',(a0)+
15824 00.00011B3C 2403                 .hloop  move.l  d3,d2
15825 00.00011B3E 4842                         swap    d2
15826 00.00011B40 E04A                         lsr     #8,d2
15827 00.00011B42 E84A                         lsr     #4,d2
15828 00.00011B44 06420030                     add     #48,d2
15829 00.00011B48 B47C003A                     cmp     #58,d2
15830 00.00011B4C 65000004                     bcs     .hok
15831 00.00011B50 5E42                         addq    #7,d2
15832 00.00011B52 B47C0030             .hok    cmp     #48,d2
15833 00.00011B56 6700000A                     beq     .hzero
15834 00.00011B5A 10C2                         move.b  d2,(a0)+
15835 00.00011B5C 72FF                         moveq   #-1,d1
15836 00.00011B5E 6000000A                     bra     .hnext
15837 00.00011B62 4A41                 .hzero  tst     d1
15838 00.00011B64 67000004                     beq     .hnext
15839 00.00011B68 10C2                         move.b  d2,(a0)+
15840 00.00011B6A E98B                 .hnext  lsl.l   #4,d3
15841 00.00011B6C 51C8FFCE                     dbf     d0,.hloop
15842 00.00011B70 6000FFB4                     bra     .bdone
15843 00.00011B74                              ;
15844 00.00011B74 2403                 .dec    move.l  d3,d2
15845 00.00011B76 4EB9000053DC                 jsr     makelong        ;to long...
15846 00.00011B7C                              ;
15847 00.00011B7C 4279000118D4         .pc     clr     calcreqsg1+8
15848 00.00011B82 4279000118D8                 clr     calcreqsg1+12
15849 00.00011B88                              ;
15850 00.00011B88 22790000E372                 move.l  comdata,a1
15851 00.00011B8E 2269001C                     move.l  28(a1),a1
15852 00.00011B92 41F9000118A0                 lea     calcreqga1,a0
15853 00.00011B98 45F9000115C4                 lea     calcreq,a2
15854 00.00011B9E 7001                         moveq   #1,d0
15855 00.00011BA0 4E91                         jsr     (a1)
15856 00.00011BA2                              ;
15857 00.00011BA2 6000FECA                     bra     .loop
15858 00.00011BA6                              ;
15859 00.00011BA6 BC7C0005             .notex  cmp     #5,d6
15860 00.00011BAA 6400004E                     bcc     .notbase
15861 00.00011BAE                              ;
15862 00.00011BAE                              ;new number base selected
15863 00.00011BAE                              ;
15864 00.00011BAE 5546                         subq    #2,d6
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 350
blitz2.s


15865 00.00011BB0 CCFC002C                     mulu    #calcreqga3-calcreqga2,d6
15866 00.00011BB4 3F06                         move    d6,-(a7)
15867 00.00011BB6 41F900011970                 lea     calcreqga2,a0
15868 00.00011BBC 4270600C                     clr     12(a0,d6)
15869 00.00011BC0                              ;
15870 00.00011BC0 41F900011970                 lea     calcreqga2,a0
15871 00.00011BC6 7002                         moveq   #2,d0
15872 00.00011BC8                              ;
15873 00.00011BC8 0C680080000C         .loopz  cmp     #128,12(a0)
15874 00.00011BCE 67000014                     beq     .thisone
15875 00.00011BD2 41E8002C                     lea     calcreqga3-calcreqga2(a0),a0
15876 00.00011BD6 5240                         addq    #1,d0
15877 00.00011BD8 B07C0005                     cmp     #5,d0
15878 00.00011BDC 6500FFEA                     bcs     .loopz
15879 00.00011BE0 60000006                     bra     .loopz2
15880 00.00011BE4                      .thisone        ;
15881 00.00011BE4 4268000C                     clr     12(a0)
15882 00.00011BE8 3C1F                 .loopz2 move    (a7)+,d6
15883 00.00011BEA 41F900011970                 lea     calcreqga2,a0
15884 00.00011BF0 31BC0080600C                 move    #128,12(a0,d6)
15885 00.00011BF6                              ;
15886 00.00011BF6 6000FE5C                     bra     .loopq
15887 00.00011BFA                              
15888 00.00011BFA 6600FE72             .notbase        bne     .loop
15889 00.00011BFE 4E75                         rts
15890 00.00011C00                      
15891 00.00011C00 23F900011A200000E8FA .calcerr        move.l  calclibat,libat
15892 00.00011C0A 4239000118F0                 clr.b   calcreqla15
15893 00.00011C10 6000FF6A                     bra     .pc
15894 00.00011C14                      
15895 00.00011C14 00000000             argreq  dc.l    0
15896 00.00011C18 0034002A019800380000         dc.w    52,42,408,56,0,0
15897 00.00011C24 00011DC000011C840001         dc.l    argreqga1,argreqbo1,argreqin1
15898 00.00011C30 0000                         dc.w    0
15899 00.00011C32 0000                         dc.b    0,0
15900 00.00011C34 00000000                     dc.l    0
15901 00.00011C38                              ds.b    32
15902 00.00011C58 0000000000000000             dc.l    0,0
15903 00.00011C60                              ds.b    36
15904 00.00011C84                      
15905 00.00011C84 00000000             argreqbo1       dc.w    0,0
15906 00.00011C88 02010103                     dc.b    2,1,1,3
15907 00.00011C8C 00011C9400011CA0             dc.l    argreqla1,argreqla2
15908 00.00011C94 018F0014000800140008 argreqla1       dc.w    399,20,8,20,8,31
15909 00.00011CA0 00000000             argreqla2       dc.w    0,0
15910 00.00011CA4 01020103                     dc.b    1,2,1,3
15911 00.00011CA8 00011CB000011CBC             dc.l    argreqla3,argreqbo2
15912 00.00011CB0 018F0015018F001F0009 argreqla3       dc.w    399,21,399,31,9,31
15913 00.00011CBC 00000000             argreqbo2       dc.w    0,0
15914 00.00011CC0 01020103                     dc.b    1,2,1,3
15915 00.00011CC4 00011CCC00011CD8             dc.l    argreqla4,argreqla5
15916 00.00011CCC 01970000000000000000 argreqla4       dc.w    407,0,0,0,0,55
15917 00.00011CD8 00000000             argreqla5       dc.w    0,0
15918 00.00011CDC 02010103                     dc.b    2,1,1,3
15919 00.00011CE0 00011CE800000000             dc.l    argreqla6,0
15920 00.00011CE8 01970001019700370001 argreqla6       dc.w    407,1,407,55,1,55
15921 00.00011CF4 00000000             argreqbo3       dc.w    0,0
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 351
blitz2.s


15922 00.00011CF8 01020103                     dc.b    1,2,1,3
15923 00.00011CFC 00011D0400011D10             dc.l    argreqla9,argreqla10
15924 00.00011D04 00270000000000000000 argreqla9       dc.w    39,0,0,0,0,11
15925 00.00011D10 00000000             argreqla10      dc.w    0,0
15926 00.00011D14 02010103                     dc.b    2,1,1,3
15927 00.00011D18 00011D2000000000             dc.l    argreqla11,0
15928 00.00011D20 002700010027000B0001 argreqla11      dc.w    39,1,39,11,1,11
15929 00.00011D2C 00000000             argreqbo4       dc.w    0,0
15930 00.00011D30 01020103                     dc.b    1,2,1,3
15931 00.00011D34 00011D3C00011D48             dc.l    argreqla13,argreqla14
15932 00.00011D3C 00470000000000000000 argreqla13      dc.w    71,0,0,0,0,11
15933 00.00011D48 00000000             argreqla14      dc.w    0,0
15934 00.00011D4C 02010103                     dc.b    2,1,1,3
15935 00.00011D50 00011D5800000000             dc.l    argreqla15,0
15936 00.00011D58 004700010047000B0001 argreqla15      dc.w    71,1,71,11,1,11
15937 00.00011D64                      
15938 00.00011D64 01000100             argreqin1       dc.b    1,0,1,0
15939 00.00011D68 000C0006                     dc.w    12,6
15940 00.00011D6C 00000000                     dc.l    0
15941 00.00011D70 00011D7800000000             dc.l    argreqla7,0
15942 00.00011D78 434C492041726775656D argreqla7       dc.b    'CLI Arguement:',0
15943 00.00011D88                              even
15944 00.00011D88 01000100             argreqin2       dc.b    1,0,1,0
15945 00.00011D8C 00040002                     dc.w    4,2
15946 00.00011D90 00000000                     dc.l    0
15947 00.00011D94 00011D9C00000000             dc.l    argreqla12,0
15948 00.00011D9C 204F4B2000           argreqla12      dc.b    ' OK ',0
15949 00.00011DA2                              even
15950 00.00011DA2 01000100             argreqin3       dc.b    1,0,1,0
15951 00.00011DA6 00040002                     dc.w    4,2
15952 00.00011DAA 00000000                     dc.l    0
15953 00.00011DAE 00011DB600000000             dc.l    argreqla16,0
15954 00.00011DB6 2043414E43454C2000   argreqla16      dc.b    ' CANCEL ',0
15955 00.00011DC0                              even
15956 00.00011DC0                      
15957 00.00011DC0 00011E90             argreqga1       dc.l    argreqga2       ;string gadget
15958 00.00011DC4 000C0016018000080000         dc.w    12,22,384,8,0,5,4
15959 00.00011DD2 00000000000000000000         dc.l    0,0,0,0,argreqsg1
15960 00.00011DE6 0001                         dc.w    1
15961 00.00011DE8 00000000                     dc.l    0
15962 00.00011DEC 00011E100000221C     argreqsg1       dc.l    argreqla8,undobuffer
15963 00.00011DF4 000000800000                 dc.w    0,128,0
15964 00.00011DFA 00000000000000000000         dc.w    0,0,0,0,0,0,0
15965 00.00011E08 0000000000000000             dc.l    0,0
15966 00.00011E10                      argreqla8       dcb.b   128,0
15967 00.00011E90                              even
15968 00.00011E90 00011EBC             argreqga2       dc.l    argreqga3       ;OK!
15969 00.00011E94 000800280028000C0000         dc.w    8,40,40,12,0,5,1
15970 00.00011EA2 00011CF4000000000001         dc.l    argreqbo3,0,argreqin2,0,0
15971 00.00011EB6 0002                         dc.w    2
15972 00.00011EB8 00000000                     dc.l    0
15973 00.00011EBC 00000000             argreqga3       dc.l    0       :CANCEL!
15974 00.00011EC0 014800280048000C0000         dc.w    328,40,72,12,0,5,1
15975 00.00011ECE 00011D2C000000000001         dc.l    argreqbo4,0,argreqin3,0,0
15976 00.00011EE2 0003                         dc.w    3
15977 00.00011EE4 00000000                     dc.l    0
15978 00.00011EE8                      
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 352
blitz2.s


15979 00.00011EE8                      menu9   ;CLI ARGUEMENT
15980 00.00011EE8                              ;
15981 00.00011EE8 41FACD7E                     lea     namebuff(pc),a0
15982 00.00011EEC 43FAFF22                     lea     argreqla8(pc),a1
15983 00.00011EF0 701F                         moveq   #128/4-1,d0
15984 00.00011EF2 20D9                 .loop0  move.l  (a1)+,(a0)+
15985 00.00011EF4 51C8FFFC                     dbf     d0,.loop0
15986 00.00011EF8                              ;
15987 00.00011EF8 22790000E372                 move.l  comdata,a1
15988 00.00011EFE 2251                         move.l  (a1),a1
15989 00.00011F00 41F900011C14                 lea     argreq,a0
15990 00.00011F06 4E91                         jsr     (a1)
15991 00.00011F08                              ;
15992 00.00011F08 41F900011DC0                 lea     argreqga1,a0
15993 00.00011F0E 45F900011C14                 lea     argreq,a2
15994 00.00011F14 22790000E372                 move.l  comdata,a1
15995 00.00011F1A 22690044                     move.l  68(a1),a1
15996 00.00011F1E 4E91                         jsr     (a1)
15997 00.00011F20                              ;
15998 00.00011F20 22790000E372         .loop   move.l  comdata,a1
15999 00.00011F26 22690008                     move.l  8(a1),a1
16000 00.00011F2A 4E91                         jsr     (a1)
16001 00.00011F2C BE7CFFFF                     cmp     #-1,d7
16002 00.00011F30 6600FFEE                     bne     .loop
16003 00.00011F34 BC7C0001                     cmp     #1,d6
16004 00.00011F38 67000022                     beq     .ok
16005 00.00011F3C BC7C0002                     cmp     #2,d6
16006 00.00011F40 6700001A                     beq     .ok
16007 00.00011F44 BC7C0003                     cmp     #3,d6
16008 00.00011F48 6600FFD6                     bne     .loop
16009 00.00011F4C                              ;cancel
16010 00.00011F4C 41FACD1A                     lea     namebuff(pc),a0
16011 00.00011F50 43FAFEBE                     lea     argreqla8(pc),a1
16012 00.00011F54 701F                         moveq   #128/4-1,d0
16013 00.00011F56 22D8                 .loop2  move.l  (a0)+,(a1)+
16014 00.00011F58 51C8FFFC                     dbf     d0,.loop2
16015 00.00011F5C 4E75                 .ok     rts

	GLOBAL SYMBOLS

FFFFFE20     A  ABORTIO
00000100     A  ABSL
00000080     A  ABSW
FFFFFE32     A  ACTIVATEGADGET
FFFFFE3E     A  ACTIVATEWINDOW
FFFFFF64     A  ADDANIMOB
FFFFFFA0     A  ADDBOB
FFFFFE50     A  ADDDEVICE
FFFFFE20     A  ADDFONT
FFFFFFD6     A  ADDGADGET
FFFFFE4A     A  ADDGLIST
FFFFFF10     A  ADDHEAD
FFFFFF58     A  ADDINTSERVER
FFFFFE74     A  ADDLIBRARY
FFFFFD96     A  ADDMEMLIST
FFFFFE9E     A  ADDPORT
FFFFFE1A     A  ADDRESOURCE
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 353
, 
. 
0


FFFFFDA8     A  ADDSEMAPHORE
FFFFFF0A     A  ADDTAIL
FFFFFEE6     A  ADDTASK
FFFFFF9A     A  ADDVSPRITE
FFFFFF94     A  ALERT
00000FFF     A  ALL
FFFFFF34     A  ALLOCABS
FFFFFF46     A  ALLOCATE
FFFFFF22     A  ALLOCENTRY
FFFFFF3A     A  ALLOCMEM
FFFFFE14     A  ALLOCRASTER
FFFFFE74     A  ALLOCREMEMBER
FFFFFEB6     A  ALLOCSIGNAL
0000CF01     A  ALLOCST
FFFFFEAA     A  ALLOCTRAP
0000FFFE     A  ALLOCVARS
FFFFFE6E     A  ALOHAWORKBENCH
0000C500     A  ALSTAT
00000002     A  AN
FFFFFE08     A  ANDRECTREGION
FFFFFD90     A  ANDREGIONREGION
FFFFFF5E     A  ANIMATE
00000008     A  ANP
FFFFFEFE     A  AREADRAW
FFFFFF46     A  AREAELLIPSE
FFFFFEF8     A  AREAEND
FFFFFF04     A  AREAMOVE
0000C30F     A  ARRCHK
0000C309     A  ARRERR
0000C402     A  ARRMULT
FFFFFE26     A  ASKFONT
FFFFFFAC     A  ASKSOFTSTYLE
0000C701     A  ASTRING
FFFFFD72     A  ATTEMPTLOCKLAYERROM
FFFFFDC0     A  ATTEMPTSEMAPHORE
FFFFFEA4     A  AUTOREQUEST
FFFFFF28     A  AVAILMEM
FFFFFE9E     A  BEGINREFRESH
FFFFFFE2     A  BLTBITMAP
FFFFFDA2     A  BLTBITMAPRASTPORT
FFFFFED4     A  BLTCLEAR
FFFFFD84     A  BLTMASKBITMAPRASTPORT
FFFFFEC8     A  BLTPATTERN
FFFFFFDC     A  BLTTEMPLATE
FFFFFE98     A  BUILDSYSREQUEST
00000FF0     A  BYTE
00000F10     A  BYTEWORD
0000C314     A  CASECHKL
0000C313     A  CASECHKW
0000CE01     A  CASESTRCOMP
FFFFFF4C     A  CAUSE
FFFFFE92     A  CBUMP
00001000     A  CCR
FFFFFE5C     A  CHANGESPRITE
FFFFFE2C     A  CHECKIO
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 354
, 
. 
0


0000C305     A  CHKRET
FFFFFFD0     A  CLEARDMREQUEST
FFFFFFD6     A  CLEAREOL
FFFFFFCA     A  CLEARMENUSTRIP
FFFFFFC4     A  CLEARPOINTER
FFFFFDF6     A  CLEARRECTREGION
FFFFFDF0     A  CLEARREGION
FFFFFFD0     A  CLEARSCREEN
FFFFFDD8     A  CLIPBLIT
FFFFFFDC     A  CLOSE
FFFFFE3E     A  CLOSEDEVICE
FFFFFFB2     A  CLOSEFONT
FFFFFE62     A  CLOSELIBRARY
FFFFFFBE     A  CLOSESCREEN
FFFFFFB8     A  CLOSEWINDOW
FFFFFFB2     A  CLOSEWORKBENCH
0000D202     A  CLRERR
0000C101     A  CLRINT
0000CC00     A  CLRLOC
FFFFFE8C     A  CMOVE
0000C304     A  CONTJMP
0000C600     A  COPSTRING
FFFFFD90     A  COPYMEM
FFFFFD8A     A  COPYMEMQUICK
FFFFFE3E     A  COPYSBITMAP
FFFFFF88     A  CREATEDIR
FFFFFF76     A  CREATEPROC
00000000     A  CRIPPLE
0000C315     A  CURRENTCHK
FFFFFF82     A  CURRENTDIR
FFFFFFAC     A  CURRENTTIME
FFFFFE86     A  CWAIT
00000020     A  DAN
00000040     A  DANXI
0000C310     A  DATACHK
FFFFFF40     A  DATESTAMP
FFFFFF40     A  DEALLOCATE
FFFFFF8E     A  DEBUG
0000FA3C     A  DEBUGLIB
FFFFFF3A     A  DELAY
FFFFFFB8     A  DELETEFILE
00000000     A  DEMO
FFFFFF52     A  DEVICEPROC
00000001     A  DHANDLERLIB
FFFFFF88     A  DISABLE
0000C204     A  DISOWNBLIT
FFFFFE32     A  DISOWNBLITTER
FFFFFFC4     A  DISPATCH
FFFFFFA6     A  DISPLAYALERT
FFFFFFA0     A  DISPLAYBEEP
FFFFFDEA     A  DISPOSEREGION
00000001     A  DN
FFFFFF94     A  DOCOLLISION
FFFFFE38     A  DOIO
FFFFFF9A     A  DOUBLECLICK
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 355
, 
. 
0


00000200     A  DPC
00000400     A  DPCXI
FFFFFF0A     A  DRAW
FFFFFF94     A  DRAWBORDER
FFFFFF4C     A  DRAWELLIPSE
FFFFFF8E     A  DRAWGLIST
FFFFFF8E     A  DRAWIMAGE
FFFFFFA0     A  DUPLOCK
FFFFFF82     A  ENABLE
0000C800     A  ENDJMP
FFFFFE92     A  ENDREFRESH
FFFFFF88     A  ENDREQUEST
FFFFFEF2     A  ENQUEUE
0000D200     A  ERN
0000D205     A  ERRFAIL
0000C30D     A  ESCHK
FFFFFF9A     A  EXAMINE
FFFFFFBE     A  EXCEPTION
FFFFFF22     A  EXECUTE
FFFFFF70     A  EXIT
FFFFFFDC     A  EXITINTR
FFFFFF94     A  EXNEXT
FFFFFFFF     A  FINAL
0000C300     A  FINALSCHECK
FFFFFEEC     A  FINDNAME
FFFFFE7A     A  FINDPORT
FFFFFFA0     A  FINDRESIDENT
FFFFFDAE     A  FINDSEMAPHORE
FFFFFEDA     A  FINDTASK
FFFFFEB6     A  FLOOD
0000D301     A  FLTOQU
0000003C     A  FNUM
FFFFFF7C     A  FORBID
FFFFFDC0     A  FREECOLORMAP
FFFFFDDE     A  FREECOPLIST
FFFFFDCC     A  FREECPRLIST
FFFFFF1C     A  FREEENTRY
FFFFFDA8     A  FREEGBUFFERS
0000C005     A  FREELAST
FFFFFF2E     A  FREEMEM
FFFFFE0E     A  FREERASTER
FFFFFE68     A  FREEREMEMBER
FFFFFEB0     A  FREESIGNAL
FFFFFE62     A  FREESPRITE
0000CF02     A  FREEST
FFFFFE8C     A  FREESYSREQUEST
FFFFFEA4     A  FREETRAP
FFFFFDE4     A  FREEVPORTCOPLISTS
0000C31A     A  FTOBOVER
0000C31C     A  FTOLOVER
0000C31B     A  FTOWOVER
FFFFFDF0     A  GETCC
FFFFFDC6     A  GETCOLORMAP
FFFFFF82     A  GETDEFPREFS
0000CD00     A  GETDSTART
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 356
, 
. 
0


0000C900     A  GETFFPBASE
FFFFFF58     A  GETGBUFFERS
FFFFFE8C     A  GETMSG
FFFFFF5E     A  GETPACKET
FFFFFF7C     A  GETPREFS
FFFFFDBA     A  GETRGB4
FFFFFE56     A  GETSCREENDATA
FFFFFE68     A  GETSPRITE
0000C002     A  GLOBALLOC
0000C003     A  GLOBFREE
0000C201     A  GOAMIGA
0000C200     A  GOBLITZ
0000C202     A  GOQAMIGA
0000C30B     A  GOSUP
0000C30C     A  GOUSE
FFFFFD7E     A  GRAPHICSRESERVED1
FFFFFD78     A  GRAPHICSRESERVED2
00000004     A  IAN
00000008     A  IFMACMAX
00000800     A  IMM
0000C312     A  INAMIGA
0000C311     A  INBLITZ
00000400     A  INCLEN
FFFFFF8E     A  INFO
FFFFFEE6     A  INITAREA
FFFFFE7A     A  INITBITMAP
FFFFFFB8     A  INITCODE
FFFFFF88     A  INITGELS
FFFFFF52     A  INITGMASKS
FFFFFF82     A  INITMASKS
FFFFFF3A     A  INITRASTPORT
FFFFFF76     A  INITREQUESTER
FFFFFF9A     A  INITRESIDENT
FFFFFDD2     A  INITSEMAPHORE
FFFFFFB2     A  INITSTRUCT
FFFFFE2C     A  INITTMPRAS
FFFFFE98     A  INITVIEW
FFFFFF34     A  INITVPORT
FFFFFFCA     A  INPUT
FFFFFF16     A  INSERT
0000C105     A  INTCLEANUP
0000C107     A  INTGOAMIGA
0000C106     A  INTGOBLITZ
FFFFFEB6     A  INTUITEXTLENGTH
FFFFFFDC     A  INTUITION
0000C104     A  INTVWAIT
FFFFFF7C     A  IOERR
FFFFFF28     A  ISINTERACTIVE
FFFFFF70     A  ITEMADDRESS
0000C700     A  LASTRING
0000D001     A  LMAXLEN
0000003C     A  LNUM
0000C307     A  LNXTCHK
FFFFFF40     A  LOADRGB4
FFFFFF6A     A  LOADSEG
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 357
, 
. 
0


FFFFFF22     A  LOADVIEW
0000C000     A  LOCALLOC
0000C501     A  LOCALSTAT
0000C001     A  LOCFREE
FFFFFFAC     A  LOCK
FFFFFE62     A  LOCKIBASE
FFFFFE50     A  LOCKLAYERROM
00000027     A  LOCLABCH
000002FF     A  LONG
0000CB01     A  LONGDIV
0000CA01     A  LONGMULT
0000C316     A  LTOBOVER
0000C318     A  LTOWOVER
FFFFFFA6     A  MAKEFUNCTIONS
FFFFFFAC     A  MAKELIBRARY
FFFFFE86     A  MAKESCREEN
FFFFFF28     A  MAKEVPORT
000000C0     A  MATHQ
0000C30A     A  MAXERR
0000D000     A  MAXLEN
00000008     A  MAXMACROS
00008000     A  MEM
0000D400     A  MODBYTE
0000D404     A  MODFLOAT
FFFFFF6A     A  MODIFYIDCMP
FFFFFF64     A  MODIFYPROP
0000D402     A  MODLONG
0000D403     A  MODQUICK
0000D401     A  MODWORD
00000008     A  MOSTRES
FFFFFF10     A  MOVE
FFFFFF5E     A  MOVESCREEN
FFFFFE56     A  MOVESPRITE
FFFFFF58     A  MOVEWINDOW
FFFFFF2E     A  MRGCOP
0000FEFF     A  NABSL
0000FF7F     A  NABSW
00000000     A  NALL
0000FFFD     A  NAN
0000FFF7     A  NANP
0000EFFF     A  NCCR
0000FFDF     A  NDAN
0000FFBF     A  NDANXI
0000FFFE     A  NDN
0000FDFF     A  NDPC
0000FBFF     A  NDPCXI
0000C400     A  NEWARR
0000C102     A  NEWINT
0000C401     A  NEWLOCARR
0000C004     A  NEWMEM
FFFFFE2C     A  NEWMODIFYPROP
FFFFFDFC     A  NEWREGION
0000FFFB     A  NIAN
0000F7FF     A  NIMM
00007FFF     A  NMEM
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 358
, 
. 
0


00000FFF     A  NOSZ
0000FFEF     A  NPAN
0000DFFF     A  NSR
00000003     A  NUMCLIBS
0000BFFF     A  NUSP
FFFFFDCC     A  OBTAINSEMAPHORE
FFFFFDBA     A  OBTAINSEMAPHORELIST
FFFFFF52     A  OFFGADGET
FFFFFF4C     A  OFFMENU
0000C103     A  OLDINT
FFFFFE68     A  OLDOPENLIBRARY
FFFFFF46     A  ONGADGET
FFFFFF40     A  ONMENU
FFFFFFE2     A  OPEN
FFFFFE44     A  OPENDEVICE
FFFFFFB8     A  OPENFONT
FFFFFFE2     A  OPENINTUITION
FFFFFDD8     A  OPENLIBRARY
FFFFFE0E     A  OPENRESOURCE
FFFFFF3A     A  OPENSCREEN
FFFFFF34     A  OPENWINDOW
FFFFFF2E     A  OPENWORKBENCH
FFFFFE02     A  ORRECTREGION
FFFFFD9C     A  ORREGIONREGION
FFFFFFC4     A  OUTPUT
0000C203     A  OWNBLIT
FFFFFE38     A  OWNBLITTER
00000010     A  PAN
FFFFFF2E     A  PARENTDIR
FFFFFF76     A  PERMIT
FFFFFEB0     A  POLYDRAW
FFFFFF28     A  PRINTITEXT
FFFFFDE4     A  PROCURE
FFFFFE92     A  PUTMSG
FFFFFEEC     A  QBLIT
FFFFFEDA     A  QBSBLIT
0000C319     A  QTOBOVER
FFFFFF58     A  QUEUEPACKET
0000CB00     A  QUICKDIV
0000CA00     A  QUICKMULT
0000D300     A  QUTOFL
FFFFFDF6     A  RAWDOFMT
FFFFFE08     A  RAWIOINIT
FFFFFE02     A  RAWMAYGETCHAR
FFFFFDFC     A  RAWPUTCHAR
FFFFFFD6     A  READ
FFFFFEC2     A  READPIXEL
FFFFFECE     A  RECTFILL
FFFFFF22     A  REFRESHGADGETS
FFFFFE50     A  REFRESHGLIST
FFFFFE38     A  REFRESHWINDOWFRAME
FFFFFFFF     A  RELEASE
FFFFFDC6     A  RELEASESEMAPHORE
FFFFFDB4     A  RELEASESEMAPHORELIST
FFFFFE80     A  REMAKEDISPLAY
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 359
, 
. 
0


FFFFFE4A     A  REMDEVICE
FFFFFE1A     A  REMFONT
FFFFFEFE     A  REMHEAD
FFFFFF7C     A  REMIBOB
FFFFFF52     A  REMINTSERVER
FFFFFE6E     A  REMLIBRARY
0000C301     A  REMLINE
FFFFFF04     A  REMOVE
FFFFFF1C     A  REMOVEGADGET
FFFFFE44     A  REMOVEGLIST
FFFFFE98     A  REMPORT
FFFFFE14     A  REMRESOURCE
FFFFFDA2     A  REMSEMAPHORE
FFFFFEF8     A  REMTAIL
FFFFFEE0     A  REMTASK
FFFFFF76     A  REMVSPRITE
FFFFFFB2     A  RENAME
FFFFFE86     A  REPLYMSG
FFFFFF16     A  REPORTMOUSE
FFFFFF10     A  REQUEST
FFFFFFD0     A  RESCHEDULE
FFFFFE7A     A  RETHINKDISPLAY
0000FA32     A  RUNDEBUGLIB
0000FFDC     A  RUNERRLIB
0000C30E     A  SACHK
00000210     A  SALL
FFFFFFD6     A  SCHEDULE
FFFFFF0A     A  SCREENTOBACK
FFFFFF04     A  SCREENTOFRONT
FFFFFE74     A  SCROLLRASTER
FFFFFDB4     A  SCROLLVPORT
FFFFFFBE     A  SEEK
FFFFFE32     A  SENDIO
FFFFFEAA     A  SETAPEN
FFFFFEA4     A  SETBPEN
FFFFFF70     A  SETCOLLISION
FFFFFF4C     A  SETCOMMENT
FFFFFEFE     A  SETDMREQUEST
FFFFFE9E     A  SETDRMD
0000D201     A  SETERR
FFFFFEC8     A  SETEXCEPT
FFFFFFBE     A  SETFONT
FFFFFE5C     A  SETFUNCTION
0000C100     A  SETINT
FFFFFF5E     A  SETINTVECTOR
0000CF00     A  SETMAXS
FFFFFEF8     A  SETMENUSTRIP
FFFFFEF2     A  SETPOINTER
FFFFFEBC     A  SETPREFS
FFFFFF46     A  SETPROTECTION
FFFFFF16     A  SETRAST
FFFFFEE0     A  SETRGB4
FFFFFD8A     A  SETRGB4CM
FFFFFECE     A  SETSIGNAL
FFFFFFA6     A  SETSOFTSTYLE
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 360
, 
. 
0


FFFFFF70     A  SETSR
FFFFFED4     A  SETTASKPRI
FFFFFEEC     A  SETWINDOWTITLES
FFFFFEE6     A  SHOWTITLE
FFFFFEBC     A  SIGNAL
FFFFFEE0     A  SIZEWINDOW
0000C306     A  SNXTCHK
FFFFFF6A     A  SORTGLIST
00002000     A  SR
0000C308     A  STCHK
0000CE00     A  STRCOMP
FFFFFD9C     A  SUMKICKDATA
FFFFFE56     A  SUMLIBRARY
FFFFFF6A     A  SUPERSTATE
FFFFFFE2     A  SUPERVISOR
FFFFFFCA     A  SWITCH
FFFFFE44     A  SYNCSBITMAP
FFFFFFC4     A  TEXT
FFFFFFCA     A  TEXTLENGTH
000000B3     A  TNUM
00000005     A  TVER
00000009     A  TVER2
FFFFFDEA     A  TYPEOFMEM
FFFFFDAE     A  UCOPPERLISTINIT
FFFFFF64     A  UNLOADSEG
FFFFFFA6     A  UNLOCK
FFFFFE5C     A  UNLOCKIBASE
FFFFFE4A     A  UNLOCKLAYERROM
00007F80     A  USERAND
FFFFFF64     A  USERSTATE
00004000     A  USP
FFFFFDDE     A  VACATE
FFFFFE80     A  VBEAMPOS
00000100     A  VCODELEN
000000C3     A  VERSION
FFFFFEDA     A  VIEWADDRESS
FFFFFED4     A  VIEWPORTADDRESS
FFFFFEC2     A  WAIT
FFFFFF1C     A  WAITBLIT
FFFFFE6E     A  WAITBOVP
FFFFFF34     A  WAITFORCHAR
FFFFFE26     A  WAITIO
FFFFFE80     A  WAITPORT
FFFFFEF2     A  WAITTOF
FFFFFEB0     A  WBENCHTOBACK
FFFFFEAA     A  WBENCHTOFRONT
0000BF00     A  WBSTART
FFFFFEC2     A  WINDOWLIMITS
FFFFFECE     A  WINDOWTOBACK
FFFFFEC8     A  WINDOWTOFRONT
00000F1F     A  WORD
0000010F     A  WORDLONG
0000C601     A  WORKSTART
FFFFFFD0     A  WRITE
FFFFFEBC     A  WRITEPIXEL
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 361
, 
. 
0


0000C317     A  WTOBOVER
FFFFFDD2     A  XORRECTREGION
FFFFFD96     A  XORREGIONREGION

	MODULE BLITZ2.S	

00002A38  00.R  A2TOA7
00002A3A  00.R  A7TOA2
00001E0A  00.R  ABCDCHK
000035FA  00.R  ACIDLIBS
00006FC2  00.R  ACIDLIBSAT
000035EA  00.R  ACIDNAME
00002D08  00.R  ACTUALBEGIN
0000E0E6  00.R  ADD1A2
00002ADA  00.R  ADDA0A0
00001E1E  00.R  ADDCHK
00002A8A  00.R  ADDCODE
00002A8E  00.R  ADDCODEF
00009004  00.R  ADDD0A0
0000EC5C  00.R  ADDED
00008C44  00.R  ADDHERE
00008C3A  00.R  ADDHERE2
0000791C  00.R  ADDOFF
00007932  00.R  ADDOFF2
00002A22  00.R  ADDQ4A2
00002AEA  00.R  ADDQA0
0000A998  00.R  ADDRCODE
0000A9A0  00.R  ADDRCODEF
00002AF0  00.R  ADDREGA2
0000E7AA  00.R  ADDRESSTYPE
0000A0F4  00.R  ADDSTRINGS
0000AFDE  00.R  AFUNCTION
000085BC  00.R  ALCONSTERR
00007322  00.R  ALIGNA0
0000732C  00.R  ALIGNA1
0000E0C8  00.R  ALIGNLETPC
0000C880  00.R  ALIGNPC
000087DC  00.R  ALINCERR
0000E902  00.R  ALLAT
0000FD8C  00.R  ALLCHG
00002B2C  00.R  ALLLOCALS
0000EF80  00.R  ALLOFEM
000052AA  00.R  ALLOXADJ
0000526E  00.R  ALLOXINC
0000E760  00.R  ALLTYPES
00007F8E  00.R  AMIGAERR
0000AC1A  00.R  AMIGALIB
0000A90E  00.R  AMPERSAND
0000A916  00.R  AMPERSAND2
00001E34  00.R  ANDICHK
0000E84C  00.R  ANYERRS
00011C14  00.R  ARGREQ
00011C84  00.R  ARGREQBO1
00011CBC  00.R  ARGREQBO2
00011CF4  00.R  ARGREQBO3
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 362
, 
. 
0


00011D2C  00.R  ARGREQBO4
00011DC0  00.R  ARGREQGA1
00011E90  00.R  ARGREQGA2
00011EBC  00.R  ARGREQGA3
00011D64  00.R  ARGREQIN1
00011D88  00.R  ARGREQIN2
00011DA2  00.R  ARGREQIN3
00011C94  00.R  ARGREQLA1
00011D10  00.R  ARGREQLA10
00011D20  00.R  ARGREQLA11
00011D9C  00.R  ARGREQLA12
00011D3C  00.R  ARGREQLA13
00011D48  00.R  ARGREQLA14
00011D58  00.R  ARGREQLA15
00011DB6  00.R  ARGREQLA16
00011CA0  00.R  ARGREQLA2
00011CB0  00.R  ARGREQLA3
00011CCC  00.R  ARGREQLA4
00011CD8  00.R  ARGREQLA5
00011CE8  00.R  ARGREQLA6
00011D78  00.R  ARGREQLA7
00011E10  00.R  ARGREQLA8
00011D04  00.R  ARGREQLA9
00011DEC  00.R  ARGREQSG1
00008550  00.R  ARRALDIMERR
00009048  00.R  ARRCHK2
00009052  00.R  ARRCHK3
0000904C  00.R  ARRCHKF
00007D1C  00.R  ARRERR1
00009952  00.R  ARREVAL
00009914  00.R  ARREVALCHK
00009104  00.R  ARRMUL1
00009106  00.R  ARRMUL2
00009108  00.R  ARRMUL3
0000910C  00.R  ARRMUL4
00009110  00.R  ARRMUL5
00009112  00.R  ARRMUL6
00009114  00.R  ARRMUL7
00009116  00.R  ARRMUL8
0000858E  00.R  ARRNOTDIMD
000115C4  00.R  ARROWF
00009922  00.R  ARRSZCHK
00001DA4  00.R  ASLCHK
00001DA8  00.R  ASLCHK2
0000E928  00.R  ASMBUFF
00006062  00.R  ASMCONST
000081DC  00.R  ASMERR
000081D6  00.R  ASMERR2
00006410  00.R  ASMFIXER
0000612C  00.R  ASMIT
0000E92C  00.R  ASMLEN
0000E92E  00.R  ASMLEN2
000063F2  00.R  ASMOFF
0000253A  00.R  ASMPNTS
0000E926  00.R  ASMSIZE
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 363
, 
. 
0


0000E920  00.R  ASMTYPE
00002B98  00.R  ATOKENS
00002D08  00.R  ATOKENSEND
00008AC4  00.R  BADCONERR
000080FC  00.R  BADCONTERR
00008A80  00.R  BADDATERR
00008148  00.R  BADDIRERR
000086BA  00.R  BADENDERR
000089C4  00.R  BADFORERR
00008AE4  00.R  BADPENDERR
00007C78  00.R  BADSTOPERR
00009988  00.R  BAKEVAL
00009974  00.R  BAKEVALU
00009968  00.R  BAKPEVAL
0000995C  00.R  BAKPEVALU
00007C44  00.R  BAKUP
0000694E  00.R  BASEADD
00002D08  00.R  BEGIN
000028DA  00.R  BEGINARR
000089F6  00.R  BIGFORERR
000086A2  00.R  BIGIFERR
0000959E  00.R  BIGPC
0000A314  00.R  BITCHG
00001D6C  00.R  BITCHK
0000A30C  00.R  BITCLR
0000A300  00.R  BITSET
0000A2D8  00.R  BITTST
00007F6C  00.R  BLITZERR
00006FC6  00.R  BLITZLIBSAT
0000BCF2  00.R  BLITZMODE
0000BCF0  00.R  BLITZOFF
00003936  00.R  BMAPMUL
00003938  00.R  BOTLINE
0000A410  00.R  BRACKET
000094B6  00.R  BRCHKCODE
000094B2  00.R  BRCHKCODE0
0000E916  00.R  BUFF1
0000E91A  00.R  BUFF2
00009600  00.R  BYTETOF2
000095FC  00.R  BYTETOFLOAT
000095CA  00.R  BYTETOLONG
000095DC  00.R  BYTETOQUICK
000095C8  00.R  BYTETOWORD
0000E764  00.R  BYTETYPE
00011A20  00.R  CALCLIBAT
0000434A  00.R  CALCMAXS
000115C4  00.R  CALCREQ
00011634  00.R  CALCREQBO1
0001166C  00.R  CALCREQBO2
000116A4  00.R  CALCREQBO3
000116DC  00.R  CALCREQBO4
00011714  00.R  CALCREQBO5
0001174C  00.R  CALCREQBO6
00011784  00.R  CALCREQBO7
000117BC  00.R  CALCREQBO8
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 364
, 
. 
0


000118A0  00.R  CALCREQGA1
00011970  00.R  CALCREQGA2
0001199C  00.R  CALCREQGA3
000119C8  00.R  CALCREQGA4
000119F4  00.R  CALCREQGA5
000117F4  00.R  CALCREQIN1
00011814  00.R  CALCREQIN2
00011834  00.R  CALCREQIN3
0001184E  00.R  CALCREQIN4
00011868  00.R  CALCREQIN5
00011882  00.R  CALCREQIN6
00011644  00.R  CALCREQLA1
000116EC  00.R  CALCREQLA10
000116F8  00.R  CALCREQLA11
00011708  00.R  CALCREQLA12
00011808  00.R  CALCREQLA13
00011828  00.R  CALCREQLA14
000118F0  00.R  CALCREQLA15
00011724  00.R  CALCREQLA16
00011730  00.R  CALCREQLA17
00011740  00.R  CALCREQLA18
00011848  00.R  CALCREQLA19
00011650  00.R  CALCREQLA2
0001175C  00.R  CALCREQLA20
00011768  00.R  CALCREQLA21
00011778  00.R  CALCREQLA22
00011862  00.R  CALCREQLA23
00011794  00.R  CALCREQLA24
000117A0  00.R  CALCREQLA25
000117B0  00.R  CALCREQLA26
0001187C  00.R  CALCREQLA27
000117CC  00.R  CALCREQLA28
000117D8  00.R  CALCREQLA29
00011660  00.R  CALCREQLA3
000117E8  00.R  CALCREQLA30
00011896  00.R  CALCREQLA31
0001167C  00.R  CALCREQLA4
00011688  00.R  CALCREQLA5
00011698  00.R  CALCREQLA6
000116B4  00.R  CALCREQLA7
000116C0  00.R  CALCREQLA8
000116D0  00.R  CALCREQLA9
000118CC  00.R  CALCREQSG1
00007484  00.R  CALCSTATIC
0000748A  00.R  CALCSTATIC2
00009122  00.R  CALCVAR
00009122  00.R  CALCVAR2
0000356A  00.R  CALCVBR
0000CE5E  00.R  CASECHK
00007F0E  00.R  CASEERR
00007EEC  00.R  CBRAERR
00009886  00.R  CEOS
0000E32E  00.R  CFETCHMODE
00009F36  00.R  CFREGAT
00004E80  00.R  CGOAMIGA
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 365
, 
. 
0


00004E7A  00.R  CGOBLITZ
000059A0  00.R  CHECKCLASH
00003612  00.R  CHECKLIB
0000A878  00.R  CHKBIN
000065C4  00.R  CHKBYTE
0000A850  00.R  CHKHEX
00004440  00.R  CHKREALSTOP
0000BA86  00.R  CHKSTAK
0000446A  00.R  CHKSTOP
000065DA  00.R  CHKWORD
0000433A  00.R  CHXERR4
00002B68  00.R  CIFBRAS
0000C4F6  00.R  CIFDO
0000C4F4  00.R  CIFDONT
0000C4C8  00.R  CIFEQ
0000C4F0  00.R  CIFGE
0000C4E8  00.R  CIFGT
0000C4E0  00.R  CIFLE
00007B9E  00.R  CIFLINEAT
0000C4D8  00.R  CIFLT
0000C4D0  00.R  CIFNE
00008096  00.R  CLASHERR
00003378  00.R  CLOSEED
0000C120  00.R  CLOSEINC
00003EDC  00.R  CLRREQ
0000CEF8  00.R  CLRST
000079AC  00.R  CMAKE
000079A8  00.R  CMAKEA5
000079AE  00.R  CMAKEBAK
00007990  00.R  CMAKEBUFF
00009EA0  00.R  CMP0
00009EA2  00.R  CMP1
00009EA4  00.R  CMP2
0000A020  00.R  CMPIT
00008AAC  00.R  CNFERR
00009914  00.R  CODEISOK
0000CCA8  00.R  COLLIF
0000E372  00.R  COMDATA
0000877E  00.R  COMERR
0000EC0E  00.R  COMFLAG
0000E9E2  00.R  COMMODE
0000C4B4  00.R  COMPARE
00008B00  00.R  COMPERROR
0000377C  00.R  COMPILE
0000400C  00.R  COMPILING
0000E99C  00.R  CONCOMSP
0000E95C  00.R  CONCOMSTACK
000087B6  00.R  CONINTYPE
0000805C  00.R  CONMEMERR
0000E948  00.R  CONNEST
0000E33A  00.R  CONSTLIBAT
0000E330  00.R  CONSTLIBS
0000E33E  00.R  CONSTMAXPC
0000E91E  00.R  CONSTMODE
0000B478  00.R  CONSTOTYPE
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 366
, 
. 
0


0000E336  00.R  CONSTPCAT
0000B480  00.R  CONSTTYPE2
0000449C  00.R  CONT_PC
000044A0  00.R  CONT_PC2
0000E376  00.R  CONVTABLE
00009782  00.R  CONVTYPE
00009770  00.R  CONVTYPEF
0000CB7E  00.R  COOLNEST
000060B0  00.R  COPYCONST
00005794  00.R  COUNTEM
0000EDF6  00.R  COUNTLIST
000066F6  00.R  COUNTPEES
0000A078  00.R  CPOKE
000043FA  00.R  CREATELAB
0000BAE2  00.R  CUTEJSR
0000E844  00.R  DARK
0000E8EE  00.R  DATA1
0000E8EA  00.R  DATA1AT
0000E8E6  00.R  DATA2
0000E8E2  00.R  DATA2AT
00002902  00.R  DATAGET
00002916  00.R  DATALETB
00002922  00.R  DATALETB2
00002926  00.R  DATALETB2F
0000291C  00.R  DATALETBF
0000291C  00.R  DATALETBL
00002922  00.R  DATALETBLF
00002930  00.R  DATALETL
00002926  00.R  DATALETW
00002906  00.R  DATAPUT
0000C890  00.R  DATASIZE
000074E2  00.R  DATASTART
0000400A  00.R  DEBUGGA
00004E84  00.R  DEBUGMODE
00002EDC  00.R  DEBUGNAME
000044B0  00.R  DEBUGSTUFF
0000B0F4  00.R  DECA3
00007EB2  00.R  DEFAERR
0000E848  00.R  DEFAULTTYPE
000035E6  00.R  DEFLIBS
00006FBE  00.R  DEFLIBSAT
000035D6  00.R  DEFNAME
0000B3DA  00.R  DFETCH
00002AD2  00.R  DIMAF
00002AD4  00.R  DIMAFF
0001030A  00.R  DIMAGELOC
00002ACE  00.R  DIMB4
00002AD2  00.R  DIMB4F
00002AC8  00.R  DIMBEGIN
00002ACE  00.R  DIMBEGINF
00002AD4  00.R  DIMFIN
00002AD8  00.R  DIMFINF
0000E1D0  00.R  DIMWIT
0000E362  00.R  DIRA4
0000E366  00.R  DIRA5
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 367
, 
. 
0


0000E36A  00.R  DIRA6
000051C6  00.R  DIRCONT
00005100  00.R  DIRECTDO
000050E0  00.R  DIRECTTRAP
000051B0  00.R  DIREXIT
0000811E  00.R  DIRLIBERR
0000E834  00.R  DIRMODE
0000E360  00.R  DIROPT
0000E35C  00.R  DIRPCAT
0000E36E  00.R  DIRSTACK
000053B4  00.R  DIVISORS
0000314A  00.R  DLOADERR
0000301C  00.R  DNAME
000030DC  00.R  DNAME2
0000AA8C  00.R  DOADDR
0000BBC6  00.R  DOAJSR
0000BBD4  00.R  DOAJSR2
0000BB98  00.R  DOAJSRROUT
00004B6C  00.R  DOALLOCMEM
00004ED0  00.R  DOAMIGA
0000A228  00.R  DOANDB
0000A238  00.R  DOANDL
0000A230  00.R  DOANDW
000028E6  00.R  DOARR
000028EE  00.R  DOARRF
0000A290  00.R  DOASRB
0000A290  00.R  DOASRL
0000A290  00.R  DOASRW
0000A304  00.R  DOBITMIP
00004DF4  00.R  DOBLIBJSR
00004E94  00.R  DOBLITZ
0000CE7C  00.R  DOCASE
0000C46E  00.R  DOCERR
00009F38  00.R  DOCFLIB
00009F70  00.R  DOCFLIB2
00003364  00.R  DOCLOSEED
00004F40  00.R  DOCLRERR
00004F16  00.R  DOCLRINT
0000C47E  00.R  DOCNIF
0000D9AE  00.R  DOCONT
0000C492  00.R  DOCSIF
0000C8AA  00.R  DODATA
0000C7B6  00.R  DODC
0000C726  00.R  DODCB
0000C726  00.R  DODCB2
0000CDDE  00.R  DODEFAULT
0000C28A  00.R  DODEFTYPE
0000E0EE  00.R  DODIM
0000E0FC  00.R  DODIM2
0000A1E6  00.R  DODIVB
0000A220  00.R  DODIVF
0000A210  00.R  DODIVL
0000A218  00.R  DODIVQ
0000A1FA  00.R  DODIVW
0000C780  00.R  DODS
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 368
, 
. 
0


0000657C  00.R  DOEA
0000C43C  00.R  DOELSE
0000C438  00.R  DOELSE2
0000D832  00.R  DOEND
0000D82E  00.R  DOEND2
0000D810  00.R  DOENDIF
0000D7B8  00.R  DOENDIF2
0000D79E  00.R  DOENDIF3
0000CD68  00.R  DOENDSEL
00004F48  00.R  DOENDSETERR
0000A25C  00.R  DOEOR2
0000A258  00.R  DOEORB
0000A278  00.R  DOEORL
0000A270  00.R  DOEORW
00009EA6  00.R  DOEQB
0000A038  00.R  DOEQCMP
0000A034  00.R  DOEQCMP2
00009F84  00.R  DOEQF
00009F06  00.R  DOEQL
00009FD8  00.R  DOEQS
00009ED6  00.R  DOEQW
0000A98C  00.R  DOERN
00004F6E  00.R  DOERRFAIL
0000C880  00.R  DOEVEN
0000C860  00.R  DOEVEN4
0000C870  00.R  DOEVEN8
00004AD4  00.R  DOEXCHANGE
0000A0C4  00.R  DOFLIB
0000DCFC  00.R  DOFOR
0000CFB4  00.R  DOFOREVER
0000C3E6  00.R  DOFREE
0000D2EE  00.R  DOFUNC
0000D304  00.R  DOFUNC2
00009ECE  00.R  DOGEB
0000A074  00.R  DOGECMP
0000A070  00.R  DOGECMP2
00009FCA  00.R  DOGEF
00009F2E  00.R  DOGEL
0000A014  00.R  DOGES
00009EFE  00.R  DOGEW
0000D21C  00.R  DOGOSUB
0000D240  00.R  DOGOTO
0000D246  00.R  DOGOTO2
00009EC6  00.R  DOGTB
0000A068  00.R  DOGTCMP
0000A064  00.R  DOGTCMP2
00009FBC  00.R  DOGTF
00009F26  00.R  DOGTL
0000A008  00.R  DOGTS
00009EF6  00.R  DOGTW
0000D04A  00.R  DOIF
0000D04E  00.R  DOIF2
0000D04C  00.R  DOIFM
0000CB18  00.R  DOINC2
0000CA6E  00.R  DOINCBIN
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 369
, 
. 
0


0000C038  00.R  DOINCDIR
0000CB0A  00.R  DOINCLUDE
00009EBE  00.R  DOLEB
0000A05C  00.R  DOLECMP
0000A058  00.R  DOLECMP2
00009FAE  00.R  DOLEF
00009F1E  00.R  DOLEL
00009FFC  00.R  DOLES
0000DE9C  00.R  DOLET
0000DEA6  00.R  DOLET2
00009EEE  00.R  DOLEW
00004DD4  00.R  DOLIBJSR
00004878  00.R  DOLIBTOKE
000043AC  00.R  DOLINE
0000A280  00.R  DOLSLB
0000A280  00.R  DOLSLL
0000A280  00.R  DOLSLW
0000A288  00.R  DOLSRB
0000A288  00.R  DOLSRL
0000A288  00.R  DOLSRW
00009EB6  00.R  DOLTB
0000A050  00.R  DOLTCMP
0000A04C  00.R  DOLTCMP2
00009FA0  00.R  DOLTF
00009F16  00.R  DOLTL
00009FF0  00.R  DOLTS
00009EE6  00.R  DOLTW
0000CB82  00.R  DOMACRO
0000AA7A  00.R  DOMAXIMUM
0000C2E6  00.R  DOMAXLEN
0000A116  00.R  DOMINUSB
0000A12E  00.R  DOMINUSF
0000A126  00.R  DOMINUSL
0000A11E  00.R  DOMINUSW
0000A1B2  00.R  DOMODB
0000A1D8  00.R  DOMODF
0000A1C2  00.R  DOMODL
0000A1CE  00.R  DOMODQ
0000A1BA  00.R  DOMODW
0000D5E8  00.R  DOMWAIT
0000A156  00.R  DOMYLIB
00009EAE  00.R  DONEB
0000A044  00.R  DONECMP
0000A040  00.R  DONECMP2
00009F92  00.R  DONEF
00009F0E  00.R  DONEL
00009FE4  00.R  DONES
00009EDE  00.R  DONEW
0000D5F8  00.R  DONEWTYPE
0000DBB2  00.R  DONEXT
0000336E  00.R  DONOCLI
00003482  00.R  DONTRUN
0000D16E  00.R  DOONGO
00009CD0  00.R  DOOP
0000A240  00.R  DOORB
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 370
, 
. 
0


0000A250  00.R  DOORL
0000A248  00.R  DOORW
00004092  00.R  DOPASS
0000A0AC  00.R  DOPLUS2
0000A090  00.R  DOPLUSB
0000A0C0  00.R  DOPLUSF
0000A0A8  00.R  DOPLUSL
0000A09A  00.R  DOPLUSW
00004B82  00.R  DOPOP
0000A17E  00.R  DOPOW
0000986E  00.R  DOPULLA3
00009856  00.R  DOPUSHA3
00005C40  00.R  DOPUTREG
00004ED8  00.R  DOQAMIGA
0000C57C  00.R  DOREAD
00004D10  00.R  DOREPEAT
0000C526  00.R  DORESTORE
0000D2B8  00.R  DORETURN
00004A18  00.R  DORUNERRSOFF
00004A08  00.R  DORUNERRSON
00000154  00.R  DOS
0000CEFC  00.R  DOSELECT
00004F76  00.R  DOSETERR
00004FE2  00.R  DOSETINT
00005CD6  00.R  DOSETREG
0000C9CC  00.R  DOSHARED
0000012C  00.R  DOSOPEN
0000D2E0  00.R  DOSTATE
000045D2  00.R  DOSTATEMENT
0000D992  00.R  DOSTOP
00004E14  00.R  DOSYSJSR
0000A31C  00.R  DOTHEBIT
0000B2E6  00.R  DOTHEE
0000D100  00.R  DOTHEN
0000A136  00.R  DOTIMESB
0000A176  00.R  DOTIMESF
0000A152  00.R  DOTIMESL
0000A14A  00.R  DOTIMESQ
0000A140  00.R  DOTIMESW
00004E28  00.R  DOTOKEJSR
0000CCF0  00.R  DOUNLESS
00005C30  00.R  DOUNMOVE
0000CFE4  00.R  DOUNTIL
0000C40C  00.R  DOUSE
0000A9EC  00.R  DOUSED
00004AA0  00.R  DOUSEPATH
00004E56  00.R  DOVWAIT
00004B78  00.R  DOWBSTARTUP
0000D800  00.R  DOWEND
0000D804  00.R  DOWEND2
0000CCF6  00.R  DOWHILE
000115A4  00.R  DOWNARROW
00010300  00.R  DOWNIMAGE
0000CA54  00.R  DOXINCLUDE
00002F54  00.R  DPATH
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 371
, 
. 
0


0000DB5C  00.R  DROPLOCALS
00002EF0  00.R  DSEG
00002F3E  00.R  DTEXT
0000E906  00.R  DUMMYASM
0000E7C6  00.R  DUMMYTYPE
0000863E  00.R  DUPLABERR
00008876  00.R  DUPLOCERR
000086D8  00.R  DUPMACERR
000080C6  00.R  DUPOFFERR
00008858  00.R  DUPPROCERR
000089A8  00.R  DUPSHERR
00004496  00.R  D_BIGPC
0000449A  00.R  D_NOMEMLEFT
00004492  00.R  D_PC
00001BFA  00.R  EAERROR
0000085E  00.R  EDSTRUCT
00002ABC  00.R  ENDARRAY
00004D44  00.R  ENDININFO
0000421A  00.R  ENDJMPAT
0000EC32  00.R  ENDOP
0000CD66  00.R  ENDSEL
0000CDD4  00.R  ENDSELSTR
0000CDDC  00.R  ENDSELSTRF
0000CDDE  00.R  ENDSELSTRF2
0000D9E8  00.R  ENDSTATE
00003F10  00.R  ENDSTOP
00004216  00.R  EOPCODE
0000D25E  00.R  EOS
00008B00  00.R  ERR
00004298  00.R  ERRCHX
0000424E  00.R  ERRCHX2
00004F3C  00.R  ERRCODE
00002B1C  00.R  ERRCONT
00007E2C  00.R  ERRERR1
00007E52  00.R  ERRERR2
00007E68  00.R  ERRERR3
00004F38  00.R  ERRJMP
00007C78  00.R  ERRS
00002B18  00.R  ERRSTACK
00007ECE  00.R  ESELERR
0000998C  00.R  EVAL
00009C24  00.R  EVAL2
00009AD2  00.R  EVAL3
00009AE2  00.R  EVAL4
00009AFA  00.R  EVAL5
0000BF6A  00.R  EVALCONST
0000BF6E  00.R  EVALCONST2
0000BF6E  00.R  EVALCONST3
00009978  00.R  EVALU
00009980  00.R  EVALU2
00007D00  00.R  EXCERR
00007CDC  00.R  EXCERR2
00004B36  00.R  EXCGET
0000751C  00.R  EXECERR
0000330A  00.R  EXECNAME
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 372
, 
. 
0


0000401E  00.R  EXECUTING
00002A30  00.R  EXGA4A5
00001D42  00.R  EXGCHK
00003A3A  00.R  EXPANDMAX
00008952  00.R  EXTLABERR
0000E922  00.R  EXTRAWORD
0000E924  00.R  EXTRAWORD2
00008AFE  00.R  EZERR
0000EE18  00.R  F1
0000EE1C  00.R  F2
0000EE1E  00.R  F3
0000B35A  00.R  FACTS
00002EC6  00.R  FAIL0
00002EA4  00.R  FAIL1
00002EA4  00.R  FAIL1A
00002E96  00.R  FAIL2
00002E7E  00.R  FAIL2A
00002E82  00.R  FAIL2B
00002E70  00.R  FAIL3
00002EB8  00.R  FAILME
00006A08  00.R  FBASE
00009604  00.R  FDO2
0000AF22  00.R  FETCHASM
0000A8C0  00.R  FETCHBIN
0000A8EA  00.R  FETCHCONST
0000B1D8  00.R  FETCHDATA
0000B3A6  00.R  FETCHDEC
0000B21E  00.R  FETCHFRAC
0000A886  00.R  FETCHHEX
0000A9A0  00.R  FETCHIT
00006772  00.R  FETCHLIBPS
0000B224  00.R  FETCHNUM
0000B46E  00.R  FETCHNUM2
0000B3DC  00.R  FETCHNUM3
0000A846  00.R  FETCHOFF
0000A83C  00.R  FETCHON
000067F6  00.R  FETCHPEES
000067F0  00.R  FETCHPEES2
000067F2  00.R  FETCHPEES3
000067EA  00.R  FETCHPEES4
0000A44E  00.R  FETCHPI
0000B268  00.R  FETCHPOINT
0000B272  00.R  FETCHPOINT2
0000AF00  00.R  FETCHQASM
0000BCF4  00.R  FETCHREGS
0000A7C2  00.R  FETCHSIZE
00008E3C  00.R  FETCHVAR
00007310  00.R  FFPLIB
0000CDFC  00.R  FILLBNE
0000CE26  00.R  FILLBRA
00008CB2  00.R  FINDADD
00008C9A  00.R  FINDCONST
00008CD0  00.R  FINDFOR
0000B926  00.R  FINDHILIB
00008C82  00.R  FINDINC
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 373
, 
. 
0


00003CC6  00.R  FINDIT
00008CDE  00.R  FINDLAB
00008C2A  00.R  FINDLAST
00006F38  00.R  FINDLIB
00006F1A  00.R  FINDLIBNOERR
0000B956  00.R  FINDLOLIB
00008CA6  00.R  FINDMAC
00008CC4  00.R  FINDPROC
00006F56  00.R  FINDTOKE
00008CBE  00.R  FINDTYPE
00008CDC  00.R  FINDVAR
00008C8E  00.R  FINDXINC
0000E930  00.R  FIRSTASM
0000E94A  00.R  FIRSTCONST
0000E9A8  00.R  FIRSTFOR
00002B34  00.R  FIRSTGLOB
00002B44  00.R  FIRSTIF
0000EC1E  00.R  FIRSTINC
00002B3C  00.R  FIRSTITEM
0000EC36  00.R  FIRSTLABEL
0000EC44  00.R  FIRSTLIB
00002B30  00.R  FIRSTLOCAL
0000EC2E  00.R  FIRSTMACRO
0000EC56  00.R  FIRSTOFF
0000E8DE  00.R  FIRSTPEND
0000EC08  00.R  FIRSTPROC
00004D0A  00.R  FIRSTREP
0000CD4A  00.R  FIRSTSEL
0000E7B8  00.R  FIRSTTYPE
00002B28  00.R  FIRSTVAR
0000EC1A  00.R  FIRSTXINC
00002A16  00.R  FIX1
00005A32  00.R  FIXCONSTS
00006C76  00.R  FIXJSRS
000071FC  00.R  FIXLIBS
000029E6  00.R  FIXLIBST
00005A62  00.R  FIXMACS
00002A14  00.R  FIXQ
00002A10  00.R  FIXSTACK
00005A9E  00.R  FIXTYPES
0000EC5A  00.R  FLAGMASK
0000359C  00.R  FLASH
000035B0  00.R  FLASH2
0000971E  00.R  FLOATTOBYTE
00009742  00.R  FLOATTOLONG
0000974A  00.R  FLOATTOLONG2
00009754  00.R  FLOATTOQUICK
00009730  00.R  FLOATTOWORD
0000E79C  00.R  FLOATTYPE
0000337C  00.R  FLUSHC
000035C6  00.R  FLUSHLIBS
0000296E  00.R  FORCOMPB
00002982  00.R  FORCOMPBF
000029AA  00.R  FORCOMPF
000029C0  00.R  FORCOMPF2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 374
, 
. 
0


000029C4  00.R  FORCOMPF2F
000029C0  00.R  FORCOMPFF
00002996  00.R  FORCOMPL
000029AA  00.R  FORCOMPLF
00002982  00.R  FORCOMPW
00002996  00.R  FORCOMPWF
0000DCF8  00.R  FORLINEAT
00007CBC  00.R  FORNEXTERR
0000DCF0  00.R  FORSET
0000DCFA  00.R  FORTEMP
0000A6B0  00.R  FORTHSP
0000A470  00.R  FORTHSTACK
000083BA  00.R  FPCONERR
00008DC8  00.R  FPND2
0000390A  00.R  FRALLTYPES
00003918  00.R  FRALLVARS
0000C3DC  00.R  FREE
000052F6  00.R  FREEALLOX
000073FC  00.R  FREEASMS
00007338  00.R  FREEBLITZLIBS
000038DC  00.R  FREEEMUP
000081C4  00.R  FREEERR
0000C3E2  00.R  FREEF
0000D9BC  00.R  FREEFORS
00003928  00.R  FREEIFS
0000C188  00.R  FREEINCS
00008D6A  00.R  FREELABELS
00007370  00.R  FREELIBS
0000CD12  00.R  FREELIST
000073C0  00.R  FREEMACS
0000BA76  00.R  FREEMAX
0000BA7A  00.R  FREEMAX2
0000BA82  00.R  FREEMAX3
0000BA80  00.R  FREEMAX4
00003CA4  00.R  FREEMBUFF
00008DB8  00.R  FREEPENDS
00008DE0  00.R  FREEPROCS
00008D16  00.R  FREEPROCVS
0000CCFE  00.R  FREEREPS
000059DA  00.R  FREERES
00005A10  00.R  FREERES2
0000CD0A  00.R  FREESELS
0000CD10  00.R  FREESLIST
0000D81C  00.R  FREETHEIFZ
00006DF2  00.R  FREETLIST
00008E0C  00.R  FREETYPES
00008D4A  00.R  FREEVARS
00008D4A  00.R  FREEVARS2
0000C15C  00.R  FREEXINCS
00003752  00.R  FRLIBSLIST
000000D2  00.R  FROMCLI
0000EE20  00.R  FUCKOFF
0000AD80  00.R  FUCKPOS
0000D2A4  00.R  FUNCRET
0000377A  00.R  FUNCS
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 375
, 
. 
0


00002A1E  00.R  FUNCST
0000AAF2  00.R  FUNCTION
0000891C  00.R  FUNCTYPEERR
00008E7E  00.R  FVARADD
00008E5E  00.R  FVARBACK
00008FA8  00.R  FVARFOUND
00008F4E  00.R  FVARLOCAL
00004E78  00.R  FVWAIT
0000D12C  00.R  GC1LABS
0000D128  00.R  GC1SKIP
0000D14A  00.R  GC2LABS
0000D146  00.R  GC2SKIP
0000D16C  00.R  GC3LABS
0000D168  00.R  GC3SKIP
00007C14  00.R  GCHAR2
00002A96  00.R  GETA2
00002AAC  00.R  GETA3
00002AB0  00.R  GETA3F
00005D3E  00.R  GETAN
00005D46  00.R  GETAN2
00005D4E  00.R  GETAN3
00006A10  00.R  GETAP
0000BCBC  00.R  GETBBASE
00007A2E  00.R  GETCHAR
00007BD6  00.R  GETCHAR2
00007C0E  00.R  GETCHAR3
00007BA0  00.R  GETCHARB
00005DC2  00.R  GETEA
00002ADE  00.R  GETEBASE
00002AE2  00.R  GETEBASEF
0000A386  00.R  GETELEMENT
0000A6B4  00.R  GETELEMENT2
00005C04  00.R  GETIMM
0000C340  00.R  GETMAXEL
00005D6A  00.R  GETMOVEM
00005D68  00.R  GETMOVEM2
00005D1E  00.R  GETREG
00005D22  00.R  GETREG2
00005FD4  00.R  GETREST
0000B322  00.R  GETSIGN
0000C6F0  00.R  GETSIZE2
0000C23A  00.R  GETSP
0000C242  00.R  GETSP2
00002A0A  00.R  GETSTLEN
00004D7C  00.R  GETTOKEPS
000097A8  00.R  GETVNAME
0000D162  00.R  GOSET
00004478  00.R  GOSTOP
00002A42  00.R  GOSUBCODE
00002A3C  00.R  GOTOCODE
00007BEE  00.R  GS
000068EC  00.R  HANDLEARR
0000460C  00.R  HANDLEASCII
000045DE  00.R  HANDLECHAR
00004718  00.R  HANDLECONST
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 376
, 
. 
0


0000462C  00.R  HANDLEEOL
00006E34  00.R  HANDLEJSRS
0000466E  00.R  HANDLELAB2
00004658  00.R  HANDLELABEL
00004856  00.R  HANDLELIB
00004638  00.R  HANDLELOCAL
00004644  00.R  HANDLEMOUSE
00006836  00.R  HANDLEP
0000475C  00.R  HANDLEPROC
00002EF4  00.R  HANDLER
000047A2  00.R  HANDLETOKEN
00006894  00.R  HANDLEVARA
0000570C  00.R  HELLO
00003A14  00.R  HEXASCII
0000699A  00.R  HIGHADD
0000BF52  00.R  IFCHAR
0000D10C  00.R  IFDONE
0000D048  00.R  IFLINEAT
000085DA  00.R  ILCONSTERR
00008324  00.R  ILLABSERR
0000823E  00.R  ILLCGETERR
00008256  00.R  ILLCONERR
00008192  00.R  ILLDIRERR
0000833A  00.R  ILLDISERR
0000837C  00.R  ILLEAERR
000082AE  00.R  ILLELSEERR
00008292  00.R  ILLEOLERR
000082CE  00.R  ILLGOTOERR
00008308  00.R  ILLIMMERR
00007D74  00.R  ILLLABERR
00008520  00.R  ILLOPERR
00008900  00.R  ILLPROCERR
00008936  00.R  ILLPROCPERR
00008354  00.R  ILLSIZEERR
000082F0  00.R  ILLTRAPERR
00008454  00.R  ILLTYPEERR
000088C8  00.R  ILLVARERR
00008200  00.R  ILLVGERR
0000C112  00.R  IMAKEEND
0000E7D4  00.R  INCDIR
00004F36  00.R  INERR
00004D3E  00.R  INFOCHK
00007911  00.R  INFONAME
0000BCEE  00.R  INLINE
000065F0  00.R  INSASM
0000C796  00.R  INSASM2
0000E836  00.R  INT
000050C6  00.R  INTALLOX
000050D6  00.R  INTCLEANAT
000050C8  00.R  INTDATA1
00008016  00.R  INTERR
00008034  00.R  INTERR2
00007FEE  00.R  INTERR3
00007FB0  00.R  INTERR4
00007FCE  00.R  INTERR5
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 377
, 
. 
0


00004F12  00.R  INTFIN
000050CC  00.R  INTJMPAT
000050D4  00.R  INTLEVEL
000050D0  00.R  INTLINE
00004FE0  00.R  INTLINEAT
00004F0E  00.R  INTSTART0
000050D2  00.R  INTSTRING
00003F3A  00.R  INTSUSED
00003D40  00.R  ISITCLOSE
00003D32  00.R  ISITOPEN
0000F946  00.R  JIMI0
0000F97E  00.R  JIMI1
0000F984  00.R  JIMI2
0000F99C  00.R  JIMI3
00007962  00.R  KILLOFFS
0000D16C  00.R  LABCNT
00008408  00.R  LABERR
0000EC22  00.R  LASTA6
0000E85A  00.R  LASTBIGLAB
00002B12  00.R  LASTCHAR
0000E9A2  00.R  LASTCONLOC
0000E9A6  00.R  LASTCONOP
000044A4  00.R  LASTCONTLINK
0000E9E4  00.R  LASTOFFSET
0000E346  00.R  LASTRESCON
0000E34A  00.R  LASTRESMAC
0000E34E  00.R  LASTRESTYPE
0000EC3A  00.R  LASTTOKEN
000060AE  00.R  LC
00002AEC  00.R  LEAA0A0
00002A90  00.R  LEAA5D3A2
000029C8  00.R  LEAAMP
000029CC  00.R  LEAAMP2
000029CE  00.R  LEAAMPL
00002A1A  00.R  LEAST
0000E854  00.R  LETSTART
0000E8FE  00.R  LIB
0000E8FA  00.R  LIBAT
00002A56  00.R  LIBBASE
00008611  00.R  LIBERRNUM
0000AB3C  00.R  LIBFUNCTION
0000BAF4  00.R  LIBISAT
00002A5A  00.R  LIBJSR
00002A54  00.R  LIBREG
0000229C  00.R  LIBSDIR
0000E9B4  00.R  LIBSLIST
0000E35A  00.R  LINEDONE
00002B20  00.R  LINEMODE
0000E9E8  00.R  LINENUMAT
00002B22  00.R  LINESLEFT
00002A32  00.R  LINKA4
0000D4C8  00.R  LINKPUT
0000E0EA  00.R  LISTADD
00009120  00.R  LISTARFIX
00009118  00.R  LISTCODE1
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 378
, 
. 
0


0000911C  00.R  LISTCODE2
0000E0EC  00.R  LISTSIZE
0000EC4A  00.R  LITDATA1
00002A66  00.R  LITGET
00002A6C  00.R  LITGET2
0000ADC0  00.R  LITSTRING
0000715C  00.R  LOADALIB
00007082  00.R  LOADBLITZLIBS
00003102  00.R  LOADDMOD
00006FCA  00.R  LOADLIBGROUP
00007048  00.R  LOADLIBS
00005914  00.R  LOADRES
0000FD90  00.R  LOADXTRA
0000D2D2  00.R  LOCALSLIST
0000E9C0  00.R  LOCCHAR
0000E8DA  00.R  LOCDATAST
0000E9BC  00.R  LOCLOC
00002B3A  00.R  LOCVAROFF
000096A6  00.R  LONGTOBYTE
000096C2  00.R  LONGTOFLOAT
000096B6  00.R  LONGTOQUICK
000096AE  00.R  LONGTOWORD
0000E780  00.R  LONGTYPE
00001D9C  00.R  LSLCHK
0000BF04  00.R  LSLDN
000028CE  00.R  LSLIMM
0000873C  00.R  MACBIGERR
00008716  00.R  MACENDERR
0000CB80  00.R  MACLINE
0000393C  00.R  MACMASK
000086F2  00.R  MACNESTERR
0000E934  00.R  MACNUM
0000CC98  00.R  MACPUTB
0000CC92  00.R  MACPUTW
0000EC26  00.R  MACROBUFF
0000EC2A  00.R  MACROBUFFF
00010E84  00.R  MACROLEN
00000000  00.R  MAINBIT
00009990  00.R  MAINEVAL
000099A6  00.R  MAINEVAL2
0000AE22  00.R  MAKEALAB
0000AE26  00.R  MAKEALAB2
0000532E  00.R  MAKEALLOX
00009052  00.R  MAKEAMUL
00005BC6  00.R  MAKEASMTAB
0000365C  00.R  MAKEBLITZLIBS
0000EDD2  00.R  MAKEBODY
0000BC9A  00.R  MAKEBTST
0000E84E  00.R  MAKEEXEC
00007C9E  00.R  MAKEEXECERR
0000B98A  00.R  MAKEFINITS
0000AFCA  00.R  MAKEFJSR
00005316  00.R  MAKEIALLOX
0000C05C  00.R  MAKEINAME
0000B73E  00.R  MAKEINITS
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 379
, 
. 
0


0000B450  00.R  MAKEINT
00003636  00.R  MAKELIBS
0000BAF8  00.R  MAKELIBSUB
0000AEA4  00.R  MAKELIT
00009052  00.R  MAKELMUL
000053DC  00.R  MAKELONG
0000BB08  00.R  MAKELSUB2
0000BB14  00.R  MAKELSUB3
0001018C  00.R  MAKEMAX
00006664  00.R  MAKEMODE
00008BEC  00.R  MAKENAME
00008BE8  00.R  MAKENAME2
00008BF2  00.R  MAKENAME3
00008BF4  00.R  MAKENAME4
0000BF18  00.R  MAKEREGOP
00010128  00.R  MAKERES
0000AD82  00.R  MAKESBASE
0000B916  00.R  MAKESIZE
0000B8FA  00.R  MAKESSIZE
00006E86  00.R  MAKETJSR
000044A8  00.R  MAKETRAP
0000B904  00.R  MAKEVSIZE
00002B02  00.R  MATHS
00002B58  00.R  MATHSNAME
0000E83A  00.R  MAXAT
0000BF06  00.R  MAXCHK
00010DCC  00.R  MAXDATA1
00010E28  00.R  MAXDATA2
0000BF10  00.R  MAXDO
00010276  00.R  MAXIT
0000C400  00.R  MAXJSR
00010D70  00.R  MAXLIB
00010D14  00.R  MAXPC
0000C2E0  00.R  MAXPREP1
0000C2E4  00.R  MAXPREP2
0000E83C  00.R  MAXSAT
0000E842  00.R  MAXSUSED
0000EDD0  00.R  MAXTYPES
000081E6  00.R  MBOVERERR
00002AFC  00.R  MEMAT
00002B00  00.R  MEMLEN
0000EBF8  00.R  MEMLIB
0000EBFC  00.R  MEMLIBSTAT
00002B02  00.R  MEMSTACKF
00002F0C  00.R  MENU
00003396  00.R  MENU0
0000330E  00.R  MENU1
000033AC  00.R  MENU10
0000FED2  00.R  MENU4
0000FF0E  00.R  MENU4C
000100E2  00.R  MENU4CANC
000055BA  00.R  MENU5
0000EF96  00.R  MENU6
00011A24  00.R  MENU7
000035FE  00.R  MENU8
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 380
, 
. 
0


00011EE8  00.R  MENU9
000021F4  00.R  MENUADDS
0000E9EA  00.R  MENURET
000020F0  00.R  MENUS
000030E0  00.R  MENU_D
0000853E  00.R  MISMATCHERR
00008420  00.R  MODEERR
0000E75C  00.R  MODETABLE
00002AD8  00.R  MOVEA0
00002AE6  00.R  MOVEA0A0
00002A6E  00.R  MOVEA2DN
000029EC  00.R  MOVEA3A7
00002A06  00.R  MOVEA3DN
00002AE2  00.R  MOVEA5A0
000029FA  00.R  MOVEA7DN
00002A00  00.R  MOVEA7DNF
00001C68  00.R  MOVECHK
00002A00  00.R  MOVED0A3
00002A70  00.R  MOVED3A5DN
00002A18  00.R  MOVEDNA3
00001C06  00.R  MOVEMCHK
000029DE  00.R  MOVENUMREP
00001C54  00.R  MOVEPCHK
00002A0C  00.R  MOVERTS
00002A02  00.R  MOVESTDN
000029EE  00.R  MOVESTST2
000029FA  00.R  MOVESTST2F
00009E94  00.R  MSEQ
00009E9E  00.R  MSGE
00009E9C  00.R  MSGT
00009E9A  00.R  MSLE
00009E98  00.R  MSLT
00009E96  00.R  MSNE
000028E0  00.R  MULARR
0000B6DE  00.R  MULD1
00002A48  00.R  MWAIT
00002A54  00.R  MWAITF
0000E32A  00.R  MYDATA
0000D80E  00.R  MYDOENDIF
0000D80A  00.R  MYDOENDIF2
0000E954  00.R  MYLINE
0000E958  00.R  MYLINEF
0000C3E2  00.R  MYMAXLIB
0000E950  00.R  MYOLINE
00007508  00.R  MYWRITE
0000EC68  00.R  NAMEBUFF
0000ECE8  00.R  NAMEBUFF2
0000A3DA  00.R  NEGATE
0000CCEC  00.R  NEGBR
000052E8  00.R  NEWALLOX
00010106  00.R  NEWRES
00002948  00.R  NEXTB
00002950  00.R  NEXTBF
00002960  00.R  NEXTF
0000296E  00.R  NEXTFF
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 381
, 
. 
0


00002940  00.R  NEXTFIXL
00002944  00.R  NEXTFIXL2
0000293A  00.R  NEXTFIXW
0000293C  00.R  NEXTFIXW2
0000E936  00.R  NEXTINC0
00002958  00.R  NEXTL
00002960  00.R  NEXTLF
0000393E  00.R  NEXTLINE
00002950  00.R  NEXTW
00002958  00.R  NEXTWF
00007E86  00.R  NOARRAYERR
000084BA  00.R  NOARRERR
0000A1A8  00.R  NOCANDO
00007D34  00.R  NOCENDERR
00008A8E  00.R  NOCIFERR
0000337A  00.R  NOCLI
0000879A  00.R  NOCOMERR
00008A68  00.R  NOCONERR
000085A2  00.R  NOCONSTERR
00008A44  00.R  NODIMERR
00008168  00.R  NODIRMEM
00003148  00.R  NODLOAD
00008842  00.R  NOENDERR
00001BF6  00.R  NOERROR
000089E0  00.R  NOFORERR
0000867E  00.R  NOIFERR
000087F2  00.R  NOINCERR
0000E850  00.R  NOINITS
00008652  00.R  NOLABERR
00008504  00.R  NOLETERR
000085F0  00.R  NOLIBERR
00007E9A  00.R  NOLISTERR
000083A2  00.R  NOLOCERR
0000876A  00.R  NOMACERR
0000E858  00.R  NOMEMLEFT
000022AE  00.R  NOMEMREQ
0000231E  00.R  NOMEMREQBO1
00002356  00.R  NOMEMREQBO2
0000238E  00.R  NOMEMREQBO3
000023C6  00.R  NOMEMREQBO4
000024B6  00.R  NOMEMREQGA1
000024E2  00.R  NOMEMREQGA2
0000250E  00.R  NOMEMREQGA3
000023FE  00.R  NOMEMREQIN1
00002436  00.R  NOMEMREQIN2
00002464  00.R  NOMEMREQIN3
00002492  00.R  NOMEMREQIN4
0000232E  00.R  NOMEMREQLA1
000023AA  00.R  NOMEMREQLA10
000023BA  00.R  NOMEMREQLA11
00002478  00.R  NOMEMREQLA12
000023D6  00.R  NOMEMREQLA13
000023E2  00.R  NOMEMREQLA14
000023F2  00.R  NOMEMREQLA15
000024A6  00.R  NOMEMREQLA16
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 382
, 
. 
0


0000233A  00.R  NOMEMREQLA2
0000234A  00.R  NOMEMREQLA3
00002412  00.R  NOMEMREQLA4
00002366  00.R  NOMEMREQLA5
00002372  00.R  NOMEMREQLA6
00002382  00.R  NOMEMREQLA7
0000244A  00.R  NOMEMREQLA8
0000239E  00.R  NOMEMREQLA9
0000EC5E  00.R  NONEW
00008568  00.R  NONEWERR
00008A14  00.R  NONEXTERR
000084D2  00.R  NOOFFERR
0000D9B4  00.R  NOP
000088E4  00.R  NOPENDERR
00008898  00.R  NOPROCERR
000028FC  00.R  NOPS3
000028FA  00.R  NOPS4
000028F2  00.R  NOPS8
00002902  00.R  NOPSF
0000D2CA  00.R  NORMRET
000081B2  00.R  NOSUPERR
0000A428  00.R  NOTIT
00008618  00.R  NOTOKERR
000080E2  00.R  NOTPARERR
00008224  00.R  NOTQERR
00008440  00.R  NOTYPEERR
0000E94E  00.R  NUMARG
0000C25E  00.R  NUMCOM
0000B5A0  00.R  NUMDOFLOAT
0000EC18  00.R  NUMINCS
00002B40  00.R  NUMLINES
0000E840  00.R  NUMMAXS
0000EC52  00.R  NUMOFFS
0000E9BA  00.R  NUMREPS
0000EC3E  00.R  NUMSTATIC
00002AB0  00.R  NUMTOA0
00002AB6  00.R  NUMTOA2
00000F12  00.R  N_001
00000F2E  00.R  N_002
00000F4A  00.R  N_003
00000F66  00.R  N_004
00000F82  00.R  N_005
00000F9E  00.R  N_006
00000FBA  00.R  N_007
00000FD6  00.R  N_008
00000FF2  00.R  N_009
0000100E  00.R  N_010
0000102A  00.R  N_011
00001046  00.R  N_012
00001062  00.R  N_013
0000107E  00.R  N_014
0000109A  00.R  N_015
000010B6  00.R  N_016
000010D2  00.R  N_017
000010EE  00.R  N_018
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 383
, 
. 
0


0000110A  00.R  N_019
00001126  00.R  N_020
00001142  00.R  N_021
0000115E  00.R  N_022
0000117A  00.R  N_023
00001196  00.R  N_024
000011B2  00.R  N_025
000011CE  00.R  N_026
000011EA  00.R  N_027
00001206  00.R  N_028
00001222  00.R  N_029
0000123E  00.R  N_030
0000125A  00.R  N_031
00001276  00.R  N_032
00001292  00.R  N_033
000012AE  00.R  N_034
000012CA  00.R  N_035
000012E6  00.R  N_036
00001302  00.R  N_037
0000131E  00.R  N_038
0000133A  00.R  N_039
00001356  00.R  N_040
00001372  00.R  N_041
0000138E  00.R  N_042
000013AA  00.R  N_043
000013C6  00.R  N_044
000013E2  00.R  N_045
000013FE  00.R  N_046
0000141A  00.R  N_047
00001436  00.R  N_048
00001452  00.R  N_049
0000146E  00.R  N_050
0000148A  00.R  N_051
000014A6  00.R  N_052
000014C2  00.R  N_053
000014DE  00.R  N_054
000014FA  00.R  N_055
00001516  00.R  N_056
00001532  00.R  N_057
0000154E  00.R  N_058
0000156A  00.R  N_059
0000158A  00.R  N_060
000015A6  00.R  N_061
000015C2  00.R  N_062
000015DE  00.R  N_063
000015FA  00.R  N_064
00001616  00.R  N_065
00001632  00.R  N_066
0000164E  00.R  N_067
0000166C  00.R  N_068
0000168A  00.R  N_069
000016A8  00.R  N_070
000016C6  00.R  N_071
000016E2  00.R  N_072
000016FE  00.R  N_073
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 384
, 
. 
0


0000171A  00.R  N_074
00001736  00.R  N_075
00001752  00.R  N_076
0000176E  00.R  N_077
0000178A  00.R  N_078
000017A4  00.R  N_079
000017C0  00.R  N_080
000017DC  00.R  N_081
000017FA  00.R  N_082
00001816  00.R  N_083
00001832  00.R  N_084
0000184E  00.R  N_085
0000186A  00.R  N_086
00001886  00.R  N_087
000018A2  00.R  N_088
000018BE  00.R  N_089
000018DA  00.R  N_090
000018F6  00.R  N_091
00001912  00.R  N_092
0000192E  00.R  N_093
0000194A  00.R  N_094
00001966  00.R  N_095
00001982  00.R  N_096
0000199E  00.R  N_097
000019BA  00.R  N_098
000019D6  00.R  N_099
000019F2  00.R  N_100
00001A0E  00.R  N_101
00001A2A  00.R  N_102
00001A46  00.R  N_103
00001A62  00.R  N_104
00001A7C  00.R  N_105
00001A96  00.R  N_106
00001AB2  00.R  N_107
00001ACE  00.R  N_108
00001AEA  00.R  N_109
00001B06  00.R  N_110
00001B22  00.R  N_111
00001B3E  00.R  N_112
00001B5A  00.R  N_113
00001B76  00.R  N_114
00001B92  00.R  N_115
00001BB0  00.R  N_116
00001BCC  00.R  N_117
00001BE8  00.R  N_118
000028CE  00.R  OBJECTS
00007792  00.R  OBJICON
00007911  00.R  OBJICONF
0000EC4E  00.R  OBJLEN
00008466  00.R  OFFERR
0000C034  00.R  OLDLIBAT
0000E9A0  00.R  OLDQFLAG
0000EBF2  00.R  OLDVCODELEN
0000D14A  00.R  ONGCODE
0000D16C  00.R  ONGCODEF
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 385
, 
. 
0


0000D12C  00.R  ONGOSUBCODE
0000D14A  00.R  ONGOSUBCODEF
0000D10E  00.R  ONGOTOCODE
0000D12C  00.R  ONGOTOCODEF
00000EF6  00.R  OPABCD
00000F12  00.R  OPADD
00000F4A  00.R  OPADDA
00000F2E  00.R  OPADDI
00000F66  00.R  OPADDQ
00000F82  00.R  OPADDX
00000F9E  00.R  OPAND
00000FBA  00.R  OPANDI
00000FD6  00.R  OPASL
00000FF2  00.R  OPASR
0000100E  00.R  OPBCC
00001196  00.R  OPBCHG
000011B2  00.R  OPBCLR
0000102A  00.R  OPBCS
00001046  00.R  OPBEQ
00001062  00.R  OPBGE
0000107E  00.R  OPBGT
0000109A  00.R  OPBHI
000010B6  00.R  OPBLE
000010D2  00.R  OPBLS
000010EE  00.R  OPBLT
0000110A  00.R  OPBMI
00001126  00.R  OPBNE
00001142  00.R  OPBPL
00001206  00.R  OPBRA
000011CE  00.R  OPBSET
00001222  00.R  OPBSR
000011EA  00.R  OPBTST
0000115E  00.R  OPBVC
0000117A  00.R  OPBVS
00007F60  00.R  OPCHARS
00007F66  00.R  OPCHARS2
0000123E  00.R  OPCHK
0000125A  00.R  OPCLR
00001276  00.R  OPCMP
000012AE  00.R  OPCMPA
00001292  00.R  OPCMPI
000012CA  00.R  OPCMPM
000012E6  00.R  OPDBCC
00001302  00.R  OPDBCS
0000131E  00.R  OPDBEQ
0000146E  00.R  OPDBF
0000133A  00.R  OPDBGE
00001356  00.R  OPDBGT
00001372  00.R  OPDBHI
0000138E  00.R  OPDBLE
000013AA  00.R  OPDBLS
000013C6  00.R  OPDBLT
000013E2  00.R  OPDBMI
000013FE  00.R  OPDBNE
0000141A  00.R  OPDBPL
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 386
, 
. 
0


000014A6  00.R  OPDBT
00001436  00.R  OPDBVC
00001452  00.R  OPDBVS
000014C2  00.R  OPDIVS
000014DE  00.R  OPDIVU
0000148A  00.R  OPDRA
00004030  00.R  OPENSTOPREQ
000014FA  00.R  OPEOR
00001516  00.R  OPEORI
0000E61A  00.R  OPEQ
0000E43A  00.R  OPERATORS
00001532  00.R  OPEXG
0000154E  00.R  OPEXT
0000E6BA  00.R  OPGE
0000E69A  00.R  OPGT
0000156A  00.R  OPILLEGAL
0000158A  00.R  OPJMP
000015A6  00.R  OPJSR
0000E67A  00.R  OPLE
000015C2  00.R  OPLEA
000015DE  00.R  OPLINK
000015FA  00.R  OPLSL
00001616  00.R  OPLSR
0000E65A  00.R  OPLT
00001632  00.R  OPMOVE
0000166C  00.R  OPMOVEA
000016A8  00.R  OPMOVEM
0000164E  00.R  OPMOVEP
0000168A  00.R  OPMOVEQ
000016C6  00.R  OPMULS
000016E2  00.R  OPMULU
000016FE  00.R  OPNBCD
0000E63A  00.R  OPNE
0000171A  00.R  OPNEG
00001736  00.R  OPNEGX
00001752  00.R  OPNOP
0000176E  00.R  OPNOT
0000178A  00.R  OPOR
000017A4  00.R  OPORI
000017C0  00.R  OPPEA
000017DC  00.R  OPRESET
000017FA  00.R  OPROL
00001816  00.R  OPROR
00001832  00.R  OPROXL
0000184E  00.R  OPROXR
0000186A  00.R  OPRTE
00001886  00.R  OPRTR
000018A2  00.R  OPRTS
000018BE  00.R  OPSBCD
000018DA  00.R  OPSCC
000018F6  00.R  OPSCS
00001912  00.R  OPSEQ
00001A7C  00.R  OPSF
0000192E  00.R  OPSGE
0000194A  00.R  OPSGT
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 387
, 
. 
0


00001966  00.R  OPSHI
00001982  00.R  OPSLE
0000199E  00.R  OPSLS
000019BA  00.R  OPSLT
000019D6  00.R  OPSMI
000019F2  00.R  OPSNE
00001A0E  00.R  OPSPL
00001A62  00.R  OPST
00001A96  00.R  OPSTOP
00001AB2  00.R  OPSUB
00001AEA  00.R  OPSUBA
00001ACE  00.R  OPSUBI
00001B06  00.R  OPSUBQ
00001B22  00.R  OPSUBX
00001A2A  00.R  OPSVC
00001A46  00.R  OPSVS
00001B3E  00.R  OPSWAP
00001B5A  00.R  OPTAS
00007F48  00.R  OPTERR
00001B76  00.R  OPTRAP
00001B92  00.R  OPTRAPV
00010314  00.R  OPTREQ
0000022A  00.R  OPTREQ2
0000029A  00.R  OPTREQ2BO1
00000492  00.R  OPTREQ2BO10
000004CA  00.R  OPTREQ2BO11
000002D2  00.R  OPTREQ2BO2
0000030A  00.R  OPTREQ2BO3
00000342  00.R  OPTREQ2BO4
0000037A  00.R  OPTREQ2BO5
000003B2  00.R  OPTREQ2BO6
000003EA  00.R  OPTREQ2BO7
00000422  00.R  OPTREQ2BO8
0000045A  00.R  OPTREQ2BO9
000006A2  00.R  OPTREQ2GA1
000006CE  00.R  OPTREQ2GA2
000006FA  00.R  OPTREQ2GA3
00000726  00.R  OPTREQ2GA4
00000752  00.R  OPTREQ2GA5
0000077E  00.R  OPTREQ2GA6
000007AA  00.R  OPTREQ2GA7
000007D6  00.R  OPTREQ2GA8
00000802  00.R  OPTREQ2GA9
00000502  00.R  OPTREQ2IN1
000005DA  00.R  OPTREQ2IN10
000005F2  00.R  OPTREQ2IN11
0000060A  00.R  OPTREQ2IN12
00000622  00.R  OPTREQ2IN13
0000063A  00.R  OPTREQ2IN14
00000652  00.R  OPTREQ2IN15
0000066A  00.R  OPTREQ2IN16
00000684  00.R  OPTREQ2IN17
0000052C  00.R  OPTREQ2IN2
0000054A  00.R  OPTREQ2IN3
00000572  00.R  OPTREQ2IN4
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 388
, 
. 
0


0000059A  00.R  OPTREQ2IN5
000005C2  00.R  OPTREQ2IN9
000002AA  00.R  OPTREQ2LA1
00000586  00.R  OPTREQ2LA10
000005AE  00.R  OPTREQ2LA11
0000031A  00.R  OPTREQ2LA15
00000326  00.R  OPTREQ2LA16
00000336  00.R  OPTREQ2LA17
000005D6  00.R  OPTREQ2LA18
00000352  00.R  OPTREQ2LA19
000002B6  00.R  OPTREQ2LA2
0000035E  00.R  OPTREQ2LA20
0000036E  00.R  OPTREQ2LA21
000005EE  00.R  OPTREQ2LA22
0000038A  00.R  OPTREQ2LA23
00000396  00.R  OPTREQ2LA24
000003A6  00.R  OPTREQ2LA25
00000606  00.R  OPTREQ2LA26
000003C2  00.R  OPTREQ2LA27
000003CE  00.R  OPTREQ2LA28
000003DE  00.R  OPTREQ2LA29
000002C6  00.R  OPTREQ2LA3
0000061E  00.R  OPTREQ2LA30
000003FA  00.R  OPTREQ2LA31
00000406  00.R  OPTREQ2LA32
00000416  00.R  OPTREQ2LA33
00000636  00.R  OPTREQ2LA34
00000432  00.R  OPTREQ2LA35
0000043E  00.R  OPTREQ2LA36
0000044E  00.R  OPTREQ2LA37
0000064E  00.R  OPTREQ2LA38
0000046A  00.R  OPTREQ2LA39
000002E2  00.R  OPTREQ2LA4
00000476  00.R  OPTREQ2LA40
00000486  00.R  OPTREQ2LA41
00000666  00.R  OPTREQ2LA42
000004A2  00.R  OPTREQ2LA43
000004AE  00.R  OPTREQ2LA44
000004BE  00.R  OPTREQ2LA45
0000067E  00.R  OPTREQ2LA46
000004DA  00.R  OPTREQ2LA47
000004E6  00.R  OPTREQ2LA48
000004F6  00.R  OPTREQ2LA49
000002EE  00.R  OPTREQ2LA5
00000698  00.R  OPTREQ2LA50
000002FE  00.R  OPTREQ2LA6
00000516  00.R  OPTREQ2LA7
00000540  00.R  OPTREQ2LA8
0000055E  00.R  OPTREQ2LA9
00010384  00.R  OPTREQBO1
0001057C  00.R  OPTREQBO10
000105B4  00.R  OPTREQBO11
000105EC  00.R  OPTREQBO12
00010624  00.R  OPTREQBO13
0001065C  00.R  OPTREQBO14
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 389
, 
. 
0


00010694  00.R  OPTREQBO15
000106CC  00.R  OPTREQBO16
00010704  00.R  OPTREQBO17
0001073C  00.R  OPTREQBO18
00010774  00.R  OPTREQBO19
000103BC  00.R  OPTREQBO2
000107AC  00.R  OPTREQBO20
000107E4  00.R  OPTREQBO21
0001081C  00.R  OPTREQBO22
000103F4  00.R  OPTREQBO3
0001042C  00.R  OPTREQBO4
00010464  00.R  OPTREQBO5
0001049C  00.R  OPTREQBO6
000104D4  00.R  OPTREQBO7
0001050C  00.R  OPTREQBO8
00010544  00.R  OPTREQBO9
000102DE  00.R  OPTREQDONE
00010CCC  00.R  OPTREQGA1
00010FD8  00.R  OPTREQGA10
00011004  00.R  OPTREQGA11
00011030  00.R  OPTREQGA12
0001105C  00.R  OPTREQGA13
00011088  00.R  OPTREQGA14
000110B4  00.R  OPTREQGA15
000110E0  00.R  OPTREQGA16
0001110C  00.R  OPTREQGA17
00011138  00.R  OPTREQGA18
00011164  00.R  OPTREQGA19
00010D28  00.R  OPTREQGA2
00011190  00.R  OPTREQGA20
000111BC  00.R  OPTREQGA21
000111E8  00.R  OPTREQGA22
00011214  00.R  OPTREQGA23
00011240  00.R  OPTREQGA24
0001126C  00.R  OPTREQGA25
00011298  00.R  OPTREQGA26
000112C4  00.R  OPTREQGA27
00011314  00.R  OPTREQGA28
00010D84  00.R  OPTREQGA3
00010DE0  00.R  OPTREQGA4
00010E3C  00.R  OPTREQGA5
00010E98  00.R  OPTREQGA6
00010EF4  00.R  OPTREQGA7
00010F50  00.R  OPTREQGA8
00010FAC  00.R  OPTREQGA9
00010854  00.R  OPTREQIN1
000109DA  00.R  OPTREQIN10
000109FE  00.R  OPTREQIN11
00010A20  00.R  OPTREQIN12
00010A44  00.R  OPTREQIN13
00010A66  00.R  OPTREQIN14
00010A88  00.R  OPTREQIN15
00010AAC  00.R  OPTREQIN16
00010AD0  00.R  OPTREQIN17
00010AEE  00.R  OPTREQIN18
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 390
, 
. 
0


00010B06  00.R  OPTREQIN19
00010888  00.R  OPTREQIN2
00010B1E  00.R  OPTREQIN20
00010B36  00.R  OPTREQIN21
00010B4E  00.R  OPTREQIN22
00010B66  00.R  OPTREQIN23
00010B7E  00.R  OPTREQIN24
00010B96  00.R  OPTREQIN25
00010BAE  00.R  OPTREQIN26
00010BC8  00.R  OPTREQIN27
00010BEA  00.R  OPTREQIN28
00010C12  00.R  OPTREQIN29
000108C0  00.R  OPTREQIN3
00010C30  00.R  OPTREQIN34
00010C54  00.R  OPTREQIN35
00010C78  00.R  OPTREQIN36
00010CA2  00.R  OPTREQIN37
000108EE  00.R  OPTREQIN4
0001090C  00.R  OPTREQIN5
0001092E  00.R  OPTREQIN6
00010952  00.R  OPTREQIN7
00010976  00.R  OPTREQIN8
0001099E  00.R  OPTREQIN9
00010394  00.R  OPTREQLA1
0001043C  00.R  OPTREQLA10
0001082C  00.R  OPTREQLA100
00010838  00.R  OPTREQLA101
00010848  00.R  OPTREQLA102
00010C26  00.R  OPTREQLA103
00010C44  00.R  OPTREQLA108
00010C68  00.R  OPTREQLA109
00010448  00.R  OPTREQLA11
00010C8C  00.R  OPTREQLA110
00010CB6  00.R  OPTREQLA111
00010458  00.R  OPTREQLA12
00010474  00.R  OPTREQLA13
00010480  00.R  OPTREQLA14
00010490  00.R  OPTREQLA15
000104AC  00.R  OPTREQLA16
000104B8  00.R  OPTREQLA17
000104C8  00.R  OPTREQLA18
000104E4  00.R  OPTREQLA19
000103A0  00.R  OPTREQLA2
000104F0  00.R  OPTREQLA20
00010500  00.R  OPTREQLA21
0001051C  00.R  OPTREQLA22
00010528  00.R  OPTREQLA23
00010538  00.R  OPTREQLA24
00010554  00.R  OPTREQLA25
00010560  00.R  OPTREQLA26
00010570  00.R  OPTREQLA27
0001058C  00.R  OPTREQLA28
00010598  00.R  OPTREQLA29
000103B0  00.R  OPTREQLA3
000105A8  00.R  OPTREQLA30
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 391
, 
. 
0


00010868  00.R  OPTREQLA31
0001089C  00.R  OPTREQLA32
000108D4  00.R  OPTREQLA33
00010902  00.R  OPTREQLA34
00010920  00.R  OPTREQLA35
00010942  00.R  OPTREQLA36
00010966  00.R  OPTREQLA37
0001098A  00.R  OPTREQLA38
000109B2  00.R  OPTREQLA39
000103CC  00.R  OPTREQLA4
000109EE  00.R  OPTREQLA40
00010A12  00.R  OPTREQLA41
00010A34  00.R  OPTREQLA42
00010A58  00.R  OPTREQLA43
00010A7A  00.R  OPTREQLA44
00010A9C  00.R  OPTREQLA45
00010AC0  00.R  OPTREQLA46
00010AE4  00.R  OPTREQLA47
00010D1C  00.R  OPTREQLA48
00010D78  00.R  OPTREQLA49
000103D8  00.R  OPTREQLA5
00010DD4  00.R  OPTREQLA50
00010E30  00.R  OPTREQLA51
00010E8C  00.R  OPTREQLA52
00010EE8  00.R  OPTREQLA53
00010F44  00.R  OPTREQLA54
00010FA0  00.R  OPTREQLA55
000105C4  00.R  OPTREQLA56
000105D0  00.R  OPTREQLA57
000105E0  00.R  OPTREQLA58
00010B02  00.R  OPTREQLA59
000103E8  00.R  OPTREQLA6
000105FC  00.R  OPTREQLA60
00010608  00.R  OPTREQLA61
00010618  00.R  OPTREQLA62
00010B1A  00.R  OPTREQLA63
00010634  00.R  OPTREQLA64
00010640  00.R  OPTREQLA65
00010650  00.R  OPTREQLA66
00010B32  00.R  OPTREQLA67
0001066C  00.R  OPTREQLA68
00010678  00.R  OPTREQLA69
00010404  00.R  OPTREQLA7
00010688  00.R  OPTREQLA70
00010B4A  00.R  OPTREQLA71
000106A4  00.R  OPTREQLA72
000106B0  00.R  OPTREQLA73
000106C0  00.R  OPTREQLA74
00010B62  00.R  OPTREQLA75
000106DC  00.R  OPTREQLA76
000106E8  00.R  OPTREQLA77
000106F8  00.R  OPTREQLA78
00010B7A  00.R  OPTREQLA79
00010410  00.R  OPTREQLA8
00010714  00.R  OPTREQLA80
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 392
, 
. 
0


00010720  00.R  OPTREQLA81
00010730  00.R  OPTREQLA82
00010B92  00.R  OPTREQLA83
0001074C  00.R  OPTREQLA84
00010758  00.R  OPTREQLA85
00010768  00.R  OPTREQLA86
00010BAA  00.R  OPTREQLA87
00010784  00.R  OPTREQLA88
00010790  00.R  OPTREQLA89
00010420  00.R  OPTREQLA9
000107A0  00.R  OPTREQLA90
00010BC2  00.R  OPTREQLA91
000107BC  00.R  OPTREQLA92
000107C8  00.R  OPTREQLA93
000107D8  00.R  OPTREQLA94
00010BDC  00.R  OPTREQLA95
000107F4  00.R  OPTREQLA96
00010800  00.R  OPTREQLA97
00010810  00.R  OPTREQLA98
00010BFE  00.R  OPTREQLA99
000102B0  00.R  OPTREQPREP
00010CF8  00.R  OPTREQSG1
00010D54  00.R  OPTREQSG2
00010DB0  00.R  OPTREQSG3
00010E0C  00.R  OPTREQSG4
00010E68  00.R  OPTREQSG5
00010EC4  00.R  OPTREQSG6
00010F20  00.R  OPTREQSG7
00010F7C  00.R  OPTREQSG8
00011340  00.R  OPTREQSGY
000112F0  00.R  OPTREQSGZ
0000E9EC  00.R  OPTRESOFF
000100A0  00.R  OPTSDONE
0000F936  00.R  OPTSPNTS
0000F9B6  00.R  OPTSPNTSF
0000F9B6  00.R  OPTSSAVE
00001BB0  00.R  OPTST
0000ED70  00.R  OPTSTUFF
00001BCC  00.R  OPUNLK
0000963A  00.R  OVERCHK
0000847C  00.R  OVERERR
0000348C  00.R  PANICBIT
00003490  00.R  PANICMASK
00003488  00.R  PANICTASK
00004136  00.R  PASSLOOP
0000413A  00.R  PASSNXT
0000EC10  00.R  PASSSTACK
0000E8F6  00.R  PC
0000E8F2  00.R  PCAT
0000CEF4  00.R  PCCHK
0000E0E8  00.R  PCODD
0000C892  00.R  PDT
0000996C  00.R  PEVAL
00009960  00.R  PEVALU
000067E8  00.R  PMODE
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 393
, 
. 
0


0000421E  00.R  POINTCHK
00002EF4  00.R  POINTERON
000084E8  00.R  POINTERR
0000955C  00.R  POKEBYTE
000095A2  00.R  POKECODE
000095BA  00.R  POKECODE2
0000745A  00.R  POKEDATA1
00007428  00.R  POKEDATA1B
00007452  00.R  POKEDATA1L
0000C1E6  00.R  POKEDATA2
0000C210  00.R  POKEDATA2B
0000C1DE  00.R  POKEDATA2L
00009504  00.R  POKEL
000094E4  00.R  POKELA5D
000094F6  00.R  POKELA5S
0000950A  00.R  POKELC
0000AD38  00.R  POKEMOVEM
0000950C  00.R  POKEWD
000094D2  00.R  POKEWDA5D
000094C0  00.R  POKEWDA5S
00004C5E  00.R  POPNEXT
00004C08  00.R  POPNEXT2
00004C1C  00.R  POPNEXT3
00009CF6  00.R  POPPREC
00004BBE  00.R  POPRETURN
00004C94  00.R  POPSELECT
00004C84  00.R  POPSELECT2
0000CCE8  00.R  POSBR
00009D10  00.R  PRECSP
00009D14  00.R  PRECSTACK
00009E94  00.R  PRECSTACKF
00002AC0  00.R  PREPARRAY
00002AC8  00.R  PREPARRAYF
0000B8EA  00.R  PREPD1
0000B8F4  00.R  PREPINT
000029E2  00.R  PREPLIBST
0000442A  00.R  PREPSTACK
00002B0E  00.R  PREVLOC
00002B0A  00.R  PREVTYPE
0000D4F8  00.R  PROCFIXER
0000EBF4  00.R  PROCJMPPC
0000D2D6  00.R  PROCLOCALS
0000EC0C  00.R  PROCMODE
00003494  00.R  PROCNAME
0000D2DA  00.R  PROCNUM
0000D2DC  00.R  PROCNUM2
000034B0  00.R  PROCSTART
00000160  00.R  PROGFILE
0000D2DE  00.R  PROLINEAT
00008078  00.R  PSERR
000067E4  00.R  PTYPE
00004AD0  00.R  PULLA1
00002A98  00.R  PULLA2
00002A9A  00.R  PULLA2ST
00002AA0  00.R  PULLA2STF
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 394
, 
. 
0


00002AA8  00.R  PULLA3
00002AAC  00.R  PULLA3F
00002A94  00.R  PUSHA2
00002AA0  00.R  PUSHA3
00002AA4  00.R  PUSHA32
00002AA8  00.R  PUSHA3F
00006A0C  00.R  PUSHADD
0000685C  00.R  PUSHAP
0000B5B8  00.R  PUSHAT
0000B5B6  00.R  PUSHCLEN
000029DC  00.R  PUSHD0L
000029DA  00.R  PUSHD0WD
000029EA  00.R  PUSHDN
0000B5D2  00.R  PUSHDO
0000B5B2  00.R  PUSHDOOFF
0000E9AC  00.R  PUSHFLAG
0000B5A6  00.R  PUSHFROM
000029C6  00.R  PUSHINDEX
00006A0E  00.R  PUSHLAST
00002A8E  00.R  PUSHLEN
0000B5AE  00.R  PUSHOFF
0000B5AA  00.R  PUSHPC
00009CE6  00.R  PUSHPREC
0000B63C  00.R  PUSHPUT
0000B5BC  00.R  PUSHSTART
00009AD0  00.R  PUSHUT
0000688E  00.R  PUTALP
00006854  00.R  PUTAP
00006886  00.R  PUTAPINCREG
000028E2  00.R  PUTARR
0000B8EE  00.R  PUTIDATA1
00002A08  00.R  PUTSTLEN
000038A6  00.R  QFREE
0000E846  00.R  QLAB
0000AED4  00.R  QMARK
000096FC  00.R  QTOF2
000096D0  00.R  QUICKTOB2
000096C8  00.R  QUICKTOBYTE
000096F8  00.R  QUICKTOFLOAT
000096F0  00.R  QUICKTOLONG
000096EC  00.R  QUICKTOWORD
0000E78E  00.R  QUICKTYPE
0000EC24  00.R  QUOTEFLAG
0000880A  00.R  READERR
0000C09E  00.R  READINC
0000C0C6  00.R  READPEND
00008270  00.R  REDIMERR
00007D50  00.R  REFERR
0000EF6C  00.R  REFLIST
00002B06  00.R  REGAT
00007C3A  00.R  REGET
00005C0E  00.R  REGMOVEMS
00002A62  00.R  REGTRANSA
00002A5E  00.R  REGTRANSD
00004D0E  00.R  REPLINEAT
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 395
, 
. 
0


00003E80  00.R  REQMESSAGE
0000E356  00.R  RESAT
00011364  00.R  RESBUFF
0000E354  00.R  RESCHG
0000E352  00.R  RESCNT
0000C51A  00.R  RESCODE
0000C522  00.R  RESCODE2
00005890  00.R  RESCONSTS
000080AE  00.R  RESERR
00006A1C  00.R  RESETLIBS
00007C64  00.R  RESLOC
000057BC  00.R  RESMACS
000054FA  00.R  RESNAME
0000574E  00.R  RESOFF
0000543A  00.R  RESPATH
00002A2A  00.R  RESSBASE
00002A2C  00.R  RESSBASE2
00002A30  00.R  RESSBASEF
0000541A  00.R  RESTEXT
0000583C  00.R  RESTYPES
000050DA  00.R  RET15ADD
000050DE  00.R  RET15CC
00002B42  00.R  RETURNCODE
0000393A  00.R  RITEEND
0000A36E  00.R  RITEFROMD0
0000A352  00.R  RITETOD0
00001D94  00.R  ROLCHK
000084A4  00.R  RONGTYPEERR
00001D8C  00.R  ROXLCHK
00005B3A  00.R  RUNERROPTS
000034B4  00.R  RUNTHEPROG
0000353A  00.R  RUNTHING
00007524  00.R  SAVEFILE
0000AFA2  00.R  SAVEM
0000AD40  00.R  SAVEREG
00002A24  00.R  SAVESBASE
00002A26  00.R  SAVESBASE2
00002A2A  00.R  SAVESBASEF
0000FE62  00.R  SAVEXTRA
0000EC48  00.R  SBASEGOT
0000E9AE  00.R  SBGOT
00009888  00.R  SBTOLONG
00002B48  00.R  SEGADD
00002B4C  00.R  SEGNAME
0000CD62  00.R  SELBNE
0000CD5A  00.R  SELCOMB
0000CD60  00.R  SELCOMBF
0000CD60  00.R  SELCOML
0000CD62  00.R  SELCOMLF
0000CD5E  00.R  SELCOMW
00007D9A  00.R  SELERRZ
0000CEFA  00.R  SELLINEAT
0000CD4E  00.R  SELPUSHB
0000CD54  00.R  SELPUSHBF
0000CD54  00.R  SELPUSHL
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 396
, 
. 
0


0000CD56  00.R  SELPUSHLF
0000CD56  00.R  SELPUSHS
0000CD5A  00.R  SELPUSHSF
0000CD52  00.R  SELPUSHW
00006914  00.R  SENDTYPE
00003F3C  00.R  SETCVARS
00004FE4  00.R  SETINT2
0000E326  00.R  SETLES
0000457A  00.R  SETSVARS
00008988  00.R  SHAREDERR
00009948  00.R  SHARREVAL
0000EE3E  00.R  SHOWLIST
0000EE50  00.R  SHOWLIST2
0000EE28  00.R  SHOWLIST3
0000A298  00.R  SHPOKE
000049EA  00.R  SIZESPEC
0000498A  00.R  SIZESPEC2
00007314  00.R  SKIPLIBREG
00002F00  00.R  SLEEPON
0000377A  00.R  SMALLPASS
000045AA  00.R  SMODE
00009904  00.R  SOMECODE
0000990A  00.R  SOMECODE2
00004AD2  00.R  SRCTYPE
0000896A  00.R  SRETERR
0000E342  00.R  STACKFUCK
0000BF14  00.R  STACKOP
0000BF12  00.R  STACKOPUSE
0000E9B8  00.R  STACKUSE
0000290C  00.R  STALIGN
00002916  00.R  STALIGNF
000051D2  00.R  STAMIGALIB
000029D2  00.R  STAMP
000029D4  00.R  STAMP2
0000D29C  00.R  STATERET
0000EC40  00.R  STATICDATA
0000E9C2  00.R  STBUFF
0000290A  00.R  STLENGET
000029D8  00.R  STOL
00003ED8  00.R  STOPBIT
00003EDE  00.R  STOPCODE
00003EDA  00.R  STOPIT
00003D4E  00.R  STOPREQ
00003DBE  00.R  STOPREQBO1
00003DF6  00.R  STOPREQBO2
00003E2E  00.R  STOPREQBO3
00003EAC  00.R  STOPREQGA1
00003E66  00.R  STOPREQIN1
00003E90  00.R  STOPREQIN2
00003DCE  00.R  STOPREQLA1
00003E5A  00.R  STOPREQLA10
00003EA4  00.R  STOPREQLA11
00003DDA  00.R  STOPREQLA2
00003DEA  00.R  STOPREQLA3
00003E06  00.R  STOPREQLA4
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 397
, 
. 
0


00003E12  00.R  STOPREQLA5
00003E22  00.R  STOPREQLA6
00003E7A  00.R  STOPREQLA7
00003E3E  00.R  STOPREQLA8
00003E4A  00.R  STOPREQLA9
00007C56  00.R  STORELOC
0000C262  00.R  STRCOM
00009764  00.R  STRINGTOLONG
0000E7B8  00.R  STRINGTYPE
00010EE0  00.R  STRINGWORK
00009ACE  00.R  STSTFIX
0000B0F6  00.R  STVAR
00002A74  00.R  STVARGET2
00002A84  00.R  STVARGET2F
00004A08  00.R  SUBS
00004ABE  00.R  SWAPB
00004AC4  00.R  SWAPBF
000029C4  00.R  SWAPD0
00001C02  00.R  SWAPEM
00004ACA  00.R  SWAPL
00004AD0  00.R  SWAPLF
00007BCE  00.R  SWAPQUOTE
00004AC4  00.R  SWAPW
00004ACA  00.R  SWAPWF
000083E2  00.R  SYNTAXERR
00007918  00.R  SYSDEBUG
00001BFE  00.R  SZERROR
00002EDC  00.R  T
00003484  00.R  TASKLOCK
0000EC60  00.R  TEMP1
0000EC64  00.R  TEMP2
0000EBFE  00.R  TEMPVMODE
0000EC00  00.R  TEMPVMODE2
0000DE98  00.R  THEBGT
0000DCF4  00.R  THEBRA
0000CCDC  00.R  THETST1
0000CCDE  00.R  THETST2
0000CCE0  00.R  THETST3
0000CCE2  00.R  THETST4
0000CCE4  00.R  THETST5
00002B24  00.R  THISITEM
0000EC04  00.R  THISPROC
00009ACC  00.R  THISSTUSE
00002B14  00.R  THISTYPE
0000E93E  00.R  TITLEADD
0000E93A  00.R  TITLEAT
0000874E  00.R  TMMACERR
00004EDC  00.R  TOAMODE
00008822  00.R  TOIFMACERR
000009FC  00.R  TOK10
00000A0E  00.R  TOK11
00000A2C  00.R  TOK12
00000A44  00.R  TOK13
00000A5A  00.R  TOK14
00000A72  00.R  TOK15
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 398
, 
. 
0


00000A88  00.R  TOK16
00000A98  00.R  TOK17
00000AA8  00.R  TOK18
00000AC0  00.R  TOK19
00000892  00.R  TOK2
00000AD8  00.R  TOK20
00000AE4  00.R  TOK21
00000AFE  00.R  TOK22
00000B3A  00.R  TOK23
00000B54  00.R  TOK24
00000B7C  00.R  TOK25
00000B92  00.R  TOK26
00000BB4  00.R  TOK27
00000BCC  00.R  TOK28
00000BF4  00.R  TOK29
000008DE  00.R  TOK3
00000C1C  00.R  TOK30
00000C2A  00.R  TOK31
00000C36  00.R  TOK32
00000C4E  00.R  TOK33
00000C66  00.R  TOK34
00000C80  00.R  TOK35
00000CA8  00.R  TOK36
00000CD0  00.R  TOK37
00000CF0  00.R  TOK38
00000D08  00.R  TOK39
00000902  00.R  TOK4
00000D14  00.R  TOK40
00000D34  00.R  TOK41
00000D56  00.R  TOK42
00000D6C  00.R  TOK43
00000D8A  00.R  TOK44
00000DA8  00.R  TOK45
00000DB4  00.R  TOK46
00000DC4  00.R  TOK47
00000DE8  00.R  TOK48
00000DFA  00.R  TOK49
0000093A  00.R  TOK5
00000E0C  00.R  TOK50
00000E2E  00.R  TOK51
00000E56  00.R  TOK52
00000E64  00.R  TOK53
00000E72  00.R  TOK54
00000E80  00.R  TOK55
00000E96  00.R  TOK56
00000EB2  00.R  TOK57
00000ECE  00.R  TOK58
00000EEA  00.R  TOK59
00000954  00.R  TOK6
0000096E  00.R  TOK7
0000097C  00.R  TOK8
000009B8  00.R  TOK9
00000EF6  00.R  TOKASM
00006CE2  00.R  TOKECODE
00007F26  00.R  TOKEERR
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 399
, 
. 
0


0000BAA8  00.R  TOKEJSR
0000BAA0  00.R  TOKEJSR2
0000087A  00.R  TOKENS
00008637  00.R  TOKERRNUM
0000C28A  00.R  TOKES
00006EEE  00.R  TOKESLIST
00001E5A  00.R  TOKTNUM
00001ED6  00.R  TOKTNUM10
00001EEE  00.R  TOKTNUM11
00001F0E  00.R  TOKTNUM12
00001F3A  00.R  TOKTNUM13
00001F50  00.R  TOKTNUM14
00001F5E  00.R  TOKTNUM15
00001F6A  00.R  TOKTNUM16
00001F80  00.R  TOKTNUM17
00001F92  00.R  TOKTNUM18
00001FAC  00.R  TOKTNUM19
00001E66  00.R  TOKTNUM2
00001FEC  00.R  TOKTNUM20
00001FF8  00.R  TOKTNUM21
00002008  00.R  TOKTNUM22
00002026  00.R  TOKTNUM23
0000203E  00.R  TOKTNUM24
00002056  00.R  TOKTNUM25
00002066  00.R  TOKTNUM26
00002074  00.R  TOKTNUM27
00002082  00.R  TOKTNUM28
00002090  00.R  TOKTNUM29
00001E74  00.R  TOKTNUM3
0000209E  00.R  TOKTNUM30
000020AC  00.R  TOKTNUM31
000020CC  00.R  TOKTNUM32
000020DE  00.R  TOKTNUM33
00001E82  00.R  TOKTNUM5
00001E92  00.R  TOKTNUM6
00001EB2  00.R  TOKTNUM7
00001EBE  00.R  TOKTNUM8
00001EC8  00.R  TOKTNUM9
00008492  00.R  TOOLONGERR
000088B0  00.R  TOOVARERR
0000BD06  00.R  TOREG
00008B92  00.R  TSTALPHA
0000AD04  00.R  TSTBRAS
0000085A  00.R  TSTDONE
0000084E  00.R  TSTEND
00005FC0  00.R  TSTEND2
0000082E  00.R  TSTHEAD
00008BCA  00.R  TSTLAB
000028F0  00.R  TSTLONG
0000BCEA  00.R  TSTMODE
00002AF2  00.R  TSTNAME
00008BB6  00.R  TSTNUM
00008BB6  00.R  TSTNUM2
00000842  00.R  TSTSIZE1
0000084A  00.R  TSTSIZE2
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 400
, 
. 
0


00000852  00.R  TSTSIZE3
000028EE  00.R  TSTWORD
0000EDCE  00.R  TYPEAT
000083F4  00.R  TYPEERR
00008666  00.R  TYPEIFERR
00002B08  00.R  TYPELEN
0000D650  00.R  TYPEMODE
0000F11C  00.R  TYPENAME
0000F134  00.R  TYPEREQ
0000F1A4  00.R  TYPEREQBO1
0000F1DC  00.R  TYPEREQBO2
0000F214  00.R  TYPEREQBO3
0000F24C  00.R  TYPEREQBO4
0000F284  00.R  TYPEREQBO5
0000F2BC  00.R  TYPEREQBO6
0000F2F4  00.R  TYPEREQBO7
0000F32C  00.R  TYPEREQBO8
0000F608  00.R  TYPEREQGA1
0000F802  00.R  TYPEREQGA10
0000F82E  00.R  TYPEREQGA11
0000F85A  00.R  TYPEREQGA12
0000F886  00.R  TYPEREQGA13
0000F8B2  00.R  TYPEREQGA14
0000F8DE  00.R  TYPEREQGA15
0000F90A  00.R  TYPEREQGA16
0000F65E  00.R  TYPEREQGA2
0000F6CE  00.R  TYPEREQGA3
0000F6FA  00.R  TYPEREQGA4
0000F726  00.R  TYPEREQGA5
0000F752  00.R  TYPEREQGA6
0000F77E  00.R  TYPEREQGA7
0000F7AA  00.R  TYPEREQGA8
0000F7D6  00.R  TYPEREQGA9
0000F364  00.R  TYPEREQIN1
0000F4E8  00.R  TYPEREQIN10
0000F518  00.R  TYPEREQIN11
0000F548  00.R  TYPEREQIN12
0000F578  00.R  TYPEREQIN13
0000F5A8  00.R  TYPEREQIN14
0000F5D8  00.R  TYPEREQIN15
0000F38E  00.R  TYPEREQIN2
0000F3A8  00.R  TYPEREQIN3
0000F3C8  00.R  TYPEREQIN4
0000F3F8  00.R  TYPEREQIN5
0000F428  00.R  TYPEREQIN6
0000F458  00.R  TYPEREQIN7
0000F488  00.R  TYPEREQIN8
0000F4B8  00.R  TYPEREQIN9
0000F1B4  00.R  TYPEREQLA1
0000F25C  00.R  TYPEREQLA10
0000F268  00.R  TYPEREQLA11
0000F278  00.R  TYPEREQLA12
0000F294  00.R  TYPEREQLA13
0000F2A0  00.R  TYPEREQLA14
0000F2B0  00.R  TYPEREQLA15
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 401
, 
. 
0


0000F378  00.R  TYPEREQLA16
0000F634  00.R  TYPEREQLA17
0000F2CC  00.R  TYPEREQLA18
0000F2D8  00.R  TYPEREQLA19
0000F1C0  00.R  TYPEREQLA2
0000F2E8  00.R  TYPEREQLA20
0000F6AE  00.R  TYPEREQLA21
0000F304  00.R  TYPEREQLA22
0000F310  00.R  TYPEREQLA23
0000F320  00.R  TYPEREQLA24
0000F3A2  00.R  TYPEREQLA25
0000F33C  00.R  TYPEREQLA26
0000F348  00.R  TYPEREQLA27
0000F358  00.R  TYPEREQLA28
0000F3BC  00.R  TYPEREQLA29
0000F1D0  00.R  TYPEREQLA3
0000F3DC  00.R  TYPEREQLA30
0000F40C  00.R  TYPEREQLA31
0000F43C  00.R  TYPEREQLA32
0000F46C  00.R  TYPEREQLA33
0000F49C  00.R  TYPEREQLA34
0000F4CC  00.R  TYPEREQLA35
0000F4FC  00.R  TYPEREQLA36
0000F52C  00.R  TYPEREQLA37
0000F55C  00.R  TYPEREQLA38
0000F58C  00.R  TYPEREQLA39
0000F1EC  00.R  TYPEREQLA4
0000F5BC  00.R  TYPEREQLA40
0000F5EC  00.R  TYPEREQLA41
0000F1F8  00.R  TYPEREQLA5
0000F208  00.R  TYPEREQLA6
0000F224  00.R  TYPEREQLA7
0000F230  00.R  TYPEREQLA8
0000F240  00.R  TYPEREQLA9
0000F68A  00.R  TYPEREQSG1
0000F648  00.R  TYPEREQVP1
0000EF38  00.R  TYPESHOW
0000A9D2  00.R  UCODEDIV
0000A9E4  00.R  UCODEDIV2
0000A9CE  00.R  UCODESKIP
0000A9DE  00.R  UCODESKIP2
000102F6  00.R  UIMAGELOC
0000221C  00.R  UNDOBUFFER
00004540  00.R  UNDODEBUG
00009902  00.R  UNKNOWN
00002A36  00.R  UNLINKA4
0000D036  00.R  UNLINKREP
00005C0C  00.R  UNMOVE
00007DB8  00.R  UNTERR1
00007DD2  00.R  UNTERR2
00007DEE  00.R  UNTERR3
00011584  00.R  UPARROW
000102EC  00.R  UPIMAGE
00000158  00.R  US
000028D0  00.R  USE
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 402
, 
. 
0


0000A9C4  00.R  USEDCODE
0000A9D4  00.R  USEDCODE2
0000A9D4  00.R  USEDCODEF
0000A9E6  00.R  USEDCODEF2
0000A9E8  00.R  USEDDONE
0000A9EA  00.R  USEDFIX
000097A4  00.R  USEDFROM
00004A20  00.R  USEDPATH
0000A9E6  00.R  USEDPREP
000028DA  00.R  USEF
00006A42  00.R  USELIB
00006EF2  00.R  USELIB2
00006A46  00.R  USELIB3
0000BABE  00.R  USERJSR
0000E9B2  00.R  USERP
0000E9B0  00.R  USERTYPE
00006A3E  00.R  USEVARS
0000E9EE  00.R  VARCODE
0000EAEE  00.R  VARCODE2
0000EBEE  00.R  VARCODELEN
0000EBF0  00.R  VARCODELEN2
0000AF66  00.R  VARCONT
00002A8A  00.R  VARGET2SKIP
0000AF4C  00.R  VARIABLE
0000B150  00.R  VARIABLE2
0000EC02  00.R  VARMODE
00002B38  00.R  VAROFF
00004006  00.R  VARSIZEAT
00007E08  00.R  VBOKERR1
0000E32A  00.R  VBR
00002716  00.R  VERREQ
00002786  00.R  VERREQBO1
000027BE  00.R  VERREQBO2
000028A2  00.R  VERREQGA1
000027F6  00.R  VERREQIN1
00002826  00.R  VERREQIN2
0000285C  00.R  VERREQIN3
00002880  00.R  VERREQIN4
00002796  00.R  VERREQLA1
00002894  00.R  VERREQLA10
000027A2  00.R  VERREQLA2
000027B2  00.R  VERREQLA3
0000280A  00.R  VERREQLA4
0000283A  00.R  VERREQLA5
00002870  00.R  VERREQLA6
000027CE  00.R  VERREQLA7
000027DA  00.R  VERREQLA8
000027EA  00.R  VERREQLA9
0000FD8E  00.R  VERS
0000015C  00.R  WBMESS
00000220  00.R  WB_ALLGO
00000148  00.R  WB_DOSNAME
0000010C  00.R  WB_EXIT
00000000  00.R  WB_HEADER
00000142  00.R  WB_INFONAME
HiSoft GenAm 680x0 Macro Assembler v3.01   Sep 18 2023  Page 403
, 
. 
0


00009636  00.R  WORDTOBYTE
0000969E  00.R  WORDTOFLOAT
000095CE  00.R  WORDTOLONG
000095E0  00.R  WORDTOQUICK
0000E772  00.R  WORDTYPE
00005724  00.R  WRITEITEM
00005710  00.R  WRITELIST
00005754  00.R  WRITEOFFS
0000324A  00.R  XNAME
0000318A  00.R  XPATH
0000316C  00.R  XTEXT
00009044  00.R  ZARRCHK
0000EC14  00.R  ZERO
0000EDB0  00.R  ZEROTYPES
00008A2A  00.R  ZPROCERR

